/* Generated by Cython 0.26 */

/* BEGIN: Cython Metadata
{
    "distutils": {
        "extra_compile_args": [
            "-O3"
        ],
        "name": "typped.lexer",
        "sources": [
            "./src/typped/lexer.py"
        ]
    },
    "module_name": "typped.lexer"
}
END: Cython Metadata */

#define PY_SSIZE_T_CLEAN
#include "Python.h"
#ifndef Py_PYTHON_H
    #error Python headers needed to compile C extensions, please install development version of Python.
#elif PY_VERSION_HEX < 0x02060000 || (0x03000000 <= PY_VERSION_HEX && PY_VERSION_HEX < 0x03020000)
    #error Cython requires Python 2.6+ or Python 3.2+.
#else
#define CYTHON_ABI "0_26"
#include <stddef.h>
#ifndef offsetof
  #define offsetof(type, member) ( (size_t) & ((type*)0) -> member )
#endif
#if !defined(WIN32) && !defined(MS_WINDOWS)
  #ifndef __stdcall
    #define __stdcall
  #endif
  #ifndef __cdecl
    #define __cdecl
  #endif
  #ifndef __fastcall
    #define __fastcall
  #endif
#endif
#ifndef DL_IMPORT
  #define DL_IMPORT(t) t
#endif
#ifndef DL_EXPORT
  #define DL_EXPORT(t) t
#endif
#define __PYX_COMMA ,
#ifndef HAVE_LONG_LONG
  #if PY_VERSION_HEX >= 0x03030000 || (PY_MAJOR_VERSION == 2 && PY_VERSION_HEX >= 0x02070000)
    #define HAVE_LONG_LONG
  #endif
#endif
#ifndef PY_LONG_LONG
  #define PY_LONG_LONG LONG_LONG
#endif
#ifndef Py_HUGE_VAL
  #define Py_HUGE_VAL HUGE_VAL
#endif
#ifdef PYPY_VERSION
  #define CYTHON_COMPILING_IN_PYPY 1
  #define CYTHON_COMPILING_IN_PYSTON 0
  #define CYTHON_COMPILING_IN_CPYTHON 0
  #undef CYTHON_USE_TYPE_SLOTS
  #define CYTHON_USE_TYPE_SLOTS 0
  #undef CYTHON_USE_ASYNC_SLOTS
  #define CYTHON_USE_ASYNC_SLOTS 0
  #undef CYTHON_USE_PYLIST_INTERNALS
  #define CYTHON_USE_PYLIST_INTERNALS 0
  #undef CYTHON_USE_UNICODE_INTERNALS
  #define CYTHON_USE_UNICODE_INTERNALS 0
  #undef CYTHON_USE_UNICODE_WRITER
  #define CYTHON_USE_UNICODE_WRITER 0
  #undef CYTHON_USE_PYLONG_INTERNALS
  #define CYTHON_USE_PYLONG_INTERNALS 0
  #undef CYTHON_AVOID_BORROWED_REFS
  #define CYTHON_AVOID_BORROWED_REFS 1
  #undef CYTHON_ASSUME_SAFE_MACROS
  #define CYTHON_ASSUME_SAFE_MACROS 0
  #undef CYTHON_UNPACK_METHODS
  #define CYTHON_UNPACK_METHODS 0
  #undef CYTHON_FAST_THREAD_STATE
  #define CYTHON_FAST_THREAD_STATE 0
  #undef CYTHON_FAST_PYCALL
  #define CYTHON_FAST_PYCALL 0
#elif defined(PYSTON_VERSION)
  #define CYTHON_COMPILING_IN_PYPY 0
  #define CYTHON_COMPILING_IN_PYSTON 1
  #define CYTHON_COMPILING_IN_CPYTHON 0
  #ifndef CYTHON_USE_TYPE_SLOTS
    #define CYTHON_USE_TYPE_SLOTS 1
  #endif
  #undef CYTHON_USE_ASYNC_SLOTS
  #define CYTHON_USE_ASYNC_SLOTS 0
  #undef CYTHON_USE_PYLIST_INTERNALS
  #define CYTHON_USE_PYLIST_INTERNALS 0
  #ifndef CYTHON_USE_UNICODE_INTERNALS
    #define CYTHON_USE_UNICODE_INTERNALS 1
  #endif
  #undef CYTHON_USE_UNICODE_WRITER
  #define CYTHON_USE_UNICODE_WRITER 0
  #undef CYTHON_USE_PYLONG_INTERNALS
  #define CYTHON_USE_PYLONG_INTERNALS 0
  #ifndef CYTHON_AVOID_BORROWED_REFS
    #define CYTHON_AVOID_BORROWED_REFS 0
  #endif
  #ifndef CYTHON_ASSUME_SAFE_MACROS
    #define CYTHON_ASSUME_SAFE_MACROS 1
  #endif
  #ifndef CYTHON_UNPACK_METHODS
    #define CYTHON_UNPACK_METHODS 1
  #endif
  #undef CYTHON_FAST_THREAD_STATE
  #define CYTHON_FAST_THREAD_STATE 0
  #undef CYTHON_FAST_PYCALL
  #define CYTHON_FAST_PYCALL 0
#else
  #define CYTHON_COMPILING_IN_PYPY 0
  #define CYTHON_COMPILING_IN_PYSTON 0
  #define CYTHON_COMPILING_IN_CPYTHON 1
  #ifndef CYTHON_USE_TYPE_SLOTS
    #define CYTHON_USE_TYPE_SLOTS 1
  #endif
  #if PY_MAJOR_VERSION < 3
    #undef CYTHON_USE_ASYNC_SLOTS
    #define CYTHON_USE_ASYNC_SLOTS 0
  #elif !defined(CYTHON_USE_ASYNC_SLOTS)
    #define CYTHON_USE_ASYNC_SLOTS 1
  #endif
  #if PY_VERSION_HEX < 0x02070000
    #undef CYTHON_USE_PYLONG_INTERNALS
    #define CYTHON_USE_PYLONG_INTERNALS 0
  #elif !defined(CYTHON_USE_PYLONG_INTERNALS)
    #define CYTHON_USE_PYLONG_INTERNALS 1
  #endif
  #ifndef CYTHON_USE_PYLIST_INTERNALS
    #define CYTHON_USE_PYLIST_INTERNALS 1
  #endif
  #ifndef CYTHON_USE_UNICODE_INTERNALS
    #define CYTHON_USE_UNICODE_INTERNALS 1
  #endif
  #if PY_VERSION_HEX < 0x030300F0
    #undef CYTHON_USE_UNICODE_WRITER
    #define CYTHON_USE_UNICODE_WRITER 0
  #elif !defined(CYTHON_USE_UNICODE_WRITER)
    #define CYTHON_USE_UNICODE_WRITER 1
  #endif
  #ifndef CYTHON_AVOID_BORROWED_REFS
    #define CYTHON_AVOID_BORROWED_REFS 0
  #endif
  #ifndef CYTHON_ASSUME_SAFE_MACROS
    #define CYTHON_ASSUME_SAFE_MACROS 1
  #endif
  #ifndef CYTHON_UNPACK_METHODS
    #define CYTHON_UNPACK_METHODS 1
  #endif
  #ifndef CYTHON_FAST_THREAD_STATE
    #define CYTHON_FAST_THREAD_STATE 1
  #endif
  #ifndef CYTHON_FAST_PYCALL
    #define CYTHON_FAST_PYCALL 1
  #endif
#endif
#if !defined(CYTHON_FAST_PYCCALL)
#define CYTHON_FAST_PYCCALL  (CYTHON_FAST_PYCALL && PY_VERSION_HEX >= 0x030600B1)
#endif
#if CYTHON_USE_PYLONG_INTERNALS
  #include "longintrepr.h"
  #undef SHIFT
  #undef BASE
  #undef MASK
#endif
#if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX < 0x02070600 && !defined(Py_OptimizeFlag)
  #define Py_OptimizeFlag 0
#endif
#define __PYX_BUILD_PY_SSIZE_T "n"
#define CYTHON_FORMAT_SSIZE_T "z"
#if PY_MAJOR_VERSION < 3
  #define __Pyx_BUILTIN_MODULE_NAME "__builtin__"
  #define __Pyx_PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\
          PyCode_New(a+k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)
  #define __Pyx_DefaultClassType PyClass_Type
#else
  #define __Pyx_BUILTIN_MODULE_NAME "builtins"
  #define __Pyx_PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\
          PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)
  #define __Pyx_DefaultClassType PyType_Type
#endif
#ifndef Py_TPFLAGS_CHECKTYPES
  #define Py_TPFLAGS_CHECKTYPES 0
#endif
#ifndef Py_TPFLAGS_HAVE_INDEX
  #define Py_TPFLAGS_HAVE_INDEX 0
#endif
#ifndef Py_TPFLAGS_HAVE_NEWBUFFER
  #define Py_TPFLAGS_HAVE_NEWBUFFER 0
#endif
#ifndef Py_TPFLAGS_HAVE_FINALIZE
  #define Py_TPFLAGS_HAVE_FINALIZE 0
#endif
#if PY_VERSION_HEX < 0x030700A0 || !defined(METH_FASTCALL)
  #ifndef METH_FASTCALL
     #define METH_FASTCALL 0x80
  #endif
  typedef PyObject *(*__Pyx_PyCFunctionFast) (PyObject *self, PyObject **args, Py_ssize_t nargs);
  typedef PyObject *(*__Pyx_PyCFunctionFastWithKeywords) (PyObject *self, PyObject **args,
                                                          Py_ssize_t nargs, PyObject *kwnames);
#else
  #define __Pyx_PyCFunctionFast _PyCFunctionFast
  #define __Pyx_PyCFunctionFastWithKeywords _PyCFunctionFastWithKeywords
#endif
#if CYTHON_FAST_PYCCALL
#define __Pyx_PyFastCFunction_Check(func)\
    ((PyCFunction_Check(func) && (METH_FASTCALL == (PyCFunction_GET_FLAGS(func) & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_KEYWORDS)))))
#else
#define __Pyx_PyFastCFunction_Check(func) 0
#endif
#if PY_VERSION_HEX > 0x03030000 && defined(PyUnicode_KIND)
  #define CYTHON_PEP393_ENABLED 1
  #define __Pyx_PyUnicode_READY(op)       (likely(PyUnicode_IS_READY(op)) ?\
                                              0 : _PyUnicode_Ready((PyObject *)(op)))
  #define __Pyx_PyUnicode_GET_LENGTH(u)   PyUnicode_GET_LENGTH(u)
  #define __Pyx_PyUnicode_READ_CHAR(u, i) PyUnicode_READ_CHAR(u, i)
  #define __Pyx_PyUnicode_MAX_CHAR_VALUE(u)   PyUnicode_MAX_CHAR_VALUE(u)
  #define __Pyx_PyUnicode_KIND(u)         PyUnicode_KIND(u)
  #define __Pyx_PyUnicode_DATA(u)         PyUnicode_DATA(u)
  #define __Pyx_PyUnicode_READ(k, d, i)   PyUnicode_READ(k, d, i)
  #define __Pyx_PyUnicode_WRITE(k, d, i, ch)  PyUnicode_WRITE(k, d, i, ch)
  #define __Pyx_PyUnicode_IS_TRUE(u)      (0 != (likely(PyUnicode_IS_READY(u)) ? PyUnicode_GET_LENGTH(u) : PyUnicode_GET_SIZE(u)))
#else
  #define CYTHON_PEP393_ENABLED 0
  #define PyUnicode_1BYTE_KIND  1
  #define PyUnicode_2BYTE_KIND  2
  #define PyUnicode_4BYTE_KIND  4
  #define __Pyx_PyUnicode_READY(op)       (0)
  #define __Pyx_PyUnicode_GET_LENGTH(u)   PyUnicode_GET_SIZE(u)
  #define __Pyx_PyUnicode_READ_CHAR(u, i) ((Py_UCS4)(PyUnicode_AS_UNICODE(u)[i]))
  #define __Pyx_PyUnicode_MAX_CHAR_VALUE(u)   ((sizeof(Py_UNICODE) == 2) ? 65535 : 1114111)
  #define __Pyx_PyUnicode_KIND(u)         (sizeof(Py_UNICODE))
  #define __Pyx_PyUnicode_DATA(u)         ((void*)PyUnicode_AS_UNICODE(u))
  #define __Pyx_PyUnicode_READ(k, d, i)   ((void)(k), (Py_UCS4)(((Py_UNICODE*)d)[i]))
  #define __Pyx_PyUnicode_WRITE(k, d, i, ch)  (((void)(k)), ((Py_UNICODE*)d)[i] = ch)
  #define __Pyx_PyUnicode_IS_TRUE(u)      (0 != PyUnicode_GET_SIZE(u))
#endif
#if CYTHON_COMPILING_IN_PYPY
  #define __Pyx_PyUnicode_Concat(a, b)      PyNumber_Add(a, b)
  #define __Pyx_PyUnicode_ConcatSafe(a, b)  PyNumber_Add(a, b)
#else
  #define __Pyx_PyUnicode_Concat(a, b)      PyUnicode_Concat(a, b)
  #define __Pyx_PyUnicode_ConcatSafe(a, b)  ((unlikely((a) == Py_None) || unlikely((b) == Py_None)) ?\
      PyNumber_Add(a, b) : __Pyx_PyUnicode_Concat(a, b))
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyUnicode_Contains)
  #define PyUnicode_Contains(u, s)  PySequence_Contains(u, s)
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyByteArray_Check)
  #define PyByteArray_Check(obj)  PyObject_TypeCheck(obj, &PyByteArray_Type)
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyObject_Format)
  #define PyObject_Format(obj, fmt)  PyObject_CallMethod(obj, "__format__", "O", fmt)
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyObject_Malloc)
  #define PyObject_Malloc(s)   PyMem_Malloc(s)
  #define PyObject_Free(p)     PyMem_Free(p)
  #define PyObject_Realloc(p)  PyMem_Realloc(p)
#endif
#if CYTHON_COMPILING_IN_PYSTON
  #define __Pyx_PyCode_HasFreeVars(co)  PyCode_HasFreeVars(co)
  #define __Pyx_PyFrame_SetLineNumber(frame, lineno) PyFrame_SetLineNumber(frame, lineno)
#else
  #define __Pyx_PyCode_HasFreeVars(co)  (PyCode_GetNumFree(co) > 0)
  #define __Pyx_PyFrame_SetLineNumber(frame, lineno)  (frame)->f_lineno = (lineno)
#endif
#define __Pyx_PyString_FormatSafe(a, b)   ((unlikely((a) == Py_None)) ? PyNumber_Remainder(a, b) : __Pyx_PyString_Format(a, b))
#define __Pyx_PyUnicode_FormatSafe(a, b)  ((unlikely((a) == Py_None)) ? PyNumber_Remainder(a, b) : PyUnicode_Format(a, b))
#if PY_MAJOR_VERSION >= 3
  #define __Pyx_PyString_Format(a, b)  PyUnicode_Format(a, b)
#else
  #define __Pyx_PyString_Format(a, b)  PyString_Format(a, b)
#endif
#if PY_MAJOR_VERSION < 3 && !defined(PyObject_ASCII)
  #define PyObject_ASCII(o)            PyObject_Repr(o)
#endif
#if PY_MAJOR_VERSION >= 3
  #define PyBaseString_Type            PyUnicode_Type
  #define PyStringObject               PyUnicodeObject
  #define PyString_Type                PyUnicode_Type
  #define PyString_Check               PyUnicode_Check
  #define PyString_CheckExact          PyUnicode_CheckExact
#endif
#if PY_MAJOR_VERSION >= 3
  #define __Pyx_PyBaseString_Check(obj) PyUnicode_Check(obj)
  #define __Pyx_PyBaseString_CheckExact(obj) PyUnicode_CheckExact(obj)
#else
  #define __Pyx_PyBaseString_Check(obj) (PyString_Check(obj) || PyUnicode_Check(obj))
  #define __Pyx_PyBaseString_CheckExact(obj) (PyString_CheckExact(obj) || PyUnicode_CheckExact(obj))
#endif
#ifndef PySet_CheckExact
  #define PySet_CheckExact(obj)        (Py_TYPE(obj) == &PySet_Type)
#endif
#define __Pyx_TypeCheck(obj, type) PyObject_TypeCheck(obj, (PyTypeObject *)type)
#define __Pyx_PyException_Check(obj) __Pyx_TypeCheck(obj, PyExc_Exception)
#if PY_MAJOR_VERSION >= 3
  #define PyIntObject                  PyLongObject
  #define PyInt_Type                   PyLong_Type
  #define PyInt_Check(op)              PyLong_Check(op)
  #define PyInt_CheckExact(op)         PyLong_CheckExact(op)
  #define PyInt_FromString             PyLong_FromString
  #define PyInt_FromUnicode            PyLong_FromUnicode
  #define PyInt_FromLong               PyLong_FromLong
  #define PyInt_FromSize_t             PyLong_FromSize_t
  #define PyInt_FromSsize_t            PyLong_FromSsize_t
  #define PyInt_AsLong                 PyLong_AsLong
  #define PyInt_AS_LONG                PyLong_AS_LONG
  #define PyInt_AsSsize_t              PyLong_AsSsize_t
  #define PyInt_AsUnsignedLongMask     PyLong_AsUnsignedLongMask
  #define PyInt_AsUnsignedLongLongMask PyLong_AsUnsignedLongLongMask
  #define PyNumber_Int                 PyNumber_Long
#endif
#if PY_MAJOR_VERSION >= 3
  #define PyBoolObject                 PyLongObject
#endif
#if PY_MAJOR_VERSION >= 3 && CYTHON_COMPILING_IN_PYPY
  #ifndef PyUnicode_InternFromString
    #define PyUnicode_InternFromString(s) PyUnicode_FromString(s)
  #endif
#endif
#if PY_VERSION_HEX < 0x030200A4
  typedef long Py_hash_t;
  #define __Pyx_PyInt_FromHash_t PyInt_FromLong
  #define __Pyx_PyInt_AsHash_t   PyInt_AsLong
#else
  #define __Pyx_PyInt_FromHash_t PyInt_FromSsize_t
  #define __Pyx_PyInt_AsHash_t   PyInt_AsSsize_t
#endif
#if PY_MAJOR_VERSION >= 3
  #define __Pyx_PyMethod_New(func, self, klass) ((self) ? PyMethod_New(func, self) : PyInstanceMethod_New(func))
#else
  #define __Pyx_PyMethod_New(func, self, klass) PyMethod_New(func, self, klass)
#endif
#ifndef __has_attribute
  #define __has_attribute(x) 0
#endif
#ifndef __has_cpp_attribute
  #define __has_cpp_attribute(x) 0
#endif
#if CYTHON_USE_ASYNC_SLOTS
  #if PY_VERSION_HEX >= 0x030500B1
    #define __Pyx_PyAsyncMethodsStruct PyAsyncMethods
    #define __Pyx_PyType_AsAsync(obj) (Py_TYPE(obj)->tp_as_async)
  #else
    typedef struct {
        unaryfunc am_await;
        unaryfunc am_aiter;
        unaryfunc am_anext;
    } __Pyx_PyAsyncMethodsStruct;
    #define __Pyx_PyType_AsAsync(obj) ((__Pyx_PyAsyncMethodsStruct*) (Py_TYPE(obj)->tp_reserved))
  #endif
#else
  #define __Pyx_PyType_AsAsync(obj) NULL
#endif
#ifndef CYTHON_RESTRICT
  #if defined(__GNUC__)
    #define CYTHON_RESTRICT __restrict__
  #elif defined(_MSC_VER) && _MSC_VER >= 1400
    #define CYTHON_RESTRICT __restrict
  #elif defined (__STDC_VERSION__) && __STDC_VERSION__ >= 199901L
    #define CYTHON_RESTRICT restrict
  #else
    #define CYTHON_RESTRICT
  #endif
#endif
#ifndef CYTHON_UNUSED
# if defined(__GNUC__)
#   if !(defined(__cplusplus)) || (__GNUC__ > 3 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 4))
#     define CYTHON_UNUSED __attribute__ ((__unused__))
#   else
#     define CYTHON_UNUSED
#   endif
# elif defined(__ICC) || (defined(__INTEL_COMPILER) && !defined(_MSC_VER))
#   define CYTHON_UNUSED __attribute__ ((__unused__))
# else
#   define CYTHON_UNUSED
# endif
#endif
#ifndef CYTHON_MAYBE_UNUSED_VAR
#  if defined(__cplusplus)
     template<class T> void CYTHON_MAYBE_UNUSED_VAR( const T& ) { }
#  else
#    define CYTHON_MAYBE_UNUSED_VAR(x) (void)(x)
#  endif
#endif
#ifndef CYTHON_NCP_UNUSED
# if CYTHON_COMPILING_IN_CPYTHON
#  define CYTHON_NCP_UNUSED
# else
#  define CYTHON_NCP_UNUSED CYTHON_UNUSED
# endif
#endif
#define __Pyx_void_to_None(void_result) ((void)(void_result), Py_INCREF(Py_None), Py_None)
#ifdef _MSC_VER
    #ifndef _MSC_STDINT_H_
        #if _MSC_VER < 1300
           typedef unsigned char     uint8_t;
           typedef unsigned int      uint32_t;
        #else
           typedef unsigned __int8   uint8_t;
           typedef unsigned __int32  uint32_t;
        #endif
    #endif
#else
   #include <stdint.h>
#endif
#ifndef CYTHON_FALLTHROUGH
  #ifdef __cplusplus
    #if __has_cpp_attribute(fallthrough)
      #define CYTHON_FALLTHROUGH [[fallthrough]]
    #elif __has_cpp_attribute(clang::fallthrough)
      #define CYTHON_FALLTHROUGH [[clang::fallthrough]]
    #endif
  #endif
  #ifndef CYTHON_FALLTHROUGH
    #if __has_attribute(fallthrough) || (defined(__GNUC__) && defined(__attribute__))
      #define CYTHON_FALLTHROUGH __attribute__((fallthrough))
    #else
      #define CYTHON_FALLTHROUGH
    #endif
  #endif
#endif

#ifndef CYTHON_INLINE
  #if defined(__clang__)
    #define CYTHON_INLINE __inline__ __attribute__ ((__unused__))
  #elif defined(__GNUC__)
    #define CYTHON_INLINE __inline__
  #elif defined(_MSC_VER)
    #define CYTHON_INLINE __inline
  #elif defined (__STDC_VERSION__) && __STDC_VERSION__ >= 199901L
    #define CYTHON_INLINE inline
  #else
    #define CYTHON_INLINE
  #endif
#endif

#if defined(WIN32) || defined(MS_WINDOWS)
  #define _USE_MATH_DEFINES
#endif
#include <math.h>
#ifdef NAN
#define __PYX_NAN() ((float) NAN)
#else
static CYTHON_INLINE float __PYX_NAN() {
  float value;
  memset(&value, 0xFF, sizeof(value));
  return value;
}
#endif
#if defined(__CYGWIN__) && defined(_LDBL_EQ_DBL)
#define __Pyx_truncl trunc
#else
#define __Pyx_truncl truncl
#endif


#define __PYX_ERR(f_index, lineno, Ln_error) \
{ \
  __pyx_filename = __pyx_f[f_index]; __pyx_lineno = lineno; __pyx_clineno = __LINE__; goto Ln_error; \
}

#if PY_MAJOR_VERSION >= 3
  #define __Pyx_PyNumber_Divide(x,y)         PyNumber_TrueDivide(x,y)
  #define __Pyx_PyNumber_InPlaceDivide(x,y)  PyNumber_InPlaceTrueDivide(x,y)
#else
  #define __Pyx_PyNumber_Divide(x,y)         PyNumber_TrueDivide(x,y)
  #define __Pyx_PyNumber_InPlaceDivide(x,y)  PyNumber_InPlaceTrueDivide(x,y)
#endif

#ifndef __PYX_EXTERN_C
  #ifdef __cplusplus
    #define __PYX_EXTERN_C extern "C"
  #else
    #define __PYX_EXTERN_C extern
  #endif
#endif

#define __PYX_HAVE__typped__lexer
#define __PYX_HAVE_API__typped__lexer
#ifdef _OPENMP
#include <omp.h>
#endif /* _OPENMP */

#ifdef PYREX_WITHOUT_ASSERTIONS
#define CYTHON_WITHOUT_ASSERTIONS
#endif

typedef struct {PyObject **p; const char *s; const Py_ssize_t n; const char* encoding;
                const char is_unicode; const char is_str; const char intern; } __Pyx_StringTabEntry;

#define __PYX_DEFAULT_STRING_ENCODING_IS_ASCII 0
#define __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT 0
#define __PYX_DEFAULT_STRING_ENCODING ""
#define __Pyx_PyObject_FromString __Pyx_PyBytes_FromString
#define __Pyx_PyObject_FromStringAndSize __Pyx_PyBytes_FromStringAndSize
#define __Pyx_uchar_cast(c) ((unsigned char)c)
#define __Pyx_long_cast(x) ((long)x)
#define __Pyx_fits_Py_ssize_t(v, type, is_signed)  (\
    (sizeof(type) < sizeof(Py_ssize_t))  ||\
    (sizeof(type) > sizeof(Py_ssize_t) &&\
          likely(v < (type)PY_SSIZE_T_MAX ||\
                 v == (type)PY_SSIZE_T_MAX)  &&\
          (!is_signed || likely(v > (type)PY_SSIZE_T_MIN ||\
                                v == (type)PY_SSIZE_T_MIN)))  ||\
    (sizeof(type) == sizeof(Py_ssize_t) &&\
          (is_signed || likely(v < (type)PY_SSIZE_T_MAX ||\
                               v == (type)PY_SSIZE_T_MAX)))  )
#if defined (__cplusplus) && __cplusplus >= 201103L
    #include <cstdlib>
    #define __Pyx_sst_abs(value) std::abs(value)
#elif SIZEOF_INT >= SIZEOF_SIZE_T
    #define __Pyx_sst_abs(value) abs(value)
#elif SIZEOF_LONG >= SIZEOF_SIZE_T
    #define __Pyx_sst_abs(value) labs(value)
#elif defined (_MSC_VER) && defined (_M_X64)
    #define __Pyx_sst_abs(value) _abs64(value)
#elif defined (__STDC_VERSION__) && __STDC_VERSION__ >= 199901L
    #define __Pyx_sst_abs(value) llabs(value)
#elif defined (__GNUC__)
    #define __Pyx_sst_abs(value) __builtin_llabs(value)
#else
    #define __Pyx_sst_abs(value) ((value<0) ? -value : value)
#endif
static CYTHON_INLINE const char* __Pyx_PyObject_AsString(PyObject*);
static CYTHON_INLINE const char* __Pyx_PyObject_AsStringAndSize(PyObject*, Py_ssize_t* length);
#define __Pyx_PyByteArray_FromString(s) PyByteArray_FromStringAndSize((const char*)s, strlen((const char*)s))
#define __Pyx_PyByteArray_FromStringAndSize(s, l) PyByteArray_FromStringAndSize((const char*)s, l)
#define __Pyx_PyBytes_FromString        PyBytes_FromString
#define __Pyx_PyBytes_FromStringAndSize PyBytes_FromStringAndSize
static CYTHON_INLINE PyObject* __Pyx_PyUnicode_FromString(const char*);
#if PY_MAJOR_VERSION < 3
    #define __Pyx_PyStr_FromString        __Pyx_PyBytes_FromString
    #define __Pyx_PyStr_FromStringAndSize __Pyx_PyBytes_FromStringAndSize
#else
    #define __Pyx_PyStr_FromString        __Pyx_PyUnicode_FromString
    #define __Pyx_PyStr_FromStringAndSize __Pyx_PyUnicode_FromStringAndSize
#endif
#define __Pyx_PyObject_AsWritableString(s)    ((char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsWritableSString(s)    ((signed char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsWritableUString(s)    ((unsigned char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsSString(s)    ((const signed char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsUString(s)    ((const unsigned char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_FromCString(s)  __Pyx_PyObject_FromString((const char*)s)
#define __Pyx_PyBytes_FromCString(s)   __Pyx_PyBytes_FromString((const char*)s)
#define __Pyx_PyByteArray_FromCString(s)   __Pyx_PyByteArray_FromString((const char*)s)
#define __Pyx_PyStr_FromCString(s)     __Pyx_PyStr_FromString((const char*)s)
#define __Pyx_PyUnicode_FromCString(s) __Pyx_PyUnicode_FromString((const char*)s)
#if PY_MAJOR_VERSION < 3
static CYTHON_INLINE size_t __Pyx_Py_UNICODE_strlen(const Py_UNICODE *u)
{
    const Py_UNICODE *u_end = u;
    while (*u_end++) ;
    return (size_t)(u_end - u - 1);
}
#else
#define __Pyx_Py_UNICODE_strlen Py_UNICODE_strlen
#endif
#define __Pyx_PyUnicode_FromUnicode(u)       PyUnicode_FromUnicode(u, __Pyx_Py_UNICODE_strlen(u))
#define __Pyx_PyUnicode_FromUnicodeAndLength PyUnicode_FromUnicode
#define __Pyx_PyUnicode_AsUnicode            PyUnicode_AsUnicode
#define __Pyx_NewRef(obj) (Py_INCREF(obj), obj)
#define __Pyx_Owned_Py_None(b) __Pyx_NewRef(Py_None)
#define __Pyx_PyBool_FromLong(b) ((b) ? __Pyx_NewRef(Py_True) : __Pyx_NewRef(Py_False))
static CYTHON_INLINE int __Pyx_PyObject_IsTrue(PyObject*);
static CYTHON_INLINE PyObject* __Pyx_PyNumber_IntOrLong(PyObject* x);
static CYTHON_INLINE Py_ssize_t __Pyx_PyIndex_AsSsize_t(PyObject*);
static CYTHON_INLINE PyObject * __Pyx_PyInt_FromSize_t(size_t);
#if CYTHON_ASSUME_SAFE_MACROS
#define __pyx_PyFloat_AsDouble(x) (PyFloat_CheckExact(x) ? PyFloat_AS_DOUBLE(x) : PyFloat_AsDouble(x))
#else
#define __pyx_PyFloat_AsDouble(x) PyFloat_AsDouble(x)
#endif
#define __pyx_PyFloat_AsFloat(x) ((float) __pyx_PyFloat_AsDouble(x))
#if PY_MAJOR_VERSION >= 3
#define __Pyx_PyNumber_Int(x) (PyLong_CheckExact(x) ? __Pyx_NewRef(x) : PyNumber_Long(x))
#else
#define __Pyx_PyNumber_Int(x) (PyInt_CheckExact(x) ? __Pyx_NewRef(x) : PyNumber_Int(x))
#endif
#define __Pyx_PyNumber_Float(x) (PyFloat_CheckExact(x) ? __Pyx_NewRef(x) : PyNumber_Float(x))
#if PY_MAJOR_VERSION < 3 && __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
static int __Pyx_sys_getdefaultencoding_not_ascii;
static int __Pyx_init_sys_getdefaultencoding_params(void) {
    PyObject* sys;
    PyObject* default_encoding = NULL;
    PyObject* ascii_chars_u = NULL;
    PyObject* ascii_chars_b = NULL;
    const char* default_encoding_c;
    sys = PyImport_ImportModule("sys");
    if (!sys) goto bad;
    default_encoding = PyObject_CallMethod(sys, (char*) "getdefaultencoding", NULL);
    Py_DECREF(sys);
    if (!default_encoding) goto bad;
    default_encoding_c = PyBytes_AsString(default_encoding);
    if (!default_encoding_c) goto bad;
    if (strcmp(default_encoding_c, "ascii") == 0) {
        __Pyx_sys_getdefaultencoding_not_ascii = 0;
    } else {
        char ascii_chars[128];
        int c;
        for (c = 0; c < 128; c++) {
            ascii_chars[c] = c;
        }
        __Pyx_sys_getdefaultencoding_not_ascii = 1;
        ascii_chars_u = PyUnicode_DecodeASCII(ascii_chars, 128, NULL);
        if (!ascii_chars_u) goto bad;
        ascii_chars_b = PyUnicode_AsEncodedString(ascii_chars_u, default_encoding_c, NULL);
        if (!ascii_chars_b || !PyBytes_Check(ascii_chars_b) || memcmp(ascii_chars, PyBytes_AS_STRING(ascii_chars_b), 128) != 0) {
            PyErr_Format(
                PyExc_ValueError,
                "This module compiled with c_string_encoding=ascii, but default encoding '%.200s' is not a superset of ascii.",
                default_encoding_c);
            goto bad;
        }
        Py_DECREF(ascii_chars_u);
        Py_DECREF(ascii_chars_b);
    }
    Py_DECREF(default_encoding);
    return 0;
bad:
    Py_XDECREF(default_encoding);
    Py_XDECREF(ascii_chars_u);
    Py_XDECREF(ascii_chars_b);
    return -1;
}
#endif
#if __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT && PY_MAJOR_VERSION >= 3
#define __Pyx_PyUnicode_FromStringAndSize(c_str, size) PyUnicode_DecodeUTF8(c_str, size, NULL)
#else
#define __Pyx_PyUnicode_FromStringAndSize(c_str, size) PyUnicode_Decode(c_str, size, __PYX_DEFAULT_STRING_ENCODING, NULL)
#if __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT
static char* __PYX_DEFAULT_STRING_ENCODING;
static int __Pyx_init_sys_getdefaultencoding_params(void) {
    PyObject* sys;
    PyObject* default_encoding = NULL;
    char* default_encoding_c;
    sys = PyImport_ImportModule("sys");
    if (!sys) goto bad;
    default_encoding = PyObject_CallMethod(sys, (char*) (const char*) "getdefaultencoding", NULL);
    Py_DECREF(sys);
    if (!default_encoding) goto bad;
    default_encoding_c = PyBytes_AsString(default_encoding);
    if (!default_encoding_c) goto bad;
    __PYX_DEFAULT_STRING_ENCODING = (char*) malloc(strlen(default_encoding_c));
    if (!__PYX_DEFAULT_STRING_ENCODING) goto bad;
    strcpy(__PYX_DEFAULT_STRING_ENCODING, default_encoding_c);
    Py_DECREF(default_encoding);
    return 0;
bad:
    Py_XDECREF(default_encoding);
    return -1;
}
#endif
#endif


/* Test for GCC > 2.95 */
#if defined(__GNUC__)     && (__GNUC__ > 2 || (__GNUC__ == 2 && (__GNUC_MINOR__ > 95)))
  #define likely(x)   __builtin_expect(!!(x), 1)
  #define unlikely(x) __builtin_expect(!!(x), 0)
#else /* !__GNUC__ or GCC < 2.95 */
  #define likely(x)   (x)
  #define unlikely(x) (x)
#endif /* __GNUC__ */
static CYTHON_INLINE void __Pyx_pretend_to_initialize(void* ptr) { (void)ptr; }

static PyObject *__pyx_m;
static PyObject *__pyx_d;
static PyObject *__pyx_b;
static PyObject *__pyx_cython_runtime;
static PyObject *__pyx_empty_tuple;
static PyObject *__pyx_empty_bytes;
static PyObject *__pyx_empty_unicode;
static int __pyx_lineno;
static int __pyx_clineno = 0;
static const char * __pyx_cfilenm= __FILE__;
static const char *__pyx_filename;


static const char *__pyx_f[] = {
  "src/typped/lexer.py",
  "src/typped/lexer.pxd",
  "stringsource",
  "src/typped/matcher.pxd",
};

/*--- Type declarations ---*/
struct __pyx_obj_6typped_7matcher_Matcher;
struct __pyx_obj_6typped_5lexer_TokenBuffer;
struct __pyx_obj_6typped_5lexer_TokenTable;
struct __pyx_obj_6typped_5lexer_GenTokenState;
struct __pyx_obj_6typped_5lexer_Lexer;
struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr;
struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr;
struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory;
struct __pyx_opt_args_6typped_7matcher_7Matcher_insert_pattern;
struct __pyx_opt_args_6typped_7matcher_7Matcher_get_next_token_label_and_value;

/* "matcher.pxd":25
 *     #
 * 
 *     cpdef insert_pattern(self, str token_label, regex_string, on_ties=*,             # <<<<<<<<<<<<<<
 *                          long ignore=*, matcher_options=*)
 * 
 */
struct __pyx_opt_args_6typped_7matcher_7Matcher_insert_pattern {
  int __pyx_n;
  PyObject *on_ties;
  long ignore;
  PyObject *matcher_options;
};

/* "matcher.pxd":35
 *     cdef list best_matches, best_matches_trie, best_matches_fnl, winning_tokens
 *     cdef tuple best_matches_len, best_matches_trie_len, best_matches_fnl_len, max_len
 *     cpdef get_next_token_label_and_value(self, program, slice_indices,             # <<<<<<<<<<<<<<
 *                                          error_msg_text_snippet_size=*)
 * 
 */
struct __pyx_opt_args_6typped_7matcher_7Matcher_get_next_token_label_and_value {
  int __pyx_n;
  PyObject *error_msg_text_snippet_size;
};
struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_forward;
struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_back;
struct __pyx_opt_args_6typped_5lexer_11TokenBuffer__append;
struct __pyx_opt_args_6typped_5lexer_10TokenTable__create_token_subclass;
struct __pyx_opt_args_6typped_5lexer_10TokenTable_def_token;
struct __pyx_opt_args_6typped_5lexer_5Lexer_reset;
struct __pyx_opt_args_6typped_5lexer_5Lexer_set_token_table;
struct __pyx_opt_args_6typped_5lexer_5Lexer_next;
struct __pyx_opt_args_6typped_5lexer_5Lexer_peek;
struct __pyx_opt_args_6typped_5lexer_5Lexer_go_back;
struct __pyx_opt_args_6typped_5lexer_5Lexer_match_next;
struct __pyx_opt_args_6typped_5lexer_5Lexer_in_ignored_tokens;
struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_after;
struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_before;

/* "typped/lexer.pxd":28
 *     cpdef long num_tokens_after_current(self)
 * 
 *     cpdef move_forward(self, long num_toks=*)             # <<<<<<<<<<<<<<
 * 
 *     cpdef move_back(self, long num_toks=*)
 */
struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_forward {
  int __pyx_n;
  long num_toks;
};

/* "typped/lexer.pxd":30
 *     cpdef move_forward(self, long num_toks=*)
 * 
 *     cpdef move_back(self, long num_toks=*)             # <<<<<<<<<<<<<<
 * 
 *     #
 */
struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_back {
  int __pyx_n;
  long num_toks;
};

/* "typped/lexer.pxd":44
 *     cdef _pop(self) # Must be cpdef instead of cdef until TokenBuffer decl below works.
 * 
 *     cdef _append(self, tok=*)             # <<<<<<<<<<<<<<
 * 
 * #
 */
struct __pyx_opt_args_6typped_5lexer_11TokenBuffer__append {
  int __pyx_n;
  PyObject *tok;
};

/* "typped/lexer.pxd":71
 *     #
 * 
 *     cdef _create_token_subclass(self, str token_label, bint store_in_dict=*)             # <<<<<<<<<<<<<<
 * 
 *     cpdef undef_token_subclass(self, str token_label)
 */
struct __pyx_opt_args_6typped_5lexer_10TokenTable__create_token_subclass {
  int __pyx_n;
  int store_in_dict;
};

/* "typped/lexer.pxd":77
 *     cpdef undef_token(self, str token_label)
 * 
 *     cpdef def_token(self, str token_label, regex_string, on_ties=*, bint ignore=*,             # <<<<<<<<<<<<<<
 *                   matcher_options=*)
 * 
 */
struct __pyx_opt_args_6typped_5lexer_10TokenTable_def_token {
  int __pyx_n;
  PyObject *on_ties;
  int ignore;
  PyObject *matcher_options;
};

/* "typped/lexer.pxd":116
 *     #
 * 
 *     cpdef reset(self, token_table=*, max_peek_tokens=*,             # <<<<<<<<<<<<<<
 *                 max_deque_size=*, default_begin_end_tokens=*,
 *                 final_mod_function=*)
 */
struct __pyx_opt_args_6typped_5lexer_5Lexer_reset {
  int __pyx_n;
  PyObject *token_table;
  PyObject *max_peek_tokens;
  PyObject *max_deque_size;
  PyObject *default_begin_end_tokens;
  PyObject *final_mod_function;
};

/* "typped/lexer.pxd":120
 *                 final_mod_function=*)
 * 
 *     cpdef set_token_table(self, TokenTable token_table, go_back=*)             # <<<<<<<<<<<<<<
 * 
 *     cpdef next(self, long num=*)
 */
struct __pyx_opt_args_6typped_5lexer_5Lexer_set_token_table {
  int __pyx_n;
  PyObject *go_back;
};

/* "typped/lexer.pxd":122
 *     cpdef set_token_table(self, TokenTable token_table, go_back=*)
 * 
 *     cpdef next(self, long num=*)             # <<<<<<<<<<<<<<
 * 
 *     cpdef peek(self, num_toks=*)
 */
struct __pyx_opt_args_6typped_5lexer_5Lexer_next {
  int __pyx_n;
  long num;
};

/* "typped/lexer.pxd":124
 *     cpdef next(self, long num=*)
 * 
 *     cpdef peek(self, num_toks=*)             # <<<<<<<<<<<<<<
 * 
 *     cdef _pop_tokens(self, long n)
 */
struct __pyx_opt_args_6typped_5lexer_5Lexer_peek {
  int __pyx_n;
  PyObject *num_toks;
};

/* "typped/lexer.pxd":128
 *     cdef _pop_tokens(self, long n)
 * 
 *     cpdef go_back(self, long num_toks=*, bint num_is_raw=*)             # <<<<<<<<<<<<<<
 * 
 *     cpdef curr_token_is_begin(self)
 */
struct __pyx_opt_args_6typped_5lexer_5Lexer_go_back {
  int __pyx_n;
  long num_toks;
  int num_is_raw;
};

/* "typped/lexer.pxd":135
 *     cpdef bint is_defined_token_label(self, str token_label)
 * 
 *     cpdef match_next(self, str token_label_to_match, long peeklevel=*, bint consume=*,             # <<<<<<<<<<<<<<
 *                    bint raise_on_fail=*, bint raise_on_success=*,
 *                    long err_msg_tokens=*)
 */
struct __pyx_opt_args_6typped_5lexer_5Lexer_match_next {
  int __pyx_n;
  long peeklevel;
  int consume;
  int raise_on_fail;
  int raise_on_success;
  long err_msg_tokens;
};

/* "typped/lexer.pxd":138
 *                    bint raise_on_fail=*, bint raise_on_success=*,
 *                    long err_msg_tokens=*)
 *     cpdef in_ignored_tokens(self, str token_label_to_match,             # <<<<<<<<<<<<<<
 *                           bint raise_on_fail=*, bint raise_on_success=*)
 *     cpdef no_ignored_after(self, bint raise_on_fail=*, bint raise_on_success=*)
 */
struct __pyx_opt_args_6typped_5lexer_5Lexer_in_ignored_tokens {
  int __pyx_n;
  int raise_on_fail;
  int raise_on_success;
};

/* "typped/lexer.pxd":140
 *     cpdef in_ignored_tokens(self, str token_label_to_match,
 *                           bint raise_on_fail=*, bint raise_on_success=*)
 *     cpdef no_ignored_after(self, bint raise_on_fail=*, bint raise_on_success=*)             # <<<<<<<<<<<<<<
 *     cpdef no_ignored_before(self, bint raise_on_fail=*, bint raise_on_success=*)
 * 
 */
struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_after {
  int __pyx_n;
  int raise_on_fail;
  int raise_on_success;
};

/* "typped/lexer.pxd":141
 *                           bint raise_on_fail=*, bint raise_on_success=*)
 *     cpdef no_ignored_after(self, bint raise_on_fail=*, bint raise_on_success=*)
 *     cpdef no_ignored_before(self, bint raise_on_fail=*, bint raise_on_success=*)             # <<<<<<<<<<<<<<
 * 
 *     cpdef _unbuffered_token_getter(self)
 */
struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_before {
  int __pyx_n;
  int raise_on_fail;
  int raise_on_success;
};

/* "matcher.pxd":7
 * # also need to be implemented, so probably not.
 * 
 * cdef class Matcher(object):             # <<<<<<<<<<<<<<
 *     #
 *     # Instance attributes.
 */
struct __pyx_obj_6typped_7matcher_Matcher {
  PyObject_HEAD
  struct __pyx_vtabstruct_6typped_7matcher_Matcher *__pyx_vtab;
  PyObject *ignore_tokens;
  PyObject *python_fnl_data_dict;
  PyObject *python_data_dict;
  PyObject *trie_regex_data_dict;
  int python_fnl_combo_regex_is_stale;
  int sort_python_fnl;
  PyObject *python_fnl_combo_regex;
  PyObject *default_insert_options;
  PyObject *rtd_scanner;
  PyObject *rtd;
  PyObject *rtd_escape_char;
  PyObject *self;
  PyObject *matched_text;
  PyObject *combo_best_matches;
  PyObject *best_matches;
  PyObject *best_matches_trie;
  PyObject *best_matches_fnl;
  PyObject *winning_tokens;
  PyObject *best_matches_len;
  PyObject *best_matches_trie_len;
  PyObject *best_matches_fnl_len;
  PyObject *max_len;
};


/* "typped/lexer.pxd":9
 * #
 * 
 * cdef class TokenBuffer(object):             # <<<<<<<<<<<<<<
 *     cdef token_getter_fun
 *     cdef public token_buffer
 */
struct __pyx_obj_6typped_5lexer_TokenBuffer {
  PyObject_HEAD
  struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *__pyx_vtab;
  PyObject *token_getter_fun;
  PyObject *token_buffer;
  long max_deque_size;
  long max_peek;
  long current_offset;
  long reference_point;
};


/* "typped/lexer.pxd":54
 * cdef class Lexer(object) # Forward declaration (note no colon).
 * 
 * cdef class TokenTable(object):             # <<<<<<<<<<<<<<
 *     """A symbol table holding subclasses of the `TokenNode` class for each token label
 *     defined in a `Lexer` instance.  Also has methods for operating on tokens.
 */
struct __pyx_obj_6typped_5lexer_TokenTable {
  PyObject_HEAD
  struct __pyx_vtabstruct_6typped_5lexer_TokenTable *__pyx_vtab;
  PyObject *token_subclassing_fun;
  PyObject *token_subclass_dict;
  struct __pyx_obj_6typped_5lexer_Lexer *lex;
  PyObject *begin_token_label;
  PyObject *end_token_label;
  PyObject *begin_token_subclass;
  PyObject *end_token_subclass;
  struct __pyx_obj_6typped_7matcher_Matcher *pattern_matcher;
  PyObject *__dict__;
};


/* "typped/lexer.pxd":93
 * #
 * 
 * cdef class GenTokenState(object):             # <<<<<<<<<<<<<<
 *     pass
 *     #cdef public long ordinary, end, uninitialized # Only works on instance attributes.
 */
struct __pyx_obj_6typped_5lexer_GenTokenState {
  PyObject_HEAD
};


/* "typped/lexer.pxd":52
 * from matcher cimport Matcher
 * 
 * cdef class Lexer(object) # Forward declaration (note no colon).             # <<<<<<<<<<<<<<
 * 
 * cdef class TokenTable(object):
 */
struct __pyx_obj_6typped_5lexer_Lexer {
  PyObject_HEAD
  struct __pyx_vtabstruct_6typped_5lexer_Lexer *__pyx_vtab;
  struct __pyx_obj_6typped_5lexer_TokenBuffer *token_buffer;
  struct __pyx_obj_6typped_5lexer_TokenTable *token_table;
  PyObject *token;
  int text_is_set;
  long all_token_count;
  long non_ignored_token_count;
  long raw_linenumber;
  long upcoming_raw_linenumber;
  long upcoming_raw_charnumber;
  long upcoming_raw_total_chars;
  long token_generator_state;
  PyObject *final_mod_function;
  PyObject *default_helper_exception;
  int already_returned_end_token;
  int _curr_token_is_first;
  int _returned_first_token;
  PyObject *prog_unprocessed;
  PyObject *program;
  PyObject *__dict__;
};


/* "typped/lexer.py":344
 *         return string
 * 
 *     def string_tree_repr(self, only_vals=False, only_labels=False):             # <<<<<<<<<<<<<<
 *         """Token representation as the root of a parse subtree, in a string format.
 *         This is the default representation, used for `__repr__`."""
 */
struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr {
  PyObject_HEAD
  PyObject *__pyx_v_self;
};


/* "typped/lexer.py":352
 *         if self.children:
 *             string += "("
 *             string += ",".join(c.string_tree_repr() for c in self.children)             # <<<<<<<<<<<<<<
 *             string += ")"
 *         return string
 */
struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr {
  PyObject_HEAD
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *__pyx_outer_scope;
  PyObject *__pyx_v_c;
  PyObject *__pyx_t_0;
  Py_ssize_t __pyx_t_1;
  PyObject *(*__pyx_t_2)(PyObject *);
};


/* "typped/lexer.py":373
 * 
 * 
 * def basic_token_subclass_factory():             # <<<<<<<<<<<<<<
 *     """Create and return a new token subclass representing tokens with label
 *     `token_label`.  This function is called from the `_create_token_subclass`
 */
struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory {
  PyObject_HEAD
  PyObject *__pyx_v_TokenSubclass;
};



/* "matcher.pxd":7
 * # also need to be implemented, so probably not.
 * 
 * cdef class Matcher(object):             # <<<<<<<<<<<<<<
 *     #
 *     # Instance attributes.
 */

struct __pyx_vtabstruct_6typped_7matcher_Matcher {
  PyObject *(*insert_pattern)(struct __pyx_obj_6typped_7matcher_Matcher *, PyObject *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_7matcher_7Matcher_insert_pattern *__pyx_optional_args);
  PyObject *(*get_next_token_label_and_value)(struct __pyx_obj_6typped_7matcher_Matcher *, PyObject *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_7matcher_7Matcher_get_next_token_label_and_value *__pyx_optional_args);
  PyObject *(*_python_get_raw_matches)(struct __pyx_obj_6typped_7matcher_Matcher *, PyObject *, PyObject *);
  PyObject *(*_python_first_not_longest)(struct __pyx_obj_6typped_7matcher_Matcher *, PyObject *, PyObject *, int __pyx_skip_dispatch);
};
static struct __pyx_vtabstruct_6typped_7matcher_Matcher *__pyx_vtabptr_6typped_7matcher_Matcher;


/* "typped/lexer.py":555
 * #
 * 
 * class TokenBuffer(object):             # <<<<<<<<<<<<<<
 *     """An abstraction of the token buffer.  This is used internally by the
 *     `Lexer` class and should not usually be accessed by users.  It is basically
 */

struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer {
  PyObject *(*reset)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, PyObject *, int __pyx_skip_dispatch);
  long (*state_to_offset)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, long, int __pyx_skip_dispatch);
  long (*get_state)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, int __pyx_skip_dispatch);
  long (*num_saved_previous_tokens)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, int __pyx_skip_dispatch);
  long (*num_tokens_after_current)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, int __pyx_skip_dispatch);
  PyObject *(*move_forward)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_forward *__pyx_optional_args);
  PyObject *(*move_back)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_back *__pyx_optional_args);
  long (*_index_to_absolute)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, long);
  long (*_offset_to_absolute)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, long);
  PyObject *(*_fill_to_current_offset)(struct __pyx_obj_6typped_5lexer_TokenBuffer *);
  PyObject *(*_pop)(struct __pyx_obj_6typped_5lexer_TokenBuffer *);
  PyObject *(*_append)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer__append *__pyx_optional_args);
};
static struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *__pyx_vtabptr_6typped_5lexer_TokenBuffer;
static CYTHON_INLINE long __pyx_f_6typped_5lexer_11TokenBuffer__index_to_absolute(struct __pyx_obj_6typped_5lexer_TokenBuffer *, long);
static CYTHON_INLINE long __pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute(struct __pyx_obj_6typped_5lexer_TokenBuffer *, long);


/* "typped/lexer.py":761
 * # create a token for each char, but still linear in text size.
 * 
 * class Lexer(object):             # <<<<<<<<<<<<<<
 *     """Scans text and returns tokens, represented by instances of `TokenNode`
 *     subclass instances. There is one subclass for each kind of token, i.e., for
 */

struct __pyx_vtabstruct_6typped_5lexer_Lexer {
  PyObject *(*reset)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_reset *__pyx_optional_args);
  PyObject *(*set_token_table)(struct __pyx_obj_6typped_5lexer_Lexer *, struct __pyx_obj_6typped_5lexer_TokenTable *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_set_token_table *__pyx_optional_args);
  PyObject *(*next)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_next *__pyx_optional_args);
  PyObject *(*peek)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_peek *__pyx_optional_args);
  PyObject *(*_pop_tokens)(struct __pyx_obj_6typped_5lexer_Lexer *, long);
  PyObject *(*go_back)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_go_back *__pyx_optional_args);
  PyObject *(*curr_token_is_begin)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch);
  PyObject *(*ignored_before_curr)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch);
  int (*curr_token_is_end)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch);
  int (*is_defined_token_label)(struct __pyx_obj_6typped_5lexer_Lexer *, PyObject *, int __pyx_skip_dispatch);
  PyObject *(*match_next)(struct __pyx_obj_6typped_5lexer_Lexer *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_match_next *__pyx_optional_args);
  PyObject *(*in_ignored_tokens)(struct __pyx_obj_6typped_5lexer_Lexer *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_in_ignored_tokens *__pyx_optional_args);
  PyObject *(*no_ignored_after)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_after *__pyx_optional_args);
  PyObject *(*no_ignored_before)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_before *__pyx_optional_args);
  PyObject *(*_unbuffered_token_getter)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch);
};
static struct __pyx_vtabstruct_6typped_5lexer_Lexer *__pyx_vtabptr_6typped_5lexer_Lexer;


/* "typped/lexer.py":411
 * #
 * 
 * class TokenTable(object):             # <<<<<<<<<<<<<<
 *     """A symbol table holding subclasses of the `TokenNode` class for each token label
 *     defined in a `Lexer` instance.  Also has methods for operating on tokens.
 */

struct __pyx_vtabstruct_6typped_5lexer_TokenTable {
  PyObject *(*_create_token_subclass)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, struct __pyx_opt_args_6typped_5lexer_10TokenTable__create_token_subclass *__pyx_optional_args);
  PyObject *(*undef_token_subclass)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, int __pyx_skip_dispatch);
  PyObject *(*undef_token)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, int __pyx_skip_dispatch);
  PyObject *(*def_token)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_10TokenTable_def_token *__pyx_optional_args);
  PyObject *(*def_begin_token)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, int __pyx_skip_dispatch);
  PyObject *(*def_end_token)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, int __pyx_skip_dispatch);
  PyObject *(*get_next_token_label_and_value)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, PyObject *, long, int __pyx_skip_dispatch);
  PyObject *(*ignored_tokens)(struct __pyx_obj_6typped_5lexer_TokenTable *, int __pyx_skip_dispatch);
};
static struct __pyx_vtabstruct_6typped_5lexer_TokenTable *__pyx_vtabptr_6typped_5lexer_TokenTable;

/* --- Runtime support code (head) --- */
/* Refnanny.proto */
#ifndef CYTHON_REFNANNY
  #define CYTHON_REFNANNY 0
#endif
#if CYTHON_REFNANNY
  typedef struct {
    void (*INCREF)(void*, PyObject*, int);
    void (*DECREF)(void*, PyObject*, int);
    void (*GOTREF)(void*, PyObject*, int);
    void (*GIVEREF)(void*, PyObject*, int);
    void* (*SetupContext)(const char*, int, const char*);
    void (*FinishContext)(void**);
  } __Pyx_RefNannyAPIStruct;
  static __Pyx_RefNannyAPIStruct *__Pyx_RefNanny = NULL;
  static __Pyx_RefNannyAPIStruct *__Pyx_RefNannyImportAPI(const char *modname);
  #define __Pyx_RefNannyDeclarations void *__pyx_refnanny = NULL;
#ifdef WITH_THREAD
  #define __Pyx_RefNannySetupContext(name, acquire_gil)\
          if (acquire_gil) {\
              PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();\
              __pyx_refnanny = __Pyx_RefNanny->SetupContext((name), __LINE__, __FILE__);\
              PyGILState_Release(__pyx_gilstate_save);\
          } else {\
              __pyx_refnanny = __Pyx_RefNanny->SetupContext((name), __LINE__, __FILE__);\
          }
#else
  #define __Pyx_RefNannySetupContext(name, acquire_gil)\
          __pyx_refnanny = __Pyx_RefNanny->SetupContext((name), __LINE__, __FILE__)
#endif
  #define __Pyx_RefNannyFinishContext()\
          __Pyx_RefNanny->FinishContext(&__pyx_refnanny)
  #define __Pyx_INCREF(r)  __Pyx_RefNanny->INCREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_DECREF(r)  __Pyx_RefNanny->DECREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_GOTREF(r)  __Pyx_RefNanny->GOTREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_GIVEREF(r) __Pyx_RefNanny->GIVEREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_XINCREF(r)  do { if((r) != NULL) {__Pyx_INCREF(r); }} while(0)
  #define __Pyx_XDECREF(r)  do { if((r) != NULL) {__Pyx_DECREF(r); }} while(0)
  #define __Pyx_XGOTREF(r)  do { if((r) != NULL) {__Pyx_GOTREF(r); }} while(0)
  #define __Pyx_XGIVEREF(r) do { if((r) != NULL) {__Pyx_GIVEREF(r);}} while(0)
#else
  #define __Pyx_RefNannyDeclarations
  #define __Pyx_RefNannySetupContext(name, acquire_gil)
  #define __Pyx_RefNannyFinishContext()
  #define __Pyx_INCREF(r) Py_INCREF(r)
  #define __Pyx_DECREF(r) Py_DECREF(r)
  #define __Pyx_GOTREF(r)
  #define __Pyx_GIVEREF(r)
  #define __Pyx_XINCREF(r) Py_XINCREF(r)
  #define __Pyx_XDECREF(r) Py_XDECREF(r)
  #define __Pyx_XGOTREF(r)
  #define __Pyx_XGIVEREF(r)
#endif
#define __Pyx_XDECREF_SET(r, v) do {\
        PyObject *tmp = (PyObject *) r;\
        r = v; __Pyx_XDECREF(tmp);\
    } while (0)
#define __Pyx_DECREF_SET(r, v) do {\
        PyObject *tmp = (PyObject *) r;\
        r = v; __Pyx_DECREF(tmp);\
    } while (0)
#define __Pyx_CLEAR(r)    do { PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);} while(0)
#define __Pyx_XCLEAR(r)   do { if((r) != NULL) {PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);}} while(0)

/* PyObjectGetAttrStr.proto */
#if CYTHON_USE_TYPE_SLOTS
static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
    PyTypeObject* tp = Py_TYPE(obj);
    if (likely(tp->tp_getattro))
        return tp->tp_getattro(obj, attr_name);
#if PY_MAJOR_VERSION < 3
    if (likely(tp->tp_getattr))
        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
#endif
    return PyObject_GetAttr(obj, attr_name);
}
#else
#define __Pyx_PyObject_GetAttrStr(o,n) PyObject_GetAttr(o,n)
#endif

/* GetBuiltinName.proto */
static PyObject *__Pyx_GetBuiltinName(PyObject *name);

/* PyObjectSetAttrStr.proto */
#if CYTHON_USE_TYPE_SLOTS
#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o,n,NULL)
static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
    PyTypeObject* tp = Py_TYPE(obj);
    if (likely(tp->tp_setattro))
        return tp->tp_setattro(obj, attr_name, value);
#if PY_MAJOR_VERSION < 3
    if (likely(tp->tp_setattr))
        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
#endif
    return PyObject_SetAttr(obj, attr_name, value);
}
#else
#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
#endif

/* ListCompAppend.proto */
#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
static CYTHON_INLINE int __Pyx_ListComp_Append(PyObject* list, PyObject* x) {
    PyListObject* L = (PyListObject*) list;
    Py_ssize_t len = Py_SIZE(list);
    if (likely(L->allocated > len)) {
        Py_INCREF(x);
        PyList_SET_ITEM(list, len, x);
        Py_SIZE(list) = len+1;
        return 0;
    }
    return PyList_Append(list, x);
}
#else
#define __Pyx_ListComp_Append(L,x) PyList_Append(L,x)
#endif

/* RaiseDoubleKeywords.proto */
static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);

/* ParseKeywords.proto */
static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject **argnames[],\
    PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,\
    const char* function_name);

/* RaiseArgTupleInvalid.proto */
static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);

/* ListAppend.proto */
#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
static CYTHON_INLINE int __Pyx_PyList_Append(PyObject* list, PyObject* x) {
    PyListObject* L = (PyListObject*) list;
    Py_ssize_t len = Py_SIZE(list);
    if (likely(L->allocated > len) & likely(len > (L->allocated >> 1))) {
        Py_INCREF(x);
        PyList_SET_ITEM(list, len, x);
        Py_SIZE(list) = len+1;
        return 0;
    }
    return PyList_Append(list, x);
}
#else
#define __Pyx_PyList_Append(L,x) PyList_Append(L,x)
#endif

/* PyCFunctionFastCall.proto */
#if CYTHON_FAST_PYCCALL
static CYTHON_INLINE PyObject *__Pyx_PyCFunction_FastCall(PyObject *func, PyObject **args, Py_ssize_t nargs);
#else
#define __Pyx_PyCFunction_FastCall(func, args, nargs)  (assert(0), NULL)
#endif

/* PyFunctionFastCall.proto */
#if CYTHON_FAST_PYCALL
#define __Pyx_PyFunction_FastCall(func, args, nargs)\
    __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
#if 1 || PY_VERSION_HEX < 0x030600B1
static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, int nargs, PyObject *kwargs);
#else
#define __Pyx_PyFunction_FastCallDict(func, args, nargs, kwargs) _PyFunction_FastCallDict(func, args, nargs, kwargs)
#endif
#endif

/* PyObjectCall.proto */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
#else
#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
#endif

/* PyObjectCallMethO.proto */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
#endif

/* PyObjectCallOneArg.proto */
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);

/* PyObjectCallMethod1.proto */
static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg);

/* append.proto */
static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x);

/* PyObjectCallNoArg.proto */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallNoArg(PyObject *func);
#else
#define __Pyx_PyObject_CallNoArg(func) __Pyx_PyObject_Call(func, __pyx_empty_tuple, NULL)
#endif

/* PyThreadStateGet.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_PyThreadState_declare  PyThreadState *__pyx_tstate;
#define __Pyx_PyThreadState_assign  __pyx_tstate = PyThreadState_GET();
#else
#define __Pyx_PyThreadState_declare
#define __Pyx_PyThreadState_assign
#endif

/* SaveResetException.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_ExceptionSave(type, value, tb)  __Pyx__ExceptionSave(__pyx_tstate, type, value, tb)
static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
#define __Pyx_ExceptionReset(type, value, tb)  __Pyx__ExceptionReset(__pyx_tstate, type, value, tb)
static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
#else
#define __Pyx_ExceptionSave(type, value, tb)   PyErr_GetExcInfo(type, value, tb)
#define __Pyx_ExceptionReset(type, value, tb)  PyErr_SetExcInfo(type, value, tb)
#endif

/* PyErrExceptionMatches.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_PyErr_ExceptionMatches(err) __Pyx_PyErr_ExceptionMatchesInState(__pyx_tstate, err)
static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err);
#else
#define __Pyx_PyErr_ExceptionMatches(err)  PyErr_ExceptionMatches(err)
#endif

/* PyErrFetchRestore.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_ErrRestoreWithState(type, value, tb)  __Pyx_ErrRestoreInState(PyThreadState_GET(), type, value, tb)
#define __Pyx_ErrFetchWithState(type, value, tb)    __Pyx_ErrFetchInState(PyThreadState_GET(), type, value, tb)
#define __Pyx_ErrRestore(type, value, tb)  __Pyx_ErrRestoreInState(__pyx_tstate, type, value, tb)
#define __Pyx_ErrFetch(type, value, tb)    __Pyx_ErrFetchInState(__pyx_tstate, type, value, tb)
static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
#else
#define __Pyx_ErrRestoreWithState(type, value, tb)  PyErr_Restore(type, value, tb)
#define __Pyx_ErrFetchWithState(type, value, tb)  PyErr_Fetch(type, value, tb)
#define __Pyx_ErrRestore(type, value, tb)  PyErr_Restore(type, value, tb)
#define __Pyx_ErrFetch(type, value, tb)  PyErr_Fetch(type, value, tb)
#endif

/* None.proto */
static CYTHON_INLINE void __Pyx_RaiseClosureNameError(const char *varname);

/* StringJoin.proto */
#if PY_MAJOR_VERSION < 3
#define __Pyx_PyString_Join __Pyx_PyBytes_Join
#define __Pyx_PyBaseString_Join(s, v) (PyUnicode_CheckExact(s) ? PyUnicode_Join(s, v) : __Pyx_PyBytes_Join(s, v))
#else
#define __Pyx_PyString_Join PyUnicode_Join
#define __Pyx_PyBaseString_Join PyUnicode_Join
#endif
#if CYTHON_COMPILING_IN_CPYTHON
    #if PY_MAJOR_VERSION < 3
    #define __Pyx_PyBytes_Join _PyString_Join
    #else
    #define __Pyx_PyBytes_Join _PyBytes_Join
    #endif
#else
static CYTHON_INLINE PyObject* __Pyx_PyBytes_Join(PyObject* sep, PyObject* values);
#endif

/* IncludeStringH.proto */
#include <string.h>

/* BytesEquals.proto */
static CYTHON_INLINE int __Pyx_PyBytes_Equals(PyObject* s1, PyObject* s2, int equals);

/* UnicodeEquals.proto */
static CYTHON_INLINE int __Pyx_PyUnicode_Equals(PyObject* s1, PyObject* s2, int equals);

/* StrEquals.proto */
#if PY_MAJOR_VERSION >= 3
#define __Pyx_PyString_Equals __Pyx_PyUnicode_Equals
#else
#define __Pyx_PyString_Equals __Pyx_PyBytes_Equals
#endif

/* GetItemInt.proto */
#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
                                                              int wraparound, int boundscheck);
#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
                                                              int wraparound, int boundscheck);
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
                                                     int is_list, int wraparound, int boundscheck);

/* GetModuleGlobalName.proto */
static CYTHON_INLINE PyObject *__Pyx_GetModuleGlobalName(PyObject *name);

/* CalculateMetaclass.proto */
static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases);

/* FetchCommonType.proto */
static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type);

/* CythonFunction.proto */
#define __Pyx_CyFunction_USED 1
#include <structmember.h>
#define __Pyx_CYFUNCTION_STATICMETHOD  0x01
#define __Pyx_CYFUNCTION_CLASSMETHOD   0x02
#define __Pyx_CYFUNCTION_CCLASS        0x04
#define __Pyx_CyFunction_GetClosure(f)\
    (((__pyx_CyFunctionObject *) (f))->func_closure)
#define __Pyx_CyFunction_GetClassObj(f)\
    (((__pyx_CyFunctionObject *) (f))->func_classobj)
#define __Pyx_CyFunction_Defaults(type, f)\
    ((type *)(((__pyx_CyFunctionObject *) (f))->defaults))
#define __Pyx_CyFunction_SetDefaultsGetter(f, g)\
    ((__pyx_CyFunctionObject *) (f))->defaults_getter = (g)
typedef struct {
    PyCFunctionObject func;
#if PY_VERSION_HEX < 0x030500A0
    PyObject *func_weakreflist;
#endif
    PyObject *func_dict;
    PyObject *func_name;
    PyObject *func_qualname;
    PyObject *func_doc;
    PyObject *func_globals;
    PyObject *func_code;
    PyObject *func_closure;
    PyObject *func_classobj;
    void *defaults;
    int defaults_pyobjects;
    int flags;
    PyObject *defaults_tuple;
    PyObject *defaults_kwdict;
    PyObject *(*defaults_getter)(PyObject *);
    PyObject *func_annotations;
} __pyx_CyFunctionObject;
static PyTypeObject *__pyx_CyFunctionType = 0;
#define __Pyx_CyFunction_NewEx(ml, flags, qualname, self, module, globals, code)\
    __Pyx_CyFunction_New(__pyx_CyFunctionType, ml, flags, qualname, self, module, globals, code)
static PyObject *__Pyx_CyFunction_New(PyTypeObject *, PyMethodDef *ml,
                                      int flags, PyObject* qualname,
                                      PyObject *self,
                                      PyObject *module, PyObject *globals,
                                      PyObject* code);
static CYTHON_INLINE void *__Pyx_CyFunction_InitDefaults(PyObject *m,
                                                         size_t size,
                                                         int pyobjects);
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsTuple(PyObject *m,
                                                            PyObject *tuple);
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsKwDict(PyObject *m,
                                                             PyObject *dict);
static CYTHON_INLINE void __Pyx_CyFunction_SetAnnotationsDict(PyObject *m,
                                                              PyObject *dict);
static int __pyx_CyFunction_init(void);

/* Py3ClassCreate.proto */
static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name, PyObject *qualname,
                                           PyObject *mkw, PyObject *modname, PyObject *doc);
static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases, PyObject *dict,
                                      PyObject *mkw, int calculate_metaclass, int allow_py2_metaclass);

/* ExtTypeTest.proto */
static CYTHON_INLINE int __Pyx_TypeTest(PyObject *obj, PyTypeObject *type);

/* PyDictContains.proto */
static CYTHON_INLINE int __Pyx_PyDict_ContainsTF(PyObject* item, PyObject* dict, int eq) {
    int result = PyDict_Contains(dict, item);
    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
}

/* DictGetItem.proto */
#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key) {
    PyObject *value;
    value = PyDict_GetItemWithError(d, key);
    if (unlikely(!value)) {
        if (!PyErr_Occurred()) {
            PyObject* args = PyTuple_Pack(1, key);
            if (likely(args))
                PyErr_SetObject(PyExc_KeyError, args);
            Py_XDECREF(args);
        }
        return NULL;
    }
    Py_INCREF(value);
    return value;
}
#else
    #define __Pyx_PyDict_GetItem(d, key) PyObject_GetItem(d, key)
#endif

/* RaiseException.proto */
static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);

/* GetException.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_GetException(type, value, tb)  __Pyx__GetException(__pyx_tstate, type, value, tb)
static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
#else
static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb);
#endif

/* ArgTypeTest.proto */
static CYTHON_INLINE int __Pyx_ArgTypeTest(PyObject *obj, PyTypeObject *type, int none_allowed,
    const char *name, int exact);

/* PySequenceContains.proto */
static CYTHON_INLINE int __Pyx_PySequence_ContainsTF(PyObject* item, PyObject* seq, int eq) {
    int result = PySequence_Contains(seq, item);
    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
}

/* GetAttr.proto */
static CYTHON_INLINE PyObject *__Pyx_GetAttr(PyObject *, PyObject *);

/* GetAttr3.proto */
static CYTHON_INLINE PyObject *__Pyx_GetAttr3(PyObject *, PyObject *, PyObject *);

/* WriteUnraisableException.proto */
static void __Pyx_WriteUnraisable(const char *name, int clineno,
                                  int lineno, const char *filename,
                                  int full_traceback, int nogil);

/* abs_long.proto */
static CYTHON_INLINE unsigned long __Pyx_abs_long(long x) {
    if (unlikely(x == -LONG_MAX-1))
        return ((unsigned long)LONG_MAX) + 1U;
    return (unsigned long) labs(x);
}

/* PyObjectCallMethod0.proto */
static PyObject* __Pyx_PyObject_CallMethod0(PyObject* obj, PyObject* method_name);

/* pop.proto */
static CYTHON_INLINE PyObject* __Pyx__PyObject_Pop(PyObject* L);
#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
static CYTHON_INLINE PyObject* __Pyx_PyList_Pop(PyObject* L);
#define __Pyx_PyObject_Pop(L) (likely(PyList_CheckExact(L)) ?\
    __Pyx_PyList_Pop(L) : __Pyx__PyObject_Pop(L))
#else
#define __Pyx_PyList_Pop(L)  __Pyx__PyObject_Pop(L)
#define __Pyx_PyObject_Pop(L)  __Pyx__PyObject_Pop(L)
#endif

/* UnpackUnboundCMethod.proto */
typedef struct {
    PyObject *type;
    PyObject **method_name;
    PyCFunction func;
    PyObject *method;
    int flag;
} __Pyx_CachedCFunction;

/* CallUnboundCMethod0.proto */
static PyObject* __Pyx__CallUnboundCMethod0(__Pyx_CachedCFunction* cfunc, PyObject* self);
#if CYTHON_COMPILING_IN_CPYTHON
#define __Pyx_CallUnboundCMethod0(cfunc, self)\
    ((likely((cfunc)->func)) ?\
        (likely((cfunc)->flag == METH_NOARGS) ?  (*((cfunc)->func))(self, NULL) :\
         (likely((cfunc)->flag == (METH_VARARGS | METH_KEYWORDS)) ?  ((*(PyCFunctionWithKeywords)(cfunc)->func)(self, __pyx_empty_tuple, NULL)) :\
             ((cfunc)->flag == METH_VARARGS ?  (*((cfunc)->func))(self, __pyx_empty_tuple) :\
              (PY_VERSION_HEX >= 0x030600B1 && (cfunc)->flag == METH_FASTCALL ?\
                (PY_VERSION_HEX >= 0x030700A0 ?\
                    (*(__Pyx_PyCFunctionFast)(cfunc)->func)(self, &PyTuple_GET_ITEM(__pyx_empty_tuple, 0), 0) :\
                    (*(__Pyx_PyCFunctionFastWithKeywords)(cfunc)->func)(self, &PyTuple_GET_ITEM(__pyx_empty_tuple, 0), 0, NULL)) :\
              (PY_VERSION_HEX >= 0x030700A0 && (cfunc)->flag == (METH_FASTCALL | METH_KEYWORDS) ?\
                    (*(__Pyx_PyCFunctionFastWithKeywords)(cfunc)->func)(self, &PyTuple_GET_ITEM(__pyx_empty_tuple, 0), 0, NULL) :\
                    __Pyx__CallUnboundCMethod0(cfunc, self)))))) :\
        __Pyx__CallUnboundCMethod0(cfunc, self))
#else
#define __Pyx_CallUnboundCMethod0(cfunc, self)  __Pyx__CallUnboundCMethod0(cfunc, self)
#endif

/* RaiseTooManyValuesToUnpack.proto */
static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected);

/* RaiseNeedMoreValuesToUnpack.proto */
static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index);

/* IterFinish.proto */
static CYTHON_INLINE int __Pyx_IterFinish(void);

/* UnpackItemEndCheck.proto */
static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected);

/* SetItemInt.proto */
#define __Pyx_SetItemInt(o, i, v, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
    __Pyx_SetItemInt_Fast(o, (Py_ssize_t)i, v, is_list, wraparound, boundscheck) :\
    (is_list ? (PyErr_SetString(PyExc_IndexError, "list assignment index out of range"), -1) :\
               __Pyx_SetItemInt_Generic(o, to_py_func(i), v)))
static CYTHON_INLINE int __Pyx_SetItemInt_Generic(PyObject *o, PyObject *j, PyObject *v);
static CYTHON_INLINE int __Pyx_SetItemInt_Fast(PyObject *o, Py_ssize_t i, PyObject *v,
                                               int is_list, int wraparound, int boundscheck);

/* PyIntBinop.proto */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_AddObjC(PyObject *op1, PyObject *op2, long intval, int inplace);
#else
#define __Pyx_PyInt_AddObjC(op1, op2, intval, inplace)\
    (inplace ? PyNumber_InPlaceAdd(op1, op2) : PyNumber_Add(op1, op2))
#endif

/* SliceObject.proto */
static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(
        PyObject* obj, Py_ssize_t cstart, Py_ssize_t cstop,
        PyObject** py_start, PyObject** py_stop, PyObject** py_slice,
        int has_cstart, int has_cstop, int wraparound);

/* PyIntBinop.proto */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_EqObjC(PyObject *op1, PyObject *op2, long intval, int inplace);
#else
#define __Pyx_PyInt_EqObjC(op1, op2, intval, inplace)\
    PyObject_RichCompare(op1, op2, Py_EQ)
    #endif

/* None.proto */
static CYTHON_INLINE void __Pyx_RaiseUnboundLocalError(const char *varname);

/* KeywordStringCheck.proto */
static CYTHON_INLINE int __Pyx_CheckKeywordStrings(PyObject *kwdict, const char* function_name, int kw_allowed);

/* Import.proto */
static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);

/* ImportFrom.proto */
static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);

/* HasAttr.proto */
static CYTHON_INLINE int __Pyx_HasAttr(PyObject *, PyObject *);

/* SetVTable.proto */
static int __Pyx_SetVtable(PyObject *dict, void *vtable);

/* SetupReduce.proto */
static int __Pyx_setup_reduce(PyObject* type_obj);

/* GetVTable.proto */
static void* __Pyx_GetVtable(PyObject *dict);

/* CLineInTraceback.proto */
static int __Pyx_CLineForTraceback(int c_line);

/* CodeObjectCache.proto */
typedef struct {
    PyCodeObject* code_object;
    int code_line;
} __Pyx_CodeObjectCacheEntry;
struct __Pyx_CodeObjectCache {
    int count;
    int max_count;
    __Pyx_CodeObjectCacheEntry* entries;
};
static struct __Pyx_CodeObjectCache __pyx_code_cache = {0,0,NULL};
static int __pyx_bisect_code_objects(__Pyx_CodeObjectCacheEntry* entries, int count, int code_line);
static PyCodeObject *__pyx_find_code_object(int code_line);
static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object);

/* AddTraceback.proto */
static void __Pyx_AddTraceback(const char *funcname, int c_line,
                               int py_line, const char *filename);

/* CIntToPy.proto */
static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);

/* CIntToPy.proto */
static CYTHON_INLINE PyObject* __Pyx_PyInt_From_unsigned_long(unsigned long value);

/* CIntFromPy.proto */
static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *);

/* CIntFromPy.proto */
static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);

/* SwapException.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_ExceptionSwap(type, value, tb)  __Pyx__ExceptionSwap(__pyx_tstate, type, value, tb)
static CYTHON_INLINE void __Pyx__ExceptionSwap(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
#else
static CYTHON_INLINE void __Pyx_ExceptionSwap(PyObject **type, PyObject **value, PyObject **tb);
#endif

/* CoroutineBase.proto */
typedef PyObject *(*__pyx_coroutine_body_t)(PyObject *, PyObject *);
typedef struct {
    PyObject_HEAD
    __pyx_coroutine_body_t body;
    PyObject *closure;
    PyObject *exc_type;
    PyObject *exc_value;
    PyObject *exc_traceback;
    PyObject *gi_weakreflist;
    PyObject *classobj;
    PyObject *yieldfrom;
    PyObject *gi_name;
    PyObject *gi_qualname;
    PyObject *gi_modulename;
    int resume_label;
    char is_running;
} __pyx_CoroutineObject;
static __pyx_CoroutineObject *__Pyx__Coroutine_New(
    PyTypeObject *type, __pyx_coroutine_body_t body, PyObject *closure,
    PyObject *name, PyObject *qualname, PyObject *module_name);
static int __Pyx_Coroutine_clear(PyObject *self);
#if 1 || PY_VERSION_HEX < 0x030300B0
static int __Pyx_PyGen_FetchStopIterationValue(PyObject **pvalue);
#else
#define __Pyx_PyGen_FetchStopIterationValue(pvalue) PyGen_FetchStopIterationValue(pvalue)
#endif

/* PatchModuleWithCoroutine.proto */
static PyObject* __Pyx_Coroutine_patch_module(PyObject* module, const char* py_code);

/* PatchGeneratorABC.proto */
static int __Pyx_patch_abc(void);

/* Generator.proto */
#define __Pyx_Generator_USED
static PyTypeObject *__pyx_GeneratorType = 0;
#define __Pyx_Generator_CheckExact(obj) (Py_TYPE(obj) == __pyx_GeneratorType)
#define __Pyx_Generator_New(body, closure, name, qualname, module_name)\
    __Pyx__Coroutine_New(__pyx_GeneratorType, body, closure, name, qualname, module_name)
static PyObject *__Pyx_Generator_Next(PyObject *self);
static int __pyx_Generator_init(void);

/* CheckBinaryVersion.proto */
static int __Pyx_check_binary_version(void);

/* PyIdentifierFromString.proto */
#if !defined(__Pyx_PyIdentifier_FromString)
#if PY_MAJOR_VERSION < 3
  #define __Pyx_PyIdentifier_FromString(s) PyString_FromString(s)
#else
  #define __Pyx_PyIdentifier_FromString(s) PyUnicode_FromString(s)
#endif
#endif

/* ModuleImport.proto */
static PyObject *__Pyx_ImportModule(const char *name);

/* TypeImport.proto */
static PyTypeObject *__Pyx_ImportType(const char *module_name, const char *class_name, size_t size, int strict);

/* InitStrings.proto */
static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);

static PyObject *__pyx_f_6typped_5lexer_10TokenTable__create_token_subclass(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label, struct __pyx_opt_args_6typped_5lexer_10TokenTable__create_token_subclass *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_undef_token_subclass(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label, int __pyx_skip_dispatch); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_undef_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label, int __pyx_skip_dispatch); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_def_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label, PyObject *__pyx_v_regex_string, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_10TokenTable_def_token *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_def_begin_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_begin_token_label, int __pyx_skip_dispatch); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_def_end_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_end_token_label, int __pyx_skip_dispatch); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_get_next_token_label_and_value(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_program, PyObject *__pyx_v_prog_unprocessed_indices, long __pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE, int __pyx_skip_dispatch); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_ignored_tokens(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer_reset(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_begin_token, int __pyx_skip_dispatch); /* proto*/
static long __pyx_f_6typped_5lexer_11TokenBuffer_state_to_offset(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_state, int __pyx_skip_dispatch); /* proto*/
static long __pyx_f_6typped_5lexer_11TokenBuffer_get_state(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/
static long __pyx_f_6typped_5lexer_11TokenBuffer_num_saved_previous_tokens(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/
static long __pyx_f_6typped_5lexer_11TokenBuffer_num_tokens_after_current(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer_move_forward(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_forward *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer_move_back(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_back *__pyx_optional_args); /* proto*/
static CYTHON_INLINE long __pyx_f_6typped_5lexer_11TokenBuffer__index_to_absolute(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_index); /* proto*/
static CYTHON_INLINE long __pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_offset); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer__fill_to_current_offset(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer__pop(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer__append(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer__append *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_reset(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_reset *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_set_token_table(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_token_table, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_set_token_table *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_next(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_next *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_peek(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_peek *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer__pop_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, long __pyx_v_n); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_go_back(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_go_back *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_curr_token_is_begin(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_ignored_before_curr(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/
static int __pyx_f_6typped_5lexer_5Lexer_curr_token_is_end(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/
static int __pyx_f_6typped_5lexer_5Lexer_is_defined_token_label(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_token_label, int __pyx_skip_dispatch); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_match_next(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label_to_match, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_match_next *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_in_ignored_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label_to_match, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_in_ignored_tokens *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_no_ignored_after(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_after *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_no_ignored_before(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_before *__pyx_optional_args); /* proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer__unbuffered_token_getter(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch); /* proto*/

/* Module declarations from 'typped.matcher' */
static PyTypeObject *__pyx_ptype_6typped_7matcher_Matcher = 0;

/* Module declarations from 'typped.lexer' */
static PyTypeObject *__pyx_ptype_6typped_5lexer_TokenBuffer = 0;
static PyTypeObject *__pyx_ptype_6typped_5lexer_Lexer = 0;
static PyTypeObject *__pyx_ptype_6typped_5lexer_TokenTable = 0;
static PyTypeObject *__pyx_ptype_6typped_5lexer_GenTokenState = 0;
static PyTypeObject *__pyx_ptype_6typped_5lexer___pyx_scope_struct__string_tree_repr = 0;
static PyTypeObject *__pyx_ptype_6typped_5lexer___pyx_scope_struct_1_genexpr = 0;
static PyTypeObject *__pyx_ptype_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory = 0;
static PyObject *__pyx_f_6typped_5lexer___pyx_unpickle_TokenTable__set_state(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *); /*proto*/
static PyObject *__pyx_f_6typped_5lexer___pyx_unpickle_TokenBuffer__set_state(struct __pyx_obj_6typped_5lexer_TokenBuffer *, PyObject *); /*proto*/
static PyObject *__pyx_f_6typped_5lexer___pyx_unpickle_GenTokenState__set_state(struct __pyx_obj_6typped_5lexer_GenTokenState *, PyObject *); /*proto*/
static PyObject *__pyx_f_6typped_5lexer___pyx_unpickle_Lexer__set_state(struct __pyx_obj_6typped_5lexer_Lexer *, PyObject *); /*proto*/
#define __Pyx_MODULE_NAME "typped.lexer"
int __pyx_module_is_main_typped__lexer = 0;

/* Implementation of 'typped.lexer' */
static PyObject *__pyx_builtin_object;
static PyObject *__pyx_builtin_ValueError;
static PyObject *__pyx_builtin_super;
static PyObject *__pyx_builtin_KeyError;
static PyObject *__pyx_builtin_TypeError;
static PyObject *__pyx_builtin_range;
static PyObject *__pyx_builtin_StopIteration;
static PyObject *__pyx_builtin_IndexError;
static PyObject *__pyx_builtin_NotImplementedError;
static PyObject *__pyx_builtin_print;
static const char __pyx_k_[] = "'";
static const char __pyx_k_a[] = "a";
static const char __pyx_k_c[] = "c";
static const char __pyx_k_n[] = "n";
static const char __pyx_k_s[] = "s";
static const char __pyx_k_t[] = "[ \\t]+";
static const char __pyx_k_v[] = "-v";
static const char __pyx_k_x[] = "x";
static const char __pyx_k_y[] = "y";
static const char __pyx_k__2[] = " ";
static const char __pyx_k__3[] = "\n";
static const char __pyx_k__4[] = "(";
static const char __pyx_k__5[] = ",";
static const char __pyx_k__6[] = ")";
static const char __pyx_k__7[] = "[";
static const char __pyx_k__8[] = "]";
static const char __pyx_k_tb[] = "tb";
static const char __pyx_k_0_1[] = "<{0},{1}>";
static const char __pyx_k__21[] = "";
static const char __pyx_k_doc[] = "__doc__";
static const char __pyx_k_end[] = "end";
static const char __pyx_k_new[] = "__new__";
static const char __pyx_k_num[] = "num";
static const char __pyx_k_pop[] = "pop";
static const char __pyx_k_t_2[] = "t";
static const char __pyx_k_tok[] = "tok";
static const char __pyx_k_args[] = "args";
static const char __pyx_k_dict[] = "__dict__";
static const char __pyx_k_init[] = "__init__";
static const char __pyx_k_item[] = "item";
static const char __pyx_k_join[] = "join";
static const char __pyx_k_main[] = "__main__";
static const char __pyx_k_name[] = "__name__";
static const char __pyx_k_next[] = "next";
static const char __pyx_k_peek[] = "peek";
static const char __pyx_k_repr[] = "__repr__";
static const char __pyx_k_self[] = "self";
static const char __pyx_k_send[] = "send";
static const char __pyx_k_test[] = "__test__";
static const char __pyx_k_text[] = "text";
static const char __pyx_k_child[] = "child";
static const char __pyx_k_clear[] = "clear";
static const char __pyx_k_close[] = "close";
static const char __pyx_k_count[] = "count";
static const char __pyx_k_deque[] = "deque";
static const char __pyx_k_index[] = "index";
static const char __pyx_k_k_end[] = "k_end";
static const char __pyx_k_print[] = "print";
static const char __pyx_k_range[] = "range";
static const char __pyx_k_reset[] = "reset";
static const char __pyx_k_rfind[] = "rfind";
static const char __pyx_k_state[] = "state";
static const char __pyx_k_super[] = "super";
static const char __pyx_k_throw[] = "throw";
static const char __pyx_k_value[] = "value";
static const char __pyx_k_append[] = "append";
static const char __pyx_k_dict_2[] = "_dict";
static const char __pyx_k_format[] = "format";
static const char __pyx_k_ignore[] = "ignore";
static const char __pyx_k_import[] = "__import__";
static const char __pyx_k_indent[] = "indent";
static const char __pyx_k_k_lpar[] = "k_lpar";
static const char __pyx_k_kwargs[] = "kwargs";
static const char __pyx_k_maxlen[] = "maxlen";
static const char __pyx_k_module[] = "__module__";
static const char __pyx_k_object[] = "object";
static const char __pyx_k_parent[] = "parent";
static const char __pyx_k_pickle[] = "pickle";
static const char __pyx_k_result[] = "result";
static const char __pyx_k_string[] = "string";
static const char __pyx_k_update[] = "update";
static const char __pyx_k_Matcher[] = "Matcher";
static const char __pyx_k_consume[] = "consume";
static const char __pyx_k_end_tok[] = "end_tok";
static const char __pyx_k_genexpr[] = "genexpr";
static const char __pyx_k_getitem[] = "__getitem__";
static const char __pyx_k_go_back[] = "go_back";
static const char __pyx_k_k_begin[] = "k_begin";
static const char __pyx_k_k_space[] = "k_space";
static const char __pyx_k_matcher[] = "matcher";
static const char __pyx_k_n_f_r_v[] = "[\\n\\f\\r\\v]+";
static const char __pyx_k_on_ties[] = "on_ties";
static const char __pyx_k_popleft[] = "popleft";
static const char __pyx_k_prepare[] = "__prepare__";
static const char __pyx_k_program[] = "program";
static const char __pyx_k_str_val[] = "str_val";
static const char __pyx_k_KeyError[] = "KeyError";
static const char __pyx_k_ast_node[] = "ast_node";
static const char __pyx_k_children[] = "children";
static const char __pyx_k_function[] = "function";
static const char __pyx_k_is_first[] = "is_first";
static const char __pyx_k_k_number[] = "k_number";
static const char __pyx_k_max_peek[] = "max_peek";
static const char __pyx_k_num_toks[] = "num_toks";
static const char __pyx_k_old_repr[] = "old_repr";
static const char __pyx_k_ordinary[] = "ordinary";
static const char __pyx_k_pyx_type[] = "__pyx_type";
static const char __pyx_k_qualname[] = "__qualname__";
static const char __pyx_k_set_text[] = "set_text";
static const char __pyx_k_TokenNode[] = "TokenNode()";
static const char __pyx_k_TypeError[] = "TypeError";
static const char __pyx_k_begin_tok[] = "begin_tok";
static const char __pyx_k_def_token[] = "def_token";
static const char __pyx_k_get_state[] = "get_state";
static const char __pyx_k_k_newline[] = "k_newline";
static const char __pyx_k_literal_0[] = "[literal {0}]";
static const char __pyx_k_metaclass[] = "__metaclass__";
static const char __pyx_k_move_back[] = "move_back";
static const char __pyx_k_only_vals[] = "only_vals";
static const char __pyx_k_peeklevel[] = "peeklevel";
static const char __pyx_k_pyx_state[] = "__pyx_state";
static const char __pyx_k_tree_repr[] = "tree_repr";
static const char __pyx_k_value_str[] = "value_str";
static const char __pyx_k_IndexError[] = "IndexError";
static const char __pyx_k_LexerState[] = "LexerState";
static const char __pyx_k_Lexer_next[] = "Lexer.next";
static const char __pyx_k_Lexer_peek[] = "Lexer.peek";
static const char __pyx_k_TokenClass[] = "TokenClass_";
static const char __pyx_k_ValueError[] = "ValueError";
static const char __pyx_k_label_repr[] = "label_repr";
static const char __pyx_k_match_next[] = "match_next";
static const char __pyx_k_namedtuple[] = "namedtuple";
static const char __pyx_k_num_indent[] = "num_indent";
static const char __pyx_k_num_is_raw[] = "num_is_raw";
static const char __pyx_k_pyx_vtable[] = "__pyx_vtable__";
static const char __pyx_k_script_run[] = "script_run";
static const char __pyx_k_tuple_list[] = "tuple_list";
static const char __pyx_k_value_repr[] = "value_repr";
static const char __pyx_k_DEFAULT_END[] = "DEFAULT_END";
static const char __pyx_k_Lexer_reset[] = "Lexer.reset";
static const char __pyx_k_PickleError[] = "PickleError";
static const char __pyx_k_TokenNode_2[] = "TokenNode";
static const char __pyx_k_begin_token[] = "begin_token";
static const char __pyx_k_collections[] = "collections";
static const char __pyx_k_full_string[] = "full_string";
static const char __pyx_k_only_labels[] = "only_labels";
static const char __pyx_k_prev_tokens[] = "prev_tokens";
static const char __pyx_k_pytest_args[] = "pytest_args";
static const char __pyx_k_retval_list[] = "retval_list";
static const char __pyx_k_space_label[] = "space_label";
static const char __pyx_k_space_regex[] = "space_regex";
static const char __pyx_k_string_list[] = "string_list";
static const char __pyx_k_token_label[] = "token_label";
static const char __pyx_k_token_nodes[] = "token_nodes";
static const char __pyx_k_token_table[] = "token_table";
static const char __pyx_k_undef_token[] = "undef_token";
static const char __pyx_k_is_end_token[] = "is_end_token";
static const char __pyx_k_move_forward[] = "move_forward";
static const char __pyx_k_new_subclass[] = "new_subclass";
static const char __pyx_k_pyx_checksum[] = "__pyx_checksum";
static const char __pyx_k_regex_string[] = "regex_string";
static const char __pyx_k_stringsource[] = "stringsource";
static const char __pyx_k_summary_repr[] = "summary_repr";
static const char __pyx_k_typped_lexer[] = "typped.lexer";
static const char __pyx_k_use_setstate[] = "use_setstate";
static const char __pyx_k_DEFAULT_BEGIN[] = "DEFAULT_BEGIN";
static const char __pyx_k_Lexer_go_back[] = "Lexer.go_back";
static const char __pyx_k_StopIteration[] = "StopIteration";
static const char __pyx_k_TokenSubclass[] = "TokenSubclass";
static const char __pyx_k_def_end_token[] = "def_end_token";
static const char __pyx_k_line_and_char[] = "line_and_char";
static const char __pyx_k_multi_funcall[] = "multi_funcall";
static const char __pyx_k_newline_label[] = "newline_label";
static const char __pyx_k_newline_regex[] = "newline_regex";
static const char __pyx_k_original_text[] = "original_text";
static const char __pyx_k_pytest_helper[] = "pytest_helper";
static const char __pyx_k_raise_on_fail[] = "raise_on_fail";
static const char __pyx_k_reduce_cython[] = "__reduce_cython__";
static const char __pyx_k_undef_pattern[] = "undef_pattern";
static const char __pyx_k_uninitialized[] = "uninitialized";
static const char __pyx_k_LexerException[] = "LexerException";
static const char __pyx_k_Lexer_set_text[] = "Lexer.set_text";
static const char __pyx_k_convert_to_AST[] = "convert_to_AST";
static const char __pyx_k_err_msg_tokens[] = "err_msg_tokens";
static const char __pyx_k_ignored_before[] = "ignored_before";
static const char __pyx_k_ignored_tokens[] = "ignored_tokens";
static const char __pyx_k_is_begin_token[] = "is_begin_token";
static const char __pyx_k_is_subclass_of[] = "is_subclass_of";
static const char __pyx_k_literal_k_lpar[] = "[literal k_lpar]";
static const char __pyx_k_max_deque_size[] = "max_deque_size";
static const char __pyx_k_num_to_go_back[] = "num_to_go_back";
static const char __pyx_k_Lexer_def_token[] = "Lexer.def_token";
static const char __pyx_k_Lexer_move_back[] = "Lexer.move_back";
static const char __pyx_k_all_token_count[] = "all_token_count";
static const char __pyx_k_append_children[] = "append_children";
static const char __pyx_k_def_begin_token[] = "def_begin_token";
static const char __pyx_k_end_token_label[] = "end_token_label";
static const char __pyx_k_k_lpar_0_k_rpar[] = "[k_lpar {0} k_rpar]";
static const char __pyx_k_matcher_options[] = "matcher_options";
static const char __pyx_k_max_peek_tokens[] = "max_peek_tokens";
static const char __pyx_k_set_token_table[] = "set_token_table";
static const char __pyx_k_setstate_cython[] = "__setstate_cython__";
static const char __pyx_k_state_to_offset[] = "state_to_offset";
static const char __pyx_k_BufferIndexError[] = "BufferIndexError";
static const char __pyx_k_Lexer_match_next[] = "Lexer.match_next";
static const char __pyx_k_TokenNode___init[] = "TokenNode.__init__";
static const char __pyx_k_def_multi_tokens[] = "def_multi_tokens";
static const char __pyx_k_go_back_to_state[] = "go_back_to_state";
static const char __pyx_k_is_first_on_line[] = "is_first_on_line";
static const char __pyx_k_no_ignored_after[] = "no_ignored_after";
static const char __pyx_k_raise_on_success[] = "raise_on_success";
static const char __pyx_k_reset_charnumber[] = "reset_charnumber";
static const char __pyx_k_reset_linenumber[] = "reset_linenumber";
static const char __pyx_k_string_tree_repr[] = "string_tree_repr";
static const char __pyx_k_token_getter_fun[] = "token_getter_fun";
static const char __pyx_k_traditional_repr[] = "traditional_repr";
static const char __pyx_k_Lexer_undef_token[] = "Lexer.undef_token";
static const char __pyx_k_TokenBuffer_reset[] = "TokenBuffer.reset";
static const char __pyx_k_begin_token_label[] = "begin_token_label";
static const char __pyx_k_curr_token_is_end[] = "curr_token_is_end";
static const char __pyx_k_def_ignored_token[] = "def_ignored_token";
static const char __pyx_k_get_current_state[] = "get_current_state";
static const char __pyx_k_in_ignored_tokens[] = "in_ignored_tokens";
static const char __pyx_k_no_ignored_before[] = "no_ignored_before";
static const char __pyx_k_TokenNode_old_repr[] = "TokenNode.old_repr";
static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
static const char __pyx_k_exception_to_raise[] = "exception_to_raise";
static const char __pyx_k_final_mod_function[] = "final_mod_function";
static const char __pyx_k_get_processed_text[] = "get_processed_text";
static const char __pyx_k_pyx_unpickle_Lexer[] = "__pyx_unpickle_Lexer";
static const char __pyx_k_test_test_lexer_py[] = "../../test/test_lexer.py";
static const char __pyx_k_NotImplementedError[] = "NotImplementedError";
static const char __pyx_k_TokenNode___getitem[] = "TokenNode.__getitem__";
static const char __pyx_k_TokenNode_tree_repr[] = "TokenNode.tree_repr";
static const char __pyx_k_curr_token_is_begin[] = "curr_token_is_begin";
static const char __pyx_k_curr_token_is_first[] = "curr_token_is_first";
static const char __pyx_k_ignored_before_curr[] = "ignored_before_curr";
static const char __pyx_k_index_to_go_back_to[] = "index_to_go_back_to";
static const char __pyx_k_src_typped_lexer_py[] = "src/typped/lexer.py";
static const char __pyx_k_TokenNode_label_repr[] = "TokenNode.label_repr";
static const char __pyx_k_TokenNode_value_repr[] = "TokenNode.value_repr";
static const char __pyx_k_TokenTable_def_token[] = "TokenTable.def_token";
static const char __pyx_k_def_begin_end_tokens[] = "def_begin_end_tokens";
static const char __pyx_k_get_unprocessed_text[] = "get_unprocessed_text";
static const char __pyx_k_test_test_matcher_py[] = "../../test/test_matcher.py";
static const char __pyx_k_the_peekahead_num_is[] = "the peekahead num is:";
static const char __pyx_k_token_label_to_match[] = "token_label_to_match";
static const char __pyx_k_undef_token_subclass[] = "undef_token_subclass";
static const char __pyx_k_Lexer___reduce_cython[] = "Lexer.__reduce_cython__";
static const char __pyx_k_Lexer_set_token_table[] = "Lexer.set_token_table";
static const char __pyx_k_TokenBuffer_get_state[] = "TokenBuffer.get_state";
static const char __pyx_k_TokenBuffer_move_back[] = "TokenBuffer.move_back";
static const char __pyx_k_char_index_in_program[] = "char_index_in_program";
static const char __pyx_k_ignored_before_labels[] = "ignored_before_labels";
static const char __pyx_k_is_begin_or_end_token[] = "is_begin_or_end_token";
static const char __pyx_k_Lexer_def_multi_tokens[] = "Lexer.def_multi_tokens";
static const char __pyx_k_Lexer_go_back_to_state[] = "Lexer.go_back_to_state";
static const char __pyx_k_Lexer_no_ignored_after[] = "Lexer.no_ignored_after";
static const char __pyx_k_TokenNode_is_end_token[] = "TokenNode.is_end_token";
static const char __pyx_k_TokenNode_summary_repr[] = "TokenNode.summary_repr";
static const char __pyx_k_TokenTable_undef_token[] = "TokenTable.undef_token";
static const char __pyx_k_def_default_whitespace[] = "def_default_whitespace";
static const char __pyx_k_is_defined_token_label[] = "is_defined_token_label";
static const char __pyx_k_return_first_exception[] = "return_first_exception";
static const char __pyx_k_Lexer___setstate_cython[] = "Lexer.__setstate_cython__";
static const char __pyx_k_Lexer_curr_token_is_end[] = "Lexer.curr_token_is_end";
static const char __pyx_k_Lexer_def_ignored_token[] = "Lexer.def_ignored_token";
static const char __pyx_k_Lexer_get_current_state[] = "Lexer.get_current_state";
static const char __pyx_k_Lexer_in_ignored_tokens[] = "Lexer.in_ignored_tokens";
static const char __pyx_k_Lexer_no_ignored_before[] = "Lexer.no_ignored_before";
static const char __pyx_k_TokenNode_original_text[] = "TokenNode.original_text";
static const char __pyx_k_initialize_token_buffer[] = "_initialize_token_buffer";
static const char __pyx_k_non_ignored_token_count[] = "non_ignored_token_count";
static const char __pyx_k_original_matched_string[] = "original_matched_string";
static const char __pyx_k_pyx_unpickle_TokenTable[] = "__pyx_unpickle_TokenTable";
static const char __pyx_k_unbuffered_token_getter[] = "_unbuffered_token_getter";
static const char __pyx_k_Lexer_get_processed_text[] = "Lexer.get_processed_text";
static const char __pyx_k_TokenBuffer_move_forward[] = "TokenBuffer.move_forward";
static const char __pyx_k_TokenNode_convert_to_AST[] = "TokenNode.convert_to_AST";
static const char __pyx_k_TokenNode_is_begin_token[] = "TokenNode.is_begin_token";
static const char __pyx_k_TokenTable_def_end_token[] = "TokenTable.def_end_token";
static const char __pyx_k_def_multi_ignored_tokens[] = "def_multi_ignored_tokens";
static const char __pyx_k_default_begin_end_tokens[] = "default_begin_end_tokens";
static const char __pyx_k_num_tokens_after_current[] = "num_tokens_after_current";
static const char __pyx_k_pattern_matcher_instance[] = "pattern_matcher_instance";
static const char __pyx_k_prog_unprocessed_indices[] = "prog_unprocessed_indices";
static const char __pyx_k_pyx_unpickle_TokenBuffer[] = "__pyx_unpickle_TokenBuffer";
static const char __pyx_k_Lexer_curr_token_is_begin[] = "Lexer.curr_token_is_begin";
static const char __pyx_k_Lexer_curr_token_is_first[] = "Lexer.curr_token_is_first";
static const char __pyx_k_Lexer_ignored_before_curr[] = "Lexer.ignored_before_curr";
static const char __pyx_k_TokenNode_append_children[] = "TokenNode.append_children";
static const char __pyx_k_TokenTable_ignored_tokens[] = "TokenTable.ignored_tokens";
static const char __pyx_k_num_saved_previous_tokens[] = "num_saved_previous_tokens";
static const char __pyx_k_test_test_pratt_parser_py[] = "../../test/test_pratt_parser.py";
static const char __pyx_k_Lexer_def_begin_end_tokens[] = "Lexer.def_begin_end_tokens";
static const char __pyx_k_Lexer_get_unprocessed_text[] = "Lexer.get_unprocessed_text";
static const char __pyx_k_TokenNode_string_tree_repr[] = "TokenNode.string_tree_repr";
static const char __pyx_k_TokenNode_traditional_repr[] = "TokenNode.traditional_repr";
static const char __pyx_k_TokenTable___reduce_cython[] = "TokenTable.__reduce_cython__";
static const char __pyx_k_TokenTable_def_begin_token[] = "TokenTable.def_begin_token";
static const char __pyx_k_pyx_unpickle_GenTokenState[] = "__pyx_unpickle_GenTokenState";
static const char __pyx_k_returning_token_with_value[] = "returning token with value:";
static const char __pyx_k_token_subclass_factory_fun[] = "token_subclass_factory_fun";
static const char __pyx_k_ERROR_MSG_TEXT_SNIPPET_SIZE[] = "ERROR_MSG_TEXT_SNIPPET_SIZE";
static const char __pyx_k_TokenBuffer___reduce_cython[] = "TokenBuffer.__reduce_cython__";
static const char __pyx_k_TokenBuffer_state_to_offset[] = "TokenBuffer.state_to_offset";
static const char __pyx_k_last_n_tokens_original_text[] = "last_n_tokens_original_text";
static const char __pyx_k_Lexer_def_default_whitespace[] = "Lexer.def_default_whitespace";
static const char __pyx_k_Lexer_is_defined_token_label[] = "Lexer.is_defined_token_label";
static const char __pyx_k_TokenTable___setstate_cython[] = "TokenTable.__setstate_cython__";
static const char __pyx_k_basic_token_subclass_factory[] = "basic_token_subclass_factory";
static const char __pyx_k_GenTokenState___reduce_cython[] = "GenTokenState.__reduce_cython__";
static const char __pyx_k_TokenBuffer___setstate_cython[] = "TokenBuffer.__setstate_cython__";
static const char __pyx_k_Lexer__initialize_token_buffer[] = "Lexer._initialize_token_buffer";
static const char __pyx_k_Lexer__unbuffered_token_getter[] = "Lexer._unbuffered_token_getter";
static const char __pyx_k_Lexer_def_multi_ignored_tokens[] = "Lexer.def_multi_ignored_tokens";
static const char __pyx_k_get_next_token_label_and_value[] = "get_next_token_label_and_value";
static const char __pyx_k_shared_settings_and_exceptions[] = "shared_settings_and_exceptions";
static const char __pyx_k_A_Lexer_class_instance_is_a_gen[] = "\n\nA `Lexer` class instance is a general lexer/scanner/tokenizer.  It was designed\nto be used by the `PrattParser` class, but it can also be used for other\nlexical scanning applications.\n\nThe general purpose of the `Lexer` is to take a string of text and produce a\ncorresponding sequence of tokens from the text.  The set of possible tokens is\ndefined by the user, with a string label and a regex pattern that is searched\nfor in the program text.  Once initialized with text a `Lexer` instance is a\ngenerator which sequentially produces tokens with its `next` method.  It is\nalso an iterator, so it can be used in loops, etc.\n\nWith some lexers the order in which tokens are defined is significant.  They\nmatch regexes from a list of regexes, taking the first match without regard\nto the length of the match.  The\n`Lexer` class was designed to function independently of the order in which\ntokens are defined.  The longest match is always returned, with ties broken\nby an explicit priority mechanism.  This allows token definitions to be\norganized in various ways.   They can all be done in one\nplace or spread around in the code in any order, however the programmer wants\nto do it.\n\nDefining tokens\n===============\n\nThis section describes the low-level definition of tokens when using `Lexer` as\na standalone application.  To use tokens with a `PrattParser` instance, though,\nyou need to use the corresponding `def_token` method of the `PrattParser`\nclass.  That class adds extra attributes, methods, etc., to the tokens.  The\ninterface is generally the same.\n\nA token for a left parenthesis would be defined like this::\n\n    lex = typped.Lexer()\n    lex.def_token(\"k_lpar\", r\"lpar\")\n\nThe string `k_lpar` is a label for the token.  The use of the string prefix\n\"`k_`\" is a naming convention for token labels.  An identifier token could be\ndefined like this::\n\n    lex.def_token(\"k_identifier\", r\"[a-zA-Z_](?:\\w*)\", on_ties=-1)\n\nNotice that in the d""efinition of the identifier the keyword argument `on_ties`\nis set to -1.  The lexer will by default always choose the longest string which\nmatches a defined regex pattern for a token.  If there is a tie then, by\ndefault, an exception will be raised.  The `on_ties` value is used to break\nties; strings of the same length are sorted by that value and the\nhighest-priority string is chosen.  The default `on_ties` value is `0`.  Suppose\nyou also wanted a token for the string `mod`, and defined it as::\n\n    lex.def_token(\"k_mod\", r\"mod\")\n\nSince this token has a higher `on_ties` value, it will always take precedence over\nthe identifier token, even though both match and have the same length.\n\nBegin and end tokens\n====================\n\nThe lexer uses sentinel begin-token and end-token tokens for the beginning and\nthe end of the token sequence for text.  These tokens must be explicitly\ndefined (i.e., given string labels) either by calling `def_begin_end_tokens`::\n\n    lex.def_begin_end_tokens(\"k_begin\", \"k_end\")\n\nor else by setting the `default_begin_end_tokens` flag to `True` when\ninitializing the lexer::\n\n    lex = Lexer(def_begin_end_tokens=True)\n\nThe default tokens have the labels `k_begin` and `k_end`.\n\nThe begin-token is never explicitly returned.  After the call to `set_text` to\ndefine the text to tokenize and before any calls to `next` the begin-token is\nthe current token `lexer.token`.  So `lex.token` and `lex.peek(0)` would both\nreturn the begin token.\n\nAfter the end of the text the `next` method explicitly returns one end-token.\nCalling `next` again raises `StopIteration` and halts the lexing of the\ncurrently-set text.  All peeks beyond the end of the text are reported as\nend-tokens.\n\nUsing the lexer\n===============\n\nThis is a simple example of using the lexer.  Notice that multiple token definitions\ncan be combined using the `def_multi_tokens` method.  It is usually better to\ndefine a shorter alias for the functio""n call, however.::\n\n    lex = Lexer()\n\n    lex.def_begin_end_tokens(\"k_begin\", \"k_end\")\n    lex.def_token(\"k_space\", r\"[ \\t]+\", ignore=True) # note + NOT *\n    lex.def_token(\"k_newline\", r\"[\\n\\f\\r\\v]+\", ignore=True) # note + NOT *\n    tokens = [\n        (\"k_identifier\", r\"[a-zA-Z_](?:\\w*)\")\n        (\"k_plus\", r\"\\+\")\n        ]\n    lex.def_multi_tokens(tokens)\n\n    lex.set_text(\"x  + y\")\n\n    for t in lex:\n        print(t)\n\nThe result is as follows:\n::\n\n    <k_identifier,x>\n    <k_plus,+>\n    <k_identifier,y>\n    <k_end,None>\n\nNotice that the end-token is actually returned, but the begin-token is not.\nThe method `def_default_whitespace` could alternately be used to define the\nwhitespace tokens.\n\nUser-accessible methods and attributes of `Lexer`\n=================================================\n\nThe lexer class has many utility methods and user-accessible attributes.  Some\nof the main ones are listed here.  One of the most commonly-accessed attributes\nof a lexer `lex` is the current token, `lex.token`.\n\nGeneral methods:\n\n* `next` --- return the next token\n* `peek` --- peek at the next token without consuming it\n* `go_back` --- go back in the text stream by some number of tokens\n\nHelper methods:\n\n* `match_next` --- matches the specified token, with various options\n* `in_ignored_tokens` --- test if some particular token was ignored before the current one\n* `no_ignored_after` --- true if no ignored tokens immediately follow current token\n* `no_ignored_before` --- true if no ignored tokens immediately preceed current token\n\nSome boolean-valued informational methods:\n\n* `curr_token_is_first` --- true if the current token is the first returned\n* `text_is_set` --- true only when text is currently set for scanning\n\nOther attributes:\n\n* `token` --- the current token (the most recent one returned by `next`)\n* `all_token_count` --- num of tokens since text was set (begin and end not counted)""\n* `non_ignored_token_count` --- num of not-ignored tokens since text was set\n* `default_helper_exception` --- the default exception for helpers like `match_next`\n* `text_is_set` --- whether or not text has been set for the lexer\n\nTODO, list more, and why not make some of these methods of `TokenNode` instead?\n\nUser-accessible attributes of tokens\n====================================\n\nThe tokens returned by the lexer are instances of a subclass of the class\n`TokenNode` (named that since the parser combines them into the nodes of a\nparse tree).  The subclasses themselves represent the general kind of token,\nfor example if `k_identifier` was defined as a token label then a particular\nsubclass of `TokenNode` would be created to represent identifiers in general.\nThe particular instances of identifiers, found in the lexed text with their\nactual string values, are represented by instances of the general class for\nidentifiers.\n\nUser-accessible methods of tokens.\n\n* `is_begin_token` --- true when tokens is a begin token\n* `is_end_token` --- true when tokens is a end token\n* `is_begin_or_end_token` --- true when tokens is a begin_or_end_token\n* `ignored_before_labels` --- just the token labels of the tokens ignored before\n\nFor a token named `t`, these attributes are available:\n\n* `t.token_label` --- the string label of the token (which was defined with it)\n* `t.value` --- the string value for the token, found in the lexed text\n* `t.is_first` --- true iff this is the first non-begin token in the text\n* `t.is_first_on_line` --- true iff this is the first token returned for a line\n* `t.parent` --- can be set to the parent in a tree; set by the lexer to `None`\n* `t.children` --- can be set to a list of children; set by the lexer to `[]`\n* `t.original_matched_string` --- the original text that was consumed for this token\n* `t.line_and_char` --- tuple of line number and character where the token started\n* `t.char_index_in_program` --- the index o""f this token into the text set via `set_text`\n* `t.ignored_before` --- a tuple of all tokens ignored immediately before this one\n\nTODO, list other methods, too.\n\nInitialization options\n======================\n\nThere are several options that can be set on initialization, including the\nlevel of token lookahead that is supported.\n\nTODO\n\nCode\n====\n\n";
static const char __pyx_k_A_token_with_label_0_is_already[] = "A token with label '{0}' is already defined.  It must be undefined before it can be redefined.";
static const char __pyx_k_Attempt_to_call_lexer_s_go_back[] = "Attempt to call lexer's go_back method when no text is set.";
static const char __pyx_k_GenTokenState___setstate_cython[] = "GenTokenState.__setstate_cython__";
static const char __pyx_k_No_token_with_label_0_is_in_the[] = "No token with label '{0}' is in the token table.";
static const char __pyx_k_Not_enough_saved_tokens_to_move[] = "Not enough saved tokens to move back to the begin-token in the `move_back` method.";
static const char __pyx_k_Raised_on_attempts_to_read_past[] = "Raised on attempts to read past the beginning or the end of the buffer\n    (such as in `peek` methods).";
static const char __pyx_k_TokenNode_ignored_before_labels[] = "TokenNode.ignored_before_labels";
static const char __pyx_k_TokenNode_is_begin_or_end_token[] = "TokenNode.is_begin_or_end_token";
static const char __pyx_k_TokenTable_get_next_token_label[] = "TokenTable.get_next_token_label_and_value";
static const char __pyx_k_TokenTable_undef_token_subclass[] = "TokenTable.undef_token_subclass";
static const char __pyx_k_Attempt_to_call_lexer_s_next_met[] = "Attempt to call lexer's next method when no text is set.";
static const char __pyx_k_Attempt_to_call_lexer_s_peek_met[] = "Attempt to call lexer's peek method when no text is set.";
static const char __pyx_k_Bad_multi_definition_of_0_Omitte[] = "Bad multi-definition of {0}: Omitted required arguments or bad keyword arguments passed in.  Error on this tuple:\n{1}\nwith keyword arguments\n{2}";
static const char __pyx_k_Begin_and_end_tokens_must_be_def[] = "Begin and end tokens must be defined by calling `def_begin_end_tokens` before set_text can be called.";
static const char __pyx_k_Error_in_TokenBuffer_Maximum_buf[] = "Error in TokenBuffer: Maximum buffer size is too small for the amount of peeking. Current token was deleted.";
static const char __pyx_k_Function_in_ignored_tokens_expec[] = "Function in_ignored_tokens expected token with label '{0}' before the current token {1}, but it was not found.";
static const char __pyx_k_Function_in_ignored_tokens_found[] = "Function in_ignored_tokens found unexpected token with label '{0}' before the current token {1}.";
static const char __pyx_k_Function_match_next_with_peeklev[] = "Function match_next (with peeklevel={0}) found unexpected token {1}.  The text of the {2} tokens up to the error is: {3}";
static const char __pyx_k_Function_no_ignored_after_expect[] = "Function no_ignored_after expected tokens between the current token {0} and the following token {1}, but there were none.";
static const char __pyx_k_Function_no_ignored_before_expec[] = "Function no_ignored_before expected ignored tokens before  the current token {0}, but none were found.";
static const char __pyx_k_In__create_token_subclass_alread[] = "In `_create_token_subclass`, already created the token subclass for token_label '{0}'.";
static const char __pyx_k_Incompatible_checksums_s_vs_0x69[] = "Incompatible checksums (%s vs 0x6999650 = (current_offset, max_deque_size, max_peek, reference_point, token_buffer, token_getter_fun))";
static const char __pyx_k_Incompatible_checksums_s_vs_0xd1[] = "Incompatible checksums (%s vs 0xd1c1092 = (_curr_token_is_first, _returned_first_token, all_token_count, already_returned_end_token, default_helper_exception, final_mod_function, non_ignored_token_count, prog_unprocessed, program, raw_linenumber, text_is_set, token, token_buffer, token_generator_state, token_table, upcoming_raw_charnumber, upcoming_raw_linenumber, upcoming_raw_total_chars))";
static const char __pyx_k_Incompatible_checksums_s_vs_0xd4[] = "Incompatible checksums (%s vs 0xd41d8cd = ())";
static const char __pyx_k_Incompatible_checksums_s_vs_0xe1[] = "Incompatible checksums (%s vs 0xe1e7798 = (begin_token_label, begin_token_subclass, end_token_label, end_token_subclass, lex, pattern_matcher, token_subclass_dict, token_subclassing_fun))";
static const char __pyx_k_Invalid_argument_type_in___getit[] = "Invalid argument type in __getitem__ of TokenBuffer.";
static const char __pyx_k_Lexer_last_n_tokens_original_tex[] = "Lexer.last_n_tokens_original_text";
static const char __pyx_k_The_base_class_for_token_objects[] = "The base class for token objects.  Each different kind of token is represented\n    by a subclass of this class.  Instances of the tokens in the program text are\n    represented by instances of the subclass for that kind of token.\n\n    The attribute `token_label` is the string token label for the kind of token\n    represented by an instance.  The attribute `value` is set to the actual\n    string value in the lexed text which matched the regex of the token.  The\n    attribute `ignored_before` is a tuple of all tokens ignored just\n    before the lexer got this token.\n\n    The attribute `children` is a list of the child nodes, and `parent` is the\n    parent.  Indexing a `TokenNode` class also returns the corresponding child\n    node, i.e. `t_node[0]` would be the leftmost child.";
static const char __pyx_k_The_token_generator_has_not_been[] = "The token generator has not been initialized or has reached `StopIteration` by reading past the end-token.";
static const char __pyx_k_This_is_the_class_returned_by_th[] = "This is the class returned by the factory function.";
static const char __pyx_k_TokenBuffer_num_saved_previous_t[] = "TokenBuffer.num_saved_previous_tokens";
static const char __pyx_k_TokenBuffer_num_tokens_after_cur[] = "TokenBuffer.num_tokens_after_current";
static const char __pyx_k_TokenNode_string_tree_repr_local[] = "TokenNode.string_tree_repr.<locals>.genexpr";
static const char __pyx_k_Undefined_key_in_token_table_for[] = "Undefined key in token table for token_label '{0}'.";
static const char __pyx_k_User_set_maximum_peeking_level_o[] = "User-set maximum peeking level of {0} was exceeded.";
static const char __pyx_k_basic_token_subclass_factory_loc[] = "basic_token_subclass_factory.<locals>.TokenSubclass";
static const char __pyx_k_convert_TokenNode_to_AST_node_fu[] = "convert_TokenNode_to_AST_node_fun";
static const char __pyx_k_Function_match_next_with_peeklev_2[] = "Function match_next (with peeklevel={0}) expected token with label '{1}' but found token {2}.  The text parsed from the tokens up to the error is: {3}";
static const char __pyx_k_Function_no_ignored_after_expect_2[] = "Function no_ignored_after expected nothing between the current token {0} and the following token {1}, but there were ignored tokens.";
static const char __pyx_k_Function_no_ignored_before_expec_2[] = "Function no_ignored_before expected no ignored tokens before the current token {0}, but at least one was found.";
static const char __pyx_k_basic_token_subclass_factory_loc_2[] = "basic_token_subclass_factory.<locals>.TokenSubclass.__init__";
static PyObject *__pyx_kp_s_;
static PyObject *__pyx_kp_s_0_1;
static PyObject *__pyx_kp_s_A_token_with_label_0_is_already;
static PyObject *__pyx_kp_s_Attempt_to_call_lexer_s_go_back;
static PyObject *__pyx_kp_s_Attempt_to_call_lexer_s_next_met;
static PyObject *__pyx_kp_s_Attempt_to_call_lexer_s_peek_met;
static PyObject *__pyx_kp_s_Bad_multi_definition_of_0_Omitte;
static PyObject *__pyx_kp_s_Begin_and_end_tokens_must_be_def;
static PyObject *__pyx_n_s_BufferIndexError;
static PyObject *__pyx_n_s_DEFAULT_BEGIN;
static PyObject *__pyx_n_s_DEFAULT_END;
static PyObject *__pyx_n_s_ERROR_MSG_TEXT_SNIPPET_SIZE;
static PyObject *__pyx_kp_s_Error_in_TokenBuffer_Maximum_buf;
static PyObject *__pyx_kp_s_Function_in_ignored_tokens_expec;
static PyObject *__pyx_kp_s_Function_in_ignored_tokens_found;
static PyObject *__pyx_kp_s_Function_match_next_with_peeklev;
static PyObject *__pyx_kp_s_Function_match_next_with_peeklev_2;
static PyObject *__pyx_kp_s_Function_no_ignored_after_expect;
static PyObject *__pyx_kp_s_Function_no_ignored_after_expect_2;
static PyObject *__pyx_kp_s_Function_no_ignored_before_expec;
static PyObject *__pyx_kp_s_Function_no_ignored_before_expec_2;
static PyObject *__pyx_n_s_GenTokenState___reduce_cython;
static PyObject *__pyx_n_s_GenTokenState___setstate_cython;
static PyObject *__pyx_kp_s_In__create_token_subclass_alread;
static PyObject *__pyx_kp_s_Incompatible_checksums_s_vs_0x69;
static PyObject *__pyx_kp_s_Incompatible_checksums_s_vs_0xd1;
static PyObject *__pyx_kp_s_Incompatible_checksums_s_vs_0xd4;
static PyObject *__pyx_kp_s_Incompatible_checksums_s_vs_0xe1;
static PyObject *__pyx_n_s_IndexError;
static PyObject *__pyx_kp_s_Invalid_argument_type_in___getit;
static PyObject *__pyx_n_s_KeyError;
static PyObject *__pyx_n_s_LexerException;
static PyObject *__pyx_n_s_LexerState;
static PyObject *__pyx_n_s_Lexer___reduce_cython;
static PyObject *__pyx_n_s_Lexer___setstate_cython;
static PyObject *__pyx_n_s_Lexer__initialize_token_buffer;
static PyObject *__pyx_n_s_Lexer__unbuffered_token_getter;
static PyObject *__pyx_n_s_Lexer_curr_token_is_begin;
static PyObject *__pyx_n_s_Lexer_curr_token_is_end;
static PyObject *__pyx_n_s_Lexer_curr_token_is_first;
static PyObject *__pyx_n_s_Lexer_def_begin_end_tokens;
static PyObject *__pyx_n_s_Lexer_def_default_whitespace;
static PyObject *__pyx_n_s_Lexer_def_ignored_token;
static PyObject *__pyx_n_s_Lexer_def_multi_ignored_tokens;
static PyObject *__pyx_n_s_Lexer_def_multi_tokens;
static PyObject *__pyx_n_s_Lexer_def_token;
static PyObject *__pyx_n_s_Lexer_get_current_state;
static PyObject *__pyx_n_s_Lexer_get_processed_text;
static PyObject *__pyx_n_s_Lexer_get_unprocessed_text;
static PyObject *__pyx_n_s_Lexer_go_back;
static PyObject *__pyx_n_s_Lexer_go_back_to_state;
static PyObject *__pyx_n_s_Lexer_ignored_before_curr;
static PyObject *__pyx_n_s_Lexer_in_ignored_tokens;
static PyObject *__pyx_n_s_Lexer_is_defined_token_label;
static PyObject *__pyx_n_s_Lexer_last_n_tokens_original_tex;
static PyObject *__pyx_n_s_Lexer_match_next;
static PyObject *__pyx_n_s_Lexer_move_back;
static PyObject *__pyx_n_s_Lexer_next;
static PyObject *__pyx_n_s_Lexer_no_ignored_after;
static PyObject *__pyx_n_s_Lexer_no_ignored_before;
static PyObject *__pyx_n_s_Lexer_peek;
static PyObject *__pyx_n_s_Lexer_reset;
static PyObject *__pyx_n_s_Lexer_set_text;
static PyObject *__pyx_n_s_Lexer_set_token_table;
static PyObject *__pyx_n_s_Lexer_undef_token;
static PyObject *__pyx_n_s_Matcher;
static PyObject *__pyx_kp_s_No_token_with_label_0_is_in_the;
static PyObject *__pyx_n_s_NotImplementedError;
static PyObject *__pyx_kp_s_Not_enough_saved_tokens_to_move;
static PyObject *__pyx_n_s_PickleError;
static PyObject *__pyx_kp_s_Raised_on_attempts_to_read_past;
static PyObject *__pyx_n_s_StopIteration;
static PyObject *__pyx_kp_s_The_base_class_for_token_objects;
static PyObject *__pyx_kp_s_The_token_generator_has_not_been;
static PyObject *__pyx_kp_s_This_is_the_class_returned_by_th;
static PyObject *__pyx_n_s_TokenBuffer___reduce_cython;
static PyObject *__pyx_n_s_TokenBuffer___setstate_cython;
static PyObject *__pyx_n_s_TokenBuffer_get_state;
static PyObject *__pyx_n_s_TokenBuffer_move_back;
static PyObject *__pyx_n_s_TokenBuffer_move_forward;
static PyObject *__pyx_n_s_TokenBuffer_num_saved_previous_t;
static PyObject *__pyx_n_s_TokenBuffer_num_tokens_after_cur;
static PyObject *__pyx_n_s_TokenBuffer_reset;
static PyObject *__pyx_n_s_TokenBuffer_state_to_offset;
static PyObject *__pyx_n_s_TokenClass;
static PyObject *__pyx_kp_s_TokenNode;
static PyObject *__pyx_n_s_TokenNode_2;
static PyObject *__pyx_n_s_TokenNode___getitem;
static PyObject *__pyx_n_s_TokenNode___init;
static PyObject *__pyx_n_s_TokenNode_append_children;
static PyObject *__pyx_n_s_TokenNode_convert_to_AST;
static PyObject *__pyx_n_s_TokenNode_ignored_before_labels;
static PyObject *__pyx_n_s_TokenNode_is_begin_or_end_token;
static PyObject *__pyx_n_s_TokenNode_is_begin_token;
static PyObject *__pyx_n_s_TokenNode_is_end_token;
static PyObject *__pyx_n_s_TokenNode_label_repr;
static PyObject *__pyx_n_s_TokenNode_old_repr;
static PyObject *__pyx_n_s_TokenNode_original_text;
static PyObject *__pyx_n_s_TokenNode_string_tree_repr;
static PyObject *__pyx_n_s_TokenNode_string_tree_repr_local;
static PyObject *__pyx_n_s_TokenNode_summary_repr;
static PyObject *__pyx_n_s_TokenNode_traditional_repr;
static PyObject *__pyx_n_s_TokenNode_tree_repr;
static PyObject *__pyx_n_s_TokenNode_value_repr;
static PyObject *__pyx_n_s_TokenSubclass;
static PyObject *__pyx_n_s_TokenTable___reduce_cython;
static PyObject *__pyx_n_s_TokenTable___setstate_cython;
static PyObject *__pyx_n_s_TokenTable_def_begin_token;
static PyObject *__pyx_n_s_TokenTable_def_end_token;
static PyObject *__pyx_n_s_TokenTable_def_token;
static PyObject *__pyx_n_s_TokenTable_get_next_token_label;
static PyObject *__pyx_n_s_TokenTable_ignored_tokens;
static PyObject *__pyx_n_s_TokenTable_undef_token;
static PyObject *__pyx_n_s_TokenTable_undef_token_subclass;
static PyObject *__pyx_n_s_TypeError;
static PyObject *__pyx_kp_s_Undefined_key_in_token_table_for;
static PyObject *__pyx_kp_s_User_set_maximum_peeking_level_o;
static PyObject *__pyx_n_s_ValueError;
static PyObject *__pyx_kp_s__2;
static PyObject *__pyx_kp_s__21;
static PyObject *__pyx_kp_s__3;
static PyObject *__pyx_kp_s__4;
static PyObject *__pyx_kp_s__5;
static PyObject *__pyx_kp_s__6;
static PyObject *__pyx_kp_s__7;
static PyObject *__pyx_kp_s__8;
static PyObject *__pyx_n_s_a;
static PyObject *__pyx_n_s_all_token_count;
static PyObject *__pyx_n_s_append;
static PyObject *__pyx_n_s_append_children;
static PyObject *__pyx_n_s_args;
static PyObject *__pyx_n_s_ast_node;
static PyObject *__pyx_n_s_basic_token_subclass_factory;
static PyObject *__pyx_n_s_basic_token_subclass_factory_loc;
static PyObject *__pyx_n_s_basic_token_subclass_factory_loc_2;
static PyObject *__pyx_n_s_begin_tok;
static PyObject *__pyx_n_s_begin_token;
static PyObject *__pyx_n_s_begin_token_label;
static PyObject *__pyx_n_s_c;
static PyObject *__pyx_n_s_char_index_in_program;
static PyObject *__pyx_n_s_child;
static PyObject *__pyx_n_s_children;
static PyObject *__pyx_n_s_clear;
static PyObject *__pyx_n_s_cline_in_traceback;
static PyObject *__pyx_n_s_close;
static PyObject *__pyx_n_s_collections;
static PyObject *__pyx_n_s_consume;
static PyObject *__pyx_n_s_convert_TokenNode_to_AST_node_fu;
static PyObject *__pyx_n_s_convert_to_AST;
static PyObject *__pyx_n_s_count;
static PyObject *__pyx_n_s_curr_token_is_begin;
static PyObject *__pyx_n_s_curr_token_is_end;
static PyObject *__pyx_n_s_curr_token_is_first;
static PyObject *__pyx_n_s_def_begin_end_tokens;
static PyObject *__pyx_n_s_def_begin_token;
static PyObject *__pyx_n_s_def_default_whitespace;
static PyObject *__pyx_n_s_def_end_token;
static PyObject *__pyx_n_s_def_ignored_token;
static PyObject *__pyx_n_s_def_multi_ignored_tokens;
static PyObject *__pyx_n_s_def_multi_tokens;
static PyObject *__pyx_n_s_def_token;
static PyObject *__pyx_n_s_default_begin_end_tokens;
static PyObject *__pyx_n_s_deque;
static PyObject *__pyx_n_s_dict;
static PyObject *__pyx_n_s_dict_2;
static PyObject *__pyx_n_s_doc;
static PyObject *__pyx_n_s_end;
static PyObject *__pyx_n_s_end_tok;
static PyObject *__pyx_n_s_end_token_label;
static PyObject *__pyx_n_s_err_msg_tokens;
static PyObject *__pyx_n_s_exception_to_raise;
static PyObject *__pyx_n_s_final_mod_function;
static PyObject *__pyx_n_s_format;
static PyObject *__pyx_n_s_full_string;
static PyObject *__pyx_n_s_function;
static PyObject *__pyx_n_s_genexpr;
static PyObject *__pyx_n_s_get_current_state;
static PyObject *__pyx_n_s_get_next_token_label_and_value;
static PyObject *__pyx_n_s_get_processed_text;
static PyObject *__pyx_n_s_get_state;
static PyObject *__pyx_n_s_get_unprocessed_text;
static PyObject *__pyx_n_s_getitem;
static PyObject *__pyx_n_s_go_back;
static PyObject *__pyx_n_s_go_back_to_state;
static PyObject *__pyx_n_s_ignore;
static PyObject *__pyx_n_s_ignored_before;
static PyObject *__pyx_n_s_ignored_before_curr;
static PyObject *__pyx_n_s_ignored_before_labels;
static PyObject *__pyx_n_s_ignored_tokens;
static PyObject *__pyx_n_s_import;
static PyObject *__pyx_n_s_in_ignored_tokens;
static PyObject *__pyx_n_s_indent;
static PyObject *__pyx_n_s_index;
static PyObject *__pyx_n_s_index_to_go_back_to;
static PyObject *__pyx_n_s_init;
static PyObject *__pyx_n_s_initialize_token_buffer;
static PyObject *__pyx_n_s_is_begin_or_end_token;
static PyObject *__pyx_n_s_is_begin_token;
static PyObject *__pyx_n_s_is_defined_token_label;
static PyObject *__pyx_n_s_is_end_token;
static PyObject *__pyx_n_s_is_first;
static PyObject *__pyx_n_s_is_first_on_line;
static PyObject *__pyx_n_s_is_subclass_of;
static PyObject *__pyx_n_s_item;
static PyObject *__pyx_n_s_join;
static PyObject *__pyx_n_s_k_begin;
static PyObject *__pyx_n_s_k_end;
static PyObject *__pyx_n_s_k_lpar;
static PyObject *__pyx_kp_s_k_lpar_0_k_rpar;
static PyObject *__pyx_n_s_k_newline;
static PyObject *__pyx_n_s_k_number;
static PyObject *__pyx_n_s_k_space;
static PyObject *__pyx_n_s_kwargs;
static PyObject *__pyx_n_s_label_repr;
static PyObject *__pyx_n_s_last_n_tokens_original_text;
static PyObject *__pyx_n_s_line_and_char;
static PyObject *__pyx_kp_s_literal_0;
static PyObject *__pyx_kp_s_literal_k_lpar;
static PyObject *__pyx_n_s_main;
static PyObject *__pyx_n_s_match_next;
static PyObject *__pyx_n_s_matcher;
static PyObject *__pyx_n_s_matcher_options;
static PyObject *__pyx_n_s_max_deque_size;
static PyObject *__pyx_n_s_max_peek;
static PyObject *__pyx_n_s_max_peek_tokens;
static PyObject *__pyx_n_s_maxlen;
static PyObject *__pyx_n_s_metaclass;
static PyObject *__pyx_n_s_module;
static PyObject *__pyx_n_s_move_back;
static PyObject *__pyx_n_s_move_forward;
static PyObject *__pyx_n_s_multi_funcall;
static PyObject *__pyx_n_s_n;
static PyObject *__pyx_kp_s_n_f_r_v;
static PyObject *__pyx_n_s_name;
static PyObject *__pyx_n_s_namedtuple;
static PyObject *__pyx_n_s_new;
static PyObject *__pyx_n_s_new_subclass;
static PyObject *__pyx_n_s_newline_label;
static PyObject *__pyx_n_s_newline_regex;
static PyObject *__pyx_n_s_next;
static PyObject *__pyx_n_s_no_ignored_after;
static PyObject *__pyx_n_s_no_ignored_before;
static PyObject *__pyx_n_s_non_ignored_token_count;
static PyObject *__pyx_n_s_num;
static PyObject *__pyx_n_s_num_indent;
static PyObject *__pyx_n_s_num_is_raw;
static PyObject *__pyx_n_s_num_saved_previous_tokens;
static PyObject *__pyx_n_s_num_to_go_back;
static PyObject *__pyx_n_s_num_tokens_after_current;
static PyObject *__pyx_n_s_num_toks;
static PyObject *__pyx_n_s_object;
static PyObject *__pyx_n_s_old_repr;
static PyObject *__pyx_n_s_on_ties;
static PyObject *__pyx_n_s_only_labels;
static PyObject *__pyx_n_s_only_vals;
static PyObject *__pyx_n_s_ordinary;
static PyObject *__pyx_n_s_original_matched_string;
static PyObject *__pyx_n_s_original_text;
static PyObject *__pyx_n_s_parent;
static PyObject *__pyx_n_s_pattern_matcher_instance;
static PyObject *__pyx_n_s_peek;
static PyObject *__pyx_n_s_peeklevel;
static PyObject *__pyx_n_s_pickle;
static PyObject *__pyx_n_s_pop;
static PyObject *__pyx_n_s_popleft;
static PyObject *__pyx_n_s_prepare;
static PyObject *__pyx_n_s_prev_tokens;
static PyObject *__pyx_n_s_print;
static PyObject *__pyx_n_s_prog_unprocessed_indices;
static PyObject *__pyx_n_s_program;
static PyObject *__pyx_n_s_pytest_args;
static PyObject *__pyx_n_s_pytest_helper;
static PyObject *__pyx_n_s_pyx_checksum;
static PyObject *__pyx_n_s_pyx_state;
static PyObject *__pyx_n_s_pyx_type;
static PyObject *__pyx_n_s_pyx_unpickle_GenTokenState;
static PyObject *__pyx_n_s_pyx_unpickle_Lexer;
static PyObject *__pyx_n_s_pyx_unpickle_TokenBuffer;
static PyObject *__pyx_n_s_pyx_unpickle_TokenTable;
static PyObject *__pyx_n_s_pyx_vtable;
static PyObject *__pyx_n_s_qualname;
static PyObject *__pyx_n_s_raise_on_fail;
static PyObject *__pyx_n_s_raise_on_success;
static PyObject *__pyx_n_s_range;
static PyObject *__pyx_n_s_reduce_cython;
static PyObject *__pyx_n_s_regex_string;
static PyObject *__pyx_n_s_repr;
static PyObject *__pyx_n_s_reset;
static PyObject *__pyx_n_s_reset_charnumber;
static PyObject *__pyx_n_s_reset_linenumber;
static PyObject *__pyx_n_s_result;
static PyObject *__pyx_n_s_return_first_exception;
static PyObject *__pyx_kp_s_returning_token_with_value;
static PyObject *__pyx_n_s_retval_list;
static PyObject *__pyx_n_s_rfind;
static PyObject *__pyx_n_s_s;
static PyObject *__pyx_n_s_script_run;
static PyObject *__pyx_n_s_self;
static PyObject *__pyx_n_s_send;
static PyObject *__pyx_n_s_set_text;
static PyObject *__pyx_n_s_set_token_table;
static PyObject *__pyx_n_s_setstate_cython;
static PyObject *__pyx_n_s_shared_settings_and_exceptions;
static PyObject *__pyx_n_s_space_label;
static PyObject *__pyx_n_s_space_regex;
static PyObject *__pyx_kp_s_src_typped_lexer_py;
static PyObject *__pyx_n_s_state;
static PyObject *__pyx_n_s_state_to_offset;
static PyObject *__pyx_n_s_str_val;
static PyObject *__pyx_n_s_string;
static PyObject *__pyx_n_s_string_list;
static PyObject *__pyx_n_s_string_tree_repr;
static PyObject *__pyx_kp_s_stringsource;
static PyObject *__pyx_n_s_summary_repr;
static PyObject *__pyx_n_s_super;
static PyObject *__pyx_kp_s_t;
static PyObject *__pyx_n_s_t_2;
static PyObject *__pyx_n_s_tb;
static PyObject *__pyx_n_s_test;
static PyObject *__pyx_kp_s_test_test_lexer_py;
static PyObject *__pyx_kp_s_test_test_matcher_py;
static PyObject *__pyx_kp_s_test_test_pratt_parser_py;
static PyObject *__pyx_n_s_text;
static PyObject *__pyx_kp_s_the_peekahead_num_is;
static PyObject *__pyx_n_s_throw;
static PyObject *__pyx_n_s_tok;
static PyObject *__pyx_n_s_token_getter_fun;
static PyObject *__pyx_n_s_token_label;
static PyObject *__pyx_n_s_token_label_to_match;
static PyObject *__pyx_n_s_token_nodes;
static PyObject *__pyx_n_s_token_subclass_factory_fun;
static PyObject *__pyx_n_s_token_table;
static PyObject *__pyx_n_s_traditional_repr;
static PyObject *__pyx_n_s_tree_repr;
static PyObject *__pyx_n_s_tuple_list;
static PyObject *__pyx_n_s_typped_lexer;
static PyObject *__pyx_n_s_unbuffered_token_getter;
static PyObject *__pyx_n_s_undef_pattern;
static PyObject *__pyx_n_s_undef_token;
static PyObject *__pyx_n_s_undef_token_subclass;
static PyObject *__pyx_n_s_uninitialized;
static PyObject *__pyx_n_s_update;
static PyObject *__pyx_n_s_use_setstate;
static PyObject *__pyx_kp_s_v;
static PyObject *__pyx_n_s_value;
static PyObject *__pyx_n_s_value_repr;
static PyObject *__pyx_n_s_value_str;
static PyObject *__pyx_n_s_x;
static PyObject *__pyx_n_s_y;
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_2original_text(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_4ignored_before_labels(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_6append_children(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_token_nodes); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_8__getitem__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_index); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_10convert_to_AST(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_convert_TokenNode_to_AST_node_fun); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_12is_begin_token(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_14is_end_token(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_16is_begin_or_end_token(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_18traditional_repr(CYTHON_UNUSED PyObject *__pyx_self, CYTHON_UNUSED PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_20value_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_22label_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_24summary_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_26tree_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_indent); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_16string_tree_repr_genexpr(PyObject *__pyx_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_28string_tree_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_only_vals, PyObject *__pyx_v_only_labels); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_30old_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_28basic_token_subclass_factory_13TokenSubclass___init__(PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_basic_token_subclass_factory(CYTHON_UNUSED PyObject *__pyx_self); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable___init__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_subclass_factory_fun, PyObject *__pyx_v_pattern_matcher_instance); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_2__contains__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_4__getitem__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_6undef_token_subclass(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_8undef_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_10def_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label, PyObject *__pyx_v_regex_string, PyObject *__pyx_v_on_ties, int __pyx_v_ignore, PyObject *__pyx_v_matcher_options); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_12def_begin_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_begin_token_label); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_14def_end_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_end_token_label); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_16get_next_token_label_and_value(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_program, PyObject *__pyx_v_prog_unprocessed_indices, long __pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_18ignored_tokens(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_19token_subclass_dict___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_19token_subclass_dict_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_19token_subclass_dict_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_3lex___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_3lex_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_3lex_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_17begin_token_label___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_17begin_token_label_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_17begin_token_label_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_15end_token_label___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_15end_token_label_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_15end_token_label_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_20begin_token_subclass___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_20begin_token_subclass_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_20begin_token_subclass_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_18end_token_subclass___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_18end_token_subclass_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_10TokenTable_18end_token_subclass_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_20__reduce_cython__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_22__setstate_cython__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
static int __pyx_pf_6typped_5lexer_11TokenBuffer___init__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_token_getter_fun, PyObject *__pyx_v_max_peek, PyObject *__pyx_v_max_deque_size); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_2reset(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_begin_token); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_4state_to_offset(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_state); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_6get_state(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_8__getitem__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_index); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_10num_saved_previous_tokens(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_12num_tokens_after_current(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_14move_forward(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_num_toks); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_16move_back(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_num_toks); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_12token_buffer___get__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_11TokenBuffer_12token_buffer_2__set__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_11TokenBuffer_12token_buffer_4__del__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_14max_deque_size___get__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_11TokenBuffer_14max_deque_size_2__set__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_8max_peek___get__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_11TokenBuffer_8max_peek_2__set__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_14current_offset___get__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_11TokenBuffer_14current_offset_2__set__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_15reference_point___get__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_11TokenBuffer_15reference_point_2__set__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_18__reduce_cython__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_20__setstate_cython__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_13GenTokenState___reduce_cython__(struct __pyx_obj_6typped_5lexer_GenTokenState *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_13GenTokenState_2__setstate_cython__(struct __pyx_obj_6typped_5lexer_GenTokenState *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer___init__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_table, PyObject *__pyx_v_max_peek_tokens, PyObject *__pyx_v_max_deque_size, PyObject *__pyx_v_default_begin_end_tokens, PyObject *__pyx_v_final_mod_function); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_2reset(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_table, PyObject *__pyx_v_max_peek_tokens, PyObject *__pyx_v_max_deque_size, PyObject *__pyx_v_default_begin_end_tokens, PyObject *__pyx_v_final_mod_function); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_4set_token_table(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_token_table, PyObject *__pyx_v_go_back); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_6set_text(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_program, PyObject *__pyx_v_reset_linenumber, PyObject *__pyx_v_reset_charnumber); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_8_initialize_token_buffer(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_10next(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, long __pyx_v_num); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_12__next__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_14__iter__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_16peek(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_num_toks); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_18move_back(CYTHON_UNUSED struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_num_toks, CYTHON_UNUSED PyObject *__pyx_v_num_is_raw); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_20go_back(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, long __pyx_v_num_toks, int __pyx_v_num_is_raw); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_22get_current_state(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_24go_back_to_state(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_state); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_26curr_token_is_begin(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_28curr_token_is_first(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_30ignored_before_curr(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_32curr_token_is_end(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_34is_defined_token_label(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_36last_n_tokens_original_text(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_n); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_38get_unprocessed_text(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_peek); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_40get_processed_text(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_peek); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_42def_token(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label, PyObject *__pyx_v_regex_string, PyObject *__pyx_v_on_ties, PyObject *__pyx_v_ignore, PyObject *__pyx_v_matcher_options); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_44undef_token(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_46def_ignored_token(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label, PyObject *__pyx_v_regex_string, PyObject *__pyx_v_on_ties, PyObject *__pyx_v_matcher_options); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_48def_multi_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_tuple_list, PyObject *__pyx_v_kwargs); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_50def_multi_ignored_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_tuple_list, PyObject *__pyx_v_kwargs); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_52def_begin_end_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_begin_token_label, PyObject *__pyx_v_end_token_label); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_54def_default_whitespace(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_space_label, PyObject *__pyx_v_space_regex, PyObject *__pyx_v_newline_label, PyObject *__pyx_v_newline_regex, PyObject *__pyx_v_matcher_options); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_56match_next(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label_to_match, long __pyx_v_peeklevel, int __pyx_v_consume, int __pyx_v_raise_on_fail, int __pyx_v_raise_on_success, long __pyx_v_err_msg_tokens); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_58in_ignored_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label_to_match, int __pyx_v_raise_on_fail, int __pyx_v_raise_on_success); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_60no_ignored_after(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_v_raise_on_fail, int __pyx_v_raise_on_success); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_62no_ignored_before(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_v_raise_on_fail, int __pyx_v_raise_on_success); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_64_unbuffered_token_getter(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_12token_buffer___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_12token_buffer_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_12token_buffer_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_11token_table___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_11token_table_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_11token_table_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_5token___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_5token_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_5token_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_11text_is_set___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_11text_is_set_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_15all_token_count___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_15all_token_count_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_23non_ignored_token_count___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_23non_ignored_token_count_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_18final_mod_function___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_18final_mod_function_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_18final_mod_function_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_24default_helper_exception___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_24default_helper_exception_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_24default_helper_exception_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_16prog_unprocessed___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_16prog_unprocessed_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_16prog_unprocessed_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_7program___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_7program_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value); /* proto */
static int __pyx_pf_6typped_5lexer_5Lexer_7program_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_66__reduce_cython__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_5Lexer_68__setstate_cython__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v___pyx_state); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_2multi_funcall(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_function, PyObject *__pyx_v_tuple_list, PyObject *__pyx_v_kwargs); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_4return_first_exception(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_args); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_6__pyx_unpickle_TokenTable(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_8__pyx_unpickle_TokenBuffer(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_10__pyx_unpickle_GenTokenState(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
static PyObject *__pyx_pf_6typped_5lexer_12__pyx_unpickle_Lexer(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state); /* proto */
static PyObject *__pyx_tp_new_6typped_5lexer_TokenBuffer(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static PyObject *__pyx_tp_new_6typped_5lexer_Lexer(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static PyObject *__pyx_tp_new_6typped_5lexer_TokenTable(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static PyObject *__pyx_tp_new_6typped_5lexer_GenTokenState(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static PyObject *__pyx_tp_new_6typped_5lexer___pyx_scope_struct__string_tree_repr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static PyObject *__pyx_tp_new_6typped_5lexer___pyx_scope_struct_1_genexpr(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static PyObject *__pyx_tp_new_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static __Pyx_CachedCFunction __pyx_umethod_PyList_Type_pop = {0, &__pyx_n_s_pop, 0, 0, 0};
static PyObject *__pyx_int_0;
static PyObject *__pyx_int_1;
static PyObject *__pyx_int_2;
static PyObject *__pyx_int_3;
static PyObject *__pyx_int_4;
static PyObject *__pyx_int_40;
static PyObject *__pyx_int_110728784;
static PyObject *__pyx_int_219943058;
static PyObject *__pyx_int_222419149;
static PyObject *__pyx_int_236877720;
static PyObject *__pyx_int_neg_1;
static PyObject *__pyx_k__11;
static PyObject *__pyx_tuple__9;
static PyObject *__pyx_tuple__12;
static PyObject *__pyx_tuple__13;
static PyObject *__pyx_tuple__14;
static PyObject *__pyx_tuple__15;
static PyObject *__pyx_tuple__16;
static PyObject *__pyx_tuple__17;
static PyObject *__pyx_tuple__18;
static PyObject *__pyx_tuple__19;
static PyObject *__pyx_tuple__20;
static PyObject *__pyx_tuple__22;
static PyObject *__pyx_tuple__23;
static PyObject *__pyx_tuple__24;
static PyObject *__pyx_tuple__25;
static PyObject *__pyx_tuple__27;
static PyObject *__pyx_tuple__29;
static PyObject *__pyx_tuple__31;
static PyObject *__pyx_tuple__33;
static PyObject *__pyx_tuple__35;
static PyObject *__pyx_tuple__37;
static PyObject *__pyx_tuple__39;
static PyObject *__pyx_tuple__41;
static PyObject *__pyx_tuple__43;
static PyObject *__pyx_tuple__45;
static PyObject *__pyx_tuple__47;
static PyObject *__pyx_tuple__49;
static PyObject *__pyx_tuple__51;
static PyObject *__pyx_tuple__53;
static PyObject *__pyx_tuple__54;
static PyObject *__pyx_tuple__56;
static PyObject *__pyx_tuple__57;
static PyObject *__pyx_tuple__59;
static PyObject *__pyx_tuple__61;
static PyObject *__pyx_tuple__63;
static PyObject *__pyx_tuple__65;
static PyObject *__pyx_tuple__67;
static PyObject *__pyx_tuple__69;
static PyObject *__pyx_tuple__71;
static PyObject *__pyx_tuple__73;
static PyObject *__pyx_tuple__75;
static PyObject *__pyx_tuple__77;
static PyObject *__pyx_tuple__79;
static PyObject *__pyx_tuple__81;
static PyObject *__pyx_tuple__83;
static PyObject *__pyx_tuple__85;
static PyObject *__pyx_tuple__87;
static PyObject *__pyx_tuple__89;
static PyObject *__pyx_tuple__91;
static PyObject *__pyx_tuple__93;
static PyObject *__pyx_tuple__95;
static PyObject *__pyx_tuple__97;
static PyObject *__pyx_tuple__99;
static PyObject *__pyx_tuple__101;
static PyObject *__pyx_tuple__103;
static PyObject *__pyx_tuple__105;
static PyObject *__pyx_tuple__107;
static PyObject *__pyx_tuple__109;
static PyObject *__pyx_tuple__111;
static PyObject *__pyx_tuple__113;
static PyObject *__pyx_tuple__115;
static PyObject *__pyx_tuple__117;
static PyObject *__pyx_tuple__119;
static PyObject *__pyx_tuple__121;
static PyObject *__pyx_tuple__123;
static PyObject *__pyx_tuple__125;
static PyObject *__pyx_tuple__127;
static PyObject *__pyx_tuple__129;
static PyObject *__pyx_tuple__131;
static PyObject *__pyx_tuple__133;
static PyObject *__pyx_tuple__135;
static PyObject *__pyx_tuple__137;
static PyObject *__pyx_tuple__139;
static PyObject *__pyx_tuple__141;
static PyObject *__pyx_tuple__143;
static PyObject *__pyx_tuple__145;
static PyObject *__pyx_tuple__147;
static PyObject *__pyx_tuple__149;
static PyObject *__pyx_tuple__151;
static PyObject *__pyx_tuple__153;
static PyObject *__pyx_tuple__155;
static PyObject *__pyx_tuple__157;
static PyObject *__pyx_tuple__159;
static PyObject *__pyx_tuple__161;
static PyObject *__pyx_tuple__163;
static PyObject *__pyx_tuple__165;
static PyObject *__pyx_tuple__167;
static PyObject *__pyx_tuple__169;
static PyObject *__pyx_tuple__171;
static PyObject *__pyx_tuple__173;
static PyObject *__pyx_tuple__175;
static PyObject *__pyx_codeobj__10;
static PyObject *__pyx_codeobj__26;
static PyObject *__pyx_codeobj__28;
static PyObject *__pyx_codeobj__30;
static PyObject *__pyx_codeobj__32;
static PyObject *__pyx_codeobj__34;
static PyObject *__pyx_codeobj__36;
static PyObject *__pyx_codeobj__38;
static PyObject *__pyx_codeobj__40;
static PyObject *__pyx_codeobj__42;
static PyObject *__pyx_codeobj__44;
static PyObject *__pyx_codeobj__46;
static PyObject *__pyx_codeobj__48;
static PyObject *__pyx_codeobj__50;
static PyObject *__pyx_codeobj__52;
static PyObject *__pyx_codeobj__55;
static PyObject *__pyx_codeobj__58;
static PyObject *__pyx_codeobj__60;
static PyObject *__pyx_codeobj__62;
static PyObject *__pyx_codeobj__64;
static PyObject *__pyx_codeobj__66;
static PyObject *__pyx_codeobj__68;
static PyObject *__pyx_codeobj__70;
static PyObject *__pyx_codeobj__72;
static PyObject *__pyx_codeobj__74;
static PyObject *__pyx_codeobj__76;
static PyObject *__pyx_codeobj__78;
static PyObject *__pyx_codeobj__80;
static PyObject *__pyx_codeobj__82;
static PyObject *__pyx_codeobj__84;
static PyObject *__pyx_codeobj__86;
static PyObject *__pyx_codeobj__88;
static PyObject *__pyx_codeobj__90;
static PyObject *__pyx_codeobj__92;
static PyObject *__pyx_codeobj__94;
static PyObject *__pyx_codeobj__96;
static PyObject *__pyx_codeobj__98;
static PyObject *__pyx_codeobj__100;
static PyObject *__pyx_codeobj__102;
static PyObject *__pyx_codeobj__104;
static PyObject *__pyx_codeobj__106;
static PyObject *__pyx_codeobj__108;
static PyObject *__pyx_codeobj__110;
static PyObject *__pyx_codeobj__112;
static PyObject *__pyx_codeobj__114;
static PyObject *__pyx_codeobj__116;
static PyObject *__pyx_codeobj__118;
static PyObject *__pyx_codeobj__120;
static PyObject *__pyx_codeobj__122;
static PyObject *__pyx_codeobj__124;
static PyObject *__pyx_codeobj__126;
static PyObject *__pyx_codeobj__128;
static PyObject *__pyx_codeobj__130;
static PyObject *__pyx_codeobj__132;
static PyObject *__pyx_codeobj__134;
static PyObject *__pyx_codeobj__136;
static PyObject *__pyx_codeobj__138;
static PyObject *__pyx_codeobj__140;
static PyObject *__pyx_codeobj__142;
static PyObject *__pyx_codeobj__144;
static PyObject *__pyx_codeobj__146;
static PyObject *__pyx_codeobj__148;
static PyObject *__pyx_codeobj__150;
static PyObject *__pyx_codeobj__152;
static PyObject *__pyx_codeobj__154;
static PyObject *__pyx_codeobj__156;
static PyObject *__pyx_codeobj__158;
static PyObject *__pyx_codeobj__160;
static PyObject *__pyx_codeobj__162;
static PyObject *__pyx_codeobj__164;
static PyObject *__pyx_codeobj__166;
static PyObject *__pyx_codeobj__168;
static PyObject *__pyx_codeobj__170;
static PyObject *__pyx_codeobj__172;
static PyObject *__pyx_codeobj__174;
static PyObject *__pyx_codeobj__176;

/* "typped/lexer.py":242
 *     original_matched_string = "" # Default, for begin- and end-tokens.
 * 
 *     def __init__(self):             # <<<<<<<<<<<<<<
 *         """Initialize the TokenNode."""
 *         self.ignored_before = [] # Values ignored by lexer just before.
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_1__init__(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode___init__[] = "Initialize the TokenNode.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_1__init__ = {"__init__", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_1__init__, METH_O, __pyx_doc_6typped_5lexer_9TokenNode___init__};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_1__init__(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode___init__(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode___init__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__init__", 0);

  /* "typped/lexer.py":244
 *     def __init__(self):
 *         """Initialize the TokenNode."""
 *         self.ignored_before = [] # Values ignored by lexer just before.             # <<<<<<<<<<<<<<
 *         self.value = None # The actual parsed text string for the token.
 *         self.children = [] # Args to functions are their children in parse tree.
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 244, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_ignored_before, __pyx_t_1) < 0) __PYX_ERR(0, 244, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":245
 *         """Initialize the TokenNode."""
 *         self.ignored_before = [] # Values ignored by lexer just before.
 *         self.value = None # The actual parsed text string for the token.             # <<<<<<<<<<<<<<
 *         self.children = [] # Args to functions are their children in parse tree.
 *         self.parent = None # The parent in a tree of nodes.
 */
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_value, Py_None) < 0) __PYX_ERR(0, 245, __pyx_L1_error)

  /* "typped/lexer.py":246
 *         self.ignored_before = [] # Values ignored by lexer just before.
 *         self.value = None # The actual parsed text string for the token.
 *         self.children = [] # Args to functions are their children in parse tree.             # <<<<<<<<<<<<<<
 *         self.parent = None # The parent in a tree of nodes.
 * 
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 246, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_children, __pyx_t_1) < 0) __PYX_ERR(0, 246, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":247
 *         self.value = None # The actual parsed text string for the token.
 *         self.children = [] # Args to functions are their children in parse tree.
 *         self.parent = None # The parent in a tree of nodes.             # <<<<<<<<<<<<<<
 * 
 *     def original_text(self):
 */
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_parent, Py_None) < 0) __PYX_ERR(0, 247, __pyx_L1_error)

  /* "typped/lexer.py":242
 *     original_matched_string = "" # Default, for begin- and end-tokens.
 * 
 *     def __init__(self):             # <<<<<<<<<<<<<<
 *         """Initialize the TokenNode."""
 *         self.ignored_before = [] # Values ignored by lexer just before.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenNode.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":249
 *         self.parent = None # The parent in a tree of nodes.
 * 
 *     def original_text(self):             # <<<<<<<<<<<<<<
 *         """Return the original text that was read in lexing the token, including
 *         any ignored text."""
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_3original_text(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_2original_text[] = "Return the original text that was read in lexing the token, including\n        any ignored text.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_3original_text = {"original_text", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_3original_text, METH_O, __pyx_doc_6typped_5lexer_9TokenNode_2original_text};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_3original_text(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("original_text (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_2original_text(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_2original_text(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("original_text", 0);

  /* "typped/lexer.py":255
 *         #joined = "".join(ignored_strings) + self.value
 *         #assert joined == self.original_matched_string # A debugging test.
 *         return self.original_matched_string             # <<<<<<<<<<<<<<
 * 
 *     def ignored_before_labels(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_original_matched_string); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 255, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":249
 *         self.parent = None # The parent in a tree of nodes.
 * 
 *     def original_text(self):             # <<<<<<<<<<<<<<
 *         """Return the original text that was read in lexing the token, including
 *         any ignored text."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenNode.original_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":257
 *         return self.original_matched_string
 * 
 *     def ignored_before_labels(self):             # <<<<<<<<<<<<<<
 *         """Return the list of token labels of tokens which were ignored just
 *         before this token."""
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_5ignored_before_labels(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_4ignored_before_labels[] = "Return the list of token labels of tokens which were ignored just\n        before this token.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_5ignored_before_labels = {"ignored_before_labels", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_5ignored_before_labels, METH_O, __pyx_doc_6typped_5lexer_9TokenNode_4ignored_before_labels};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_5ignored_before_labels(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("ignored_before_labels (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_4ignored_before_labels(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_4ignored_before_labels(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_v_t = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  __Pyx_RefNannySetupContext("ignored_before_labels", 0);

  /* "typped/lexer.py":260
 *         """Return the list of token labels of tokens which were ignored just
 *         before this token."""
 *         return [t.token_label for t in self.ignored_before]             # <<<<<<<<<<<<<<
 * 
 *     def append_children(self, *token_nodes):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 260, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_ignored_before); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 260, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
    __pyx_t_3 = __pyx_t_2; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 260, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 260, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_3))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 260, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 260, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 260, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 260, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      }
    } else {
      __pyx_t_2 = __pyx_t_5(__pyx_t_3);
      if (unlikely(!__pyx_t_2)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(exc_type == PyExc_StopIteration || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 260, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_2);
    }
    __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_token_label); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 260, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_2))) __PYX_ERR(0, 260, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":257
 *         return self.original_matched_string
 * 
 *     def ignored_before_labels(self):             # <<<<<<<<<<<<<<
 *         """Return the list of token labels of tokens which were ignored just
 *         before this token."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("typped.lexer.TokenNode.ignored_before_labels", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_t);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":262
 *         return [t.token_label for t in self.ignored_before]
 * 
 *     def append_children(self, *token_nodes):             # <<<<<<<<<<<<<<
 *         """Append all the arguments as children, also setting their parent to self."""
 *         for t in token_nodes:
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_7append_children(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_6append_children[] = "Append all the arguments as children, also setting their parent to self.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_7append_children = {"append_children", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_7append_children, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_9TokenNode_6append_children};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_7append_children(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_self = 0;
  PyObject *__pyx_v_token_nodes = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("append_children (wrapper)", 0);
  if (PyTuple_GET_SIZE(__pyx_args) > 1) {
    __pyx_v_token_nodes = PyTuple_GetSlice(__pyx_args, 1, PyTuple_GET_SIZE(__pyx_args));
    if (unlikely(!__pyx_v_token_nodes)) {
      __Pyx_RefNannyFinishContext();
      return NULL;
    }
    __Pyx_GOTREF(__pyx_v_token_nodes);
  } else {
    __pyx_v_token_nodes = __pyx_empty_tuple; __Pyx_INCREF(__pyx_empty_tuple);
  }
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,0};
    PyObject* values[1] = {0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        default:
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_self)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
      }
      if (unlikely(kw_args > 0)) {
        const Py_ssize_t used_pos_args = (pos_args < 1) ? pos_args : 1;
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, used_pos_args, "append_children") < 0)) __PYX_ERR(0, 262, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) < 1) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
    }
    __pyx_v_self = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("append_children", 0, 1, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 262, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_DECREF(__pyx_v_token_nodes); __pyx_v_token_nodes = 0;
  __Pyx_AddTraceback("typped.lexer.TokenNode.append_children", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_6append_children(__pyx_self, __pyx_v_self, __pyx_v_token_nodes);

  /* function exit code */
  __Pyx_XDECREF(__pyx_v_token_nodes);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_6append_children(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_token_nodes) {
  PyObject *__pyx_v_t = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  __Pyx_RefNannySetupContext("append_children", 0);

  /* "typped/lexer.py":264
 *     def append_children(self, *token_nodes):
 *         """Append all the arguments as children, also setting their parent to self."""
 *         for t in token_nodes:             # <<<<<<<<<<<<<<
 *             self.children.append(t)
 *             t.parent = self
 */
  __pyx_t_1 = __pyx_v_token_nodes; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
  for (;;) {
    if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_3); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 264, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 264, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "typped/lexer.py":265
 *         """Append all the arguments as children, also setting their parent to self."""
 *         for t in token_nodes:
 *             self.children.append(t)             # <<<<<<<<<<<<<<
 *             t.parent = self
 * 
 */
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_children); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 265, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_Append(__pyx_t_3, __pyx_v_t); if (unlikely(__pyx_t_4 == -1)) __PYX_ERR(0, 265, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "typped/lexer.py":266
 *         for t in token_nodes:
 *             self.children.append(t)
 *             t.parent = self             # <<<<<<<<<<<<<<
 * 
 *     def __getitem__(self, index):
 */
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_t, __pyx_n_s_parent, __pyx_v_self) < 0) __PYX_ERR(0, 266, __pyx_L1_error)

    /* "typped/lexer.py":264
 *     def append_children(self, *token_nodes):
 *         """Append all the arguments as children, also setting their parent to self."""
 *         for t in token_nodes:             # <<<<<<<<<<<<<<
 *             self.children.append(t)
 *             t.parent = self
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":262
 *         return [t.token_label for t in self.ignored_before]
 * 
 *     def append_children(self, *token_nodes):             # <<<<<<<<<<<<<<
 *         """Append all the arguments as children, also setting their parent to self."""
 *         for t in token_nodes:
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("typped.lexer.TokenNode.append_children", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_t);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":268
 *             t.parent = self
 * 
 *     def __getitem__(self, index):             # <<<<<<<<<<<<<<
 *         """Use indexing to access the children.  No check is made, however, to see
 *         if the correct number of children exist."""
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_9__getitem__(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_8__getitem__[] = "Use indexing to access the children.  No check is made, however, to see\n        if the correct number of children exist.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_9__getitem__ = {"__getitem__", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_9__getitem__, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_9TokenNode_8__getitem__};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_9__getitem__(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_self = 0;
  PyObject *__pyx_v_index = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__getitem__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_index,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_self)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_index)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("__getitem__", 1, 2, 2, 1); __PYX_ERR(0, 268, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__getitem__") < 0)) __PYX_ERR(0, 268, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_self = values[0];
    __pyx_v_index = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__getitem__", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 268, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenNode.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_8__getitem__(__pyx_self, __pyx_v_self, __pyx_v_index);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_8__getitem__(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_index) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("__getitem__", 0);

  /* "typped/lexer.py":271
 *         """Use indexing to access the children.  No check is made, however, to see
 *         if the correct number of children exist."""
 *         return self.children[index]             # <<<<<<<<<<<<<<
 * 
 *     def convert_to_AST(self, convert_TokenNode_to_AST_node_fun):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_children); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 271, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyObject_GetItem(__pyx_t_1, __pyx_v_index); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 271, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":268
 *             t.parent = self
 * 
 *     def __getitem__(self, index):             # <<<<<<<<<<<<<<
 *         """Use indexing to access the children.  No check is made, however, to see
 *         if the correct number of children exist."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("typped.lexer.TokenNode.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":273
 *         return self.children[index]
 * 
 *     def convert_to_AST(self, convert_TokenNode_to_AST_node_fun):             # <<<<<<<<<<<<<<
 *         """Call this on the root node.  Converts the token tree to an abstract
 *         syntax tree.  This basically converts the nodes one-to-one to a more
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_11convert_to_AST(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_10convert_to_AST[] = "Call this on the root node.  Converts the token tree to an abstract\n        syntax tree.  This basically converts the nodes one-to-one to a more\n        convenient type of node for the AST of a given application.  The\n        function `convert_TokenNode_to_AST_node_fun` should take one argument,\n        a `TokenNode` instance, and return an AST node instance for the\n        corresponding AST node.  The only requirement for the AST nodes is that\n        they have a method called `append_children`.  The `ast_data` attribute\n        of a node can be used to save information useful in the transformation.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_11convert_to_AST = {"convert_to_AST", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_11convert_to_AST, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_9TokenNode_10convert_to_AST};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_11convert_to_AST(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_self = 0;
  PyObject *__pyx_v_convert_TokenNode_to_AST_node_fun = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("convert_to_AST (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_convert_TokenNode_to_AST_node_fu,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_self)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_convert_TokenNode_to_AST_node_fu)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("convert_to_AST", 1, 2, 2, 1); __PYX_ERR(0, 273, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "convert_to_AST") < 0)) __PYX_ERR(0, 273, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_self = values[0];
    __pyx_v_convert_TokenNode_to_AST_node_fun = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("convert_to_AST", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 273, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenNode.convert_to_AST", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_10convert_to_AST(__pyx_self, __pyx_v_self, __pyx_v_convert_TokenNode_to_AST_node_fun);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_10convert_to_AST(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_convert_TokenNode_to_AST_node_fun) {
  PyObject *__pyx_v_ast_node = NULL;
  PyObject *__pyx_v_child = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  Py_ssize_t __pyx_t_5;
  PyObject *(*__pyx_t_6)(PyObject *);
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("convert_to_AST", 0);

  /* "typped/lexer.py":282
 *         they have a method called `append_children`.  The `ast_data` attribute
 *         of a node can be used to save information useful in the transformation."""
 *         ast_node = convert_TokenNode_to_AST_node_fun(self)             # <<<<<<<<<<<<<<
 *         for child in self.children:
 *             ast_node.append_children(
 */
  __Pyx_INCREF(__pyx_v_convert_TokenNode_to_AST_node_fun);
  __pyx_t_2 = __pyx_v_convert_TokenNode_to_AST_node_fun; __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (!__pyx_t_3) {
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_v_self); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 282, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_v_self};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 282, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_v_self};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 282, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 282, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_3); __pyx_t_3 = NULL;
      __Pyx_INCREF(__pyx_v_self);
      __Pyx_GIVEREF(__pyx_v_self);
      PyTuple_SET_ITEM(__pyx_t_4, 0+1, __pyx_v_self);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 282, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_ast_node = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":283
 *         of a node can be used to save information useful in the transformation."""
 *         ast_node = convert_TokenNode_to_AST_node_fun(self)
 *         for child in self.children:             # <<<<<<<<<<<<<<
 *             ast_node.append_children(
 *                     child.convert_to_AST(convert_TokenNode_to_AST_node_fun))
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_children); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 283, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
    __pyx_t_2 = __pyx_t_1; __Pyx_INCREF(__pyx_t_2); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
  } else {
    __pyx_t_5 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 283, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_6 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 283, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  for (;;) {
    if (likely(!__pyx_t_6)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_1); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 283, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 283, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_1); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 283, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 283, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_6(__pyx_t_2);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(exc_type == PyExc_StopIteration || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 283, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    __Pyx_XDECREF_SET(__pyx_v_child, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "typped/lexer.py":284
 *         ast_node = convert_TokenNode_to_AST_node_fun(self)
 *         for child in self.children:
 *             ast_node.append_children(             # <<<<<<<<<<<<<<
 *                     child.convert_to_AST(convert_TokenNode_to_AST_node_fun))
 *         return ast_node
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_ast_node, __pyx_n_s_append_children); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 284, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);

    /* "typped/lexer.py":285
 *         for child in self.children:
 *             ast_node.append_children(
 *                     child.convert_to_AST(convert_TokenNode_to_AST_node_fun))             # <<<<<<<<<<<<<<
 *         return ast_node
 * 
 */
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_child, __pyx_n_s_convert_to_AST); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 285, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_8 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
      }
    }
    if (!__pyx_t_8) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_v_convert_TokenNode_to_AST_node_fun); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 285, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_7)) {
        PyObject *__pyx_temp[2] = {__pyx_t_8, __pyx_v_convert_TokenNode_to_AST_node_fun};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 285, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_3);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
        PyObject *__pyx_temp[2] = {__pyx_t_8, __pyx_v_convert_TokenNode_to_AST_node_fun};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 285, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_3);
      } else
      #endif
      {
        __pyx_t_9 = PyTuple_New(1+1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 285, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_8); __pyx_t_8 = NULL;
        __Pyx_INCREF(__pyx_v_convert_TokenNode_to_AST_node_fun);
        __Pyx_GIVEREF(__pyx_v_convert_TokenNode_to_AST_node_fun);
        PyTuple_SET_ITEM(__pyx_t_9, 0+1, __pyx_v_convert_TokenNode_to_AST_node_fun);
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_9, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 285, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (!__pyx_t_7) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 284, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_3};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 284, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_3};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 284, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      {
        __pyx_t_9 = PyTuple_New(1+1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 284, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_7); __pyx_t_7 = NULL;
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_9, 0+1, __pyx_t_3);
        __pyx_t_3 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_9, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 284, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":283
 *         of a node can be used to save information useful in the transformation."""
 *         ast_node = convert_TokenNode_to_AST_node_fun(self)
 *         for child in self.children:             # <<<<<<<<<<<<<<
 *             ast_node.append_children(
 *                     child.convert_to_AST(convert_TokenNode_to_AST_node_fun))
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "typped/lexer.py":286
 *             ast_node.append_children(
 *                     child.convert_to_AST(convert_TokenNode_to_AST_node_fun))
 *         return ast_node             # <<<<<<<<<<<<<<
 * 
 *     #
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_ast_node);
  __pyx_r = __pyx_v_ast_node;
  goto __pyx_L0;

  /* "typped/lexer.py":273
 *         return self.children[index]
 * 
 *     def convert_to_AST(self, convert_TokenNode_to_AST_node_fun):             # <<<<<<<<<<<<<<
 *         """Call this on the root node.  Converts the token tree to an abstract
 *         syntax tree.  This basically converts the nodes one-to-one to a more
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("typped.lexer.TokenNode.convert_to_AST", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_ast_node);
  __Pyx_XDECREF(__pyx_v_child);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":292
 *     #
 * 
 *     def is_begin_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is the begin-token."""
 *         return self.token_label == self.token_table.begin_token_label
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_13is_begin_token(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_12is_begin_token[] = "Test whether this token is the begin-token.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_13is_begin_token = {"is_begin_token", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_13is_begin_token, METH_O, __pyx_doc_6typped_5lexer_9TokenNode_12is_begin_token};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_13is_begin_token(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_begin_token (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_12is_begin_token(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_12is_begin_token(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("is_begin_token", 0);

  /* "typped/lexer.py":294
 *     def is_begin_token(self):
 *         """Test whether this token is the begin-token."""
 *         return self.token_label == self.token_table.begin_token_label             # <<<<<<<<<<<<<<
 * 
 *     def is_end_token(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_token_label); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 294, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_token_table); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 294, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_begin_token_label); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 294, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_EQ); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 294, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":292
 *     #
 * 
 *     def is_begin_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is the begin-token."""
 *         return self.token_label == self.token_table.begin_token_label
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("typped.lexer.TokenNode.is_begin_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":296
 *         return self.token_label == self.token_table.begin_token_label
 * 
 *     def is_end_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is the end-token."""
 *         return self.token_label == self.token_table.end_token_label
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_15is_end_token(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_14is_end_token[] = "Test whether this token is the end-token.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_15is_end_token = {"is_end_token", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_15is_end_token, METH_O, __pyx_doc_6typped_5lexer_9TokenNode_14is_end_token};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_15is_end_token(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_end_token (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_14is_end_token(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_14is_end_token(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("is_end_token", 0);

  /* "typped/lexer.py":298
 *     def is_end_token(self):
 *         """Test whether this token is the end-token."""
 *         return self.token_label == self.token_table.end_token_label             # <<<<<<<<<<<<<<
 * 
 *     def is_begin_or_end_token(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_token_label); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 298, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_token_table); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 298, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_end_token_label); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 298, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_EQ); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 298, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":296
 *         return self.token_label == self.token_table.begin_token_label
 * 
 *     def is_end_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is the end-token."""
 *         return self.token_label == self.token_table.end_token_label
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("typped.lexer.TokenNode.is_end_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":300
 *         return self.token_label == self.token_table.end_token_label
 * 
 *     def is_begin_or_end_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is either the begin- or end-token."""
 *         return self.is_begin_token() or self.is_end_token()
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_17is_begin_or_end_token(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_16is_begin_or_end_token[] = "Test whether this token is either the begin- or end-token.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_17is_begin_or_end_token = {"is_begin_or_end_token", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_17is_begin_or_end_token, METH_O, __pyx_doc_6typped_5lexer_9TokenNode_16is_begin_or_end_token};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_17is_begin_or_end_token(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_begin_or_end_token (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_16is_begin_or_end_token(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_16is_begin_or_end_token(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("is_begin_or_end_token", 0);

  /* "typped/lexer.py":302
 *     def is_begin_or_end_token(self):
 *         """Test whether this token is either the begin- or end-token."""
 *         return self.is_begin_token() or self.is_end_token()             # <<<<<<<<<<<<<<
 * 
 *     #
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_begin_token); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 302, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  if (__pyx_t_4) {
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 302, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 302, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 302, __pyx_L1_error)
  if (!__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_is_end_token); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 302, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  if (__pyx_t_4) {
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 302, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 302, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":300
 *         return self.token_label == self.token_table.end_token_label
 * 
 *     def is_begin_or_end_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is either the begin- or end-token."""
 *         return self.is_begin_token() or self.is_end_token()
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("typped.lexer.TokenNode.is_begin_or_end_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":309
 *     #
 * 
 *     def traditional_repr(self):             # <<<<<<<<<<<<<<
 *         """Representation as a string that looks like class initialization."""
 *         return "TokenNode()"
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_19traditional_repr(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_18traditional_repr[] = "Representation as a string that looks like class initialization.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_19traditional_repr = {"traditional_repr", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_19traditional_repr, METH_O, __pyx_doc_6typped_5lexer_9TokenNode_18traditional_repr};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_19traditional_repr(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("traditional_repr (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_18traditional_repr(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_18traditional_repr(CYTHON_UNUSED PyObject *__pyx_self, CYTHON_UNUSED PyObject *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("traditional_repr", 0);

  /* "typped/lexer.py":311
 *     def traditional_repr(self):
 *         """Representation as a string that looks like class initialization."""
 *         return "TokenNode()"             # <<<<<<<<<<<<<<
 * 
 *     def value_repr(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_kp_s_TokenNode);
  __pyx_r = __pyx_kp_s_TokenNode;
  goto __pyx_L0;

  /* "typped/lexer.py":309
 *     #
 * 
 *     def traditional_repr(self):             # <<<<<<<<<<<<<<
 *         """Representation as a string that looks like class initialization."""
 *         return "TokenNode()"
 */

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":313
 *         return "TokenNode()"
 * 
 *     def value_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as its value."""
 *         return str(self.value)
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_21value_repr(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_20value_repr[] = "Token representation as its value.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_21value_repr = {"value_repr", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_21value_repr, METH_O, __pyx_doc_6typped_5lexer_9TokenNode_20value_repr};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_21value_repr(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("value_repr (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_20value_repr(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_20value_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("value_repr", 0);

  /* "typped/lexer.py":315
 *     def value_repr(self):
 *         """Token representation as its value."""
 *         return str(self.value)             # <<<<<<<<<<<<<<
 * 
 *     def label_repr(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_value); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 315, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 315, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 315, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":313
 *         return "TokenNode()"
 * 
 *     def value_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as its value."""
 *         return str(self.value)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("typped.lexer.TokenNode.value_repr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":317
 *         return str(self.value)
 * 
 *     def label_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as its token label."""
 *         return str(self.token_label)
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_23label_repr(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_22label_repr[] = "Token representation as its token label.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_23label_repr = {"label_repr", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_23label_repr, METH_O, __pyx_doc_6typped_5lexer_9TokenNode_22label_repr};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_23label_repr(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("label_repr (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_22label_repr(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_22label_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("label_repr", 0);

  /* "typped/lexer.py":319
 *     def label_repr(self):
 *         """Token representation as its token label."""
 *         return str(self.token_label)             # <<<<<<<<<<<<<<
 * 
 *     def summary_repr(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_token_label); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 319, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 319, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 319, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":317
 *         return str(self.value)
 * 
 *     def label_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as its token label."""
 *         return str(self.token_label)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("typped.lexer.TokenNode.label_repr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":321
 *         return str(self.token_label)
 * 
 *     def summary_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as a summarizing string containing both the label and
 *         the value."""
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_25summary_repr(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_24summary_repr[] = "Token representation as a summarizing string containing both the label and\n        the value.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_25summary_repr = {"summary_repr", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_25summary_repr, METH_O, __pyx_doc_6typped_5lexer_9TokenNode_24summary_repr};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_25summary_repr(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("summary_repr (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_24summary_repr(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_24summary_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_v_value_str = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("summary_repr", 0);

  /* "typped/lexer.py":324
 *         """Token representation as a summarizing string containing both the label and
 *         the value."""
 *         value_str = str(self.value)             # <<<<<<<<<<<<<<
 *         if isinstance(self.value, str):
 *             value_str = "'" + value_str + "'"
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_value); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 324, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 324, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 324, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_value_str = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":325
 *         the value."""
 *         value_str = str(self.value)
 *         if isinstance(self.value, str):             # <<<<<<<<<<<<<<
 *             value_str = "'" + value_str + "'"
 *         return "<{0},{1}>".format(self.token_label, value_str)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_value); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 325, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyString_Check(__pyx_t_1); 
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_4 = (__pyx_t_3 != 0);
  if (__pyx_t_4) {

    /* "typped/lexer.py":326
 *         value_str = str(self.value)
 *         if isinstance(self.value, str):
 *             value_str = "'" + value_str + "'"             # <<<<<<<<<<<<<<
 *         return "<{0},{1}>".format(self.token_label, value_str)
 * 
 */
    __pyx_t_1 = PyNumber_Add(__pyx_kp_s_, __pyx_v_value_str); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 326, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_kp_s_); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 326, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF_SET(__pyx_v_value_str, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "typped/lexer.py":325
 *         the value."""
 *         value_str = str(self.value)
 *         if isinstance(self.value, str):             # <<<<<<<<<<<<<<
 *             value_str = "'" + value_str + "'"
 *         return "<{0},{1}>".format(self.token_label, value_str)
 */
  }

  /* "typped/lexer.py":327
 *         if isinstance(self.value, str):
 *             value_str = "'" + value_str + "'"
 *         return "<{0},{1}>".format(self.token_label, value_str)             # <<<<<<<<<<<<<<
 * 
 *     def tree_repr(self, indent=0):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_0_1, __pyx_n_s_format); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 327, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_token_label); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 327, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_6 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
    __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_1);
    if (likely(__pyx_t_6)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_1, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_1)) {
    PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_5, __pyx_v_value_str};
    __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 327, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_1)) {
    PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_5, __pyx_v_value_str};
    __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 327, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_8 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 327, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (__pyx_t_6) {
      __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6); __pyx_t_6 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_t_5);
    __Pyx_INCREF(__pyx_v_value_str);
    __Pyx_GIVEREF(__pyx_v_value_str);
    PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_value_str);
    __pyx_t_5 = 0;
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_8, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 327, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":321
 *         return str(self.token_label)
 * 
 *     def summary_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as a summarizing string containing both the label and
 *         the value."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("typped.lexer.TokenNode.summary_repr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_value_str);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":329
 *         return "<{0},{1}>".format(self.token_label, value_str)
 * 
 *     def tree_repr(self, indent=0):             # <<<<<<<<<<<<<<
 *         """Token representation as the root of a parse subtree, with formatting.
 *         The optional `indent` parameter can be either an indent string or else
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_27tree_repr(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_26tree_repr[] = "Token representation as the root of a parse subtree, with formatting.\n        The optional `indent` parameter can be either an indent string or else\n        an integer for the number of spaces to indent.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_27tree_repr = {"tree_repr", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_27tree_repr, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_9TokenNode_26tree_repr};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_27tree_repr(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_self = 0;
  PyObject *__pyx_v_indent = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("tree_repr (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_indent,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_self)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_indent);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "tree_repr") < 0)) __PYX_ERR(0, 329, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_self = values[0];
    __pyx_v_indent = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("tree_repr", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 329, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenNode.tree_repr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_26tree_repr(__pyx_self, __pyx_v_self, __pyx_v_indent);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_26tree_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_indent) {
  PyObject *__pyx_v_num_indent = NULL;
  PyObject *__pyx_v_string = NULL;
  PyObject *__pyx_v_c = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  Py_ssize_t __pyx_t_8;
  PyObject *(*__pyx_t_9)(PyObject *);
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  __Pyx_RefNannySetupContext("tree_repr", 0);
  __Pyx_INCREF(__pyx_v_indent);

  /* "typped/lexer.py":333
 *         The optional `indent` parameter can be either an indent string or else
 *         an integer for the number of spaces to indent."""
 *         try:             # <<<<<<<<<<<<<<
 *             num_indent = int(indent)
 *         except ValueError:
 */
  {
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ExceptionSave(&__pyx_t_1, &__pyx_t_2, &__pyx_t_3);
    __Pyx_XGOTREF(__pyx_t_1);
    __Pyx_XGOTREF(__pyx_t_2);
    __Pyx_XGOTREF(__pyx_t_3);
    /*try:*/ {

      /* "typped/lexer.py":334
 *         an integer for the number of spaces to indent."""
 *         try:
 *             num_indent = int(indent)             # <<<<<<<<<<<<<<
 *         except ValueError:
 *             pass
 */
      __pyx_t_4 = __Pyx_PyNumber_Int(__pyx_v_indent); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 334, __pyx_L3_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_v_num_indent = __pyx_t_4;
      __pyx_t_4 = 0;

      /* "typped/lexer.py":333
 *         The optional `indent` parameter can be either an indent string or else
 *         an integer for the number of spaces to indent."""
 *         try:             # <<<<<<<<<<<<<<
 *             num_indent = int(indent)
 *         except ValueError:
 */
    }

    /* "typped/lexer.py":338
 *             pass
 *         else:
 *             indent = " " * num_indent             # <<<<<<<<<<<<<<
 *         string = indent + self.summary_repr() + "\n"
 *         for c in self.children:
 */
    /*else:*/ {
      __pyx_t_4 = PyNumber_Multiply(__pyx_kp_s__2, __pyx_v_num_indent); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 338, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF_SET(__pyx_v_indent, __pyx_t_4);
      __pyx_t_4 = 0;
    }
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L8_try_end;
    __pyx_L3_error:;
    __Pyx_PyThreadState_assign
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "typped/lexer.py":335
 *         try:
 *             num_indent = int(indent)
 *         except ValueError:             # <<<<<<<<<<<<<<
 *             pass
 *         else:
 */
    __pyx_t_5 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_ValueError);
    if (__pyx_t_5) {
      __Pyx_ErrRestore(0,0,0);
      goto __pyx_L4_exception_handled;
    }
    goto __pyx_L5_except_error;
    __pyx_L5_except_error:;

    /* "typped/lexer.py":333
 *         The optional `indent` parameter can be either an indent string or else
 *         an integer for the number of spaces to indent."""
 *         try:             # <<<<<<<<<<<<<<
 *             num_indent = int(indent)
 *         except ValueError:
 */
    __Pyx_PyThreadState_assign
    __Pyx_XGIVEREF(__pyx_t_1);
    __Pyx_XGIVEREF(__pyx_t_2);
    __Pyx_XGIVEREF(__pyx_t_3);
    __Pyx_ExceptionReset(__pyx_t_1, __pyx_t_2, __pyx_t_3);
    goto __pyx_L1_error;
    __pyx_L4_exception_handled:;
    __Pyx_PyThreadState_assign
    __Pyx_XGIVEREF(__pyx_t_1);
    __Pyx_XGIVEREF(__pyx_t_2);
    __Pyx_XGIVEREF(__pyx_t_3);
    __Pyx_ExceptionReset(__pyx_t_1, __pyx_t_2, __pyx_t_3);
    __pyx_L8_try_end:;
  }

  /* "typped/lexer.py":339
 *         else:
 *             indent = " " * num_indent
 *         string = indent + self.summary_repr() + "\n"             # <<<<<<<<<<<<<<
 *         for c in self.children:
 *             string += c.tree_repr(indent=indent+" "*4)
 */
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_summary_repr); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 339, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_7 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
    __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
    if (likely(__pyx_t_7)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
      __Pyx_INCREF(__pyx_t_7);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_6, function);
    }
  }
  if (__pyx_t_7) {
    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 339, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  } else {
    __pyx_t_4 = __Pyx_PyObject_CallNoArg(__pyx_t_6); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 339, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = PyNumber_Add(__pyx_v_indent, __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 339, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyNumber_Add(__pyx_t_6, __pyx_kp_s__3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 339, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_v_string = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "typped/lexer.py":340
 *             indent = " " * num_indent
 *         string = indent + self.summary_repr() + "\n"
 *         for c in self.children:             # <<<<<<<<<<<<<<
 *             string += c.tree_repr(indent=indent+" "*4)
 *         return string
 */
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_children); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 340, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (likely(PyList_CheckExact(__pyx_t_4)) || PyTuple_CheckExact(__pyx_t_4)) {
    __pyx_t_6 = __pyx_t_4; __Pyx_INCREF(__pyx_t_6); __pyx_t_8 = 0;
    __pyx_t_9 = NULL;
  } else {
    __pyx_t_8 = -1; __pyx_t_6 = PyObject_GetIter(__pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 340, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_9 = Py_TYPE(__pyx_t_6)->tp_iternext; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 340, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  for (;;) {
    if (likely(!__pyx_t_9)) {
      if (likely(PyList_CheckExact(__pyx_t_6))) {
        if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_6, __pyx_t_8); __Pyx_INCREF(__pyx_t_4); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 340, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_6, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 340, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_6, __pyx_t_8); __Pyx_INCREF(__pyx_t_4); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 340, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_6, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 340, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_9(__pyx_t_6);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(exc_type == PyExc_StopIteration || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 340, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "typped/lexer.py":341
 *         string = indent + self.summary_repr() + "\n"
 *         for c in self.children:
 *             string += c.tree_repr(indent=indent+" "*4)             # <<<<<<<<<<<<<<
 *         return string
 * 
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_c, __pyx_n_s_tree_repr); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = PyDict_New(); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_10 = PyNumber_Multiply(__pyx_kp_s__2, __pyx_int_4); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __pyx_t_11 = PyNumber_Add(__pyx_v_indent, __pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_indent, __pyx_t_11) < 0) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_11 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_empty_tuple, __pyx_t_7); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = PyNumber_InPlaceAdd(__pyx_v_string, __pyx_t_11); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __Pyx_DECREF_SET(__pyx_v_string, __pyx_t_7);
    __pyx_t_7 = 0;

    /* "typped/lexer.py":340
 *             indent = " " * num_indent
 *         string = indent + self.summary_repr() + "\n"
 *         for c in self.children:             # <<<<<<<<<<<<<<
 *             string += c.tree_repr(indent=indent+" "*4)
 *         return string
 */
  }
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

  /* "typped/lexer.py":342
 *         for c in self.children:
 *             string += c.tree_repr(indent=indent+" "*4)
 *         return string             # <<<<<<<<<<<<<<
 * 
 *     def string_tree_repr(self, only_vals=False, only_labels=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_string);
  __pyx_r = __pyx_v_string;
  goto __pyx_L0;

  /* "typped/lexer.py":329
 *         return "<{0},{1}>".format(self.token_label, value_str)
 * 
 *     def tree_repr(self, indent=0):             # <<<<<<<<<<<<<<
 *         """Token representation as the root of a parse subtree, with formatting.
 *         The optional `indent` parameter can be either an indent string or else
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("typped.lexer.TokenNode.tree_repr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_num_indent);
  __Pyx_XDECREF(__pyx_v_string);
  __Pyx_XDECREF(__pyx_v_c);
  __Pyx_XDECREF(__pyx_v_indent);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":344
 *         return string
 * 
 *     def string_tree_repr(self, only_vals=False, only_labels=False):             # <<<<<<<<<<<<<<
 *         """Token representation as the root of a parse subtree, in a string format.
 *         This is the default representation, used for `__repr__`."""
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_29string_tree_repr(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_28string_tree_repr[] = "Token representation as the root of a parse subtree, in a string format.\n        This is the default representation, used for `__repr__`.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_29string_tree_repr = {"string_tree_repr", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_29string_tree_repr, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_9TokenNode_28string_tree_repr};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_29string_tree_repr(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_self = 0;
  PyObject *__pyx_v_only_vals = 0;
  PyObject *__pyx_v_only_labels = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("string_tree_repr (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_only_vals,&__pyx_n_s_only_labels,0};
    PyObject* values[3] = {0,0,0};
    values[1] = ((PyObject *)((PyObject *)Py_False));
    values[2] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_self)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_only_vals);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_only_labels);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "string_tree_repr") < 0)) __PYX_ERR(0, 344, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_self = values[0];
    __pyx_v_only_vals = values[1];
    __pyx_v_only_labels = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("string_tree_repr", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 344, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenNode.string_tree_repr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_28string_tree_repr(__pyx_self, __pyx_v_self, __pyx_v_only_vals, __pyx_v_only_labels);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}
static PyObject *__pyx_gb_6typped_5lexer_9TokenNode_16string_tree_repr_2generator(__pyx_CoroutineObject *__pyx_generator, PyObject *__pyx_sent_value); /* proto */

/* "typped/lexer.py":352
 *         if self.children:
 *             string += "("
 *             string += ",".join(c.string_tree_repr() for c in self.children)             # <<<<<<<<<<<<<<
 *             string += ")"
 *         return string
 */

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_16string_tree_repr_genexpr(PyObject *__pyx_self) {
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *__pyx_cur_scope;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("genexpr", 0);
  __pyx_cur_scope = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *)__pyx_tp_new_6typped_5lexer___pyx_scope_struct_1_genexpr(__pyx_ptype_6typped_5lexer___pyx_scope_struct_1_genexpr, __pyx_empty_tuple, NULL);
  if (unlikely(!__pyx_cur_scope)) {
    __pyx_cur_scope = ((struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *)Py_None);
    __Pyx_INCREF(Py_None);
    __PYX_ERR(0, 352, __pyx_L1_error)
  } else {
    __Pyx_GOTREF(__pyx_cur_scope);
  }
  __pyx_cur_scope->__pyx_outer_scope = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *) __pyx_self;
  __Pyx_INCREF(((PyObject *)__pyx_cur_scope->__pyx_outer_scope));
  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_outer_scope);
  {
    __pyx_CoroutineObject *gen = __Pyx_Generator_New((__pyx_coroutine_body_t) __pyx_gb_6typped_5lexer_9TokenNode_16string_tree_repr_2generator, (PyObject *) __pyx_cur_scope, __pyx_n_s_genexpr, __pyx_n_s_TokenNode_string_tree_repr_local, __pyx_n_s_typped_lexer); if (unlikely(!gen)) __PYX_ERR(0, 352, __pyx_L1_error)
    __Pyx_DECREF(__pyx_cur_scope);
    __Pyx_RefNannyFinishContext();
    return (PyObject *) gen;
  }

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_AddTraceback("typped.lexer.TokenNode.string_tree_repr.genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __Pyx_DECREF(((PyObject *)__pyx_cur_scope));
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_gb_6typped_5lexer_9TokenNode_16string_tree_repr_2generator(__pyx_CoroutineObject *__pyx_generator, PyObject *__pyx_sent_value) /* generator body */
{
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *__pyx_cur_scope = ((struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *)__pyx_generator->closure);
  PyObject *__pyx_r = NULL;
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("None", 0);
  switch (__pyx_generator->resume_label) {
    case 0: goto __pyx_L3_first_run;
    case 1: goto __pyx_L6_resume_from_yield;
    default: /* CPython raises the right error here */
    __Pyx_RefNannyFinishContext();
    return NULL;
  }
  __pyx_L3_first_run:;
  if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 352, __pyx_L1_error)
  if (unlikely(!__pyx_cur_scope->__pyx_outer_scope->__pyx_v_self)) { __Pyx_RaiseClosureNameError("self"); __PYX_ERR(0, 352, __pyx_L1_error) }
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_outer_scope->__pyx_v_self, __pyx_n_s_children); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 352, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
    __pyx_t_2 = __pyx_t_1; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 352, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  for (;;) {
    if (likely(!__pyx_t_4)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_1); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 352, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 352, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_1); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 352, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 352, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_4(__pyx_t_2);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(exc_type == PyExc_StopIteration || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 352, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    __Pyx_XGOTREF(__pyx_cur_scope->__pyx_v_c);
    __Pyx_XDECREF_SET(__pyx_cur_scope->__pyx_v_c, __pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_1);
    __pyx_t_1 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_c, __pyx_n_s_string_tree_repr); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    if (__pyx_t_6) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 352, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    } else {
      __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 352, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    __Pyx_XGIVEREF(__pyx_t_2);
    __pyx_cur_scope->__pyx_t_0 = __pyx_t_2;
    __pyx_cur_scope->__pyx_t_1 = __pyx_t_3;
    __pyx_cur_scope->__pyx_t_2 = __pyx_t_4;
    __Pyx_XGIVEREF(__pyx_r);
    __Pyx_RefNannyFinishContext();
    /* return from generator, yielding value */
    __pyx_generator->resume_label = 1;
    return __pyx_r;
    __pyx_L6_resume_from_yield:;
    __pyx_t_2 = __pyx_cur_scope->__pyx_t_0;
    __pyx_cur_scope->__pyx_t_0 = 0;
    __Pyx_XGOTREF(__pyx_t_2);
    __pyx_t_3 = __pyx_cur_scope->__pyx_t_1;
    __pyx_t_4 = __pyx_cur_scope->__pyx_t_2;
    if (unlikely(!__pyx_sent_value)) __PYX_ERR(0, 352, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  CYTHON_MAYBE_UNUSED_VAR(__pyx_cur_scope);

  /* function exit code */
  PyErr_SetNone(PyExc_StopIteration);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("genexpr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_r); __pyx_r = 0;
  __pyx_generator->resume_label = -1;
  __Pyx_Coroutine_clear((PyObject*)__pyx_generator);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":344
 *         return string
 * 
 *     def string_tree_repr(self, only_vals=False, only_labels=False):             # <<<<<<<<<<<<<<
 *         """Token representation as the root of a parse subtree, in a string format.
 *         This is the default representation, used for `__repr__`."""
 */

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_28string_tree_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_only_vals, PyObject *__pyx_v_only_labels) {
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *__pyx_cur_scope;
  PyObject *__pyx_v_string = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  __Pyx_RefNannySetupContext("string_tree_repr", 0);
  __pyx_cur_scope = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *)__pyx_tp_new_6typped_5lexer___pyx_scope_struct__string_tree_repr(__pyx_ptype_6typped_5lexer___pyx_scope_struct__string_tree_repr, __pyx_empty_tuple, NULL);
  if (unlikely(!__pyx_cur_scope)) {
    __pyx_cur_scope = ((struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *)Py_None);
    __Pyx_INCREF(Py_None);
    __PYX_ERR(0, 344, __pyx_L1_error)
  } else {
    __Pyx_GOTREF(__pyx_cur_scope);
  }
  __pyx_cur_scope->__pyx_v_self = __pyx_v_self;
  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_self);
  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_self);

  /* "typped/lexer.py":347
 *         """Token representation as the root of a parse subtree, in a string format.
 *         This is the default representation, used for `__repr__`."""
 *         string = self.summary_repr()             # <<<<<<<<<<<<<<
 *         if only_vals: string = self.value_repr()
 *         if only_labels: string = self.label_repr()
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_summary_repr); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 347, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (__pyx_t_3) {
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 347, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 347, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_string = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":348
 *         This is the default representation, used for `__repr__`."""
 *         string = self.summary_repr()
 *         if only_vals: string = self.value_repr()             # <<<<<<<<<<<<<<
 *         if only_labels: string = self.label_repr()
 *         if self.children:
 */
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_v_only_vals); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 348, __pyx_L1_error)
  if (__pyx_t_4) {
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_value_repr); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 348, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    if (__pyx_t_3) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 348, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    } else {
      __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 348, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF_SET(__pyx_v_string, __pyx_t_1);
    __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":349
 *         string = self.summary_repr()
 *         if only_vals: string = self.value_repr()
 *         if only_labels: string = self.label_repr()             # <<<<<<<<<<<<<<
 *         if self.children:
 *             string += "("
 */
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_v_only_labels); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 349, __pyx_L1_error)
  if (__pyx_t_4) {
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_label_repr); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 349, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    if (__pyx_t_3) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 349, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    } else {
      __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 349, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF_SET(__pyx_v_string, __pyx_t_1);
    __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":350
 *         if only_vals: string = self.value_repr()
 *         if only_labels: string = self.label_repr()
 *         if self.children:             # <<<<<<<<<<<<<<
 *             string += "("
 *             string += ",".join(c.string_tree_repr() for c in self.children)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_cur_scope->__pyx_v_self, __pyx_n_s_children); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 350, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 350, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_4) {

    /* "typped/lexer.py":351
 *         if only_labels: string = self.label_repr()
 *         if self.children:
 *             string += "("             # <<<<<<<<<<<<<<
 *             string += ",".join(c.string_tree_repr() for c in self.children)
 *             string += ")"
 */
    __pyx_t_1 = PyNumber_InPlaceAdd(__pyx_v_string, __pyx_kp_s__4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 351, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF_SET(__pyx_v_string, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "typped/lexer.py":352
 *         if self.children:
 *             string += "("
 *             string += ",".join(c.string_tree_repr() for c in self.children)             # <<<<<<<<<<<<<<
 *             string += ")"
 *         return string
 */
    __pyx_t_1 = __pyx_pf_6typped_5lexer_9TokenNode_16string_tree_repr_genexpr(((PyObject*)__pyx_cur_scope)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_PyString_Join(__pyx_kp_s__5, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyNumber_InPlaceAdd(__pyx_v_string, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF_SET(__pyx_v_string, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "typped/lexer.py":353
 *             string += "("
 *             string += ",".join(c.string_tree_repr() for c in self.children)
 *             string += ")"             # <<<<<<<<<<<<<<
 *         return string
 * 
 */
    __pyx_t_1 = PyNumber_InPlaceAdd(__pyx_v_string, __pyx_kp_s__6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 353, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF_SET(__pyx_v_string, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "typped/lexer.py":350
 *         if only_vals: string = self.value_repr()
 *         if only_labels: string = self.label_repr()
 *         if self.children:             # <<<<<<<<<<<<<<
 *             string += "("
 *             string += ",".join(c.string_tree_repr() for c in self.children)
 */
  }

  /* "typped/lexer.py":354
 *             string += ",".join(c.string_tree_repr() for c in self.children)
 *             string += ")"
 *         return string             # <<<<<<<<<<<<<<
 * 
 *     def old_repr(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_string);
  __pyx_r = __pyx_v_string;
  goto __pyx_L0;

  /* "typped/lexer.py":344
 *         return string
 * 
 *     def string_tree_repr(self, only_vals=False, only_labels=False):             # <<<<<<<<<<<<<<
 *         """Token representation as the root of a parse subtree, in a string format.
 *         This is the default representation, used for `__repr__`."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("typped.lexer.TokenNode.string_tree_repr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_string);
  __Pyx_DECREF(((PyObject *)__pyx_cur_scope));
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":356
 *         return string
 * 
 *     def old_repr(self):             # <<<<<<<<<<<<<<
 *         """This old representation is kept *only* because it is used in some tests."""
 *         if self.token_label == "k_number":
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_31old_repr(PyObject *__pyx_self, PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_6typped_5lexer_9TokenNode_30old_repr[] = "This old representation is kept *only* because it is used in some tests.";
static PyMethodDef __pyx_mdef_6typped_5lexer_9TokenNode_31old_repr = {"old_repr", (PyCFunction)__pyx_pw_6typped_5lexer_9TokenNode_31old_repr, METH_O, __pyx_doc_6typped_5lexer_9TokenNode_30old_repr};
static PyObject *__pyx_pw_6typped_5lexer_9TokenNode_31old_repr(PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("old_repr (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_9TokenNode_30old_repr(__pyx_self, ((PyObject *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_9TokenNode_30old_repr(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_self) {
  PyObject *__pyx_v_str_val = NULL;
  PyObject *__pyx_v_a = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  Py_ssize_t __pyx_t_7;
  PyObject *(*__pyx_t_8)(PyObject *);
  __Pyx_RefNannySetupContext("old_repr", 0);

  /* "typped/lexer.py":358
 *     def old_repr(self):
 *         """This old representation is kept *only* because it is used in some tests."""
 *         if self.token_label == "k_number":             # <<<<<<<<<<<<<<
 *             return "[literal {0}]".format(self.value)
 *         if self.token_label == "k_lpar":
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_token_label); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 358, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_t_1, __pyx_n_s_k_number, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 358, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "typped/lexer.py":359
 *         """This old representation is kept *only* because it is used in some tests."""
 *         if self.token_label == "k_number":
 *             return "[literal {0}]".format(self.value)             # <<<<<<<<<<<<<<
 *         if self.token_label == "k_lpar":
 *             if self.children:
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_literal_0, __pyx_n_s_format); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 359, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_value); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 359, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
      }
    }
    if (!__pyx_t_5) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 359, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 359, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 359, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_6 = PyTuple_New(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 359, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_6, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 359, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "typped/lexer.py":358
 *     def old_repr(self):
 *         """This old representation is kept *only* because it is used in some tests."""
 *         if self.token_label == "k_number":             # <<<<<<<<<<<<<<
 *             return "[literal {0}]".format(self.value)
 *         if self.token_label == "k_lpar":
 */
  }

  /* "typped/lexer.py":360
 *         if self.token_label == "k_number":
 *             return "[literal {0}]".format(self.value)
 *         if self.token_label == "k_lpar":             # <<<<<<<<<<<<<<
 *             if self.children:
 *                 return "[k_lpar {0} k_rpar]".format(self.children[0].old_repr())
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_token_label); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 360, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_t_1, __pyx_n_s_k_lpar, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 360, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "typped/lexer.py":361
 *             return "[literal {0}]".format(self.value)
 *         if self.token_label == "k_lpar":
 *             if self.children:             # <<<<<<<<<<<<<<
 *                 return "[k_lpar {0} k_rpar]".format(self.children[0].old_repr())
 *             else:
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_children); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 361, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 361, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_2) {

      /* "typped/lexer.py":362
 *         if self.token_label == "k_lpar":
 *             if self.children:
 *                 return "[k_lpar {0} k_rpar]".format(self.children[0].old_repr())             # <<<<<<<<<<<<<<
 *             else:
 *                 return "[literal k_lpar]"
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_k_lpar_0_k_rpar, __pyx_n_s_format); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 362, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_children); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 362, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 362, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_old_repr); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 362, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      if (__pyx_t_5) {
        __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 362, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else {
        __pyx_t_6 = __Pyx_PyObject_CallNoArg(__pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 362, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 362, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_1);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_6};
          __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 362, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_6};
          __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 362, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        } else
        #endif
        {
          __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 362, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
          __Pyx_GIVEREF(__pyx_t_6);
          PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_t_6);
          __pyx_t_6 = 0;
          __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 362, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "typped/lexer.py":361
 *             return "[literal {0}]".format(self.value)
 *         if self.token_label == "k_lpar":
 *             if self.children:             # <<<<<<<<<<<<<<
 *                 return "[k_lpar {0} k_rpar]".format(self.children[0].old_repr())
 *             else:
 */
    }

    /* "typped/lexer.py":364
 *                 return "[k_lpar {0} k_rpar]".format(self.children[0].old_repr())
 *             else:
 *                 return "[literal k_lpar]"             # <<<<<<<<<<<<<<
 *         else:
 *             str_val = "[" + str(self.value)
 */
    /*else*/ {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_kp_s_literal_k_lpar);
      __pyx_r = __pyx_kp_s_literal_k_lpar;
      goto __pyx_L0;
    }

    /* "typped/lexer.py":360
 *         if self.token_label == "k_number":
 *             return "[literal {0}]".format(self.value)
 *         if self.token_label == "k_lpar":             # <<<<<<<<<<<<<<
 *             if self.children:
 *                 return "[k_lpar {0} k_rpar]".format(self.children[0].old_repr())
 */
  }

  /* "typped/lexer.py":366
 *                 return "[literal k_lpar]"
 *         else:
 *             str_val = "[" + str(self.value)             # <<<<<<<<<<<<<<
 *             for a in self.children: str_val += " " + a.old_repr()
 *             str_val += "]"
 */
  /*else*/ {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_value); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 366, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 366, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_1);
    __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 366, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyNumber_Add(__pyx_kp_s__7, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 366, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_v_str_val = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "typped/lexer.py":367
 *         else:
 *             str_val = "[" + str(self.value)
 *             for a in self.children: str_val += " " + a.old_repr()             # <<<<<<<<<<<<<<
 *             str_val += "]"
 *             return str_val
 */
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_self, __pyx_n_s_children); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 367, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
      __pyx_t_1 = __pyx_t_3; __Pyx_INCREF(__pyx_t_1); __pyx_t_7 = 0;
      __pyx_t_8 = NULL;
    } else {
      __pyx_t_7 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 367, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_8 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 367, __pyx_L1_error)
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    for (;;) {
      if (likely(!__pyx_t_8)) {
        if (likely(PyList_CheckExact(__pyx_t_1))) {
          if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_1)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_7); __Pyx_INCREF(__pyx_t_3); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 367, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 367, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        } else {
          if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_7); __Pyx_INCREF(__pyx_t_3); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 367, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 367, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        }
      } else {
        __pyx_t_3 = __pyx_t_8(__pyx_t_1);
        if (unlikely(!__pyx_t_3)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(exc_type == PyExc_StopIteration || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 367, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_3);
      }
      __Pyx_XDECREF_SET(__pyx_v_a, __pyx_t_3);
      __pyx_t_3 = 0;
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_old_repr); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 367, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_6 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
        }
      }
      if (__pyx_t_6) {
        __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 367, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      } else {
        __pyx_t_3 = __Pyx_PyObject_CallNoArg(__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 367, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = PyNumber_Add(__pyx_kp_s__2, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 367, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = PyNumber_InPlaceAdd(__pyx_v_str_val, __pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 367, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF_SET(__pyx_v_str_val, __pyx_t_3);
      __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":368
 *             str_val = "[" + str(self.value)
 *             for a in self.children: str_val += " " + a.old_repr()
 *             str_val += "]"             # <<<<<<<<<<<<<<
 *             return str_val
 *     __repr__ = string_tree_repr
 */
    __pyx_t_1 = PyNumber_InPlaceAdd(__pyx_v_str_val, __pyx_kp_s__8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 368, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF_SET(__pyx_v_str_val, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "typped/lexer.py":369
 *             for a in self.children: str_val += " " + a.old_repr()
 *             str_val += "]"
 *             return str_val             # <<<<<<<<<<<<<<
 *     __repr__ = string_tree_repr
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_str_val);
    __pyx_r = __pyx_v_str_val;
    goto __pyx_L0;
  }

  /* "typped/lexer.py":356
 *         return string
 * 
 *     def old_repr(self):             # <<<<<<<<<<<<<<
 *         """This old representation is kept *only* because it is used in some tests."""
 *         if self.token_label == "k_number":
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.TokenNode.old_repr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_str_val);
  __Pyx_XDECREF(__pyx_v_a);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":373
 * 
 * 
 * def basic_token_subclass_factory():             # <<<<<<<<<<<<<<
 *     """Create and return a new token subclass representing tokens with label
 *     `token_label`.  This function is called from the `_create_token_subclass`
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_1basic_token_subclass_factory(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_basic_token_subclass_factory[] = "Create and return a new token subclass representing tokens with label\n    `token_label`.  This function is called from the `_create_token_subclass`\n    method  of `TokenTable` when it needs to create a new one to\n    start with.  This function **should not be called directly**, since\n    additional attributes (such as the token label and a new subclass name)\n    also need to be added to the generated subclass.\n\n    This function is the default argument to the `token_subclassing_fun`\n    keyword argument of the initializer for `TokenTable`.  Users\n    can define their own such function in order to add methods to token objects\n    which are particular to their own application (the `PrattParser` class does\n    this, for example).\n\n    Note that using a separate subclass for each token label allows for\n    attributes and methods specific to a kind of token to be pasted onto the\n    class itself without conflicts.  For example, the `PrattParser` subclass\n    adds head handler and tail handler methods which are specific to a given\n    token label.";
static PyMethodDef __pyx_mdef_6typped_5lexer_1basic_token_subclass_factory = {"basic_token_subclass_factory", (PyCFunction)__pyx_pw_6typped_5lexer_1basic_token_subclass_factory, METH_NOARGS, __pyx_doc_6typped_5lexer_basic_token_subclass_factory};
static PyObject *__pyx_pw_6typped_5lexer_1basic_token_subclass_factory(PyObject *__pyx_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("basic_token_subclass_factory (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_basic_token_subclass_factory(__pyx_self);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":401
 *     class TokenSubclass(TokenNode):
 *         """This is the class returned by the factory function."""
 *         def __init__(self, value):             # <<<<<<<<<<<<<<
 *             super(TokenSubclass, self).__init__() # Call base class __init__.
 *             self.value = value # Passed in for instances by the Lexer token generator.
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_28basic_token_subclass_factory_13TokenSubclass_1__init__(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_28basic_token_subclass_factory_13TokenSubclass_1__init__ = {"__init__", (PyCFunction)__pyx_pw_6typped_5lexer_28basic_token_subclass_factory_13TokenSubclass_1__init__, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_6typped_5lexer_28basic_token_subclass_factory_13TokenSubclass_1__init__(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_self = 0;
  PyObject *__pyx_v_value = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_self,&__pyx_n_s_value,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_self)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_value)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("__init__", 1, 2, 2, 1); __PYX_ERR(0, 401, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__init__") < 0)) __PYX_ERR(0, 401, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_self = values[0];
    __pyx_v_value = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__init__", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 401, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.basic_token_subclass_factory.TokenSubclass.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_28basic_token_subclass_factory_13TokenSubclass___init__(__pyx_self, __pyx_v_self, __pyx_v_value);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_28basic_token_subclass_factory_13TokenSubclass___init__(PyObject *__pyx_self, PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *__pyx_cur_scope;
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *__pyx_outer_scope;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("__init__", 0);
  __pyx_outer_scope = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *) __Pyx_CyFunction_GetClosure(__pyx_self);
  __pyx_cur_scope = __pyx_outer_scope;

  /* "typped/lexer.py":402
 *         """This is the class returned by the factory function."""
 *         def __init__(self, value):
 *             super(TokenSubclass, self).__init__() # Call base class __init__.             # <<<<<<<<<<<<<<
 *             self.value = value # Passed in for instances by the Lexer token generator.
 * 
 */
  if (unlikely(!__pyx_cur_scope->__pyx_v_TokenSubclass)) { __Pyx_RaiseClosureNameError("TokenSubclass"); __PYX_ERR(0, 402, __pyx_L1_error) }
  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 402, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_TokenSubclass);
  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_TokenSubclass);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_cur_scope->__pyx_v_TokenSubclass);
  __Pyx_INCREF(__pyx_v_self);
  __Pyx_GIVEREF(__pyx_v_self);
  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_self);
  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_super, __pyx_t_2, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 402, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_init); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 402, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (__pyx_t_3) {
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 402, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 402, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":403
 *         def __init__(self, value):
 *             super(TokenSubclass, self).__init__() # Call base class __init__.
 *             self.value = value # Passed in for instances by the Lexer token generator.             # <<<<<<<<<<<<<<
 * 
 *     return TokenSubclass
 */
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_self, __pyx_n_s_value, __pyx_v_value) < 0) __PYX_ERR(0, 403, __pyx_L1_error)

  /* "typped/lexer.py":401
 *     class TokenSubclass(TokenNode):
 *         """This is the class returned by the factory function."""
 *         def __init__(self, value):             # <<<<<<<<<<<<<<
 *             super(TokenSubclass, self).__init__() # Call base class __init__.
 *             self.value = value # Passed in for instances by the Lexer token generator.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("typped.lexer.basic_token_subclass_factory.TokenSubclass.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":373
 * 
 * 
 * def basic_token_subclass_factory():             # <<<<<<<<<<<<<<
 *     """Create and return a new token subclass representing tokens with label
 *     `token_label`.  This function is called from the `_create_token_subclass`
 */

static PyObject *__pyx_pf_6typped_5lexer_basic_token_subclass_factory(CYTHON_UNUSED PyObject *__pyx_self) {
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *__pyx_cur_scope;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("basic_token_subclass_factory", 0);
  __pyx_cur_scope = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *)__pyx_tp_new_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory(__pyx_ptype_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory, __pyx_empty_tuple, NULL);
  if (unlikely(!__pyx_cur_scope)) {
    __pyx_cur_scope = ((struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *)Py_None);
    __Pyx_INCREF(Py_None);
    __PYX_ERR(0, 373, __pyx_L1_error)
  } else {
    __Pyx_GOTREF(__pyx_cur_scope);
  }

  /* "typped/lexer.py":399
 *     # they could simply declare a metaclass that would be OK, but might need
 *     # args passed, etc.  See version in PrattParser module.
 *     class TokenSubclass(TokenNode):             # <<<<<<<<<<<<<<
 *         """This is the class returned by the factory function."""
 *         def __init__(self, value):
 */
  __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_TokenNode_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 399, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 399, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_CalculateMetaclass(NULL, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 399, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_Py3MetaclassPrepare(__pyx_t_1, __pyx_t_2, __pyx_n_s_TokenSubclass, __pyx_n_s_basic_token_subclass_factory_loc, (PyObject *) NULL, __pyx_n_s_typped_lexer, __pyx_kp_s_This_is_the_class_returned_by_th); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 399, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "typped/lexer.py":401
 *     class TokenSubclass(TokenNode):
 *         """This is the class returned by the factory function."""
 *         def __init__(self, value):             # <<<<<<<<<<<<<<
 *             super(TokenSubclass, self).__init__() # Call base class __init__.
 *             self.value = value # Passed in for instances by the Lexer token generator.
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_28basic_token_subclass_factory_13TokenSubclass_1__init__, 0, __pyx_n_s_basic_token_subclass_factory_loc_2, ((PyObject*)__pyx_cur_scope), __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__10)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 401, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (PyObject_SetItem(__pyx_t_3, __pyx_n_s_init, __pyx_t_4) < 0) __PYX_ERR(0, 401, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "typped/lexer.py":399
 *     # they could simply declare a metaclass that would be OK, but might need
 *     # args passed, etc.  See version in PrattParser module.
 *     class TokenSubclass(TokenNode):             # <<<<<<<<<<<<<<
 *         """This is the class returned by the factory function."""
 *         def __init__(self, value):
 */
  __pyx_t_4 = __Pyx_Py3ClassCreate(__pyx_t_1, __pyx_n_s_TokenSubclass, __pyx_t_2, __pyx_t_3, NULL, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 399, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_4);
  __pyx_cur_scope->__pyx_v_TokenSubclass = __pyx_t_4;
  __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "typped/lexer.py":405
 *             self.value = value # Passed in for instances by the Lexer token generator.
 * 
 *     return TokenSubclass             # <<<<<<<<<<<<<<
 * 
 * #
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_TokenSubclass);
  __pyx_r = __pyx_cur_scope->__pyx_v_TokenSubclass;
  goto __pyx_L0;

  /* "typped/lexer.py":373
 * 
 * 
 * def basic_token_subclass_factory():             # <<<<<<<<<<<<<<
 *     """Create and return a new token subclass representing tokens with label
 *     `token_label`.  This function is called from the `_create_token_subclass`
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("typped.lexer.basic_token_subclass_factory", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_DECREF(((PyObject *)__pyx_cur_scope));
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":416
 *     Each `Lexer` instance contains an instance of this class to save the subclasses for
 *     the kinds of tokens which have been defined for it."""
 *     def __init__(self, token_subclass_factory_fun=basic_token_subclass_factory,             # <<<<<<<<<<<<<<
 *                        pattern_matcher_instance=None):
 *         """Initialize the token table.
 */

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_10TokenTable___init__[] = "Initialize the token table.\n\n        The parameter `token_subclass_factory_fun` can be passed a function to\n        be used to generate token subclasses, taking a token label as an\n        argument.  The default is `basic_token_subclass_factory`.\n\n        The parameter `pattern_matcher_instance` can be passed an empty pattern\n        matcher instance, which will be used instead of the default one.  In\n        this way users can define their own matchers, or pass in whatever options\n        they choose to the initializer of the default one.";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_6typped_5lexer_10TokenTable___init__;
#endif
static int __pyx_pw_6typped_5lexer_10TokenTable_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_token_subclass_factory_fun = 0;
  PyObject *__pyx_v_pattern_matcher_instance = 0;
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_token_subclass_factory_fun,&__pyx_n_s_pattern_matcher_instance,0};
    PyObject* values[2] = {0,0};
    values[0] = __pyx_k__11;

    /* "typped/lexer.py":417
 *     the kinds of tokens which have been defined for it."""
 *     def __init__(self, token_subclass_factory_fun=basic_token_subclass_factory,
 *                        pattern_matcher_instance=None):             # <<<<<<<<<<<<<<
 *         """Initialize the token table.
 * 
 */
    values[1] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_token_subclass_factory_fun);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pattern_matcher_instance);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__init__") < 0)) __PYX_ERR(0, 416, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_token_subclass_factory_fun = values[0];
    __pyx_v_pattern_matcher_instance = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__init__", 0, 0, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 416, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenTable.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable___init__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), __pyx_v_token_subclass_factory_fun, __pyx_v_pattern_matcher_instance);

  /* "typped/lexer.py":416
 *     Each `Lexer` instance contains an instance of this class to save the subclasses for
 *     the kinds of tokens which have been defined for it."""
 *     def __init__(self, token_subclass_factory_fun=basic_token_subclass_factory,             # <<<<<<<<<<<<<<
 *                        pattern_matcher_instance=None):
 *         """Initialize the token table.
 */

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable___init__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_subclass_factory_fun, PyObject *__pyx_v_pattern_matcher_instance) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  __Pyx_RefNannySetupContext("__init__", 0);
  __Pyx_INCREF(__pyx_v_pattern_matcher_instance);

  /* "typped/lexer.py":428
 *         this way users can define their own matchers, or pass in whatever options
 *         they choose to the initializer of the default one."""
 *         self.token_subclassing_fun = token_subclass_factory_fun             # <<<<<<<<<<<<<<
 *         self.token_subclass_dict = {}
 *         self.lex = None # The lexer currently associated with this token table.
 */
  __Pyx_INCREF(__pyx_v_token_subclass_factory_fun);
  __Pyx_GIVEREF(__pyx_v_token_subclass_factory_fun);
  __Pyx_GOTREF(__pyx_v_self->token_subclassing_fun);
  __Pyx_DECREF(__pyx_v_self->token_subclassing_fun);
  __pyx_v_self->token_subclassing_fun = __pyx_v_token_subclass_factory_fun;

  /* "typped/lexer.py":429
 *         they choose to the initializer of the default one."""
 *         self.token_subclassing_fun = token_subclass_factory_fun
 *         self.token_subclass_dict = {}             # <<<<<<<<<<<<<<
 *         self.lex = None # The lexer currently associated with this token table.
 * 
 */
  __pyx_t_1 = PyDict_New(); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 429, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->token_subclass_dict);
  __Pyx_DECREF(__pyx_v_self->token_subclass_dict);
  __pyx_v_self->token_subclass_dict = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "typped/lexer.py":430
 *         self.token_subclassing_fun = token_subclass_factory_fun
 *         self.token_subclass_dict = {}
 *         self.lex = None # The lexer currently associated with this token table.             # <<<<<<<<<<<<<<
 * 
 *         self.begin_token_label = None
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->lex);
  __Pyx_DECREF(((PyObject *)__pyx_v_self->lex));
  __pyx_v_self->lex = ((struct __pyx_obj_6typped_5lexer_Lexer *)Py_None);

  /* "typped/lexer.py":432
 *         self.lex = None # The lexer currently associated with this token table.
 * 
 *         self.begin_token_label = None             # <<<<<<<<<<<<<<
 *         self.begin_token_subclass = None
 *         self.end_token_label = None
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->begin_token_label);
  __Pyx_DECREF(__pyx_v_self->begin_token_label);
  __pyx_v_self->begin_token_label = ((PyObject*)Py_None);

  /* "typped/lexer.py":433
 * 
 *         self.begin_token_label = None
 *         self.begin_token_subclass = None             # <<<<<<<<<<<<<<
 *         self.end_token_label = None
 *         self.end_token_subclass = None
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->begin_token_subclass);
  __Pyx_DECREF(__pyx_v_self->begin_token_subclass);
  __pyx_v_self->begin_token_subclass = Py_None;

  /* "typped/lexer.py":434
 *         self.begin_token_label = None
 *         self.begin_token_subclass = None
 *         self.end_token_label = None             # <<<<<<<<<<<<<<
 *         self.end_token_subclass = None
 *         if pattern_matcher_instance is None:
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->end_token_label);
  __Pyx_DECREF(__pyx_v_self->end_token_label);
  __pyx_v_self->end_token_label = ((PyObject*)Py_None);

  /* "typped/lexer.py":435
 *         self.begin_token_subclass = None
 *         self.end_token_label = None
 *         self.end_token_subclass = None             # <<<<<<<<<<<<<<
 *         if pattern_matcher_instance is None:
 *             pattern_matcher_instance = Matcher()
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->end_token_subclass);
  __Pyx_DECREF(__pyx_v_self->end_token_subclass);
  __pyx_v_self->end_token_subclass = Py_None;

  /* "typped/lexer.py":436
 *         self.end_token_label = None
 *         self.end_token_subclass = None
 *         if pattern_matcher_instance is None:             # <<<<<<<<<<<<<<
 *             pattern_matcher_instance = Matcher()
 *         self.pattern_matcher = pattern_matcher_instance
 */
  __pyx_t_2 = (__pyx_v_pattern_matcher_instance == Py_None);
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "typped/lexer.py":437
 *         self.end_token_subclass = None
 *         if pattern_matcher_instance is None:
 *             pattern_matcher_instance = Matcher()             # <<<<<<<<<<<<<<
 *         self.pattern_matcher = pattern_matcher_instance
 * 
 */
    __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_6typped_7matcher_Matcher), __pyx_empty_tuple, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 437, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF_SET(__pyx_v_pattern_matcher_instance, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "typped/lexer.py":436
 *         self.end_token_label = None
 *         self.end_token_subclass = None
 *         if pattern_matcher_instance is None:             # <<<<<<<<<<<<<<
 *             pattern_matcher_instance = Matcher()
 *         self.pattern_matcher = pattern_matcher_instance
 */
  }

  /* "typped/lexer.py":438
 *         if pattern_matcher_instance is None:
 *             pattern_matcher_instance = Matcher()
 *         self.pattern_matcher = pattern_matcher_instance             # <<<<<<<<<<<<<<
 * 
 *     def __contains__(self, token_label):
 */
  if (!(likely(((__pyx_v_pattern_matcher_instance) == Py_None) || likely(__Pyx_TypeTest(__pyx_v_pattern_matcher_instance, __pyx_ptype_6typped_7matcher_Matcher))))) __PYX_ERR(0, 438, __pyx_L1_error)
  __pyx_t_1 = __pyx_v_pattern_matcher_instance;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->pattern_matcher);
  __Pyx_DECREF(((PyObject *)__pyx_v_self->pattern_matcher));
  __pyx_v_self->pattern_matcher = ((struct __pyx_obj_6typped_7matcher_Matcher *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "typped/lexer.py":416
 *     Each `Lexer` instance contains an instance of this class to save the subclasses for
 *     the kinds of tokens which have been defined for it."""
 *     def __init__(self, token_subclass_factory_fun=basic_token_subclass_factory,             # <<<<<<<<<<<<<<
 *                        pattern_matcher_instance=None):
 *         """Initialize the token table.
 */

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_pattern_matcher_instance);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":440
 *         self.pattern_matcher = pattern_matcher_instance
 * 
 *     def __contains__(self, token_label):             # <<<<<<<<<<<<<<
 *         """Test whether a token subclass for `token_label` has been stored."""
 *         return token_label in self.token_subclass_dict
 */

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_3__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label); /*proto*/
static char __pyx_doc_6typped_5lexer_10TokenTable_2__contains__[] = "Test whether a token subclass for `token_label` has been stored.";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_6typped_5lexer_10TokenTable_2__contains__;
#endif
static int __pyx_pw_6typped_5lexer_10TokenTable_3__contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__contains__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_2__contains__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject *)__pyx_v_token_label));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_2__contains__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  __Pyx_RefNannySetupContext("__contains__", 0);

  /* "typped/lexer.py":442
 *     def __contains__(self, token_label):
 *         """Test whether a token subclass for `token_label` has been stored."""
 *         return token_label in self.token_subclass_dict             # <<<<<<<<<<<<<<
 * 
 *     def __getitem__(self, token_label):
 */
  if (unlikely(__pyx_v_self->token_subclass_dict == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 442, __pyx_L1_error)
  }
  __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_token_label, __pyx_v_self->token_subclass_dict, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 442, __pyx_L1_error)
  __pyx_r = __pyx_t_1;
  goto __pyx_L0;

  /* "typped/lexer.py":440
 *         self.pattern_matcher = pattern_matcher_instance
 * 
 *     def __contains__(self, token_label):             # <<<<<<<<<<<<<<
 *         """Test whether a token subclass for `token_label` has been stored."""
 *         return token_label in self.token_subclass_dict
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_AddTraceback("typped.lexer.TokenTable.__contains__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":444
 *         return token_label in self.token_subclass_dict
 * 
 *     def __getitem__(self, token_label):             # <<<<<<<<<<<<<<
 *         """Look up the subclasses of base class `TokenNode` corresponding to
 *         `token_label` in the token table and return it.  Raises a
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_5__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label); /*proto*/
static char __pyx_doc_6typped_5lexer_10TokenTable_4__getitem__[] = "Look up the subclasses of base class `TokenNode` corresponding to\n        `token_label` in the token table and return it.  Raises a\n        `LexerException` if no subclass is found for the token label.";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_6typped_5lexer_10TokenTable_4__getitem__;
#endif
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_5__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__getitem__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_4__getitem__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject *)__pyx_v_token_label));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_4__getitem__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label) {
  PyObject *__pyx_v_TokenSubclass = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("__getitem__", 0);

  /* "typped/lexer.py":448
 *         `token_label` in the token table and return it.  Raises a
 *         `LexerException` if no subclass is found for the token label."""
 *         if token_label in self.token_subclass_dict:             # <<<<<<<<<<<<<<
 *             TokenSubclass = self.token_subclass_dict[token_label]
 *         else:
 */
  if (unlikely(__pyx_v_self->token_subclass_dict == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 448, __pyx_L1_error)
  }
  __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_token_label, __pyx_v_self->token_subclass_dict, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 448, __pyx_L1_error)
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "typped/lexer.py":449
 *         `LexerException` if no subclass is found for the token label."""
 *         if token_label in self.token_subclass_dict:
 *             TokenSubclass = self.token_subclass_dict[token_label]             # <<<<<<<<<<<<<<
 *         else:
 *             raise LexerException("No token with label '{0}' is in the token table."
 */
    if (unlikely(__pyx_v_self->token_subclass_dict == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 449, __pyx_L1_error)
    }
    __pyx_t_3 = __Pyx_PyDict_GetItem(__pyx_v_self->token_subclass_dict, __pyx_v_token_label); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 449, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_v_TokenSubclass = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "typped/lexer.py":448
 *         `token_label` in the token table and return it.  Raises a
 *         `LexerException` if no subclass is found for the token label."""
 *         if token_label in self.token_subclass_dict:             # <<<<<<<<<<<<<<
 *             TokenSubclass = self.token_subclass_dict[token_label]
 *         else:
 */
    goto __pyx_L3;
  }

  /* "typped/lexer.py":451
 *             TokenSubclass = self.token_subclass_dict[token_label]
 *         else:
 *             raise LexerException("No token with label '{0}' is in the token table."             # <<<<<<<<<<<<<<
 *                                    .format(token_label))
 *         return TokenSubclass
 */
  /*else*/ {
    __pyx_t_4 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 451, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);

    /* "typped/lexer.py":452
 *         else:
 *             raise LexerException("No token with label '{0}' is in the token table."
 *                                    .format(token_label))             # <<<<<<<<<<<<<<
 *         return TokenSubclass
 * 
 */
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_No_token_with_label_0_is_in_the, __pyx_n_s_format); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 452, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    if (!__pyx_t_7) {
      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_v_token_label); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 452, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_v_token_label};
        __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 452, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_5);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_v_token_label};
        __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 452, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_5);
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(1+1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 452, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_7); __pyx_t_7 = NULL;
        __Pyx_INCREF(__pyx_v_token_label);
        __Pyx_GIVEREF(__pyx_v_token_label);
        PyTuple_SET_ITEM(__pyx_t_8, 0+1, __pyx_v_token_label);
        __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 452, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (!__pyx_t_6) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 451, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_5};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 451, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_5};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 451, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(1+1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 451, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6); __pyx_t_6 = NULL;
        __Pyx_GIVEREF(__pyx_t_5);
        PyTuple_SET_ITEM(__pyx_t_8, 0+1, __pyx_t_5);
        __pyx_t_5 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_8, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 451, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 451, __pyx_L1_error)
  }
  __pyx_L3:;

  /* "typped/lexer.py":453
 *             raise LexerException("No token with label '{0}' is in the token table."
 *                                    .format(token_label))
 *         return TokenSubclass             # <<<<<<<<<<<<<<
 * 
 *     def _create_token_subclass(self, token_label, store_in_dict=True):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_TokenSubclass);
  __pyx_r = __pyx_v_TokenSubclass;
  goto __pyx_L0;

  /* "typped/lexer.py":444
 *         return token_label in self.token_subclass_dict
 * 
 *     def __getitem__(self, token_label):             # <<<<<<<<<<<<<<
 *         """Look up the subclasses of base class `TokenNode` corresponding to
 *         `token_label` in the token table and return it.  Raises a
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("typped.lexer.TokenTable.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_TokenSubclass);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":455
 *         return TokenSubclass
 * 
 *     def _create_token_subclass(self, token_label, store_in_dict=True):             # <<<<<<<<<<<<<<
 *         """Create a subclass for tokens with label `token_label` and store it
 *         in the token table.  Return the new subclass.  Raises a `LexerException`
 */

static PyObject *__pyx_f_6typped_5lexer_10TokenTable__create_token_subclass(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label, struct __pyx_opt_args_6typped_5lexer_10TokenTable__create_token_subclass *__pyx_optional_args) {
  int __pyx_v_store_in_dict = ((int)1);
  PyObject *__pyx_v_TokenSubclass = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("_create_token_subclass", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_store_in_dict = __pyx_optional_args->store_in_dict;
    }
  }

  /* "typped/lexer.py":460
 *         if a subclass for `token_label` has already been created.  If
 *         `store_in_dict` is `False` then the token is not stored."""
 *         if token_label in self.token_subclass_dict:             # <<<<<<<<<<<<<<
 *             raise LexerException("In `_create_token_subclass`, already created the"
 *                     " token subclass for token_label '{0}'.".format(token_label))
 */
  if (unlikely(__pyx_v_self->token_subclass_dict == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 460, __pyx_L1_error)
  }
  __pyx_t_1 = (__Pyx_PyDict_ContainsTF(__pyx_v_token_label, __pyx_v_self->token_subclass_dict, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 460, __pyx_L1_error)
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "typped/lexer.py":461
 *         `store_in_dict` is `False` then the token is not stored."""
 *         if token_label in self.token_subclass_dict:
 *             raise LexerException("In `_create_token_subclass`, already created the"             # <<<<<<<<<<<<<<
 *                     " token subclass for token_label '{0}'.".format(token_label))
 *         # Create a new token subclass for token_label and add some attributes.
 */
    __pyx_t_4 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 461, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);

    /* "typped/lexer.py":462
 *         if token_label in self.token_subclass_dict:
 *             raise LexerException("In `_create_token_subclass`, already created the"
 *                     " token subclass for token_label '{0}'.".format(token_label))             # <<<<<<<<<<<<<<
 *         # Create a new token subclass for token_label and add some attributes.
 *         TokenSubclass = self.token_subclassing_fun()
 */
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_In__create_token_subclass_alread, __pyx_n_s_format); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 462, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    if (!__pyx_t_7) {
      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_v_token_label); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 462, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_v_token_label};
        __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 462, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_5);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_v_token_label};
        __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 462, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_5);
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(1+1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 462, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_7); __pyx_t_7 = NULL;
        __Pyx_INCREF(__pyx_v_token_label);
        __Pyx_GIVEREF(__pyx_v_token_label);
        PyTuple_SET_ITEM(__pyx_t_8, 0+1, __pyx_v_token_label);
        __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 462, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (!__pyx_t_6) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 461, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_5};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 461, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_5};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 461, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(1+1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 461, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6); __pyx_t_6 = NULL;
        __Pyx_GIVEREF(__pyx_t_5);
        PyTuple_SET_ITEM(__pyx_t_8, 0+1, __pyx_t_5);
        __pyx_t_5 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_8, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 461, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 461, __pyx_L1_error)

    /* "typped/lexer.py":460
 *         if a subclass for `token_label` has already been created.  If
 *         `store_in_dict` is `False` then the token is not stored."""
 *         if token_label in self.token_subclass_dict:             # <<<<<<<<<<<<<<
 *             raise LexerException("In `_create_token_subclass`, already created the"
 *                     " token subclass for token_label '{0}'.".format(token_label))
 */
  }

  /* "typped/lexer.py":464
 *                     " token subclass for token_label '{0}'.".format(token_label))
 *         # Create a new token subclass for token_label and add some attributes.
 *         TokenSubclass = self.token_subclassing_fun()             # <<<<<<<<<<<<<<
 *         TokenSubclass.token_label = token_label
 *         TokenSubclass.__name__ = "TokenClass_" + token_label # For debugging.
 */
  __Pyx_INCREF(__pyx_v_self->token_subclassing_fun);
  __pyx_t_4 = __pyx_v_self->token_subclassing_fun; __pyx_t_8 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
    __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_4);
    if (likely(__pyx_t_8)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_8);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_4, function);
    }
  }
  if (__pyx_t_8) {
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 464, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  } else {
    __pyx_t_3 = __Pyx_PyObject_CallNoArg(__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 464, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_TokenSubclass = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "typped/lexer.py":465
 *         # Create a new token subclass for token_label and add some attributes.
 *         TokenSubclass = self.token_subclassing_fun()
 *         TokenSubclass.token_label = token_label             # <<<<<<<<<<<<<<
 *         TokenSubclass.__name__ = "TokenClass_" + token_label # For debugging.
 *         # Store the newly-created subclass in the token_dict.
 */
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_TokenSubclass, __pyx_n_s_token_label, __pyx_v_token_label) < 0) __PYX_ERR(0, 465, __pyx_L1_error)

  /* "typped/lexer.py":466
 *         TokenSubclass = self.token_subclassing_fun()
 *         TokenSubclass.token_label = token_label
 *         TokenSubclass.__name__ = "TokenClass_" + token_label # For debugging.             # <<<<<<<<<<<<<<
 *         # Store the newly-created subclass in the token_dict.
 *         if store_in_dict:
 */
  __pyx_t_3 = PyNumber_Add(__pyx_n_s_TokenClass, __pyx_v_token_label); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 466, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_TokenSubclass, __pyx_n_s_name, __pyx_t_3) < 0) __PYX_ERR(0, 466, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":468
 *         TokenSubclass.__name__ = "TokenClass_" + token_label # For debugging.
 *         # Store the newly-created subclass in the token_dict.
 *         if store_in_dict:             # <<<<<<<<<<<<<<
 *             self.token_subclass_dict[token_label] = TokenSubclass
 *         return TokenSubclass
 */
  __pyx_t_2 = (__pyx_v_store_in_dict != 0);
  if (__pyx_t_2) {

    /* "typped/lexer.py":469
 *         # Store the newly-created subclass in the token_dict.
 *         if store_in_dict:
 *             self.token_subclass_dict[token_label] = TokenSubclass             # <<<<<<<<<<<<<<
 *         return TokenSubclass
 * 
 */
    if (unlikely(__pyx_v_self->token_subclass_dict == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 469, __pyx_L1_error)
    }
    if (unlikely(PyDict_SetItem(__pyx_v_self->token_subclass_dict, __pyx_v_token_label, __pyx_v_TokenSubclass) < 0)) __PYX_ERR(0, 469, __pyx_L1_error)

    /* "typped/lexer.py":468
 *         TokenSubclass.__name__ = "TokenClass_" + token_label # For debugging.
 *         # Store the newly-created subclass in the token_dict.
 *         if store_in_dict:             # <<<<<<<<<<<<<<
 *             self.token_subclass_dict[token_label] = TokenSubclass
 *         return TokenSubclass
 */
  }

  /* "typped/lexer.py":470
 *         if store_in_dict:
 *             self.token_subclass_dict[token_label] = TokenSubclass
 *         return TokenSubclass             # <<<<<<<<<<<<<<
 * 
 *     def undef_token_subclass(self, token_label):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_TokenSubclass);
  __pyx_r = __pyx_v_TokenSubclass;
  goto __pyx_L0;

  /* "typped/lexer.py":455
 *         return TokenSubclass
 * 
 *     def _create_token_subclass(self, token_label, store_in_dict=True):             # <<<<<<<<<<<<<<
 *         """Create a subclass for tokens with label `token_label` and store it
 *         in the token table.  Return the new subclass.  Raises a `LexerException`
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("typped.lexer.TokenTable._create_token_subclass", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_TokenSubclass);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":472
 *         return TokenSubclass
 * 
 *     def undef_token_subclass(self, token_label):             # <<<<<<<<<<<<<<
 *         """Un-define the token with label token_label.  The `TokenNode` subclass
 *         previously associated with that label is removed from the dictionary."""
 */

static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_7undef_token_subclass(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_undef_token_subclass(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("undef_token_subclass", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_undef_token_subclass); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 472, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_7undef_token_subclass)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_token_label); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 472, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_token_label};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 472, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_token_label};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 472, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        {
          __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 472, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
          __Pyx_INCREF(__pyx_v_token_label);
          __Pyx_GIVEREF(__pyx_v_token_label);
          PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_v_token_label);
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 472, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":475
 *         """Un-define the token with label token_label.  The `TokenNode` subclass
 *         previously associated with that label is removed from the dictionary."""
 *         try:             # <<<<<<<<<<<<<<
 *             del self.token_subclass_dict[token_label]
 *         except KeyError:
 */
  {
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ExceptionSave(&__pyx_t_6, &__pyx_t_7, &__pyx_t_8);
    __Pyx_XGOTREF(__pyx_t_6);
    __Pyx_XGOTREF(__pyx_t_7);
    __Pyx_XGOTREF(__pyx_t_8);
    /*try:*/ {

      /* "typped/lexer.py":476
 *         previously associated with that label is removed from the dictionary."""
 *         try:
 *             del self.token_subclass_dict[token_label]             # <<<<<<<<<<<<<<
 *         except KeyError:
 *             return # Not saved in dict, ignore.
 */
      if (unlikely(__pyx_v_self->token_subclass_dict == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 476, __pyx_L3_error)
      }
      if (unlikely(PyDict_DelItem(__pyx_v_self->token_subclass_dict, __pyx_v_token_label) < 0)) __PYX_ERR(0, 476, __pyx_L3_error)

      /* "typped/lexer.py":475
 *         """Un-define the token with label token_label.  The `TokenNode` subclass
 *         previously associated with that label is removed from the dictionary."""
 *         try:             # <<<<<<<<<<<<<<
 *             del self.token_subclass_dict[token_label]
 *         except KeyError:
 */
    }
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
    goto __pyx_L8_try_end;
    __pyx_L3_error:;
    __Pyx_PyThreadState_assign
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":477
 *         try:
 *             del self.token_subclass_dict[token_label]
 *         except KeyError:             # <<<<<<<<<<<<<<
 *             return # Not saved in dict, ignore.
 * 
 */
    __pyx_t_9 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_KeyError);
    if (__pyx_t_9) {
      __Pyx_AddTraceback("typped.lexer.TokenTable.undef_token_subclass", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_2, &__pyx_t_3) < 0) __PYX_ERR(0, 477, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_GOTREF(__pyx_t_3);

      /* "typped/lexer.py":478
 *             del self.token_subclass_dict[token_label]
 *         except KeyError:
 *             return # Not saved in dict, ignore.             # <<<<<<<<<<<<<<
 * 
 *     def undef_token(self, token_label):
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_r = Py_None; __Pyx_INCREF(Py_None);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      goto __pyx_L6_except_return;
    }
    goto __pyx_L5_except_error;
    __pyx_L5_except_error:;

    /* "typped/lexer.py":475
 *         """Un-define the token with label token_label.  The `TokenNode` subclass
 *         previously associated with that label is removed from the dictionary."""
 *         try:             # <<<<<<<<<<<<<<
 *             del self.token_subclass_dict[token_label]
 *         except KeyError:
 */
    __Pyx_PyThreadState_assign
    __Pyx_XGIVEREF(__pyx_t_6);
    __Pyx_XGIVEREF(__pyx_t_7);
    __Pyx_XGIVEREF(__pyx_t_8);
    __Pyx_ExceptionReset(__pyx_t_6, __pyx_t_7, __pyx_t_8);
    goto __pyx_L1_error;
    __pyx_L6_except_return:;
    __Pyx_PyThreadState_assign
    __Pyx_XGIVEREF(__pyx_t_6);
    __Pyx_XGIVEREF(__pyx_t_7);
    __Pyx_XGIVEREF(__pyx_t_8);
    __Pyx_ExceptionReset(__pyx_t_6, __pyx_t_7, __pyx_t_8);
    goto __pyx_L0;
    __pyx_L8_try_end:;
  }

  /* "typped/lexer.py":472
 *         return TokenSubclass
 * 
 *     def undef_token_subclass(self, token_label):             # <<<<<<<<<<<<<<
 *         """Un-define the token with label token_label.  The `TokenNode` subclass
 *         previously associated with that label is removed from the dictionary."""
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("typped.lexer.TokenTable.undef_token_subclass", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_7undef_token_subclass(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label); /*proto*/
static char __pyx_doc_6typped_5lexer_10TokenTable_6undef_token_subclass[] = "Un-define the token with label token_label.  The `TokenNode` subclass\n        previously associated with that label is removed from the dictionary.";
static PyMethodDef __pyx_mdef_6typped_5lexer_10TokenTable_7undef_token_subclass = {"undef_token_subclass", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_7undef_token_subclass, METH_O, __pyx_doc_6typped_5lexer_10TokenTable_6undef_token_subclass};
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_7undef_token_subclass(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("undef_token_subclass (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_token_label), (&PyString_Type), 1, "token_label", 1))) __PYX_ERR(0, 472, __pyx_L1_error)
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_6undef_token_subclass(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject*)__pyx_v_token_label));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_6undef_token_subclass(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("undef_token_subclass", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_f_6typped_5lexer_10TokenTable_undef_token_subclass(__pyx_v_self, __pyx_v_token_label, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 472, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.undef_token_subclass", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":480
 *             return # Not saved in dict, ignore.
 * 
 *     def undef_token(self, token_label):             # <<<<<<<<<<<<<<
 *         """Undefine the token corresponding to `token_label`."""
 *         # Remove from the list of defined tokens and from the token table.
 */

static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_9undef_token(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_undef_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("undef_token", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_undef_token); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 480, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_9undef_token)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_token_label); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 480, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_token_label};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 480, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_token_label};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 480, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        {
          __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 480, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
          __Pyx_INCREF(__pyx_v_token_label);
          __Pyx_GIVEREF(__pyx_v_token_label);
          PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_v_token_label);
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 480, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":483
 *         """Undefine the token corresponding to `token_label`."""
 *         # Remove from the list of defined tokens and from the token table.
 *         self.undef_token_subclass(token_label)             # <<<<<<<<<<<<<<
 *         self.pattern_matcher.undef_pattern(token_label)
 * 
 */
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenTable *)__pyx_v_self->__pyx_vtab)->undef_token_subclass(__pyx_v_self, __pyx_v_token_label, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 483, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":484
 *         # Remove from the list of defined tokens and from the token table.
 *         self.undef_token_subclass(token_label)
 *         self.pattern_matcher.undef_pattern(token_label)             # <<<<<<<<<<<<<<
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self->pattern_matcher), __pyx_n_s_undef_pattern); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 484, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (!__pyx_t_3) {
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_v_token_label); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 484, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_v_token_label};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 484, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_v_token_label};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 484, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 484, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3); __pyx_t_3 = NULL;
      __Pyx_INCREF(__pyx_v_token_label);
      __Pyx_GIVEREF(__pyx_v_token_label);
      PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_v_token_label);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 484, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":480
 *             return # Not saved in dict, ignore.
 * 
 *     def undef_token(self, token_label):             # <<<<<<<<<<<<<<
 *         """Undefine the token corresponding to `token_label`."""
 *         # Remove from the list of defined tokens and from the token table.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("typped.lexer.TokenTable.undef_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_9undef_token(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label); /*proto*/
static char __pyx_doc_6typped_5lexer_10TokenTable_8undef_token[] = "Undefine the token corresponding to `token_label`.";
static PyMethodDef __pyx_mdef_6typped_5lexer_10TokenTable_9undef_token = {"undef_token", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_9undef_token, METH_O, __pyx_doc_6typped_5lexer_10TokenTable_8undef_token};
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_9undef_token(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("undef_token (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_token_label), (&PyString_Type), 1, "token_label", 1))) __PYX_ERR(0, 480, __pyx_L1_error)
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_8undef_token(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject*)__pyx_v_token_label));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_8undef_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("undef_token", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_f_6typped_5lexer_10TokenTable_undef_token(__pyx_v_self, __pyx_v_token_label, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 480, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.undef_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":486
 *         self.pattern_matcher.undef_pattern(token_label)
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """Define a token and the regex to recognize it.  Returns the new
 */

static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_11def_token(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_def_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label, PyObject *__pyx_v_regex_string, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_10TokenTable_def_token *__pyx_optional_args) {
  PyObject *__pyx_v_on_ties = ((PyObject *)__pyx_int_0);
  int __pyx_v_ignore = ((int)0);

  /* "typped/lexer.py":487
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,
 *                   matcher_options=None):             # <<<<<<<<<<<<<<
 *         """Define a token and the regex to recognize it.  Returns the new
 *         token subclass.
 */
  PyObject *__pyx_v_matcher_options = ((PyObject *)Py_None);
  PyObject *__pyx_v_tok = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  int __pyx_t_9;
  struct __pyx_opt_args_6typped_7matcher_7Matcher_insert_pattern __pyx_t_10;
  __Pyx_RefNannySetupContext("def_token", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_on_ties = __pyx_optional_args->on_ties;
      if (__pyx_optional_args->__pyx_n > 1) {
        __pyx_v_ignore = __pyx_optional_args->ignore;
        if (__pyx_optional_args->__pyx_n > 2) {
          __pyx_v_matcher_options = __pyx_optional_args->matcher_options;
        }
      }
    }
  }

  /* "typped/lexer.py":486
 *         self.pattern_matcher.undef_pattern(token_label)
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """Define a token and the regex to recognize it.  Returns the new
 */
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_def_token); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 486, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_11def_token)) {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyBool_FromLong(__pyx_v_ignore); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 486, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_4 = __pyx_t_1; __pyx_t_5 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[6] = {__pyx_t_5, __pyx_v_token_label, __pyx_v_regex_string, __pyx_v_on_ties, __pyx_t_3, __pyx_v_matcher_options};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 5+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 486, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[6] = {__pyx_t_5, __pyx_v_token_label, __pyx_v_regex_string, __pyx_v_on_ties, __pyx_t_3, __pyx_v_matcher_options};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 5+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 486, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      {
        __pyx_t_7 = PyTuple_New(5+__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 486, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        if (__pyx_t_5) {
          __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
        }
        __Pyx_INCREF(__pyx_v_token_label);
        __Pyx_GIVEREF(__pyx_v_token_label);
        PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_6, __pyx_v_token_label);
        __Pyx_INCREF(__pyx_v_regex_string);
        __Pyx_GIVEREF(__pyx_v_regex_string);
        PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_6, __pyx_v_regex_string);
        __Pyx_INCREF(__pyx_v_on_ties);
        __Pyx_GIVEREF(__pyx_v_on_ties);
        PyTuple_SET_ITEM(__pyx_t_7, 2+__pyx_t_6, __pyx_v_on_ties);
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_7, 3+__pyx_t_6, __pyx_t_3);
        __Pyx_INCREF(__pyx_v_matcher_options);
        __Pyx_GIVEREF(__pyx_v_matcher_options);
        PyTuple_SET_ITEM(__pyx_t_7, 4+__pyx_t_6, __pyx_v_matcher_options);
        __pyx_t_3 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_7, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 486, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":509
 *         The `option` parameter takes a string value, which is then passed to
 *         the `insert_pattern` method of whatever matcher is being used."""
 *         if token_label in self:             # <<<<<<<<<<<<<<
 *             raise LexerException("A token with label '{0}' is already defined.  It "
 *             "must be undefined before it can be redefined.".format(token_label))
 */
  __pyx_t_8 = (__Pyx_PySequence_ContainsTF(__pyx_v_token_label, ((PyObject *)__pyx_v_self), Py_EQ)); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 509, __pyx_L1_error)
  __pyx_t_9 = (__pyx_t_8 != 0);
  if (__pyx_t_9) {

    /* "typped/lexer.py":510
 *         the `insert_pattern` method of whatever matcher is being used."""
 *         if token_label in self:
 *             raise LexerException("A token with label '{0}' is already defined.  It "             # <<<<<<<<<<<<<<
 *             "must be undefined before it can be redefined.".format(token_label))
 * 
 */
    __pyx_t_2 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 510, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);

    /* "typped/lexer.py":511
 *         if token_label in self:
 *             raise LexerException("A token with label '{0}' is already defined.  It "
 *             "must be undefined before it can be redefined.".format(token_label))             # <<<<<<<<<<<<<<
 * 
 *         if regex_string is not None:
 */
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_A_token_with_label_0_is_already, __pyx_n_s_format); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 511, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
      }
    }
    if (!__pyx_t_3) {
      __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_v_token_label); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 511, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_7)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_v_token_label};
        __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 511, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_4);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_v_token_label};
        __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 511, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_4);
      } else
      #endif
      {
        __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 511, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3); __pyx_t_3 = NULL;
        __Pyx_INCREF(__pyx_v_token_label);
        __Pyx_GIVEREF(__pyx_v_token_label);
        PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_v_token_label);
        __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_5, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 511, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    if (!__pyx_t_7) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 510, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_4};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 510, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_4};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 510, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 510, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_7); __pyx_t_7 = NULL;
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 510, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_Raise(__pyx_t_1, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __PYX_ERR(0, 510, __pyx_L1_error)

    /* "typped/lexer.py":509
 *         The `option` parameter takes a string value, which is then passed to
 *         the `insert_pattern` method of whatever matcher is being used."""
 *         if token_label in self:             # <<<<<<<<<<<<<<
 *             raise LexerException("A token with label '{0}' is already defined.  It "
 *             "must be undefined before it can be redefined.".format(token_label))
 */
  }

  /* "typped/lexer.py":513
 *             "must be undefined before it can be redefined.".format(token_label))
 * 
 *         if regex_string is not None:             # <<<<<<<<<<<<<<
 *             self.pattern_matcher.insert_pattern(token_label, regex_string,
 *                          on_ties, ignore=ignore, matcher_options=matcher_options)
 */
  __pyx_t_9 = (__pyx_v_regex_string != Py_None);
  __pyx_t_8 = (__pyx_t_9 != 0);
  if (__pyx_t_8) {

    /* "typped/lexer.py":514
 * 
 *         if regex_string is not None:
 *             self.pattern_matcher.insert_pattern(token_label, regex_string,             # <<<<<<<<<<<<<<
 *                          on_ties, ignore=ignore, matcher_options=matcher_options)
 * 
 */
    __pyx_t_10.__pyx_n = 3;
    __pyx_t_10.on_ties = __pyx_v_on_ties;
    __pyx_t_10.ignore = __pyx_v_ignore;
    __pyx_t_10.matcher_options = __pyx_v_matcher_options;
    __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_7matcher_Matcher *)__pyx_v_self->pattern_matcher->__pyx_vtab)->insert_pattern(__pyx_v_self->pattern_matcher, __pyx_v_token_label, __pyx_v_regex_string, 0, &__pyx_t_10); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 514, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":513
 *             "must be undefined before it can be redefined.".format(token_label))
 * 
 *         if regex_string is not None:             # <<<<<<<<<<<<<<
 *             self.pattern_matcher.insert_pattern(token_label, regex_string,
 *                          on_ties, ignore=ignore, matcher_options=matcher_options)
 */
  }

  /* "typped/lexer.py":518
 * 
 *         # Initialize and return a bare-bones, default token_subclass.
 *         tok = self._create_token_subclass(token_label)             # <<<<<<<<<<<<<<
 *         tok.token_table = self
 *         return tok
 */
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenTable *)__pyx_v_self->__pyx_vtab)->_create_token_subclass(__pyx_v_self, __pyx_v_token_label, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 518, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_tok = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":519
 *         # Initialize and return a bare-bones, default token_subclass.
 *         tok = self._create_token_subclass(token_label)
 *         tok.token_table = self             # <<<<<<<<<<<<<<
 *         return tok
 * 
 */
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_tok, __pyx_n_s_token_table, ((PyObject *)__pyx_v_self)) < 0) __PYX_ERR(0, 519, __pyx_L1_error)

  /* "typped/lexer.py":520
 *         tok = self._create_token_subclass(token_label)
 *         tok.token_table = self
 *         return tok             # <<<<<<<<<<<<<<
 * 
 *     def def_begin_token(self, begin_token_label):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_tok);
  __pyx_r = __pyx_v_tok;
  goto __pyx_L0;

  /* "typped/lexer.py":486
 *         self.pattern_matcher.undef_pattern(token_label)
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """Define a token and the regex to recognize it.  Returns the new
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("typped.lexer.TokenTable.def_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_tok);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_11def_token(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_10TokenTable_10def_token[] = "Define a token and the regex to recognize it.  Returns the new\n        token subclass.\n\n        The label `token_label` is the label for the kind of token.\n\n        The label `regex_string` is a Python regular expression defining the\n        text strings which match for the token.  If `regex_string` is set to\n        `None` then a dummy token will be created which is never searched for\n        in the lexed text.  To better catch errors it does not have a default\n        value, so setting it to `None` must be done explicitly.\n\n        Setting `ignore=True` will cause all such tokens to be ignored (except\n        that they will be placed on the `ignored_before` list of the\n        non-ignored token that they precede).\n\n        In case of ties for the longest match in scanning, the integer\n        `on_ties` values are used to break the ties.  If any two are still\n        equal an exception will be raised.\n\n        The `option` parameter takes a string value, which is then passed to\n        the `insert_pattern` method of whatever matcher is being used.";
static PyMethodDef __pyx_mdef_6typped_5lexer_10TokenTable_11def_token = {"def_token", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_11def_token, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_10TokenTable_10def_token};
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_11def_token(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_token_label = 0;
  PyObject *__pyx_v_regex_string = 0;
  PyObject *__pyx_v_on_ties = 0;
  int __pyx_v_ignore;
  PyObject *__pyx_v_matcher_options = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("def_token (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_token_label,&__pyx_n_s_regex_string,&__pyx_n_s_on_ties,&__pyx_n_s_ignore,&__pyx_n_s_matcher_options,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[2] = ((PyObject *)__pyx_int_0);

    /* "typped/lexer.py":487
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,
 *                   matcher_options=None):             # <<<<<<<<<<<<<<
 *         """Define a token and the regex to recognize it.  Returns the new
 *         token subclass.
 */
    values[4] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_token_label)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_regex_string)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("def_token", 0, 2, 5, 1); __PYX_ERR(0, 486, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_on_ties);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_ignore);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_matcher_options);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "def_token") < 0)) __PYX_ERR(0, 486, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_token_label = ((PyObject*)values[0]);
    __pyx_v_regex_string = values[1];
    __pyx_v_on_ties = values[2];
    if (values[3]) {
      __pyx_v_ignore = __Pyx_PyObject_IsTrue(values[3]); if (unlikely((__pyx_v_ignore == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 486, __pyx_L3_error)
    } else {

      /* "typped/lexer.py":486
 *         self.pattern_matcher.undef_pattern(token_label)
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """Define a token and the regex to recognize it.  Returns the new
 */
      __pyx_v_ignore = ((int)0);
    }
    __pyx_v_matcher_options = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("def_token", 0, 2, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 486, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenTable.def_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_token_label), (&PyString_Type), 1, "token_label", 1))) __PYX_ERR(0, 486, __pyx_L1_error)
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_10def_token(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), __pyx_v_token_label, __pyx_v_regex_string, __pyx_v_on_ties, __pyx_v_ignore, __pyx_v_matcher_options);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_10def_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_token_label, PyObject *__pyx_v_regex_string, PyObject *__pyx_v_on_ties, int __pyx_v_ignore, PyObject *__pyx_v_matcher_options) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_10TokenTable_def_token __pyx_t_2;
  __Pyx_RefNannySetupContext("def_token", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 3;
  __pyx_t_2.on_ties = __pyx_v_on_ties;
  __pyx_t_2.ignore = __pyx_v_ignore;
  __pyx_t_2.matcher_options = __pyx_v_matcher_options;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_TokenTable->def_token(__pyx_v_self, __pyx_v_token_label, __pyx_v_regex_string, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 486, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.def_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":522
 *         return tok
 * 
 *     def def_begin_token(self, begin_token_label):             # <<<<<<<<<<<<<<
 *         """Define the begin-token.  The lexer's `def_begin_end_tokens` method
 *         should usually be called instead."""
 */

static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_13def_begin_token(PyObject *__pyx_v_self, PyObject *__pyx_v_begin_token_label); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_def_begin_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_begin_token_label, int __pyx_skip_dispatch) {
  PyObject *__pyx_v_tok = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("def_begin_token", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_def_begin_token); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 522, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_13def_begin_token)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_begin_token_label); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 522, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_begin_token_label};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 522, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_begin_token_label};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 522, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        {
          __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 522, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
          __Pyx_INCREF(__pyx_v_begin_token_label);
          __Pyx_GIVEREF(__pyx_v_begin_token_label);
          PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_v_begin_token_label);
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 522, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":525
 *         """Define the begin-token.  The lexer's `def_begin_end_tokens` method
 *         should usually be called instead."""
 *         tok = self.def_token(begin_token_label, None)             # <<<<<<<<<<<<<<
 *         self.begin_token_label = begin_token_label
 *         self.begin_token_subclass = tok
 */
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenTable *)__pyx_v_self->__pyx_vtab)->def_token(__pyx_v_self, __pyx_v_begin_token_label, Py_None, 0, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 525, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_tok = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":526
 *         should usually be called instead."""
 *         tok = self.def_token(begin_token_label, None)
 *         self.begin_token_label = begin_token_label             # <<<<<<<<<<<<<<
 *         self.begin_token_subclass = tok
 *         return tok
 */
  __Pyx_INCREF(__pyx_v_begin_token_label);
  __Pyx_GIVEREF(__pyx_v_begin_token_label);
  __Pyx_GOTREF(__pyx_v_self->begin_token_label);
  __Pyx_DECREF(__pyx_v_self->begin_token_label);
  __pyx_v_self->begin_token_label = __pyx_v_begin_token_label;

  /* "typped/lexer.py":527
 *         tok = self.def_token(begin_token_label, None)
 *         self.begin_token_label = begin_token_label
 *         self.begin_token_subclass = tok             # <<<<<<<<<<<<<<
 *         return tok
 * 
 */
  __Pyx_INCREF(__pyx_v_tok);
  __Pyx_GIVEREF(__pyx_v_tok);
  __Pyx_GOTREF(__pyx_v_self->begin_token_subclass);
  __Pyx_DECREF(__pyx_v_self->begin_token_subclass);
  __pyx_v_self->begin_token_subclass = __pyx_v_tok;

  /* "typped/lexer.py":528
 *         self.begin_token_label = begin_token_label
 *         self.begin_token_subclass = tok
 *         return tok             # <<<<<<<<<<<<<<
 * 
 *     def def_end_token(self, end_token_label):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_tok);
  __pyx_r = __pyx_v_tok;
  goto __pyx_L0;

  /* "typped/lexer.py":522
 *         return tok
 * 
 *     def def_begin_token(self, begin_token_label):             # <<<<<<<<<<<<<<
 *         """Define the begin-token.  The lexer's `def_begin_end_tokens` method
 *         should usually be called instead."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("typped.lexer.TokenTable.def_begin_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_tok);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_13def_begin_token(PyObject *__pyx_v_self, PyObject *__pyx_v_begin_token_label); /*proto*/
static char __pyx_doc_6typped_5lexer_10TokenTable_12def_begin_token[] = "Define the begin-token.  The lexer's `def_begin_end_tokens` method\n        should usually be called instead.";
static PyMethodDef __pyx_mdef_6typped_5lexer_10TokenTable_13def_begin_token = {"def_begin_token", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_13def_begin_token, METH_O, __pyx_doc_6typped_5lexer_10TokenTable_12def_begin_token};
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_13def_begin_token(PyObject *__pyx_v_self, PyObject *__pyx_v_begin_token_label) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("def_begin_token (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_begin_token_label), (&PyString_Type), 1, "begin_token_label", 1))) __PYX_ERR(0, 522, __pyx_L1_error)
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_12def_begin_token(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject*)__pyx_v_begin_token_label));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_12def_begin_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_begin_token_label) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("def_begin_token", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_f_6typped_5lexer_10TokenTable_def_begin_token(__pyx_v_self, __pyx_v_begin_token_label, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 522, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.def_begin_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":530
 *         return tok
 * 
 *     def def_end_token(self, end_token_label):             # <<<<<<<<<<<<<<
 *         """Define the end-token.  The `def_begin_end_tokens` method should usually
 *         be called instead."""
 */

static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_15def_end_token(PyObject *__pyx_v_self, PyObject *__pyx_v_end_token_label); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_def_end_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_end_token_label, int __pyx_skip_dispatch) {
  PyObject *__pyx_v_tok = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("def_end_token", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_def_end_token); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 530, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_15def_end_token)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_end_token_label); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 530, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_end_token_label};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 530, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_end_token_label};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 530, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        {
          __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 530, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
          __Pyx_INCREF(__pyx_v_end_token_label);
          __Pyx_GIVEREF(__pyx_v_end_token_label);
          PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_v_end_token_label);
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 530, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":533
 *         """Define the end-token.  The `def_begin_end_tokens` method should usually
 *         be called instead."""
 *         tok = self.def_token(end_token_label, None)             # <<<<<<<<<<<<<<
 *         self.end_token_label = end_token_label
 *         self.end_token_subclass = tok
 */
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenTable *)__pyx_v_self->__pyx_vtab)->def_token(__pyx_v_self, __pyx_v_end_token_label, Py_None, 0, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 533, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_tok = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":534
 *         be called instead."""
 *         tok = self.def_token(end_token_label, None)
 *         self.end_token_label = end_token_label             # <<<<<<<<<<<<<<
 *         self.end_token_subclass = tok
 *         return tok
 */
  __Pyx_INCREF(__pyx_v_end_token_label);
  __Pyx_GIVEREF(__pyx_v_end_token_label);
  __Pyx_GOTREF(__pyx_v_self->end_token_label);
  __Pyx_DECREF(__pyx_v_self->end_token_label);
  __pyx_v_self->end_token_label = __pyx_v_end_token_label;

  /* "typped/lexer.py":535
 *         tok = self.def_token(end_token_label, None)
 *         self.end_token_label = end_token_label
 *         self.end_token_subclass = tok             # <<<<<<<<<<<<<<
 *         return tok
 * 
 */
  __Pyx_INCREF(__pyx_v_tok);
  __Pyx_GIVEREF(__pyx_v_tok);
  __Pyx_GOTREF(__pyx_v_self->end_token_subclass);
  __Pyx_DECREF(__pyx_v_self->end_token_subclass);
  __pyx_v_self->end_token_subclass = __pyx_v_tok;

  /* "typped/lexer.py":536
 *         self.end_token_label = end_token_label
 *         self.end_token_subclass = tok
 *         return tok             # <<<<<<<<<<<<<<
 * 
 *     def get_next_token_label_and_value(self, program, prog_unprocessed_indices,
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_tok);
  __pyx_r = __pyx_v_tok;
  goto __pyx_L0;

  /* "typped/lexer.py":530
 *         return tok
 * 
 *     def def_end_token(self, end_token_label):             # <<<<<<<<<<<<<<
 *         """Define the end-token.  The `def_begin_end_tokens` method should usually
 *         be called instead."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("typped.lexer.TokenTable.def_end_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_tok);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_15def_end_token(PyObject *__pyx_v_self, PyObject *__pyx_v_end_token_label); /*proto*/
static char __pyx_doc_6typped_5lexer_10TokenTable_14def_end_token[] = "Define the end-token.  The `def_begin_end_tokens` method should usually\n        be called instead.";
static PyMethodDef __pyx_mdef_6typped_5lexer_10TokenTable_15def_end_token = {"def_end_token", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_15def_end_token, METH_O, __pyx_doc_6typped_5lexer_10TokenTable_14def_end_token};
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_15def_end_token(PyObject *__pyx_v_self, PyObject *__pyx_v_end_token_label) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("def_end_token (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_end_token_label), (&PyString_Type), 1, "end_token_label", 1))) __PYX_ERR(0, 530, __pyx_L1_error)
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_14def_end_token(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject*)__pyx_v_end_token_label));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_14def_end_token(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_end_token_label) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("def_end_token", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_f_6typped_5lexer_10TokenTable_def_end_token(__pyx_v_self, __pyx_v_end_token_label, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 530, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.def_end_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":538
 *         return tok
 * 
 *     def get_next_token_label_and_value(self, program, prog_unprocessed_indices,             # <<<<<<<<<<<<<<
 *                                              ERROR_MSG_TEXT_SNIPPET_SIZE):
 *         """Return the next token label for the start of the current program
 */

static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_17get_next_token_label_and_value(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_get_next_token_label_and_value(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_program, PyObject *__pyx_v_prog_unprocessed_indices, long __pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  struct __pyx_opt_args_6typped_7matcher_7Matcher_get_next_token_label_and_value __pyx_t_8;
  __Pyx_RefNannySetupContext("get_next_token_label_and_value", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_get_next_token_label_and_value); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 538, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_17get_next_token_label_and_value)) {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 538, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_4 = __pyx_t_1; __pyx_t_5 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[4] = {__pyx_t_5, __pyx_v_program, __pyx_v_prog_unprocessed_indices, __pyx_t_3};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 538, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[4] = {__pyx_t_5, __pyx_v_program, __pyx_v_prog_unprocessed_indices, __pyx_t_3};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 538, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      {
        __pyx_t_7 = PyTuple_New(3+__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 538, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        if (__pyx_t_5) {
          __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
        }
        __Pyx_INCREF(__pyx_v_program);
        __Pyx_GIVEREF(__pyx_v_program);
        PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_6, __pyx_v_program);
        __Pyx_INCREF(__pyx_v_prog_unprocessed_indices);
        __Pyx_GIVEREF(__pyx_v_prog_unprocessed_indices);
        PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_6, __pyx_v_prog_unprocessed_indices);
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_7, 2+__pyx_t_6, __pyx_t_3);
        __pyx_t_3 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_7, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 538, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":543
 *         text, as in the string `program` and indexed by the numbers in
 *         the ordered-pair tuple `prog_unprocessed`."""
 *         return self.pattern_matcher.get_next_token_label_and_value(             # <<<<<<<<<<<<<<
 *                                               program, prog_unprocessed_indices,
 *                                               ERROR_MSG_TEXT_SNIPPET_SIZE)
 */
  __Pyx_XDECREF(__pyx_r);

  /* "typped/lexer.py":545
 *         return self.pattern_matcher.get_next_token_label_and_value(
 *                                               program, prog_unprocessed_indices,
 *                                               ERROR_MSG_TEXT_SNIPPET_SIZE)             # <<<<<<<<<<<<<<
 * 
 *     def ignored_tokens(self):
 */
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 545, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);

  /* "typped/lexer.py":543
 *         text, as in the string `program` and indexed by the numbers in
 *         the ordered-pair tuple `prog_unprocessed`."""
 *         return self.pattern_matcher.get_next_token_label_and_value(             # <<<<<<<<<<<<<<
 *                                               program, prog_unprocessed_indices,
 *                                               ERROR_MSG_TEXT_SNIPPET_SIZE)
 */
  __pyx_t_8.__pyx_n = 1;
  __pyx_t_8.error_msg_text_snippet_size = __pyx_t_1;
  __pyx_t_2 = ((struct __pyx_vtabstruct_6typped_7matcher_Matcher *)__pyx_v_self->pattern_matcher->__pyx_vtab)->get_next_token_label_and_value(__pyx_v_self->pattern_matcher, __pyx_v_program, __pyx_v_prog_unprocessed_indices, 0, &__pyx_t_8); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 543, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":538
 *         return tok
 * 
 *     def get_next_token_label_and_value(self, program, prog_unprocessed_indices,             # <<<<<<<<<<<<<<
 *                                              ERROR_MSG_TEXT_SNIPPET_SIZE):
 *         """Return the next token label for the start of the current program
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("typped.lexer.TokenTable.get_next_token_label_and_value", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_17get_next_token_label_and_value(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_10TokenTable_16get_next_token_label_and_value[] = "Return the next token label for the start of the current program\n        text, as in the string `program` and indexed by the numbers in\n        the ordered-pair tuple `prog_unprocessed`.";
static PyMethodDef __pyx_mdef_6typped_5lexer_10TokenTable_17get_next_token_label_and_value = {"get_next_token_label_and_value", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_17get_next_token_label_and_value, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_10TokenTable_16get_next_token_label_and_value};
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_17get_next_token_label_and_value(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_program = 0;
  PyObject *__pyx_v_prog_unprocessed_indices = 0;
  long __pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_next_token_label_and_value (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_program,&__pyx_n_s_prog_unprocessed_indices,&__pyx_n_s_ERROR_MSG_TEXT_SNIPPET_SIZE,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_program)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_prog_unprocessed_indices)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("get_next_token_label_and_value", 1, 3, 3, 1); __PYX_ERR(0, 538, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_ERROR_MSG_TEXT_SNIPPET_SIZE)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("get_next_token_label_and_value", 1, 3, 3, 2); __PYX_ERR(0, 538, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_next_token_label_and_value") < 0)) __PYX_ERR(0, 538, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_program = values[0];
    __pyx_v_prog_unprocessed_indices = values[1];
    __pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE = __Pyx_PyInt_As_long(values[2]); if (unlikely((__pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 539, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("get_next_token_label_and_value", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 538, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenTable.get_next_token_label_and_value", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_16get_next_token_label_and_value(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), __pyx_v_program, __pyx_v_prog_unprocessed_indices, __pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_16get_next_token_label_and_value(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_program, PyObject *__pyx_v_prog_unprocessed_indices, long __pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("get_next_token_label_and_value", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_f_6typped_5lexer_10TokenTable_get_next_token_label_and_value(__pyx_v_self, __pyx_v_program, __pyx_v_prog_unprocessed_indices, __pyx_v_ERROR_MSG_TEXT_SNIPPET_SIZE, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 538, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.get_next_token_label_and_value", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":547
 *                                               ERROR_MSG_TEXT_SNIPPET_SIZE)
 * 
 *     def ignored_tokens(self):             # <<<<<<<<<<<<<<
 *         """Return the set of ignored tokens."""
 *         return self.pattern_matcher.ignore_tokens
 */

static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_19ignored_tokens(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_10TokenTable_ignored_tokens(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("ignored_tokens", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_ignored_tokens); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 547, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_19ignored_tokens)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 547, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 547, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":549
 *     def ignored_tokens(self):
 *         """Return the set of ignored tokens."""
 *         return self.pattern_matcher.ignore_tokens             # <<<<<<<<<<<<<<
 * 
 * #
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->pattern_matcher->ignore_tokens);
  __pyx_r = __pyx_v_self->pattern_matcher->ignore_tokens;
  goto __pyx_L0;

  /* "typped/lexer.py":547
 *                                               ERROR_MSG_TEXT_SNIPPET_SIZE)
 * 
 *     def ignored_tokens(self):             # <<<<<<<<<<<<<<
 *         """Return the set of ignored tokens."""
 *         return self.pattern_matcher.ignore_tokens
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("typped.lexer.TokenTable.ignored_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_19ignored_tokens(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_10TokenTable_18ignored_tokens[] = "Return the set of ignored tokens.";
static PyMethodDef __pyx_mdef_6typped_5lexer_10TokenTable_19ignored_tokens = {"ignored_tokens", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_19ignored_tokens, METH_NOARGS, __pyx_doc_6typped_5lexer_10TokenTable_18ignored_tokens};
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_19ignored_tokens(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("ignored_tokens (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_18ignored_tokens(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_18ignored_tokens(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("ignored_tokens", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_f_6typped_5lexer_10TokenTable_ignored_tokens(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 547, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.ignored_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":60
 *     the kinds of tokens which have been defined for it."""
 *     cpdef token_subclassing_fun
 *     cpdef public dict token_subclass_dict # Only public because a test case uses it...             # <<<<<<<<<<<<<<
 *     cpdef public Lexer lex
 *     cpdef public str begin_token_label, end_token_label
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_19token_subclass_dict_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_19token_subclass_dict_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_19token_subclass_dict___get__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_19token_subclass_dict___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->token_subclass_dict);
  __pyx_r = __pyx_v_self->token_subclass_dict;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_19token_subclass_dict_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_19token_subclass_dict_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_19token_subclass_dict_2__set__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_19token_subclass_dict_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__set__", 0);
  if (!(likely(PyDict_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_v_value)->tp_name), 0))) __PYX_ERR(1, 60, __pyx_L1_error)
  __pyx_t_1 = __pyx_v_value;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->token_subclass_dict);
  __Pyx_DECREF(__pyx_v_self->token_subclass_dict);
  __pyx_v_self->token_subclass_dict = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.token_subclass_dict.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_19token_subclass_dict_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_19token_subclass_dict_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_19token_subclass_dict_4__del__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_19token_subclass_dict_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->token_subclass_dict);
  __Pyx_DECREF(__pyx_v_self->token_subclass_dict);
  __pyx_v_self->token_subclass_dict = ((PyObject*)Py_None);

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":61
 *     cpdef token_subclassing_fun
 *     cpdef public dict token_subclass_dict # Only public because a test case uses it...
 *     cpdef public Lexer lex             # <<<<<<<<<<<<<<
 *     cpdef public str begin_token_label, end_token_label
 *     cpdef public begin_token_subclass, end_token_subclass
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_3lex_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_3lex_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_3lex___get__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_3lex___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_self->lex));
  __pyx_r = ((PyObject *)__pyx_v_self->lex);
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_3lex_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_3lex_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_3lex_2__set__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_3lex_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__set__", 0);
  if (!(likely(((__pyx_v_value) == Py_None) || likely(__Pyx_TypeTest(__pyx_v_value, __pyx_ptype_6typped_5lexer_Lexer))))) __PYX_ERR(1, 61, __pyx_L1_error)
  __pyx_t_1 = __pyx_v_value;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->lex);
  __Pyx_DECREF(((PyObject *)__pyx_v_self->lex));
  __pyx_v_self->lex = ((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.lex.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_3lex_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_3lex_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_3lex_4__del__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_3lex_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->lex);
  __Pyx_DECREF(((PyObject *)__pyx_v_self->lex));
  __pyx_v_self->lex = ((struct __pyx_obj_6typped_5lexer_Lexer *)Py_None);

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":62
 *     cpdef public dict token_subclass_dict # Only public because a test case uses it...
 *     cpdef public Lexer lex
 *     cpdef public str begin_token_label, end_token_label             # <<<<<<<<<<<<<<
 *     cpdef public begin_token_subclass, end_token_subclass
 *     cpdef Matcher pattern_matcher
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_17begin_token_label_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_17begin_token_label_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_17begin_token_label___get__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_17begin_token_label___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->begin_token_label);
  __pyx_r = __pyx_v_self->begin_token_label;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_17begin_token_label_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_17begin_token_label_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_17begin_token_label_2__set__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_17begin_token_label_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__set__", 0);
  if (!(likely(PyString_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "str", Py_TYPE(__pyx_v_value)->tp_name), 0))) __PYX_ERR(1, 62, __pyx_L1_error)
  __pyx_t_1 = __pyx_v_value;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->begin_token_label);
  __Pyx_DECREF(__pyx_v_self->begin_token_label);
  __pyx_v_self->begin_token_label = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.begin_token_label.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_17begin_token_label_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_17begin_token_label_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_17begin_token_label_4__del__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_17begin_token_label_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->begin_token_label);
  __Pyx_DECREF(__pyx_v_self->begin_token_label);
  __pyx_v_self->begin_token_label = ((PyObject*)Py_None);

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_15end_token_label_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_15end_token_label_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_15end_token_label___get__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_15end_token_label___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->end_token_label);
  __pyx_r = __pyx_v_self->end_token_label;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_15end_token_label_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_15end_token_label_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_15end_token_label_2__set__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_15end_token_label_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__set__", 0);
  if (!(likely(PyString_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "str", Py_TYPE(__pyx_v_value)->tp_name), 0))) __PYX_ERR(1, 62, __pyx_L1_error)
  __pyx_t_1 = __pyx_v_value;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->end_token_label);
  __Pyx_DECREF(__pyx_v_self->end_token_label);
  __pyx_v_self->end_token_label = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.end_token_label.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_15end_token_label_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_15end_token_label_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_15end_token_label_4__del__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_15end_token_label_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->end_token_label);
  __Pyx_DECREF(__pyx_v_self->end_token_label);
  __pyx_v_self->end_token_label = ((PyObject*)Py_None);

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":63
 *     cpdef public Lexer lex
 *     cpdef public str begin_token_label, end_token_label
 *     cpdef public begin_token_subclass, end_token_subclass             # <<<<<<<<<<<<<<
 *     cpdef Matcher pattern_matcher
 *     cpdef dict __dict__ # Allow attributes to be set.
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_20begin_token_subclass_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_20begin_token_subclass_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_20begin_token_subclass___get__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_20begin_token_subclass___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->begin_token_subclass);
  __pyx_r = __pyx_v_self->begin_token_subclass;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_20begin_token_subclass_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_20begin_token_subclass_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_20begin_token_subclass_2__set__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_20begin_token_subclass_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__", 0);
  __Pyx_INCREF(__pyx_v_value);
  __Pyx_GIVEREF(__pyx_v_value);
  __Pyx_GOTREF(__pyx_v_self->begin_token_subclass);
  __Pyx_DECREF(__pyx_v_self->begin_token_subclass);
  __pyx_v_self->begin_token_subclass = __pyx_v_value;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_20begin_token_subclass_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_20begin_token_subclass_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_20begin_token_subclass_4__del__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_20begin_token_subclass_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->begin_token_subclass);
  __Pyx_DECREF(__pyx_v_self->begin_token_subclass);
  __pyx_v_self->begin_token_subclass = Py_None;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_18end_token_subclass_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_18end_token_subclass_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_18end_token_subclass___get__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_18end_token_subclass___get__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->end_token_subclass);
  __pyx_r = __pyx_v_self->end_token_subclass;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_18end_token_subclass_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_18end_token_subclass_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_18end_token_subclass_2__set__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_18end_token_subclass_2__set__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__", 0);
  __Pyx_INCREF(__pyx_v_value);
  __Pyx_GIVEREF(__pyx_v_value);
  __Pyx_GOTREF(__pyx_v_self->end_token_subclass);
  __Pyx_DECREF(__pyx_v_self->end_token_subclass);
  __pyx_v_self->end_token_subclass = __pyx_v_value;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_10TokenTable_18end_token_subclass_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_10TokenTable_18end_token_subclass_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_18end_token_subclass_4__del__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_10TokenTable_18end_token_subclass_4__del__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->end_token_subclass);
  __Pyx_DECREF(__pyx_v_self->end_token_subclass);
  __pyx_v_self->end_token_subclass = Py_None;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self.begin_token_label, self.begin_token_subclass, self.end_token_label, self.end_token_subclass, self.lex, self.pattern_matcher, self.token_subclass_dict, self.token_subclassing_fun)
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_21__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_10TokenTable_21__reduce_cython__ = {"__reduce_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_21__reduce_cython__, METH_NOARGS, 0};
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_21__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__reduce_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_20__reduce_cython__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_20__reduce_cython__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self) {
  int __pyx_v_use_setstate;
  PyObject *__pyx_v_state = NULL;
  PyObject *__pyx_v__dict = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("__reduce_cython__", 0);

  /* "(tree fragment)":3
 * def __reduce_cython__(self):
 *     cdef bint use_setstate
 *     state = (self.begin_token_label, self.begin_token_subclass, self.end_token_label, self.end_token_subclass, self.lex, self.pattern_matcher, self.token_subclass_dict, self.token_subclassing_fun)             # <<<<<<<<<<<<<<
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:
 */
  __pyx_t_1 = PyTuple_New(8); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_self->begin_token_label);
  __Pyx_GIVEREF(__pyx_v_self->begin_token_label);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_self->begin_token_label);
  __Pyx_INCREF(__pyx_v_self->begin_token_subclass);
  __Pyx_GIVEREF(__pyx_v_self->begin_token_subclass);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_self->begin_token_subclass);
  __Pyx_INCREF(__pyx_v_self->end_token_label);
  __Pyx_GIVEREF(__pyx_v_self->end_token_label);
  PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_v_self->end_token_label);
  __Pyx_INCREF(__pyx_v_self->end_token_subclass);
  __Pyx_GIVEREF(__pyx_v_self->end_token_subclass);
  PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_v_self->end_token_subclass);
  __Pyx_INCREF(((PyObject *)__pyx_v_self->lex));
  __Pyx_GIVEREF(((PyObject *)__pyx_v_self->lex));
  PyTuple_SET_ITEM(__pyx_t_1, 4, ((PyObject *)__pyx_v_self->lex));
  __Pyx_INCREF(((PyObject *)__pyx_v_self->pattern_matcher));
  __Pyx_GIVEREF(((PyObject *)__pyx_v_self->pattern_matcher));
  PyTuple_SET_ITEM(__pyx_t_1, 5, ((PyObject *)__pyx_v_self->pattern_matcher));
  __Pyx_INCREF(__pyx_v_self->token_subclass_dict);
  __Pyx_GIVEREF(__pyx_v_self->token_subclass_dict);
  PyTuple_SET_ITEM(__pyx_t_1, 6, __pyx_v_self->token_subclass_dict);
  __Pyx_INCREF(__pyx_v_self->token_subclassing_fun);
  __Pyx_GIVEREF(__pyx_v_self->token_subclassing_fun);
  PyTuple_SET_ITEM(__pyx_t_1, 7, __pyx_v_self->token_subclassing_fun);
  __pyx_v_state = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "(tree fragment)":4
 *     cdef bint use_setstate
 *     state = (self.begin_token_label, self.begin_token_subclass, self.end_token_label, self.end_token_subclass, self.lex, self.pattern_matcher, self.token_subclass_dict, self.token_subclassing_fun)
 *     _dict = getattr(self, '__dict__', None)             # <<<<<<<<<<<<<<
 *     if _dict is not None:
 *         state += _dict,
 */
  __pyx_t_1 = __Pyx_GetAttr3(((PyObject *)__pyx_v_self), __pyx_n_s_dict, Py_None); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 4, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v__dict = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "(tree fragment)":5
 *     state = (self.begin_token_label, self.begin_token_subclass, self.end_token_label, self.end_token_subclass, self.lex, self.pattern_matcher, self.token_subclass_dict, self.token_subclassing_fun)
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:             # <<<<<<<<<<<<<<
 *         state += _dict,
 *         use_setstate = True
 */
  __pyx_t_2 = (__pyx_v__dict != Py_None);
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "(tree fragment)":6
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:
 *         state += _dict,             # <<<<<<<<<<<<<<
 *         use_setstate = True
 *     else:
 */
    __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 6, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_v__dict);
    __Pyx_GIVEREF(__pyx_v__dict);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v__dict);
    __pyx_t_4 = PyNumber_InPlaceAdd(__pyx_v_state, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 6, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF_SET(__pyx_v_state, ((PyObject*)__pyx_t_4));
    __pyx_t_4 = 0;

    /* "(tree fragment)":7
 *     if _dict is not None:
 *         state += _dict,
 *         use_setstate = True             # <<<<<<<<<<<<<<
 *     else:
 *         use_setstate = self.begin_token_label is not None or self.begin_token_subclass is not None or self.end_token_label is not None or self.end_token_subclass is not None or self.lex is not None or self.pattern_matcher is not None or self.token_subclass_dict is not None or self.token_subclassing_fun is not None
 */
    __pyx_v_use_setstate = 1;

    /* "(tree fragment)":5
 *     state = (self.begin_token_label, self.begin_token_subclass, self.end_token_label, self.end_token_subclass, self.lex, self.pattern_matcher, self.token_subclass_dict, self.token_subclassing_fun)
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:             # <<<<<<<<<<<<<<
 *         state += _dict,
 *         use_setstate = True
 */
    goto __pyx_L3;
  }

  /* "(tree fragment)":9
 *         use_setstate = True
 *     else:
 *         use_setstate = self.begin_token_label is not None or self.begin_token_subclass is not None or self.end_token_label is not None or self.end_token_subclass is not None or self.lex is not None or self.pattern_matcher is not None or self.token_subclass_dict is not None or self.token_subclassing_fun is not None             # <<<<<<<<<<<<<<
 *     if use_setstate:
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, None), state
 */
  /*else*/ {
    __pyx_t_2 = (__pyx_v_self->begin_token_label != ((PyObject*)Py_None));
    __pyx_t_5 = (__pyx_t_2 != 0);
    if (!__pyx_t_5) {
    } else {
      __pyx_t_3 = __pyx_t_5;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_5 = (__pyx_v_self->begin_token_subclass != Py_None);
    __pyx_t_2 = (__pyx_t_5 != 0);
    if (!__pyx_t_2) {
    } else {
      __pyx_t_3 = __pyx_t_2;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_2 = (__pyx_v_self->end_token_label != ((PyObject*)Py_None));
    __pyx_t_5 = (__pyx_t_2 != 0);
    if (!__pyx_t_5) {
    } else {
      __pyx_t_3 = __pyx_t_5;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_5 = (__pyx_v_self->end_token_subclass != Py_None);
    __pyx_t_2 = (__pyx_t_5 != 0);
    if (!__pyx_t_2) {
    } else {
      __pyx_t_3 = __pyx_t_2;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_2 = (((PyObject *)__pyx_v_self->lex) != Py_None);
    __pyx_t_5 = (__pyx_t_2 != 0);
    if (!__pyx_t_5) {
    } else {
      __pyx_t_3 = __pyx_t_5;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_5 = (((PyObject *)__pyx_v_self->pattern_matcher) != Py_None);
    __pyx_t_2 = (__pyx_t_5 != 0);
    if (!__pyx_t_2) {
    } else {
      __pyx_t_3 = __pyx_t_2;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_2 = (__pyx_v_self->token_subclass_dict != ((PyObject*)Py_None));
    __pyx_t_5 = (__pyx_t_2 != 0);
    if (!__pyx_t_5) {
    } else {
      __pyx_t_3 = __pyx_t_5;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_5 = (__pyx_v_self->token_subclassing_fun != Py_None);
    __pyx_t_2 = (__pyx_t_5 != 0);
    __pyx_t_3 = __pyx_t_2;
    __pyx_L4_bool_binop_done:;
    __pyx_v_use_setstate = __pyx_t_3;
  }
  __pyx_L3:;

  /* "(tree fragment)":10
 *     else:
 *         use_setstate = self.begin_token_label is not None or self.begin_token_subclass is not None or self.end_token_label is not None or self.end_token_subclass is not None or self.lex is not None or self.pattern_matcher is not None or self.token_subclass_dict is not None or self.token_subclassing_fun is not None
 *     if use_setstate:             # <<<<<<<<<<<<<<
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, None), state
 *     else:
 */
  __pyx_t_3 = (__pyx_v_use_setstate != 0);
  if (__pyx_t_3) {

    /* "(tree fragment)":11
 *         use_setstate = self.begin_token_label is not None or self.begin_token_subclass is not None or self.end_token_label is not None or self.end_token_subclass is not None or self.lex is not None or self.pattern_matcher is not None or self.token_subclass_dict is not None or self.token_subclassing_fun is not None
 *     if use_setstate:
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, None), state             # <<<<<<<<<<<<<<
 *     else:
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, state)
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_4 = __Pyx_GetModuleGlobalName(__pyx_n_s_pyx_unpickle_TokenTable); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_INCREF(__pyx_int_236877720);
    __Pyx_GIVEREF(__pyx_int_236877720);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_236877720);
    __Pyx_INCREF(Py_None);
    __Pyx_GIVEREF(Py_None);
    PyTuple_SET_ITEM(__pyx_t_1, 2, Py_None);
    __pyx_t_6 = PyTuple_New(3); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_t_1);
    __Pyx_INCREF(__pyx_v_state);
    __Pyx_GIVEREF(__pyx_v_state);
    PyTuple_SET_ITEM(__pyx_t_6, 2, __pyx_v_state);
    __pyx_t_4 = 0;
    __pyx_t_1 = 0;
    __pyx_r = __pyx_t_6;
    __pyx_t_6 = 0;
    goto __pyx_L0;

    /* "(tree fragment)":10
 *     else:
 *         use_setstate = self.begin_token_label is not None or self.begin_token_subclass is not None or self.end_token_label is not None or self.end_token_subclass is not None or self.lex is not None or self.pattern_matcher is not None or self.token_subclass_dict is not None or self.token_subclassing_fun is not None
 *     if use_setstate:             # <<<<<<<<<<<<<<
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, None), state
 *     else:
 */
  }

  /* "(tree fragment)":13
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, None), state
 *     else:
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, state)             # <<<<<<<<<<<<<<
 * def __setstate_cython__(self, __pyx_state):
 *     __pyx_unpickle_TokenTable__set_state(self, __pyx_state)
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_6 = __Pyx_GetModuleGlobalName(__pyx_n_s_pyx_unpickle_TokenTable); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_INCREF(__pyx_int_236877720);
    __Pyx_GIVEREF(__pyx_int_236877720);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_236877720);
    __Pyx_INCREF(__pyx_v_state);
    __Pyx_GIVEREF(__pyx_v_state);
    PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_v_state);
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_6);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_6);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_1);
    __pyx_t_6 = 0;
    __pyx_t_1 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;
  }

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self.begin_token_label, self.begin_token_subclass, self.end_token_label, self.end_token_subclass, self.lex, self.pattern_matcher, self.token_subclass_dict, self.token_subclassing_fun)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.TokenTable.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_state);
  __Pyx_XDECREF(__pyx_v__dict);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_TokenTable__set_state(self, __pyx_state)
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_23__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_10TokenTable_23__setstate_cython__ = {"__setstate_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_23__setstate_cython__, METH_O, 0};
static PyObject *__pyx_pw_6typped_5lexer_10TokenTable_23__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__setstate_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_10TokenTable_22__setstate_cython__(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_self), ((PyObject *)__pyx_v___pyx_state));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10TokenTable_22__setstate_cython__(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__setstate_cython__", 0);

  /* "(tree fragment)":15
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, state)
 * def __setstate_cython__(self, __pyx_state):
 *     __pyx_unpickle_TokenTable__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
 */
  if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "tuple", Py_TYPE(__pyx_v___pyx_state)->tp_name), 0))) __PYX_ERR(2, 15, __pyx_L1_error)
  __pyx_t_1 = __pyx_f_6typped_5lexer___pyx_unpickle_TokenTable__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_TokenTable__set_state(self, __pyx_state)
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenTable.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":568
 *     know that detail)."""
 * 
 *     def __init__(self, token_getter_fun, max_peek=-1, max_deque_size=-1,):             # <<<<<<<<<<<<<<
 *         """Initialize the buffer.  If `max_deque_size` equals -1 then the
 *         size is unlimited (`None` is not used so that Cython has a single type).
 */

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_11TokenBuffer_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_11TokenBuffer___init__[] = "Initialize the buffer.  If `max_deque_size` equals -1 then the\n        size is unlimited (`None` is not used so that Cython has a single type).\n        Similarly for `max_peek`, the maximum peek lookahead allowed.";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_6typped_5lexer_11TokenBuffer___init__;
#endif
static int __pyx_pw_6typped_5lexer_11TokenBuffer_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_token_getter_fun = 0;
  PyObject *__pyx_v_max_peek = 0;
  PyObject *__pyx_v_max_deque_size = 0;
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_token_getter_fun,&__pyx_n_s_max_peek,&__pyx_n_s_max_deque_size,0};
    PyObject* values[3] = {0,0,0};
    values[1] = ((PyObject *)__pyx_int_neg_1);
    values[2] = ((PyObject *)__pyx_int_neg_1);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_token_getter_fun)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_max_peek);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_max_deque_size);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__init__") < 0)) __PYX_ERR(0, 568, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_token_getter_fun = values[0];
    __pyx_v_max_peek = values[1];
    __pyx_v_max_deque_size = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__init__", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 568, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer___init__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), __pyx_v_token_getter_fun, __pyx_v_max_peek, __pyx_v_max_deque_size);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_11TokenBuffer___init__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_token_getter_fun, PyObject *__pyx_v_max_peek, PyObject *__pyx_v_max_deque_size) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("__init__", 0);

  /* "typped/lexer.py":572
 *         size is unlimited (`None` is not used so that Cython has a single type).
 *         Similarly for `max_peek`, the maximum peek lookahead allowed."""
 *         self.token_getter_fun = token_getter_fun             # <<<<<<<<<<<<<<
 *         self.max_deque_size = max_deque_size
 *         self.max_peek = max_peek
 */
  __Pyx_INCREF(__pyx_v_token_getter_fun);
  __Pyx_GIVEREF(__pyx_v_token_getter_fun);
  __Pyx_GOTREF(__pyx_v_self->token_getter_fun);
  __Pyx_DECREF(__pyx_v_self->token_getter_fun);
  __pyx_v_self->token_getter_fun = __pyx_v_token_getter_fun;

  /* "typped/lexer.py":573
 *         Similarly for `max_peek`, the maximum peek lookahead allowed."""
 *         self.token_getter_fun = token_getter_fun
 *         self.max_deque_size = max_deque_size             # <<<<<<<<<<<<<<
 *         self.max_peek = max_peek
 *         # Any popleft operations are done explicitly, so maxlen=None.
 */
  __pyx_t_1 = __Pyx_PyInt_As_long(__pyx_v_max_deque_size); if (unlikely((__pyx_t_1 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 573, __pyx_L1_error)
  __pyx_v_self->max_deque_size = __pyx_t_1;

  /* "typped/lexer.py":574
 *         self.token_getter_fun = token_getter_fun
 *         self.max_deque_size = max_deque_size
 *         self.max_peek = max_peek             # <<<<<<<<<<<<<<
 *         # Any popleft operations are done explicitly, so maxlen=None.
 *         self.token_buffer = collections.deque(maxlen=None)
 */
  __pyx_t_1 = __Pyx_PyInt_As_long(__pyx_v_max_peek); if (unlikely((__pyx_t_1 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 574, __pyx_L1_error)
  __pyx_v_self->max_peek = __pyx_t_1;

  /* "typped/lexer.py":576
 *         self.max_peek = max_peek
 *         # Any popleft operations are done explicitly, so maxlen=None.
 *         self.token_buffer = collections.deque(maxlen=None)             # <<<<<<<<<<<<<<
 * 
 *         # Indices are relative to current_offset, and current_offset is
 */
  __pyx_t_2 = __Pyx_GetModuleGlobalName(__pyx_n_s_collections); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 576, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_deque); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 576, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyDict_New(); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 576, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_maxlen, Py_None) < 0) __PYX_ERR(0, 576, __pyx_L1_error)
  __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_empty_tuple, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 576, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_GIVEREF(__pyx_t_4);
  __Pyx_GOTREF(__pyx_v_self->token_buffer);
  __Pyx_DECREF(__pyx_v_self->token_buffer);
  __pyx_v_self->token_buffer = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "typped/lexer.py":586
 *         # the current offset can be saved and remain valid until the
 *         # `TokenBuffer` is reset (though the referenced item may get deleted).
 *         self.current_offset = 0             # <<<<<<<<<<<<<<
 *         self.reference_point = 0
 * 
 */
  __pyx_v_self->current_offset = 0;

  /* "typped/lexer.py":587
 *         # `TokenBuffer` is reset (though the referenced item may get deleted).
 *         self.current_offset = 0
 *         self.reference_point = 0             # <<<<<<<<<<<<<<
 * 
 *     def reset(self, begin_token):
 */
  __pyx_v_self->reference_point = 0;

  /* "typped/lexer.py":568
 *     know that detail)."""
 * 
 *     def __init__(self, token_getter_fun, max_peek=-1, max_deque_size=-1,):             # <<<<<<<<<<<<<<
 *         """Initialize the buffer.  If `max_deque_size` equals -1 then the
 *         size is unlimited (`None` is not used so that Cython has a single type).
 */

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":589
 *         self.reference_point = 0
 * 
 *     def reset(self, begin_token):             # <<<<<<<<<<<<<<
 *         """Initialize the token buffer, or clear an reset it.  Any saved
 *         offsets are no longer valid, but no check is made for that."""
 */

static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_3reset(PyObject *__pyx_v_self, PyObject *__pyx_v_begin_token); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer_reset(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_begin_token, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  struct __pyx_opt_args_6typped_5lexer_11TokenBuffer__append __pyx_t_6;
  __Pyx_RefNannySetupContext("reset", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_reset); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 589, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_3reset)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_begin_token); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 589, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_begin_token};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 589, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_begin_token};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 589, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        {
          __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 589, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
          __Pyx_INCREF(__pyx_v_begin_token);
          __Pyx_GIVEREF(__pyx_v_begin_token);
          PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_v_begin_token);
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 589, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":592
 *         """Initialize the token buffer, or clear an reset it.  Any saved
 *         offsets are no longer valid, but no check is made for that."""
 *         self.current_offset = 0             # <<<<<<<<<<<<<<
 *         self.reference_point = 0
 *         self.token_buffer.clear()
 */
  __pyx_v_self->current_offset = 0;

  /* "typped/lexer.py":593
 *         offsets are no longer valid, but no check is made for that."""
 *         self.current_offset = 0
 *         self.reference_point = 0             # <<<<<<<<<<<<<<
 *         self.token_buffer.clear()
 *         self._append(begin_token)
 */
  __pyx_v_self->reference_point = 0;

  /* "typped/lexer.py":594
 *         self.current_offset = 0
 *         self.reference_point = 0
 *         self.token_buffer.clear()             # <<<<<<<<<<<<<<
 *         self._append(begin_token)
 * 
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token_buffer, __pyx_n_s_clear); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 594, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (__pyx_t_3) {
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 594, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 594, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":595
 *         self.reference_point = 0
 *         self.token_buffer.clear()
 *         self._append(begin_token)             # <<<<<<<<<<<<<<
 * 
 *     def state_to_offset(self, state):
 */
  __pyx_t_6.__pyx_n = 1;
  __pyx_t_6.tok = __pyx_v_begin_token;
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_self->__pyx_vtab)->_append(__pyx_v_self, &__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 595, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":589
 *         self.reference_point = 0
 * 
 *     def reset(self, begin_token):             # <<<<<<<<<<<<<<
 *         """Initialize the token buffer, or clear an reset it.  Any saved
 *         offsets are no longer valid, but no check is made for that."""
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.reset", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_3reset(PyObject *__pyx_v_self, PyObject *__pyx_v_begin_token); /*proto*/
static char __pyx_doc_6typped_5lexer_11TokenBuffer_2reset[] = "Initialize the token buffer, or clear an reset it.  Any saved\n        offsets are no longer valid, but no check is made for that.";
static PyMethodDef __pyx_mdef_6typped_5lexer_11TokenBuffer_3reset = {"reset", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_3reset, METH_O, __pyx_doc_6typped_5lexer_11TokenBuffer_2reset};
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_3reset(PyObject *__pyx_v_self, PyObject *__pyx_v_begin_token) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("reset (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_2reset(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), ((PyObject *)__pyx_v_begin_token));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_2reset(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_begin_token) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("reset", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_f_6typped_5lexer_11TokenBuffer_reset(__pyx_v_self, __pyx_v_begin_token, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 589, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.reset", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":597
 *         self._append(begin_token)
 * 
 *     def state_to_offset(self, state):             # <<<<<<<<<<<<<<
 *         """Return the offset into the current deque that corresponds to what
 *         was the offset (absolute index to the current token) at the time when
 */

static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_5state_to_offset(PyObject *__pyx_v_self, PyObject *__pyx_arg_state); /*proto*/
static long __pyx_f_6typped_5lexer_11TokenBuffer_state_to_offset(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_state, int __pyx_skip_dispatch) {
  long __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  long __pyx_t_7;
  __Pyx_RefNannySetupContext("state_to_offset", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_state_to_offset); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 597, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_5state_to_offset)) {
      __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_state); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 597, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_4 = __pyx_t_1; __pyx_t_5 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      if (!__pyx_t_5) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 597, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_4)) {
          PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_3};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 597, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
          PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_3};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 597, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        {
          __pyx_t_6 = PyTuple_New(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 597, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
          __Pyx_GIVEREF(__pyx_t_3);
          PyTuple_SET_ITEM(__pyx_t_6, 0+1, __pyx_t_3);
          __pyx_t_3 = 0;
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 597, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_7 = __Pyx_PyInt_As_long(__pyx_t_2); if (unlikely((__pyx_t_7 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 597, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_r = __pyx_t_7;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":601
 *         was the offset (absolute index to the current token) at the time when
 *         the state was saved."""
 *         return state - self.reference_point             # <<<<<<<<<<<<<<
 * 
 *     def get_state(self):
 */
  __pyx_r = (__pyx_v_state - __pyx_v_self->reference_point);
  goto __pyx_L0;

  /* "typped/lexer.py":597
 *         self._append(begin_token)
 * 
 *     def state_to_offset(self, state):             # <<<<<<<<<<<<<<
 *         """Return the offset into the current deque that corresponds to what
 *         was the offset (absolute index to the current token) at the time when
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_WriteUnraisable("typped.lexer.TokenBuffer.state_to_offset", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_5state_to_offset(PyObject *__pyx_v_self, PyObject *__pyx_arg_state); /*proto*/
static char __pyx_doc_6typped_5lexer_11TokenBuffer_4state_to_offset[] = "Return the offset into the current deque that corresponds to what\n        was the offset (absolute index to the current token) at the time when\n        the state was saved.";
static PyMethodDef __pyx_mdef_6typped_5lexer_11TokenBuffer_5state_to_offset = {"state_to_offset", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_5state_to_offset, METH_O, __pyx_doc_6typped_5lexer_11TokenBuffer_4state_to_offset};
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_5state_to_offset(PyObject *__pyx_v_self, PyObject *__pyx_arg_state) {
  long __pyx_v_state;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("state_to_offset (wrapper)", 0);
  assert(__pyx_arg_state); {
    __pyx_v_state = __Pyx_PyInt_As_long(__pyx_arg_state); if (unlikely((__pyx_v_state == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 597, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.state_to_offset", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_4state_to_offset(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), ((long)__pyx_v_state));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_4state_to_offset(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("state_to_offset", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_f_6typped_5lexer_11TokenBuffer_state_to_offset(__pyx_v_self, __pyx_v_state, 1)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 597, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.state_to_offset", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":603
 *         return state - self.reference_point
 * 
 *     def get_state(self):             # <<<<<<<<<<<<<<
 *         """Return a buffer state indicator that can be returned to later.  The
 *         `go_back` or `push_back` methods of the lexer use this."""
 */

static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_7get_state(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static long __pyx_f_6typped_5lexer_11TokenBuffer_get_state(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, int __pyx_skip_dispatch) {
  long __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  long __pyx_t_5;
  __Pyx_RefNannySetupContext("get_state", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_get_state); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 603, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_7get_state)) {
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 603, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 603, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_5 = __Pyx_PyInt_As_long(__pyx_t_2); if (unlikely((__pyx_t_5 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 603, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_r = __pyx_t_5;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":606
 *         """Return a buffer state indicator that can be returned to later.  The
 *         `go_back` or `push_back` methods of the lexer use this."""
 *         return self._offset_to_absolute(self.current_offset)             # <<<<<<<<<<<<<<
 * 
 *     def __getitem__(self, index):
 */
  __pyx_r = __pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute(__pyx_v_self, __pyx_v_self->current_offset);
  goto __pyx_L0;

  /* "typped/lexer.py":603
 *         return state - self.reference_point
 * 
 *     def get_state(self):             # <<<<<<<<<<<<<<
 *         """Return a buffer state indicator that can be returned to later.  The
 *         `go_back` or `push_back` methods of the lexer use this."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_WriteUnraisable("typped.lexer.TokenBuffer.get_state", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_7get_state(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_11TokenBuffer_6get_state[] = "Return a buffer state indicator that can be returned to later.  The\n        `go_back` or `push_back` methods of the lexer use this.";
static PyMethodDef __pyx_mdef_6typped_5lexer_11TokenBuffer_7get_state = {"get_state", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_7get_state, METH_NOARGS, __pyx_doc_6typped_5lexer_11TokenBuffer_6get_state};
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_7get_state(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_state (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_6get_state(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_6get_state(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("get_state", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_f_6typped_5lexer_11TokenBuffer_get_state(__pyx_v_self, 1)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 603, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.get_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":608
 *         return self._offset_to_absolute(self.current_offset)
 * 
 *     def __getitem__(self, index):             # <<<<<<<<<<<<<<
 *         """Index the buffer relative to the current offset.  Zero is the
 *         current token.  Negative indices go back in the buffer.  They **do not**
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_9__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_index); /*proto*/
static char __pyx_doc_6typped_5lexer_11TokenBuffer_8__getitem__[] = "Index the buffer relative to the current offset.  Zero is the\n        current token.  Negative indices go back in the buffer.  They **do not**\n        index from the end of the buffer, as with ordinary Python indexing.";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_6typped_5lexer_11TokenBuffer_8__getitem__;
#endif
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_9__getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_index) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__getitem__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_8__getitem__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), ((PyObject *)__pyx_v_index));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_8__getitem__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_index) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  long __pyx_t_10;
  Py_ssize_t __pyx_t_11;
  long __pyx_t_12;
  __Pyx_RefNannySetupContext("__getitem__", 0);

  /* "typped/lexer.py":620
 *         #    # The indices call returns the above three in a tuple.
 *         #    return [self[i] for i in range(*index.indices(len(self)))]
 *         if isinstance(index, int): # The ordinary case.             # <<<<<<<<<<<<<<
 *             if self.max_peek != -1 and index > self.max_peek:
 *                 raise LexerException("User-set maximum peeking level of {0} was"
 */
  __pyx_t_1 = PyInt_Check(__pyx_v_index); 
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "typped/lexer.py":621
 *         #    return [self[i] for i in range(*index.indices(len(self)))]
 *         if isinstance(index, int): # The ordinary case.
 *             if self.max_peek != -1 and index > self.max_peek:             # <<<<<<<<<<<<<<
 *                 raise LexerException("User-set maximum peeking level of {0} was"
 *                                      " exceeded.".format(self.max_peek))
 */
    __pyx_t_1 = ((__pyx_v_self->max_peek != -1L) != 0);
    if (__pyx_t_1) {
    } else {
      __pyx_t_2 = __pyx_t_1;
      goto __pyx_L5_bool_binop_done;
    }
    __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_self->max_peek); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 621, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = PyObject_RichCompare(__pyx_v_index, __pyx_t_3, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 621, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 621, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_2 = __pyx_t_1;
    __pyx_L5_bool_binop_done:;
    if (__pyx_t_2) {

      /* "typped/lexer.py":622
 *         if isinstance(index, int): # The ordinary case.
 *             if self.max_peek != -1 and index > self.max_peek:
 *                 raise LexerException("User-set maximum peeking level of {0} was"             # <<<<<<<<<<<<<<
 *                                      " exceeded.".format(self.max_peek))
 *             while self._index_to_absolute(index) >= len(self.token_buffer):
 */
      __pyx_t_3 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 622, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);

      /* "typped/lexer.py":623
 *             if self.max_peek != -1 and index > self.max_peek:
 *                 raise LexerException("User-set maximum peeking level of {0} was"
 *                                      " exceeded.".format(self.max_peek))             # <<<<<<<<<<<<<<
 *             while self._index_to_absolute(index) >= len(self.token_buffer):
 *                 if self.token_buffer[-1].is_end_token():
 */
      __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_User_set_maximum_peeking_level_o, __pyx_n_s_format); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 623, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_7 = __Pyx_PyInt_From_long(__pyx_v_self->max_peek); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 623, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_8 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_6);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_6, function);
        }
      }
      if (!__pyx_t_8) {
        __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 623, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_5);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_6)) {
          PyObject *__pyx_temp[2] = {__pyx_t_8, __pyx_t_7};
          __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 623, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
          PyObject *__pyx_temp[2] = {__pyx_t_8, __pyx_t_7};
          __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 623, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        {
          __pyx_t_9 = PyTuple_New(1+1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 623, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_8); __pyx_t_8 = NULL;
          __Pyx_GIVEREF(__pyx_t_7);
          PyTuple_SET_ITEM(__pyx_t_9, 0+1, __pyx_t_7);
          __pyx_t_7 = 0;
          __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_9, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 623, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_6) {
        __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 622, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_4);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_5};
          __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 622, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_5};
          __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 622, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        } else
        #endif
        {
          __pyx_t_9 = PyTuple_New(1+1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 622, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_6); __pyx_t_6 = NULL;
          __Pyx_GIVEREF(__pyx_t_5);
          PyTuple_SET_ITEM(__pyx_t_9, 0+1, __pyx_t_5);
          __pyx_t_5 = 0;
          __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_9, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 622, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_Raise(__pyx_t_4, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __PYX_ERR(0, 622, __pyx_L1_error)

      /* "typped/lexer.py":621
 *         #    return [self[i] for i in range(*index.indices(len(self)))]
 *         if isinstance(index, int): # The ordinary case.
 *             if self.max_peek != -1 and index > self.max_peek:             # <<<<<<<<<<<<<<
 *                 raise LexerException("User-set maximum peeking level of {0} was"
 *                                      " exceeded.".format(self.max_peek))
 */
    }

    /* "typped/lexer.py":624
 *                 raise LexerException("User-set maximum peeking level of {0} was"
 *                                      " exceeded.".format(self.max_peek))
 *             while self._index_to_absolute(index) >= len(self.token_buffer):             # <<<<<<<<<<<<<<
 *                 if self.token_buffer[-1].is_end_token():
 *                     return self.token_buffer[-1]
 */
    while (1) {
      __pyx_t_10 = __Pyx_PyInt_As_long(__pyx_v_index); if (unlikely((__pyx_t_10 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 624, __pyx_L1_error)
      __pyx_t_4 = __pyx_v_self->token_buffer;
      __Pyx_INCREF(__pyx_t_4);
      __pyx_t_11 = PyObject_Length(__pyx_t_4); if (unlikely(__pyx_t_11 == -1)) __PYX_ERR(0, 624, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_2 = ((__pyx_f_6typped_5lexer_11TokenBuffer__index_to_absolute(__pyx_v_self, __pyx_t_10) >= __pyx_t_11) != 0);
      if (!__pyx_t_2) break;

      /* "typped/lexer.py":625
 *                                      " exceeded.".format(self.max_peek))
 *             while self._index_to_absolute(index) >= len(self.token_buffer):
 *                 if self.token_buffer[-1].is_end_token():             # <<<<<<<<<<<<<<
 *                     return self.token_buffer[-1]
 *                 self._append()
 */
      __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_self->token_buffer, -1L, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 625, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_is_end_token); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 625, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
        __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_9);
        if (likely(__pyx_t_3)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
          __Pyx_INCREF(__pyx_t_3);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_9, function);
        }
      }
      if (__pyx_t_3) {
        __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 625, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      } else {
        __pyx_t_4 = __Pyx_PyObject_CallNoArg(__pyx_t_9); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 625, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 625, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (__pyx_t_2) {

        /* "typped/lexer.py":626
 *             while self._index_to_absolute(index) >= len(self.token_buffer):
 *                 if self.token_buffer[-1].is_end_token():
 *                     return self.token_buffer[-1]             # <<<<<<<<<<<<<<
 *                 self._append()
 *             return self.token_buffer[self._index_to_absolute(index)]
 */
        __Pyx_XDECREF(__pyx_r);
        __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_self->token_buffer, -1L, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 626, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_r = __pyx_t_4;
        __pyx_t_4 = 0;
        goto __pyx_L0;

        /* "typped/lexer.py":625
 *                                      " exceeded.".format(self.max_peek))
 *             while self._index_to_absolute(index) >= len(self.token_buffer):
 *                 if self.token_buffer[-1].is_end_token():             # <<<<<<<<<<<<<<
 *                     return self.token_buffer[-1]
 *                 self._append()
 */
      }

      /* "typped/lexer.py":627
 *                 if self.token_buffer[-1].is_end_token():
 *                     return self.token_buffer[-1]
 *                 self._append()             # <<<<<<<<<<<<<<
 *             return self.token_buffer[self._index_to_absolute(index)]
 *         else:
 */
      __pyx_t_4 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_self->__pyx_vtab)->_append(__pyx_v_self, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 627, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }

    /* "typped/lexer.py":628
 *                     return self.token_buffer[-1]
 *                 self._append()
 *             return self.token_buffer[self._index_to_absolute(index)]             # <<<<<<<<<<<<<<
 *         else:
 *             raise TypeError("Invalid argument type in __getitem__ of TokenBuffer.")
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_10 = __Pyx_PyInt_As_long(__pyx_v_index); if (unlikely((__pyx_t_10 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 628, __pyx_L1_error)
    __pyx_t_12 = __pyx_f_6typped_5lexer_11TokenBuffer__index_to_absolute(__pyx_v_self, __pyx_t_10);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_self->token_buffer, __pyx_t_12, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 628, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;

    /* "typped/lexer.py":620
 *         #    # The indices call returns the above three in a tuple.
 *         #    return [self[i] for i in range(*index.indices(len(self)))]
 *         if isinstance(index, int): # The ordinary case.             # <<<<<<<<<<<<<<
 *             if self.max_peek != -1 and index > self.max_peek:
 *                 raise LexerException("User-set maximum peeking level of {0} was"
 */
  }

  /* "typped/lexer.py":630
 *             return self.token_buffer[self._index_to_absolute(index)]
 *         else:
 *             raise TypeError("Invalid argument type in __getitem__ of TokenBuffer.")             # <<<<<<<<<<<<<<
 * 
 *     def num_saved_previous_tokens(self):
 */
  /*else*/ {
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_TypeError, __pyx_tuple__12, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 630, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_Raise(__pyx_t_4, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __PYX_ERR(0, 630, __pyx_L1_error)
  }

  /* "typped/lexer.py":608
 *         return self._offset_to_absolute(self.current_offset)
 * 
 *     def __getitem__(self, index):             # <<<<<<<<<<<<<<
 *         """Index the buffer relative to the current offset.  Zero is the
 *         current token.  Negative indices go back in the buffer.  They **do not**
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.__getitem__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":632
 *             raise TypeError("Invalid argument type in __getitem__ of TokenBuffer.")
 * 
 *     def num_saved_previous_tokens(self):             # <<<<<<<<<<<<<<
 *         """Return the number of tokens before the current token that are saved."""
 *         return self._offset_to_absolute(self.current_offset)
 */

static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_11num_saved_previous_tokens(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static long __pyx_f_6typped_5lexer_11TokenBuffer_num_saved_previous_tokens(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, int __pyx_skip_dispatch) {
  long __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  long __pyx_t_5;
  __Pyx_RefNannySetupContext("num_saved_previous_tokens", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_num_saved_previous_tokens); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 632, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_11num_saved_previous_tokens)) {
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 632, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 632, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_5 = __Pyx_PyInt_As_long(__pyx_t_2); if (unlikely((__pyx_t_5 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 632, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_r = __pyx_t_5;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":634
 *     def num_saved_previous_tokens(self):
 *         """Return the number of tokens before the current token that are saved."""
 *         return self._offset_to_absolute(self.current_offset)             # <<<<<<<<<<<<<<
 * 
 *     def num_tokens_after_current(self):
 */
  __pyx_r = __pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute(__pyx_v_self, __pyx_v_self->current_offset);
  goto __pyx_L0;

  /* "typped/lexer.py":632
 *             raise TypeError("Invalid argument type in __getitem__ of TokenBuffer.")
 * 
 *     def num_saved_previous_tokens(self):             # <<<<<<<<<<<<<<
 *         """Return the number of tokens before the current token that are saved."""
 *         return self._offset_to_absolute(self.current_offset)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_WriteUnraisable("typped.lexer.TokenBuffer.num_saved_previous_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_11num_saved_previous_tokens(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_11TokenBuffer_10num_saved_previous_tokens[] = "Return the number of tokens before the current token that are saved.";
static PyMethodDef __pyx_mdef_6typped_5lexer_11TokenBuffer_11num_saved_previous_tokens = {"num_saved_previous_tokens", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_11num_saved_previous_tokens, METH_NOARGS, __pyx_doc_6typped_5lexer_11TokenBuffer_10num_saved_previous_tokens};
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_11num_saved_previous_tokens(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("num_saved_previous_tokens (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_10num_saved_previous_tokens(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_10num_saved_previous_tokens(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("num_saved_previous_tokens", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_f_6typped_5lexer_11TokenBuffer_num_saved_previous_tokens(__pyx_v_self, 1)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 632, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.num_saved_previous_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":636
 *         return self._offset_to_absolute(self.current_offset)
 * 
 *     def num_tokens_after_current(self):             # <<<<<<<<<<<<<<
 *         """An informational method.  Returns the number of tokens from
 *         the current token to the end of the token buffer.  Some may have been
 */

static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_13num_tokens_after_current(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static long __pyx_f_6typped_5lexer_11TokenBuffer_num_tokens_after_current(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, int __pyx_skip_dispatch) {
  long __pyx_v_begin_point;
  long __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  long __pyx_t_5;
  Py_ssize_t __pyx_t_6;
  __Pyx_RefNannySetupContext("num_tokens_after_current", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_num_tokens_after_current); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 636, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_13num_tokens_after_current)) {
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 636, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 636, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_5 = __Pyx_PyInt_As_long(__pyx_t_2); if (unlikely((__pyx_t_5 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 636, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_r = __pyx_t_5;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":641
 *         read past the position of the current token due to peeks or
 *         pushbacks."""
 *         begin_point = self._offset_to_absolute(self.current_offset) + 1             # <<<<<<<<<<<<<<
 *         return len(self.token_buffer) - begin_point
 * 
 */
  __pyx_v_begin_point = (__pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute(__pyx_v_self, __pyx_v_self->current_offset) + 1);

  /* "typped/lexer.py":642
 *         pushbacks."""
 *         begin_point = self._offset_to_absolute(self.current_offset) + 1
 *         return len(self.token_buffer) - begin_point             # <<<<<<<<<<<<<<
 * 
 *     def move_forward(self, num_toks=1):
 */
  __pyx_t_1 = __pyx_v_self->token_buffer;
  __Pyx_INCREF(__pyx_t_1);
  __pyx_t_6 = PyObject_Length(__pyx_t_1); if (unlikely(__pyx_t_6 == -1)) __PYX_ERR(0, 642, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = (__pyx_t_6 - __pyx_v_begin_point);
  goto __pyx_L0;

  /* "typped/lexer.py":636
 *         return self._offset_to_absolute(self.current_offset)
 * 
 *     def num_tokens_after_current(self):             # <<<<<<<<<<<<<<
 *         """An informational method.  Returns the number of tokens from
 *         the current token to the end of the token buffer.  Some may have been
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_WriteUnraisable("typped.lexer.TokenBuffer.num_tokens_after_current", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_13num_tokens_after_current(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_11TokenBuffer_12num_tokens_after_current[] = "An informational method.  Returns the number of tokens from\n        the current token to the end of the token buffer.  Some may have been\n        read past the position of the current token due to peeks or\n        pushbacks.";
static PyMethodDef __pyx_mdef_6typped_5lexer_11TokenBuffer_13num_tokens_after_current = {"num_tokens_after_current", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_13num_tokens_after_current, METH_NOARGS, __pyx_doc_6typped_5lexer_11TokenBuffer_12num_tokens_after_current};
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_13num_tokens_after_current(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("num_tokens_after_current (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_12num_tokens_after_current(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_12num_tokens_after_current(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("num_tokens_after_current", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_f_6typped_5lexer_11TokenBuffer_num_tokens_after_current(__pyx_v_self, 1)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 636, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.num_tokens_after_current", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":644
 *         return len(self.token_buffer) - begin_point
 * 
 *     def move_forward(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Move the current token (i.e., the offset) forward by one.  This is
 *         the token buffer's equivalent of `next`, except that it returns
 */

static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_15move_forward(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer_move_forward(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_forward *__pyx_optional_args) {
  long __pyx_v_num_toks = ((long)1);
  CYTHON_UNUSED long __pyx_v__;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  long __pyx_t_7;
  long __pyx_t_8;
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("move_forward", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_num_toks = __pyx_optional_args->num_toks;
    }
  }
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_move_forward); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 644, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_15move_forward)) {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_num_toks); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 644, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_4 = __pyx_t_1; __pyx_t_5 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      if (!__pyx_t_5) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 644, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_4)) {
          PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_3};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 644, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
          PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_3};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 644, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        {
          __pyx_t_6 = PyTuple_New(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 644, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
          __Pyx_GIVEREF(__pyx_t_3);
          PyTuple_SET_ITEM(__pyx_t_6, 0+1, __pyx_t_3);
          __pyx_t_3 = 0;
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 644, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":654
 *         the first end-token.  No new tokens are added to the buffer.  The
 *         end-token is returned."""
 *         for _ in range(num_toks):             # <<<<<<<<<<<<<<
 *             if self[0].is_end_token():
 *                 break
 */
  __pyx_t_7 = __pyx_v_num_toks;
  for (__pyx_t_8 = 0; __pyx_t_8 < __pyx_t_7; __pyx_t_8+=1) {
    __pyx_v__ = __pyx_t_8;

    /* "typped/lexer.py":655
 *         end-token is returned."""
 *         for _ in range(num_toks):
 *             if self[0].is_end_token():             # <<<<<<<<<<<<<<
 *                 break
 *             self.current_offset += 1
 */
    __pyx_t_2 = __Pyx_GetItemInt(((PyObject *)__pyx_v_self), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 655, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_is_end_token); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 655, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (__pyx_t_2) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 655, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else {
      __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 655, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 655, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_9) {

      /* "typped/lexer.py":656
 *         for _ in range(num_toks):
 *             if self[0].is_end_token():
 *                 break             # <<<<<<<<<<<<<<
 *             self.current_offset += 1
 *             self._fill_to_current_offset()
 */
      goto __pyx_L4_break;

      /* "typped/lexer.py":655
 *         end-token is returned."""
 *         for _ in range(num_toks):
 *             if self[0].is_end_token():             # <<<<<<<<<<<<<<
 *                 break
 *             self.current_offset += 1
 */
    }

    /* "typped/lexer.py":657
 *             if self[0].is_end_token():
 *                 break
 *             self.current_offset += 1             # <<<<<<<<<<<<<<
 *             self._fill_to_current_offset()
 *         return self[0]
 */
    __pyx_v_self->current_offset = (__pyx_v_self->current_offset + 1);

    /* "typped/lexer.py":658
 *                 break
 *             self.current_offset += 1
 *             self._fill_to_current_offset()             # <<<<<<<<<<<<<<
 *         return self[0]
 * 
 */
    __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_self->__pyx_vtab)->_fill_to_current_offset(__pyx_v_self); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 658, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }
  __pyx_L4_break:;

  /* "typped/lexer.py":659
 *             self.current_offset += 1
 *             self._fill_to_current_offset()
 *         return self[0]             # <<<<<<<<<<<<<<
 * 
 *     def move_back(self, num_toks=1):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(((PyObject *)__pyx_v_self), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 659, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":644
 *         return len(self.token_buffer) - begin_point
 * 
 *     def move_forward(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Move the current token (i.e., the offset) forward by one.  This is
 *         the token buffer's equivalent of `next`, except that it returns
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.move_forward", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_15move_forward(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_11TokenBuffer_14move_forward[] = "Move the current token (i.e., the offset) forward by one.  This is\n        the token buffer's equivalent of `next`, except that it returns\n        previously-buffered tokens if possible.  The `Lexer` method `next`\n        should always be called by users of that class, because it also handles\n        some other things.\n\n        Attempts to move past the first end-token leave the current offset at\n        the first end-token.  No new tokens are added to the buffer.  The\n        end-token is returned.";
static PyMethodDef __pyx_mdef_6typped_5lexer_11TokenBuffer_15move_forward = {"move_forward", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_15move_forward, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_11TokenBuffer_14move_forward};
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_15move_forward(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  long __pyx_v_num_toks;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("move_forward (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_num_toks,0};
    PyObject* values[1] = {0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_num_toks);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "move_forward") < 0)) __PYX_ERR(0, 644, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_num_toks = __Pyx_PyInt_As_long(values[0]); if (unlikely((__pyx_v_num_toks == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 644, __pyx_L3_error)
    } else {
      __pyx_v_num_toks = ((long)1);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("move_forward", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 644, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.move_forward", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_14move_forward(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), __pyx_v_num_toks);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_14move_forward(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_num_toks) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_forward __pyx_t_2;
  __Pyx_RefNannySetupContext("move_forward", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 1;
  __pyx_t_2.num_toks = __pyx_v_num_toks;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_TokenBuffer->move_forward(__pyx_v_self, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 644, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.move_forward", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":661
 *         return self[0]
 * 
 *     def move_back(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Move the current token (i.e., offset) back `num_toks` tokens.  Will
 *         always stop at the begin-token.  Users should check the condition if it
 */

static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_17move_back(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer_move_back(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_back *__pyx_optional_args) {
  long __pyx_v_num_toks = ((long)1);
  long __pyx_v_absolute_index;
  PyObject *__pyx_v_curr_token = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  unsigned long __pyx_t_8;
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("move_back", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_num_toks = __pyx_optional_args->num_toks;
    }
  }
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_move_back); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 661, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_17move_back)) {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_num_toks); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 661, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_4 = __pyx_t_1; __pyx_t_5 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      if (!__pyx_t_5) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 661, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_4)) {
          PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_3};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 661, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
          PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_3};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 661, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        {
          __pyx_t_6 = PyTuple_New(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 661, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
          __Pyx_GIVEREF(__pyx_t_3);
          PyTuple_SET_ITEM(__pyx_t_6, 0+1, __pyx_t_3);
          __pyx_t_3 = 0;
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 661, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":667
 *         currently-saved tokens, but the begin-token is no longer saved, then a
 *         `LexerException` is raised."""
 *         self.current_offset -= num_toks             # <<<<<<<<<<<<<<
 *         absolute_index = self._offset_to_absolute(self.current_offset)
 *         if absolute_index < 0:
 */
  __pyx_v_self->current_offset = (__pyx_v_self->current_offset - __pyx_v_num_toks);

  /* "typped/lexer.py":668
 *         `LexerException` is raised."""
 *         self.current_offset -= num_toks
 *         absolute_index = self._offset_to_absolute(self.current_offset)             # <<<<<<<<<<<<<<
 *         if absolute_index < 0:
 *             self.current_offset += abs(absolute_index)
 */
  __pyx_v_absolute_index = __pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute(__pyx_v_self, __pyx_v_self->current_offset);

  /* "typped/lexer.py":669
 *         self.current_offset -= num_toks
 *         absolute_index = self._offset_to_absolute(self.current_offset)
 *         if absolute_index < 0:             # <<<<<<<<<<<<<<
 *             self.current_offset += abs(absolute_index)
 *             curr_token = self[0]
 */
  __pyx_t_7 = ((__pyx_v_absolute_index < 0) != 0);
  if (__pyx_t_7) {

    /* "typped/lexer.py":670
 *         absolute_index = self._offset_to_absolute(self.current_offset)
 *         if absolute_index < 0:
 *             self.current_offset += abs(absolute_index)             # <<<<<<<<<<<<<<
 *             curr_token = self[0]
 *             if not curr_token.is_begin_token():
 */
    __pyx_t_8 = __Pyx_abs_long(__pyx_v_absolute_index); 
    __pyx_v_self->current_offset = (__pyx_v_self->current_offset + __pyx_t_8);

    /* "typped/lexer.py":671
 *         if absolute_index < 0:
 *             self.current_offset += abs(absolute_index)
 *             curr_token = self[0]             # <<<<<<<<<<<<<<
 *             if not curr_token.is_begin_token():
 *                 raise LexerException("Not enough saved tokens to move back to the"
 */
    __pyx_t_1 = __Pyx_GetItemInt(((PyObject *)__pyx_v_self), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 671, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_v_curr_token = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "typped/lexer.py":672
 *             self.current_offset += abs(absolute_index)
 *             curr_token = self[0]
 *             if not curr_token.is_begin_token():             # <<<<<<<<<<<<<<
 *                 raise LexerException("Not enough saved tokens to move back to the"
 *                                      " begin-token in the `move_back` method.")
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_curr_token, __pyx_n_s_is_begin_token); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 672, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    if (__pyx_t_4) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 672, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    } else {
      __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 672, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 672, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_9 = ((!__pyx_t_7) != 0);
    if (__pyx_t_9) {

      /* "typped/lexer.py":673
 *             curr_token = self[0]
 *             if not curr_token.is_begin_token():
 *                 raise LexerException("Not enough saved tokens to move back to the"             # <<<<<<<<<<<<<<
 *                                      " begin-token in the `move_back` method.")
 *         else:
 */
      __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 673, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_tuple__13, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 673, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_Raise(__pyx_t_2, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __PYX_ERR(0, 673, __pyx_L1_error)

      /* "typped/lexer.py":672
 *             self.current_offset += abs(absolute_index)
 *             curr_token = self[0]
 *             if not curr_token.is_begin_token():             # <<<<<<<<<<<<<<
 *                 raise LexerException("Not enough saved tokens to move back to the"
 *                                      " begin-token in the `move_back` method.")
 */
    }

    /* "typped/lexer.py":669
 *         self.current_offset -= num_toks
 *         absolute_index = self._offset_to_absolute(self.current_offset)
 *         if absolute_index < 0:             # <<<<<<<<<<<<<<
 *             self.current_offset += abs(absolute_index)
 *             curr_token = self[0]
 */
    goto __pyx_L3;
  }

  /* "typped/lexer.py":676
 *                                      " begin-token in the `move_back` method.")
 *         else:
 *             curr_token = self[0]             # <<<<<<<<<<<<<<
 *         return curr_token
 * 
 */
  /*else*/ {
    __pyx_t_2 = __Pyx_GetItemInt(((PyObject *)__pyx_v_self), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 676, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_v_curr_token = __pyx_t_2;
    __pyx_t_2 = 0;
  }
  __pyx_L3:;

  /* "typped/lexer.py":677
 *         else:
 *             curr_token = self[0]
 *         return curr_token             # <<<<<<<<<<<<<<
 * 
 *     #
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_curr_token);
  __pyx_r = __pyx_v_curr_token;
  goto __pyx_L0;

  /* "typped/lexer.py":661
 *         return self[0]
 * 
 *     def move_back(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Move the current token (i.e., offset) back `num_toks` tokens.  Will
 *         always stop at the begin-token.  Users should check the condition if it
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.move_back", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_curr_token);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_17move_back(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_11TokenBuffer_16move_back[] = "Move the current token (i.e., offset) back `num_toks` tokens.  Will\n        always stop at the begin-token.  Users should check the condition if it\n        matters.  If the move attempts to move back to before the\n        currently-saved tokens, but the begin-token is no longer saved, then a\n        `LexerException` is raised.";
static PyMethodDef __pyx_mdef_6typped_5lexer_11TokenBuffer_17move_back = {"move_back", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_17move_back, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_11TokenBuffer_16move_back};
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_17move_back(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  long __pyx_v_num_toks;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("move_back (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_num_toks,0};
    PyObject* values[1] = {0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_num_toks);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "move_back") < 0)) __PYX_ERR(0, 661, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_num_toks = __Pyx_PyInt_As_long(values[0]); if (unlikely((__pyx_v_num_toks == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 661, __pyx_L3_error)
    } else {
      __pyx_v_num_toks = ((long)1);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("move_back", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 661, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.move_back", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_16move_back(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), __pyx_v_num_toks);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_16move_back(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_num_toks) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_back __pyx_t_2;
  __Pyx_RefNannySetupContext("move_back", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 1;
  __pyx_t_2.num_toks = __pyx_v_num_toks;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_TokenBuffer->move_back(__pyx_v_self, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 661, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.move_back", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":683
 *     #
 * 
 *     def _index_to_absolute(self, index):             # <<<<<<<<<<<<<<
 *         """Convert an index into an absolute index into the current deque.
 *         Note that any changes to the current offset or to the reference
 */

static CYTHON_INLINE long __pyx_f_6typped_5lexer_11TokenBuffer__index_to_absolute(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_index) {
  long __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("_index_to_absolute", 0);

  /* "typped/lexer.py":688
 *         point (the latter via _append) will invalidate the absolute reference.
 *         In those cases it will need to be re-calculated."""
 *         return index + self.current_offset + self.reference_point             # <<<<<<<<<<<<<<
 * 
 *     def _offset_to_absolute(self, offset):
 */
  __pyx_r = ((__pyx_v_index + __pyx_v_self->current_offset) + __pyx_v_self->reference_point);
  goto __pyx_L0;

  /* "typped/lexer.py":683
 *     #
 * 
 *     def _index_to_absolute(self, index):             # <<<<<<<<<<<<<<
 *         """Convert an index into an absolute index into the current deque.
 *         Note that any changes to the current offset or to the reference
 */

  /* function exit code */
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":690
 *         return index + self.current_offset + self.reference_point
 * 
 *     def _offset_to_absolute(self, offset):             # <<<<<<<<<<<<<<
 *         """Convert an offset into an absolute index into the current deque.
 *         Note that calls to `_append` can modify the reference point and
 */

static CYTHON_INLINE long __pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, long __pyx_v_offset) {
  long __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("_offset_to_absolute", 0);

  /* "typped/lexer.py":695
 *         invalidate the absolute index.  Needs to be re-calculated after
 *         such a call."""
 *         return offset + self.reference_point             # <<<<<<<<<<<<<<
 * 
 *     def _fill_to_current_offset(self):
 */
  __pyx_r = (__pyx_v_offset + __pyx_v_self->reference_point);
  goto __pyx_L0;

  /* "typped/lexer.py":690
 *         return index + self.current_offset + self.reference_point
 * 
 *     def _offset_to_absolute(self, offset):             # <<<<<<<<<<<<<<
 *         """Convert an offset into an absolute index into the current deque.
 *         Note that calls to `_append` can modify the reference point and
 */

  /* function exit code */
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":697
 *         return offset + self.reference_point
 * 
 *     def _fill_to_current_offset(self):             # <<<<<<<<<<<<<<
 *         """If the current offset points past the end of the token buffer then
 *         get tokens and append them until it is a valid index.  Note this
 */

static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer__fill_to_current_offset(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  int __pyx_t_3;
  __Pyx_RefNannySetupContext("_fill_to_current_offset", 0);

  /* "typped/lexer.py":703
 *         in the text then the current offset point is reset to the first end
 *         token.  Only one end token is ever stored in the buffer."""
 *         while self._offset_to_absolute(self.current_offset) >= len(self.token_buffer):             # <<<<<<<<<<<<<<
 *             self._append() # Note this call can change self.reference_point.
 * 
 */
  while (1) {
    __pyx_t_1 = __pyx_v_self->token_buffer;
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_2 = PyObject_Length(__pyx_t_1); if (unlikely(__pyx_t_2 == -1)) __PYX_ERR(0, 703, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_3 = ((__pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute(__pyx_v_self, __pyx_v_self->current_offset) >= __pyx_t_2) != 0);
    if (!__pyx_t_3) break;

    /* "typped/lexer.py":704
 *         token.  Only one end token is ever stored in the buffer."""
 *         while self._offset_to_absolute(self.current_offset) >= len(self.token_buffer):
 *             self._append() # Note this call can change self.reference_point.             # <<<<<<<<<<<<<<
 * 
 *     def _pop(self):
 */
    __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_self->__pyx_vtab)->_append(__pyx_v_self, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 704, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":697
 *         return offset + self.reference_point
 * 
 *     def _fill_to_current_offset(self):             # <<<<<<<<<<<<<<
 *         """If the current offset points past the end of the token buffer then
 *         get tokens and append them until it is a valid index.  Note this
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer._fill_to_current_offset", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":706
 *             self._append() # Note this call can change self.reference_point.
 * 
 *     def _pop(self):             # <<<<<<<<<<<<<<
 *         """Users should not call.  Pop off the rightmost item and return it.  Moves
 *         the current token backward if necessary."""
 */

static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer__pop(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  PyObject *__pyx_v_retval = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  int __pyx_t_3;
  __Pyx_RefNannySetupContext("_pop", 0);

  /* "typped/lexer.py":709
 *         """Users should not call.  Pop off the rightmost item and return it.  Moves
 *         the current token backward if necessary."""
 *         retval = self.token_buffer.pop()             # <<<<<<<<<<<<<<
 *         if self._offset_to_absolute(self.current_offset) >= len(self.token_buffer):
 *             self.current_offset -= 1
 */
  __pyx_t_1 = __Pyx_PyObject_Pop(__pyx_v_self->token_buffer); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 709, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_retval = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":710
 *         the current token backward if necessary."""
 *         retval = self.token_buffer.pop()
 *         if self._offset_to_absolute(self.current_offset) >= len(self.token_buffer):             # <<<<<<<<<<<<<<
 *             self.current_offset -= 1
 *         return retval
 */
  __pyx_t_1 = __pyx_v_self->token_buffer;
  __Pyx_INCREF(__pyx_t_1);
  __pyx_t_2 = PyObject_Length(__pyx_t_1); if (unlikely(__pyx_t_2 == -1)) __PYX_ERR(0, 710, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_3 = ((__pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute(__pyx_v_self, __pyx_v_self->current_offset) >= __pyx_t_2) != 0);
  if (__pyx_t_3) {

    /* "typped/lexer.py":711
 *         retval = self.token_buffer.pop()
 *         if self._offset_to_absolute(self.current_offset) >= len(self.token_buffer):
 *             self.current_offset -= 1             # <<<<<<<<<<<<<<
 *         return retval
 * 
 */
    __pyx_v_self->current_offset = (__pyx_v_self->current_offset - 1);

    /* "typped/lexer.py":710
 *         the current token backward if necessary."""
 *         retval = self.token_buffer.pop()
 *         if self._offset_to_absolute(self.current_offset) >= len(self.token_buffer):             # <<<<<<<<<<<<<<
 *             self.current_offset -= 1
 *         return retval
 */
  }

  /* "typped/lexer.py":712
 *         if self._offset_to_absolute(self.current_offset) >= len(self.token_buffer):
 *             self.current_offset -= 1
 *         return retval             # <<<<<<<<<<<<<<
 * 
 *     def _append(self, tok=None):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_retval);
  __pyx_r = __pyx_v_retval;
  goto __pyx_L0;

  /* "typped/lexer.py":706
 *             self._append() # Note this call can change self.reference_point.
 * 
 *     def _pop(self):             # <<<<<<<<<<<<<<
 *         """Users should not call.  Pop off the rightmost item and return it.  Moves
 *         the current token backward if necessary."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer._pop", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_retval);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":714
 *         return retval
 * 
 *     def _append(self, tok=None):             # <<<<<<<<<<<<<<
 *         """Append to buffer and fix current index if necessary.  Users should not
 *         call.  If `tok` is not set then the token to append is obtained from the
 */

static PyObject *__pyx_f_6typped_5lexer_11TokenBuffer__append(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer__append *__pyx_optional_args) {
  PyObject *__pyx_v_tok = ((PyObject *)Py_None);
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  Py_ssize_t __pyx_t_7;
  __Pyx_RefNannySetupContext("_append", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_tok = __pyx_optional_args->tok;
    }
  }
  __Pyx_INCREF(__pyx_v_tok);

  /* "typped/lexer.py":722
 *         from the token getter function."""
 *         # TODO: should this fill with end tokens, or stop at the first end token?
 *         if tok is None:             # <<<<<<<<<<<<<<
 *             tok = self.token_getter_fun()
 *             # TODO: below causes a FAIL with go_back hanging... probably __getitem__
 */
  __pyx_t_1 = (__pyx_v_tok == Py_None);
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "typped/lexer.py":723
 *         # TODO: should this fill with end tokens, or stop at the first end token?
 *         if tok is None:
 *             tok = self.token_getter_fun()             # <<<<<<<<<<<<<<
 *             # TODO: below causes a FAIL with go_back hanging... probably __getitem__
 *             # calling but not compensating for this behavior...
 */
    __Pyx_INCREF(__pyx_v_self->token_getter_fun);
    __pyx_t_4 = __pyx_v_self->token_getter_fun; __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (__pyx_t_5) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 723, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else {
      __pyx_t_3 = __Pyx_PyObject_CallNoArg(__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 723, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF_SET(__pyx_v_tok, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "typped/lexer.py":726
 *             # TODO: below causes a FAIL with go_back hanging... probably __getitem__
 *             # calling but not compensating for this behavior...
 *             if tok.is_end_token() and self.token_buffer[-1].is_end_token():             # <<<<<<<<<<<<<<
 *                 return tok
 *         self.token_buffer.append(tok)
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_tok, __pyx_n_s_is_end_token); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 726, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (__pyx_t_5) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 726, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else {
      __pyx_t_3 = __Pyx_PyObject_CallNoArg(__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 726, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 726, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_1) {
    } else {
      __pyx_t_2 = __pyx_t_1;
      goto __pyx_L5_bool_binop_done;
    }
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_self->token_buffer, -1L, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 726, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_is_end_token); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 726, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    if (__pyx_t_4) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 726, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    } else {
      __pyx_t_3 = __Pyx_PyObject_CallNoArg(__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 726, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 726, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_2 = __pyx_t_1;
    __pyx_L5_bool_binop_done:;
    if (__pyx_t_2) {

      /* "typped/lexer.py":727
 *             # calling but not compensating for this behavior...
 *             if tok.is_end_token() and self.token_buffer[-1].is_end_token():
 *                 return tok             # <<<<<<<<<<<<<<
 *         self.token_buffer.append(tok)
 *         if (self.max_deque_size != -1
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_tok);
      __pyx_r = __pyx_v_tok;
      goto __pyx_L0;

      /* "typped/lexer.py":726
 *             # TODO: below causes a FAIL with go_back hanging... probably __getitem__
 *             # calling but not compensating for this behavior...
 *             if tok.is_end_token() and self.token_buffer[-1].is_end_token():             # <<<<<<<<<<<<<<
 *                 return tok
 *         self.token_buffer.append(tok)
 */
    }

    /* "typped/lexer.py":722
 *         from the token getter function."""
 *         # TODO: should this fill with end tokens, or stop at the first end token?
 *         if tok is None:             # <<<<<<<<<<<<<<
 *             tok = self.token_getter_fun()
 *             # TODO: below causes a FAIL with go_back hanging... probably __getitem__
 */
  }

  /* "typped/lexer.py":728
 *             if tok.is_end_token() and self.token_buffer[-1].is_end_token():
 *                 return tok
 *         self.token_buffer.append(tok)             # <<<<<<<<<<<<<<
 *         if (self.max_deque_size != -1
 *                 and len(self.token_buffer) > self.max_deque_size):
 */
  __pyx_t_6 = __Pyx_PyObject_Append(__pyx_v_self->token_buffer, __pyx_v_tok); if (unlikely(__pyx_t_6 == -1)) __PYX_ERR(0, 728, __pyx_L1_error)

  /* "typped/lexer.py":729
 *                 return tok
 *         self.token_buffer.append(tok)
 *         if (self.max_deque_size != -1             # <<<<<<<<<<<<<<
 *                 and len(self.token_buffer) > self.max_deque_size):
 *             self.reference_point -= 1
 */
  __pyx_t_1 = ((__pyx_v_self->max_deque_size != -1L) != 0);
  if (__pyx_t_1) {
  } else {
    __pyx_t_2 = __pyx_t_1;
    goto __pyx_L8_bool_binop_done;
  }

  /* "typped/lexer.py":730
 *         self.token_buffer.append(tok)
 *         if (self.max_deque_size != -1
 *                 and len(self.token_buffer) > self.max_deque_size):             # <<<<<<<<<<<<<<
 *             self.reference_point -= 1
 *             self.token_buffer.popleft() # Do an explicit popleft.
 */
  __pyx_t_3 = __pyx_v_self->token_buffer;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_7 = PyObject_Length(__pyx_t_3); if (unlikely(__pyx_t_7 == -1)) __PYX_ERR(0, 730, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_1 = ((__pyx_t_7 > __pyx_v_self->max_deque_size) != 0);
  __pyx_t_2 = __pyx_t_1;
  __pyx_L8_bool_binop_done:;

  /* "typped/lexer.py":729
 *                 return tok
 *         self.token_buffer.append(tok)
 *         if (self.max_deque_size != -1             # <<<<<<<<<<<<<<
 *                 and len(self.token_buffer) > self.max_deque_size):
 *             self.reference_point -= 1
 */
  if (__pyx_t_2) {

    /* "typped/lexer.py":731
 *         if (self.max_deque_size != -1
 *                 and len(self.token_buffer) > self.max_deque_size):
 *             self.reference_point -= 1             # <<<<<<<<<<<<<<
 *             self.token_buffer.popleft() # Do an explicit popleft.
 *             if self._offset_to_absolute(self.current_offset) < 0:
 */
    __pyx_v_self->reference_point = (__pyx_v_self->reference_point - 1);

    /* "typped/lexer.py":732
 *                 and len(self.token_buffer) > self.max_deque_size):
 *             self.reference_point -= 1
 *             self.token_buffer.popleft() # Do an explicit popleft.             # <<<<<<<<<<<<<<
 *             if self._offset_to_absolute(self.current_offset) < 0:
 *                 raise LexerException("Error in TokenBuffer:"
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token_buffer, __pyx_n_s_popleft); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 732, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    if (__pyx_t_4) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 732, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    } else {
      __pyx_t_3 = __Pyx_PyObject_CallNoArg(__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 732, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "typped/lexer.py":733
 *             self.reference_point -= 1
 *             self.token_buffer.popleft() # Do an explicit popleft.
 *             if self._offset_to_absolute(self.current_offset) < 0:             # <<<<<<<<<<<<<<
 *                 raise LexerException("Error in TokenBuffer:"
 *                     " Maximum buffer size is too small for the amount of peeking."
 */
    __pyx_t_2 = ((__pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute(__pyx_v_self, __pyx_v_self->current_offset) < 0) != 0);
    if (__pyx_t_2) {

      /* "typped/lexer.py":734
 *             self.token_buffer.popleft() # Do an explicit popleft.
 *             if self._offset_to_absolute(self.current_offset) < 0:
 *                 raise LexerException("Error in TokenBuffer:"             # <<<<<<<<<<<<<<
 *                     " Maximum buffer size is too small for the amount of peeking."
 *                     " Current token was deleted.")
 */
      __pyx_t_3 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 734, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_tuple__14, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 734, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_Raise(__pyx_t_5, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __PYX_ERR(0, 734, __pyx_L1_error)

      /* "typped/lexer.py":733
 *             self.reference_point -= 1
 *             self.token_buffer.popleft() # Do an explicit popleft.
 *             if self._offset_to_absolute(self.current_offset) < 0:             # <<<<<<<<<<<<<<
 *                 raise LexerException("Error in TokenBuffer:"
 *                     " Maximum buffer size is too small for the amount of peeking."
 */
    }

    /* "typped/lexer.py":737
 *                     " Maximum buffer size is too small for the amount of peeking."
 *                     " Current token was deleted.")
 *             assert len(self.token_buffer) == self.max_deque_size             # <<<<<<<<<<<<<<
 * 
 * 
 */
    #ifndef CYTHON_WITHOUT_ASSERTIONS
    if (unlikely(!Py_OptimizeFlag)) {
      __pyx_t_5 = __pyx_v_self->token_buffer;
      __Pyx_INCREF(__pyx_t_5);
      __pyx_t_7 = PyObject_Length(__pyx_t_5); if (unlikely(__pyx_t_7 == -1)) __PYX_ERR(0, 737, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      if (unlikely(!((__pyx_t_7 == __pyx_v_self->max_deque_size) != 0))) {
        PyErr_SetNone(PyExc_AssertionError);
        __PYX_ERR(0, 737, __pyx_L1_error)
      }
    }
    #endif

    /* "typped/lexer.py":729
 *                 return tok
 *         self.token_buffer.append(tok)
 *         if (self.max_deque_size != -1             # <<<<<<<<<<<<<<
 *                 and len(self.token_buffer) > self.max_deque_size):
 *             self.reference_point -= 1
 */
  }

  /* "typped/lexer.py":714
 *         return retval
 * 
 *     def _append(self, tok=None):             # <<<<<<<<<<<<<<
 *         """Append to buffer and fix current index if necessary.  Users should not
 *         call.  If `tok` is not set then the token to append is obtained from the
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer._append", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_tok);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":11
 * cdef class TokenBuffer(object):
 *     cdef token_getter_fun
 *     cdef public token_buffer             # <<<<<<<<<<<<<<
 *     cdef public long max_deque_size, max_peek, current_offset, reference_point
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_12token_buffer_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_12token_buffer_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_12token_buffer___get__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_12token_buffer___get__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->token_buffer);
  __pyx_r = __pyx_v_self->token_buffer;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_11TokenBuffer_12token_buffer_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_11TokenBuffer_12token_buffer_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_12token_buffer_2__set__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_11TokenBuffer_12token_buffer_2__set__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__", 0);
  __Pyx_INCREF(__pyx_v_value);
  __Pyx_GIVEREF(__pyx_v_value);
  __Pyx_GOTREF(__pyx_v_self->token_buffer);
  __Pyx_DECREF(__pyx_v_self->token_buffer);
  __pyx_v_self->token_buffer = __pyx_v_value;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_11TokenBuffer_12token_buffer_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_11TokenBuffer_12token_buffer_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_12token_buffer_4__del__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_11TokenBuffer_12token_buffer_4__del__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->token_buffer);
  __Pyx_DECREF(__pyx_v_self->token_buffer);
  __pyx_v_self->token_buffer = Py_None;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":12
 *     cdef token_getter_fun
 *     cdef public token_buffer
 *     cdef public long max_deque_size, max_peek, current_offset, reference_point             # <<<<<<<<<<<<<<
 * 
 *     #
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_14max_deque_size_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_14max_deque_size_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_14max_deque_size___get__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_14max_deque_size___get__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_self->max_deque_size); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 12, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.max_deque_size.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_11TokenBuffer_14max_deque_size_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_11TokenBuffer_14max_deque_size_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_14max_deque_size_2__set__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_11TokenBuffer_14max_deque_size_2__set__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  __Pyx_RefNannySetupContext("__set__", 0);
  __pyx_t_1 = __Pyx_PyInt_As_long(__pyx_v_value); if (unlikely((__pyx_t_1 == (long)-1) && PyErr_Occurred())) __PYX_ERR(1, 12, __pyx_L1_error)
  __pyx_v_self->max_deque_size = __pyx_t_1;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.max_deque_size.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_8max_peek_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_8max_peek_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_8max_peek___get__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_8max_peek___get__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_self->max_peek); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 12, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.max_peek.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_11TokenBuffer_8max_peek_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_11TokenBuffer_8max_peek_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_8max_peek_2__set__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_11TokenBuffer_8max_peek_2__set__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  __Pyx_RefNannySetupContext("__set__", 0);
  __pyx_t_1 = __Pyx_PyInt_As_long(__pyx_v_value); if (unlikely((__pyx_t_1 == (long)-1) && PyErr_Occurred())) __PYX_ERR(1, 12, __pyx_L1_error)
  __pyx_v_self->max_peek = __pyx_t_1;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.max_peek.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_14current_offset_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_14current_offset_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_14current_offset___get__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_14current_offset___get__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_self->current_offset); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 12, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.current_offset.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_11TokenBuffer_14current_offset_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_11TokenBuffer_14current_offset_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_14current_offset_2__set__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_11TokenBuffer_14current_offset_2__set__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  __Pyx_RefNannySetupContext("__set__", 0);
  __pyx_t_1 = __Pyx_PyInt_As_long(__pyx_v_value); if (unlikely((__pyx_t_1 == (long)-1) && PyErr_Occurred())) __PYX_ERR(1, 12, __pyx_L1_error)
  __pyx_v_self->current_offset = __pyx_t_1;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.current_offset.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_15reference_point_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_15reference_point_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_15reference_point___get__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_15reference_point___get__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_self->reference_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 12, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.reference_point.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_11TokenBuffer_15reference_point_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_11TokenBuffer_15reference_point_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_15reference_point_2__set__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_11TokenBuffer_15reference_point_2__set__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  __Pyx_RefNannySetupContext("__set__", 0);
  __pyx_t_1 = __Pyx_PyInt_As_long(__pyx_v_value); if (unlikely((__pyx_t_1 == (long)-1) && PyErr_Occurred())) __PYX_ERR(1, 12, __pyx_L1_error)
  __pyx_v_self->reference_point = __pyx_t_1;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.reference_point.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self.current_offset, self.max_deque_size, self.max_peek, self.reference_point, self.token_buffer, self.token_getter_fun)
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_19__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_11TokenBuffer_19__reduce_cython__ = {"__reduce_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_19__reduce_cython__, METH_NOARGS, 0};
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_19__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__reduce_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_18__reduce_cython__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_18__reduce_cython__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self) {
  int __pyx_v_use_setstate;
  PyObject *__pyx_v_state = NULL;
  PyObject *__pyx_v__dict = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("__reduce_cython__", 0);

  /* "(tree fragment)":3
 * def __reduce_cython__(self):
 *     cdef bint use_setstate
 *     state = (self.current_offset, self.max_deque_size, self.max_peek, self.reference_point, self.token_buffer, self.token_getter_fun)             # <<<<<<<<<<<<<<
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:
 */
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_self->current_offset); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v_self->max_deque_size); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_self->max_peek); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyInt_From_long(__pyx_v_self->reference_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyTuple_New(6); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_4);
  PyTuple_SET_ITEM(__pyx_t_5, 3, __pyx_t_4);
  __Pyx_INCREF(__pyx_v_self->token_buffer);
  __Pyx_GIVEREF(__pyx_v_self->token_buffer);
  PyTuple_SET_ITEM(__pyx_t_5, 4, __pyx_v_self->token_buffer);
  __Pyx_INCREF(__pyx_v_self->token_getter_fun);
  __Pyx_GIVEREF(__pyx_v_self->token_getter_fun);
  PyTuple_SET_ITEM(__pyx_t_5, 5, __pyx_v_self->token_getter_fun);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_3 = 0;
  __pyx_t_4 = 0;
  __pyx_v_state = ((PyObject*)__pyx_t_5);
  __pyx_t_5 = 0;

  /* "(tree fragment)":4
 *     cdef bint use_setstate
 *     state = (self.current_offset, self.max_deque_size, self.max_peek, self.reference_point, self.token_buffer, self.token_getter_fun)
 *     _dict = getattr(self, '__dict__', None)             # <<<<<<<<<<<<<<
 *     if _dict is not None:
 *         state += _dict,
 */
  __pyx_t_5 = __Pyx_GetAttr3(((PyObject *)__pyx_v_self), __pyx_n_s_dict, Py_None); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 4, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_v__dict = __pyx_t_5;
  __pyx_t_5 = 0;

  /* "(tree fragment)":5
 *     state = (self.current_offset, self.max_deque_size, self.max_peek, self.reference_point, self.token_buffer, self.token_getter_fun)
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:             # <<<<<<<<<<<<<<
 *         state += _dict,
 *         use_setstate = True
 */
  __pyx_t_6 = (__pyx_v__dict != Py_None);
  __pyx_t_7 = (__pyx_t_6 != 0);
  if (__pyx_t_7) {

    /* "(tree fragment)":6
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:
 *         state += _dict,             # <<<<<<<<<<<<<<
 *         use_setstate = True
 *     else:
 */
    __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 6, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_v__dict);
    __Pyx_GIVEREF(__pyx_v__dict);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v__dict);
    __pyx_t_4 = PyNumber_InPlaceAdd(__pyx_v_state, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 6, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF_SET(__pyx_v_state, ((PyObject*)__pyx_t_4));
    __pyx_t_4 = 0;

    /* "(tree fragment)":7
 *     if _dict is not None:
 *         state += _dict,
 *         use_setstate = True             # <<<<<<<<<<<<<<
 *     else:
 *         use_setstate = self.token_buffer is not None or self.token_getter_fun is not None
 */
    __pyx_v_use_setstate = 1;

    /* "(tree fragment)":5
 *     state = (self.current_offset, self.max_deque_size, self.max_peek, self.reference_point, self.token_buffer, self.token_getter_fun)
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:             # <<<<<<<<<<<<<<
 *         state += _dict,
 *         use_setstate = True
 */
    goto __pyx_L3;
  }

  /* "(tree fragment)":9
 *         use_setstate = True
 *     else:
 *         use_setstate = self.token_buffer is not None or self.token_getter_fun is not None             # <<<<<<<<<<<<<<
 *     if use_setstate:
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, None), state
 */
  /*else*/ {
    __pyx_t_6 = (__pyx_v_self->token_buffer != Py_None);
    __pyx_t_8 = (__pyx_t_6 != 0);
    if (!__pyx_t_8) {
    } else {
      __pyx_t_7 = __pyx_t_8;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_8 = (__pyx_v_self->token_getter_fun != Py_None);
    __pyx_t_6 = (__pyx_t_8 != 0);
    __pyx_t_7 = __pyx_t_6;
    __pyx_L4_bool_binop_done:;
    __pyx_v_use_setstate = __pyx_t_7;
  }
  __pyx_L3:;

  /* "(tree fragment)":10
 *     else:
 *         use_setstate = self.token_buffer is not None or self.token_getter_fun is not None
 *     if use_setstate:             # <<<<<<<<<<<<<<
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, None), state
 *     else:
 */
  __pyx_t_7 = (__pyx_v_use_setstate != 0);
  if (__pyx_t_7) {

    /* "(tree fragment)":11
 *         use_setstate = self.token_buffer is not None or self.token_getter_fun is not None
 *     if use_setstate:
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, None), state             # <<<<<<<<<<<<<<
 *     else:
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, state)
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_4 = __Pyx_GetModuleGlobalName(__pyx_n_s_pyx_unpickle_TokenBuffer); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyTuple_New(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    PyTuple_SET_ITEM(__pyx_t_5, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_INCREF(__pyx_int_110728784);
    __Pyx_GIVEREF(__pyx_int_110728784);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_int_110728784);
    __Pyx_INCREF(Py_None);
    __Pyx_GIVEREF(Py_None);
    PyTuple_SET_ITEM(__pyx_t_5, 2, Py_None);
    __pyx_t_3 = PyTuple_New(3); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_5);
    __Pyx_INCREF(__pyx_v_state);
    __Pyx_GIVEREF(__pyx_v_state);
    PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_v_state);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_r = __pyx_t_3;
    __pyx_t_3 = 0;
    goto __pyx_L0;

    /* "(tree fragment)":10
 *     else:
 *         use_setstate = self.token_buffer is not None or self.token_getter_fun is not None
 *     if use_setstate:             # <<<<<<<<<<<<<<
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, None), state
 *     else:
 */
  }

  /* "(tree fragment)":13
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, None), state
 *     else:
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, state)             # <<<<<<<<<<<<<<
 * def __setstate_cython__(self, __pyx_state):
 *     __pyx_unpickle_TokenBuffer__set_state(self, __pyx_state)
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = __Pyx_GetModuleGlobalName(__pyx_n_s_pyx_unpickle_TokenBuffer); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = PyTuple_New(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    PyTuple_SET_ITEM(__pyx_t_5, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_INCREF(__pyx_int_110728784);
    __Pyx_GIVEREF(__pyx_int_110728784);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_int_110728784);
    __Pyx_INCREF(__pyx_v_state);
    __Pyx_GIVEREF(__pyx_v_state);
    PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_v_state);
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_5);
    __pyx_t_3 = 0;
    __pyx_t_5 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;
  }

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self.current_offset, self.max_deque_size, self.max_peek, self.reference_point, self.token_buffer, self.token_getter_fun)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_state);
  __Pyx_XDECREF(__pyx_v__dict);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_TokenBuffer__set_state(self, __pyx_state)
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_21__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_11TokenBuffer_21__setstate_cython__ = {"__setstate_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_21__setstate_cython__, METH_O, 0};
static PyObject *__pyx_pw_6typped_5lexer_11TokenBuffer_21__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__setstate_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_11TokenBuffer_20__setstate_cython__(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_self), ((PyObject *)__pyx_v___pyx_state));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_11TokenBuffer_20__setstate_cython__(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__setstate_cython__", 0);

  /* "(tree fragment)":15
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, state)
 * def __setstate_cython__(self, __pyx_state):
 *     __pyx_unpickle_TokenBuffer__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
 */
  if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "tuple", Py_TYPE(__pyx_v___pyx_state)->tp_name), 0))) __PYX_ERR(2, 15, __pyx_L1_error)
  __pyx_t_1 = __pyx_f_6typped_5lexer___pyx_unpickle_TokenBuffer__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_TokenBuffer__set_state(self, __pyx_state)
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.TokenBuffer.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = ()
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_13GenTokenState_1__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_13GenTokenState_1__reduce_cython__ = {"__reduce_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_13GenTokenState_1__reduce_cython__, METH_NOARGS, 0};
static PyObject *__pyx_pw_6typped_5lexer_13GenTokenState_1__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__reduce_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_13GenTokenState___reduce_cython__(((struct __pyx_obj_6typped_5lexer_GenTokenState *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_13GenTokenState___reduce_cython__(struct __pyx_obj_6typped_5lexer_GenTokenState *__pyx_v_self) {
  int __pyx_v_use_setstate;
  PyObject *__pyx_v_state = NULL;
  PyObject *__pyx_v__dict = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("__reduce_cython__", 0);

  /* "(tree fragment)":3
 * def __reduce_cython__(self):
 *     cdef bint use_setstate
 *     state = ()             # <<<<<<<<<<<<<<
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:
 */
  __Pyx_INCREF(__pyx_empty_tuple);
  __pyx_v_state = __pyx_empty_tuple;

  /* "(tree fragment)":4
 *     cdef bint use_setstate
 *     state = ()
 *     _dict = getattr(self, '__dict__', None)             # <<<<<<<<<<<<<<
 *     if _dict is not None:
 *         state += _dict,
 */
  __pyx_t_1 = __Pyx_GetAttr3(((PyObject *)__pyx_v_self), __pyx_n_s_dict, Py_None); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 4, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v__dict = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "(tree fragment)":5
 *     state = ()
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:             # <<<<<<<<<<<<<<
 *         state += _dict,
 *         use_setstate = True
 */
  __pyx_t_2 = (__pyx_v__dict != Py_None);
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "(tree fragment)":6
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:
 *         state += _dict,             # <<<<<<<<<<<<<<
 *         use_setstate = True
 *     else:
 */
    __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 6, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_v__dict);
    __Pyx_GIVEREF(__pyx_v__dict);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v__dict);
    __pyx_t_4 = PyNumber_InPlaceAdd(__pyx_v_state, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 6, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF_SET(__pyx_v_state, ((PyObject*)__pyx_t_4));
    __pyx_t_4 = 0;

    /* "(tree fragment)":7
 *     if _dict is not None:
 *         state += _dict,
 *         use_setstate = True             # <<<<<<<<<<<<<<
 *     else:
 *         use_setstate = False
 */
    __pyx_v_use_setstate = 1;

    /* "(tree fragment)":5
 *     state = ()
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:             # <<<<<<<<<<<<<<
 *         state += _dict,
 *         use_setstate = True
 */
    goto __pyx_L3;
  }

  /* "(tree fragment)":9
 *         use_setstate = True
 *     else:
 *         use_setstate = False             # <<<<<<<<<<<<<<
 *     if use_setstate:
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, None), state
 */
  /*else*/ {
    __pyx_v_use_setstate = 0;
  }
  __pyx_L3:;

  /* "(tree fragment)":10
 *     else:
 *         use_setstate = False
 *     if use_setstate:             # <<<<<<<<<<<<<<
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, None), state
 *     else:
 */
  __pyx_t_3 = (__pyx_v_use_setstate != 0);
  if (__pyx_t_3) {

    /* "(tree fragment)":11
 *         use_setstate = False
 *     if use_setstate:
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, None), state             # <<<<<<<<<<<<<<
 *     else:
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, state)
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_4 = __Pyx_GetModuleGlobalName(__pyx_n_s_pyx_unpickle_GenTokenState); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_INCREF(__pyx_int_222419149);
    __Pyx_GIVEREF(__pyx_int_222419149);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_222419149);
    __Pyx_INCREF(Py_None);
    __Pyx_GIVEREF(Py_None);
    PyTuple_SET_ITEM(__pyx_t_1, 2, Py_None);
    __pyx_t_5 = PyTuple_New(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_1);
    __Pyx_INCREF(__pyx_v_state);
    __Pyx_GIVEREF(__pyx_v_state);
    PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_v_state);
    __pyx_t_4 = 0;
    __pyx_t_1 = 0;
    __pyx_r = __pyx_t_5;
    __pyx_t_5 = 0;
    goto __pyx_L0;

    /* "(tree fragment)":10
 *     else:
 *         use_setstate = False
 *     if use_setstate:             # <<<<<<<<<<<<<<
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, None), state
 *     else:
 */
  }

  /* "(tree fragment)":13
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, None), state
 *     else:
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, state)             # <<<<<<<<<<<<<<
 * def __setstate_cython__(self, __pyx_state):
 *     __pyx_unpickle_GenTokenState__set_state(self, __pyx_state)
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_5 = __Pyx_GetModuleGlobalName(__pyx_n_s_pyx_unpickle_GenTokenState); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_1 = PyTuple_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_INCREF(__pyx_int_222419149);
    __Pyx_GIVEREF(__pyx_int_222419149);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_int_222419149);
    __Pyx_INCREF(__pyx_v_state);
    __Pyx_GIVEREF(__pyx_v_state);
    PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_v_state);
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_1);
    __pyx_t_5 = 0;
    __pyx_t_1 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;
  }

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = ()
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("typped.lexer.GenTokenState.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_state);
  __Pyx_XDECREF(__pyx_v__dict);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_GenTokenState__set_state(self, __pyx_state)
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_13GenTokenState_3__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_13GenTokenState_3__setstate_cython__ = {"__setstate_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_13GenTokenState_3__setstate_cython__, METH_O, 0};
static PyObject *__pyx_pw_6typped_5lexer_13GenTokenState_3__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__setstate_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_13GenTokenState_2__setstate_cython__(((struct __pyx_obj_6typped_5lexer_GenTokenState *)__pyx_v_self), ((PyObject *)__pyx_v___pyx_state));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_13GenTokenState_2__setstate_cython__(struct __pyx_obj_6typped_5lexer_GenTokenState *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__setstate_cython__", 0);

  /* "(tree fragment)":15
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, state)
 * def __setstate_cython__(self, __pyx_state):
 *     __pyx_unpickle_GenTokenState__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
 */
  if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "tuple", Py_TYPE(__pyx_v___pyx_state)->tp_name), 0))) __PYX_ERR(2, 15, __pyx_L1_error)
  __pyx_t_1 = __pyx_f_6typped_5lexer___pyx_unpickle_GenTokenState__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_GenTokenState__set_state(self, __pyx_state)
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.GenTokenState.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":788
 *     #
 * 
 *     def __init__(self, token_table=None, max_peek_tokens=None,             # <<<<<<<<<<<<<<
 *                  max_deque_size=None, default_begin_end_tokens=False,
 *                  final_mod_function=None):
 */

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer___init__[] = "Initialize the Lexer.  Optional arguments set the `TokenTable` to be\n        used (default creates a new one), the maximum number of lookahead\n        tokens (default is no fixed maximum), and the maximum deque size, which\n        determines how far `go_back` operations will work (the default is\n        unlimited).\n\n        If `default_begin_end_tokens` is true then begin- and end-tokens will\n        be defined using the default token labels.  By default, though, the user\n        must call the `def_begin_end_tokens` method to define the begin and\n        end tokens (using whatever labels are desired).\n\n        If `final_mod_function` is passed a function taking a two arguments\n        then any time a token instance is created by the lexer that function\n        will be called with the parser and the token itself as the two\n        arguments.  It should return the modified token.";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_6typped_5lexer_5Lexer___init__;
#endif
static int __pyx_pw_6typped_5lexer_5Lexer_1__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_token_table = 0;
  PyObject *__pyx_v_max_peek_tokens = 0;
  PyObject *__pyx_v_max_deque_size = 0;
  PyObject *__pyx_v_default_begin_end_tokens = 0;
  PyObject *__pyx_v_final_mod_function = 0;
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_token_table,&__pyx_n_s_max_peek_tokens,&__pyx_n_s_max_deque_size,&__pyx_n_s_default_begin_end_tokens,&__pyx_n_s_final_mod_function,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[0] = ((PyObject *)Py_None);
    values[1] = ((PyObject *)Py_None);

    /* "typped/lexer.py":789
 * 
 *     def __init__(self, token_table=None, max_peek_tokens=None,
 *                  max_deque_size=None, default_begin_end_tokens=False,             # <<<<<<<<<<<<<<
 *                  final_mod_function=None):
 * 
 */
    values[2] = ((PyObject *)Py_None);
    values[3] = ((PyObject *)Py_False);

    /* "typped/lexer.py":790
 *     def __init__(self, token_table=None, max_peek_tokens=None,
 *                  max_deque_size=None, default_begin_end_tokens=False,
 *                  final_mod_function=None):             # <<<<<<<<<<<<<<
 * 
 *         """Initialize the Lexer.  Optional arguments set the `TokenTable` to be
 */
    values[4] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_token_table);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_max_peek_tokens);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_max_deque_size);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_default_begin_end_tokens);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_final_mod_function);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__init__") < 0)) __PYX_ERR(0, 788, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_token_table = values[0];
    __pyx_v_max_peek_tokens = values[1];
    __pyx_v_max_deque_size = values[2];
    __pyx_v_default_begin_end_tokens = values[3];
    __pyx_v_final_mod_function = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__init__", 0, 0, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 788, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer___init__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_token_table, __pyx_v_max_peek_tokens, __pyx_v_max_deque_size, __pyx_v_default_begin_end_tokens, __pyx_v_final_mod_function);

  /* "typped/lexer.py":788
 *     #
 * 
 *     def __init__(self, token_table=None, max_peek_tokens=None,             # <<<<<<<<<<<<<<
 *                  max_deque_size=None, default_begin_end_tokens=False,
 *                  final_mod_function=None):
 */

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer___init__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_table, PyObject *__pyx_v_max_peek_tokens, PyObject *__pyx_v_max_deque_size, PyObject *__pyx_v_default_begin_end_tokens, PyObject *__pyx_v_final_mod_function) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_reset __pyx_t_2;
  __Pyx_RefNannySetupContext("__init__", 0);

  /* "typped/lexer.py":807
 *         will be called with the parser and the token itself as the two
 *         arguments.  It should return the modified token."""
 *         self.reset(token_table=token_table, max_peek_tokens=max_peek_tokens,             # <<<<<<<<<<<<<<
 *                    max_deque_size=max_deque_size,
 *                    default_begin_end_tokens=default_begin_end_tokens,
 */
  __pyx_t_2.__pyx_n = 5;
  __pyx_t_2.token_table = __pyx_v_token_table;
  __pyx_t_2.max_peek_tokens = __pyx_v_max_peek_tokens;
  __pyx_t_2.max_deque_size = __pyx_v_max_deque_size;
  __pyx_t_2.default_begin_end_tokens = __pyx_v_default_begin_end_tokens;
  __pyx_t_2.final_mod_function = __pyx_v_final_mod_function;
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->reset(__pyx_v_self, 0, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 807, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":788
 *     #
 * 
 *     def __init__(self, token_table=None, max_peek_tokens=None,             # <<<<<<<<<<<<<<
 *                  max_deque_size=None, default_begin_end_tokens=False,
 *                  final_mod_function=None):
 */

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":812
 *                    final_mod_function=final_mod_function)
 * 
 *     def reset(self, token_table=None, max_peek_tokens=None,             # <<<<<<<<<<<<<<
 *                     max_deque_size=None, default_begin_end_tokens=False,
 *                     final_mod_function=None):
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_3reset(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_reset(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_reset *__pyx_optional_args) {
  PyObject *__pyx_v_token_table = ((PyObject *)Py_None);
  PyObject *__pyx_v_max_peek_tokens = ((PyObject *)Py_None);

  /* "typped/lexer.py":813
 * 
 *     def reset(self, token_table=None, max_peek_tokens=None,
 *                     max_deque_size=None, default_begin_end_tokens=False,             # <<<<<<<<<<<<<<
 *                     final_mod_function=None):
 *         """Return the lexer to the initial state.  Takes the same arguments as
 */
  PyObject *__pyx_v_max_deque_size = ((PyObject *)Py_None);
  PyObject *__pyx_v_default_begin_end_tokens = ((PyObject *)Py_False);

  /* "typped/lexer.py":814
 *     def reset(self, token_table=None, max_peek_tokens=None,
 *                     max_deque_size=None, default_begin_end_tokens=False,
 *                     final_mod_function=None):             # <<<<<<<<<<<<<<
 *         """Return the lexer to the initial state.  Takes the same arguments as
 *         the initializer."""
 */
  PyObject *__pyx_v_final_mod_function = ((PyObject *)Py_None);
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  int __pyx_t_8;
  long __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  __Pyx_RefNannySetupContext("reset", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_token_table = __pyx_optional_args->token_table;
      if (__pyx_optional_args->__pyx_n > 1) {
        __pyx_v_max_peek_tokens = __pyx_optional_args->max_peek_tokens;
        if (__pyx_optional_args->__pyx_n > 2) {
          __pyx_v_max_deque_size = __pyx_optional_args->max_deque_size;
          if (__pyx_optional_args->__pyx_n > 3) {
            __pyx_v_default_begin_end_tokens = __pyx_optional_args->default_begin_end_tokens;
            if (__pyx_optional_args->__pyx_n > 4) {
              __pyx_v_final_mod_function = __pyx_optional_args->final_mod_function;
            }
          }
        }
      }
    }
  }
  __Pyx_INCREF(__pyx_v_token_table);
  __Pyx_INCREF(__pyx_v_max_peek_tokens);
  __Pyx_INCREF(__pyx_v_max_deque_size);

  /* "typped/lexer.py":812
 *                    final_mod_function=final_mod_function)
 * 
 *     def reset(self, token_table=None, max_peek_tokens=None,             # <<<<<<<<<<<<<<
 *                     max_deque_size=None, default_begin_end_tokens=False,
 *                     final_mod_function=None):
 */
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_reset); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 812, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_3reset)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      __pyx_t_5 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
          __pyx_t_5 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[6] = {__pyx_t_4, __pyx_v_token_table, __pyx_v_max_peek_tokens, __pyx_v_max_deque_size, __pyx_v_default_begin_end_tokens, __pyx_v_final_mod_function};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 5+__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 812, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_2);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[6] = {__pyx_t_4, __pyx_v_token_table, __pyx_v_max_peek_tokens, __pyx_v_max_deque_size, __pyx_v_default_begin_end_tokens, __pyx_v_final_mod_function};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 5+__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 812, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_2);
      } else
      #endif
      {
        __pyx_t_6 = PyTuple_New(5+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 812, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        if (__pyx_t_4) {
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
        }
        __Pyx_INCREF(__pyx_v_token_table);
        __Pyx_GIVEREF(__pyx_v_token_table);
        PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, __pyx_v_token_table);
        __Pyx_INCREF(__pyx_v_max_peek_tokens);
        __Pyx_GIVEREF(__pyx_v_max_peek_tokens);
        PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_v_max_peek_tokens);
        __Pyx_INCREF(__pyx_v_max_deque_size);
        __Pyx_GIVEREF(__pyx_v_max_deque_size);
        PyTuple_SET_ITEM(__pyx_t_6, 2+__pyx_t_5, __pyx_v_max_deque_size);
        __Pyx_INCREF(__pyx_v_default_begin_end_tokens);
        __Pyx_GIVEREF(__pyx_v_default_begin_end_tokens);
        PyTuple_SET_ITEM(__pyx_t_6, 3+__pyx_t_5, __pyx_v_default_begin_end_tokens);
        __Pyx_INCREF(__pyx_v_final_mod_function);
        __Pyx_GIVEREF(__pyx_v_final_mod_function);
        PyTuple_SET_ITEM(__pyx_t_6, 4+__pyx_t_5, __pyx_v_final_mod_function);
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 812, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":817
 *         """Return the lexer to the initial state.  Takes the same arguments as
 *         the initializer."""
 *         self.text_is_set = False             # <<<<<<<<<<<<<<
 *         self.token = None
 *         #self.all_token_count = None
 */
  __pyx_v_self->text_is_set = 0;

  /* "typped/lexer.py":818
 *         the initializer."""
 *         self.text_is_set = False
 *         self.token = None             # <<<<<<<<<<<<<<
 *         #self.all_token_count = None
 * 
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->token);
  __Pyx_DECREF(__pyx_v_self->token);
  __pyx_v_self->token = Py_None;

  /* "typped/lexer.py":821
 *         #self.all_token_count = None
 * 
 *         if token_table is None:             # <<<<<<<<<<<<<<
 *             token_table = TokenTable()
 *         self.set_token_table(token_table)
 */
  __pyx_t_7 = (__pyx_v_token_table == Py_None);
  __pyx_t_8 = (__pyx_t_7 != 0);
  if (__pyx_t_8) {

    /* "typped/lexer.py":822
 * 
 *         if token_table is None:
 *             token_table = TokenTable()             # <<<<<<<<<<<<<<
 *         self.set_token_table(token_table)
 * 
 */
    __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_6typped_5lexer_TokenTable), __pyx_empty_tuple, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 822, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF_SET(__pyx_v_token_table, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "typped/lexer.py":821
 *         #self.all_token_count = None
 * 
 *         if token_table is None:             # <<<<<<<<<<<<<<
 *             token_table = TokenTable()
 *         self.set_token_table(token_table)
 */
  }

  /* "typped/lexer.py":823
 *         if token_table is None:
 *             token_table = TokenTable()
 *         self.set_token_table(token_table)             # <<<<<<<<<<<<<<
 * 
 *         if max_deque_size is None:
 */
  if (!(likely(((__pyx_v_token_table) == Py_None) || likely(__Pyx_TypeTest(__pyx_v_token_table, __pyx_ptype_6typped_5lexer_TokenTable))))) __PYX_ERR(0, 823, __pyx_L1_error)
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->set_token_table(__pyx_v_self, ((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_token_table), 0, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 823, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":825
 *         self.set_token_table(token_table)
 * 
 *         if max_deque_size is None:             # <<<<<<<<<<<<<<
 *             max_deque_size = -1
 *         if max_peek_tokens is None:
 */
  __pyx_t_8 = (__pyx_v_max_deque_size == Py_None);
  __pyx_t_7 = (__pyx_t_8 != 0);
  if (__pyx_t_7) {

    /* "typped/lexer.py":826
 * 
 *         if max_deque_size is None:
 *             max_deque_size = -1             # <<<<<<<<<<<<<<
 *         if max_peek_tokens is None:
 *             max_peek_tokens = -1
 */
    __Pyx_INCREF(__pyx_int_neg_1);
    __Pyx_DECREF_SET(__pyx_v_max_deque_size, __pyx_int_neg_1);

    /* "typped/lexer.py":825
 *         self.set_token_table(token_table)
 * 
 *         if max_deque_size is None:             # <<<<<<<<<<<<<<
 *             max_deque_size = -1
 *         if max_peek_tokens is None:
 */
  }

  /* "typped/lexer.py":827
 *         if max_deque_size is None:
 *             max_deque_size = -1
 *         if max_peek_tokens is None:             # <<<<<<<<<<<<<<
 *             max_peek_tokens = -1
 *         self.token_buffer = TokenBuffer(self._unbuffered_token_getter,
 */
  __pyx_t_7 = (__pyx_v_max_peek_tokens == Py_None);
  __pyx_t_8 = (__pyx_t_7 != 0);
  if (__pyx_t_8) {

    /* "typped/lexer.py":828
 *             max_deque_size = -1
 *         if max_peek_tokens is None:
 *             max_peek_tokens = -1             # <<<<<<<<<<<<<<
 *         self.token_buffer = TokenBuffer(self._unbuffered_token_getter,
 *                                               max_peek=max_peek_tokens,
 */
    __Pyx_INCREF(__pyx_int_neg_1);
    __Pyx_DECREF_SET(__pyx_v_max_peek_tokens, __pyx_int_neg_1);

    /* "typped/lexer.py":827
 *         if max_deque_size is None:
 *             max_deque_size = -1
 *         if max_peek_tokens is None:             # <<<<<<<<<<<<<<
 *             max_peek_tokens = -1
 *         self.token_buffer = TokenBuffer(self._unbuffered_token_getter,
 */
  }

  /* "typped/lexer.py":829
 *         if max_peek_tokens is None:
 *             max_peek_tokens = -1
 *         self.token_buffer = TokenBuffer(self._unbuffered_token_getter,             # <<<<<<<<<<<<<<
 *                                               max_peek=max_peek_tokens,
 *                                               max_deque_size=max_deque_size)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_unbuffered_token_getter); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 829, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 829, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "typped/lexer.py":830
 *             max_peek_tokens = -1
 *         self.token_buffer = TokenBuffer(self._unbuffered_token_getter,
 *                                               max_peek=max_peek_tokens,             # <<<<<<<<<<<<<<
 *                                               max_deque_size=max_deque_size)
 * 
 */
  __pyx_t_1 = PyDict_New(); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 830, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_t_1, __pyx_n_s_max_peek, __pyx_v_max_peek_tokens) < 0) __PYX_ERR(0, 830, __pyx_L1_error)

  /* "typped/lexer.py":831
 *         self.token_buffer = TokenBuffer(self._unbuffered_token_getter,
 *                                               max_peek=max_peek_tokens,
 *                                               max_deque_size=max_deque_size)             # <<<<<<<<<<<<<<
 * 
 *         # These line and char numbers are for raw, unprocessed tokens, not the
 */
  if (PyDict_SetItem(__pyx_t_1, __pyx_n_s_max_deque_size, __pyx_v_max_deque_size) < 0) __PYX_ERR(0, 830, __pyx_L1_error)

  /* "typped/lexer.py":829
 *         if max_peek_tokens is None:
 *             max_peek_tokens = -1
 *         self.token_buffer = TokenBuffer(self._unbuffered_token_getter,             # <<<<<<<<<<<<<<
 *                                               max_peek=max_peek_tokens,
 *                                               max_deque_size=max_deque_size)
 */
  __pyx_t_3 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_6typped_5lexer_TokenBuffer), __pyx_t_2, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 829, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_GIVEREF(__pyx_t_3);
  __Pyx_GOTREF(__pyx_v_self->token_buffer);
  __Pyx_DECREF(((PyObject *)__pyx_v_self->token_buffer));
  __pyx_v_self->token_buffer = ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "typped/lexer.py":836
 *         # buffered ones.  Use the values set with tokens as the token attribute
 *         # line_and_char (such as for the current token) for that info.
 *         self.raw_linenumber = 1 # The line number currently being read.             # <<<<<<<<<<<<<<
 *         self.upcoming_raw_charnumber = 1 # Char number of first char of upcoming token.
 *         self.upcoming_raw_total_chars = 1 # Like above, but total num., not on line.
 */
  __pyx_v_self->raw_linenumber = 1;

  /* "typped/lexer.py":837
 *         # line_and_char (such as for the current token) for that info.
 *         self.raw_linenumber = 1 # The line number currently being read.
 *         self.upcoming_raw_charnumber = 1 # Char number of first char of upcoming token.             # <<<<<<<<<<<<<<
 *         self.upcoming_raw_total_chars = 1 # Like above, but total num., not on line.
 * 
 */
  __pyx_v_self->upcoming_raw_charnumber = 1;

  /* "typped/lexer.py":838
 *         self.raw_linenumber = 1 # The line number currently being read.
 *         self.upcoming_raw_charnumber = 1 # Char number of first char of upcoming token.
 *         self.upcoming_raw_total_chars = 1 # Like above, but total num., not on line.             # <<<<<<<<<<<<<<
 * 
 *         self.all_token_count = 0
 */
  __pyx_v_self->upcoming_raw_total_chars = 1;

  /* "typped/lexer.py":840
 *         self.upcoming_raw_total_chars = 1 # Like above, but total num., not on line.
 * 
 *         self.all_token_count = 0             # <<<<<<<<<<<<<<
 * 
 *         self.token_generator_state = GenTokenState.uninitialized
 */
  __pyx_v_self->all_token_count = 0;

  /* "typped/lexer.py":842
 *         self.all_token_count = 0
 * 
 *         self.token_generator_state = GenTokenState.uninitialized             # <<<<<<<<<<<<<<
 * 
 *         if default_begin_end_tokens:
 */
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState), __pyx_n_s_uninitialized); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 842, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_9 = __Pyx_PyInt_As_long(__pyx_t_3); if (unlikely((__pyx_t_9 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 842, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_self->token_generator_state = __pyx_t_9;

  /* "typped/lexer.py":844
 *         self.token_generator_state = GenTokenState.uninitialized
 * 
 *         if default_begin_end_tokens:             # <<<<<<<<<<<<<<
 *             self.def_begin_end_tokens(self.DEFAULT_BEGIN, self.DEFAULT_END)
 * 
 */
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_v_default_begin_end_tokens); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 844, __pyx_L1_error)
  if (__pyx_t_8) {

    /* "typped/lexer.py":845
 * 
 *         if default_begin_end_tokens:
 *             self.def_begin_end_tokens(self.DEFAULT_BEGIN, self.DEFAULT_END)             # <<<<<<<<<<<<<<
 * 
 *         self.final_mod_function = final_mod_function
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_def_begin_end_tokens); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 845, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_DEFAULT_BEGIN); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 845, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_DEFAULT_END); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 845, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_4 = NULL;
    __pyx_t_5 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_1);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_1, function);
        __pyx_t_5 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_1)) {
      PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_2, __pyx_t_6};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 845, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_1)) {
      PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_2, __pyx_t_6};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 845, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    } else
    #endif
    {
      __pyx_t_10 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 845, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      if (__pyx_t_4) {
        __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_10, 0+__pyx_t_5, __pyx_t_2);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_10, 1+__pyx_t_5, __pyx_t_6);
      __pyx_t_2 = 0;
      __pyx_t_6 = 0;
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_10, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 845, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "typped/lexer.py":844
 *         self.token_generator_state = GenTokenState.uninitialized
 * 
 *         if default_begin_end_tokens:             # <<<<<<<<<<<<<<
 *             self.def_begin_end_tokens(self.DEFAULT_BEGIN, self.DEFAULT_END)
 * 
 */
  }

  /* "typped/lexer.py":847
 *             self.def_begin_end_tokens(self.DEFAULT_BEGIN, self.DEFAULT_END)
 * 
 *         self.final_mod_function = final_mod_function             # <<<<<<<<<<<<<<
 * 
 *         # The default exception raised by methods like `match_next`.
 */
  __Pyx_INCREF(__pyx_v_final_mod_function);
  __Pyx_GIVEREF(__pyx_v_final_mod_function);
  __Pyx_GOTREF(__pyx_v_self->final_mod_function);
  __Pyx_DECREF(__pyx_v_self->final_mod_function);
  __pyx_v_self->final_mod_function = __pyx_v_final_mod_function;

  /* "typped/lexer.py":850
 * 
 *         # The default exception raised by methods like `match_next`.
 *         self.default_helper_exception = LexerException             # <<<<<<<<<<<<<<
 * 
 *     def set_token_table(self, token_table, go_back=0):
 */
  __pyx_t_3 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 850, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_3);
  __Pyx_GOTREF(__pyx_v_self->default_helper_exception);
  __Pyx_DECREF(__pyx_v_self->default_helper_exception);
  __pyx_v_self->default_helper_exception = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "typped/lexer.py":812
 *                    final_mod_function=final_mod_function)
 * 
 *     def reset(self, token_table=None, max_peek_tokens=None,             # <<<<<<<<<<<<<<
 *                     max_deque_size=None, default_begin_end_tokens=False,
 *                     final_mod_function=None):
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("typped.lexer.Lexer.reset", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_token_table);
  __Pyx_XDECREF(__pyx_v_max_peek_tokens);
  __Pyx_XDECREF(__pyx_v_max_deque_size);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_3reset(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_2reset[] = "Return the lexer to the initial state.  Takes the same arguments as\n        the initializer.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_3reset = {"reset", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_3reset, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_2reset};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_3reset(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_token_table = 0;
  PyObject *__pyx_v_max_peek_tokens = 0;
  PyObject *__pyx_v_max_deque_size = 0;
  PyObject *__pyx_v_default_begin_end_tokens = 0;
  PyObject *__pyx_v_final_mod_function = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("reset (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_token_table,&__pyx_n_s_max_peek_tokens,&__pyx_n_s_max_deque_size,&__pyx_n_s_default_begin_end_tokens,&__pyx_n_s_final_mod_function,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[0] = ((PyObject *)Py_None);
    values[1] = ((PyObject *)Py_None);

    /* "typped/lexer.py":813
 * 
 *     def reset(self, token_table=None, max_peek_tokens=None,
 *                     max_deque_size=None, default_begin_end_tokens=False,             # <<<<<<<<<<<<<<
 *                     final_mod_function=None):
 *         """Return the lexer to the initial state.  Takes the same arguments as
 */
    values[2] = ((PyObject *)Py_None);
    values[3] = ((PyObject *)Py_False);

    /* "typped/lexer.py":814
 *     def reset(self, token_table=None, max_peek_tokens=None,
 *                     max_deque_size=None, default_begin_end_tokens=False,
 *                     final_mod_function=None):             # <<<<<<<<<<<<<<
 *         """Return the lexer to the initial state.  Takes the same arguments as
 *         the initializer."""
 */
    values[4] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_token_table);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_max_peek_tokens);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_max_deque_size);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_default_begin_end_tokens);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_final_mod_function);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "reset") < 0)) __PYX_ERR(0, 812, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_token_table = values[0];
    __pyx_v_max_peek_tokens = values[1];
    __pyx_v_max_deque_size = values[2];
    __pyx_v_default_begin_end_tokens = values[3];
    __pyx_v_final_mod_function = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("reset", 0, 0, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 812, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.reset", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_2reset(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_token_table, __pyx_v_max_peek_tokens, __pyx_v_max_deque_size, __pyx_v_default_begin_end_tokens, __pyx_v_final_mod_function);

  /* "typped/lexer.py":812
 *                    final_mod_function=final_mod_function)
 * 
 *     def reset(self, token_table=None, max_peek_tokens=None,             # <<<<<<<<<<<<<<
 *                     max_deque_size=None, default_begin_end_tokens=False,
 *                     final_mod_function=None):
 */

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_2reset(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_table, PyObject *__pyx_v_max_peek_tokens, PyObject *__pyx_v_max_deque_size, PyObject *__pyx_v_default_begin_end_tokens, PyObject *__pyx_v_final_mod_function) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_reset __pyx_t_2;
  __Pyx_RefNannySetupContext("reset", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 5;
  __pyx_t_2.token_table = __pyx_v_token_table;
  __pyx_t_2.max_peek_tokens = __pyx_v_max_peek_tokens;
  __pyx_t_2.max_deque_size = __pyx_v_max_deque_size;
  __pyx_t_2.default_begin_end_tokens = __pyx_v_default_begin_end_tokens;
  __pyx_t_2.final_mod_function = __pyx_v_final_mod_function;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_Lexer->reset(__pyx_v_self, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 812, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.reset", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":852
 *         self.default_helper_exception = LexerException
 * 
 *     def set_token_table(self, token_table, go_back=0):             # <<<<<<<<<<<<<<
 *         """Sets the current `TokenTable` instance for the lexer to
 *         `token_table`.  This is called on initialization, but can also be
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_5set_token_table(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_set_token_table(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_token_table, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_set_token_table *__pyx_optional_args) {
  PyObject *__pyx_v_go_back = ((PyObject *)__pyx_int_0);
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_go_back __pyx_t_8;
  __Pyx_RefNannySetupContext("set_token_table", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_go_back = __pyx_optional_args->go_back;
    }
  }
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_set_token_table); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 852, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_5set_token_table)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      __pyx_t_5 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
          __pyx_t_5 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[3] = {__pyx_t_4, ((PyObject *)__pyx_v_token_table), __pyx_v_go_back};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 852, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_2);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[3] = {__pyx_t_4, ((PyObject *)__pyx_v_token_table), __pyx_v_go_back};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 852, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_2);
      } else
      #endif
      {
        __pyx_t_6 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 852, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        if (__pyx_t_4) {
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
        }
        __Pyx_INCREF(((PyObject *)__pyx_v_token_table));
        __Pyx_GIVEREF(((PyObject *)__pyx_v_token_table));
        PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, ((PyObject *)__pyx_v_token_table));
        __Pyx_INCREF(__pyx_v_go_back);
        __Pyx_GIVEREF(__pyx_v_go_back);
        PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_v_go_back);
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 852, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":863
 *         This attribute is used by tokens (which know their fixed symbol table)
 *         so they can find the current lexer (to call `next`, etc.)"""
 *         self.token_table = token_table             # <<<<<<<<<<<<<<
 *         token_table.lex = self
 *         if self.text_is_set:
 */
  __Pyx_INCREF(((PyObject *)__pyx_v_token_table));
  __Pyx_GIVEREF(((PyObject *)__pyx_v_token_table));
  __Pyx_GOTREF(__pyx_v_self->token_table);
  __Pyx_DECREF(((PyObject *)__pyx_v_self->token_table));
  __pyx_v_self->token_table = __pyx_v_token_table;

  /* "typped/lexer.py":864
 *         so they can find the current lexer (to call `next`, etc.)"""
 *         self.token_table = token_table
 *         token_table.lex = self             # <<<<<<<<<<<<<<
 *         if self.text_is_set:
 *             self.go_back(0) # Re-scan the current token.
 */
  __Pyx_INCREF(((PyObject *)__pyx_v_self));
  __Pyx_GIVEREF(((PyObject *)__pyx_v_self));
  __Pyx_GOTREF(__pyx_v_token_table->lex);
  __Pyx_DECREF(((PyObject *)__pyx_v_token_table->lex));
  __pyx_v_token_table->lex = __pyx_v_self;

  /* "typped/lexer.py":865
 *         self.token_table = token_table
 *         token_table.lex = self
 *         if self.text_is_set:             # <<<<<<<<<<<<<<
 *             self.go_back(0) # Re-scan the current token.
 * 
 */
  __pyx_t_7 = (__pyx_v_self->text_is_set != 0);
  if (__pyx_t_7) {

    /* "typped/lexer.py":866
 *         token_table.lex = self
 *         if self.text_is_set:
 *             self.go_back(0) # Re-scan the current token.             # <<<<<<<<<<<<<<
 * 
 *     def set_text(self, program,
 */
    __pyx_t_8.__pyx_n = 1;
    __pyx_t_8.num_toks = 0;
    __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->go_back(__pyx_v_self, 0, &__pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 866, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":865
 *         self.token_table = token_table
 *         token_table.lex = self
 *         if self.text_is_set:             # <<<<<<<<<<<<<<
 *             self.go_back(0) # Re-scan the current token.
 * 
 */
  }

  /* "typped/lexer.py":852
 *         self.default_helper_exception = LexerException
 * 
 *     def set_token_table(self, token_table, go_back=0):             # <<<<<<<<<<<<<<
 *         """Sets the current `TokenTable` instance for the lexer to
 *         `token_table`.  This is called on initialization, but can also be
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.Lexer.set_token_table", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_5set_token_table(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_4set_token_table[] = "Sets the current `TokenTable` instance for the lexer to\n        `token_table`.  This is called on initialization, but can also be\n        called at any time.  If text is being scanned at the time then it\n        flushes the current and lookahead tokens and re-scans the current\n        token.\n\n        When set with this method the token table is always given the attribute\n        `lex`, which points to the lexer instance that this method was called from.\n        This attribute is used by tokens (which know their fixed symbol table)\n        so they can find the current lexer (to call `next`, etc.)";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_5set_token_table = {"set_token_table", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_5set_token_table, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_4set_token_table};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_5set_token_table(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_token_table = 0;
  PyObject *__pyx_v_go_back = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("set_token_table (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_token_table,&__pyx_n_s_go_back,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)__pyx_int_0);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_token_table)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_go_back);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "set_token_table") < 0)) __PYX_ERR(0, 852, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_token_table = ((struct __pyx_obj_6typped_5lexer_TokenTable *)values[0]);
    __pyx_v_go_back = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("set_token_table", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 852, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.set_token_table", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_token_table), __pyx_ptype_6typped_5lexer_TokenTable, 1, "token_table", 0))) __PYX_ERR(0, 852, __pyx_L1_error)
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_4set_token_table(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_token_table, __pyx_v_go_back);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_4set_token_table(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_token_table, PyObject *__pyx_v_go_back) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_set_token_table __pyx_t_2;
  __Pyx_RefNannySetupContext("set_token_table", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 1;
  __pyx_t_2.go_back = __pyx_v_go_back;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_Lexer->set_token_table(__pyx_v_self, __pyx_v_token_table, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 852, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.set_token_table", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":868
 *             self.go_back(0) # Re-scan the current token.
 * 
 *     def set_text(self, program,             # <<<<<<<<<<<<<<
 *                  reset_linenumber=True, reset_charnumber=True):
 *         # TODO: redefine to take a TextStream.  Be sure to also pass back position
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_7set_text(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_6set_text[] = "Users should call this method to pass in the program text (or other\n        text) which is to be lexically scanned.  The parameter `program` should\n        be a string.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_7set_text = {"set_text", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_7set_text, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_6set_text};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_7set_text(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_program = 0;
  PyObject *__pyx_v_reset_linenumber = 0;
  PyObject *__pyx_v_reset_charnumber = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("set_text (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_program,&__pyx_n_s_reset_linenumber,&__pyx_n_s_reset_charnumber,0};
    PyObject* values[3] = {0,0,0};

    /* "typped/lexer.py":869
 * 
 *     def set_text(self, program,
 *                  reset_linenumber=True, reset_charnumber=True):             # <<<<<<<<<<<<<<
 *         # TODO: redefine to take a TextStream.  Be sure to also pass back position
 *         # info with the returned text so that tokens have have their line/position
 */
    values[1] = ((PyObject *)Py_True);
    values[2] = ((PyObject *)Py_True);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_program)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_reset_linenumber);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_reset_charnumber);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "set_text") < 0)) __PYX_ERR(0, 868, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_program = values[0];
    __pyx_v_reset_linenumber = values[1];
    __pyx_v_reset_charnumber = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("set_text", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 868, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.set_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_6set_text(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_program, __pyx_v_reset_linenumber, __pyx_v_reset_charnumber);

  /* "typped/lexer.py":868
 *             self.go_back(0) # Re-scan the current token.
 * 
 *     def set_text(self, program,             # <<<<<<<<<<<<<<
 *                  reset_linenumber=True, reset_charnumber=True):
 *         # TODO: redefine to take a TextStream.  Be sure to also pass back position
 */

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_6set_text(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_program, PyObject *__pyx_v_reset_linenumber, PyObject *__pyx_v_reset_charnumber) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  Py_ssize_t __pyx_t_5;
  long __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("set_text", 0);

  /* "typped/lexer.py":877
 *         text) which is to be lexically scanned.  The parameter `program` should
 *         be a string."""
 *         if not (self.token_table.begin_token_label             # <<<<<<<<<<<<<<
 *                 and self.token_table.end_token_label):
 *             raise LexerException("Begin and end tokens must be defined by calling"
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_self->token_table->begin_token_label); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 877, __pyx_L1_error)
  if (__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }

  /* "typped/lexer.py":878
 *         be a string."""
 *         if not (self.token_table.begin_token_label
 *                 and self.token_table.end_token_label):             # <<<<<<<<<<<<<<
 *             raise LexerException("Begin and end tokens must be defined by calling"
 *                     " `def_begin_end_tokens` before set_text can be called.")
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_self->token_table->end_token_label); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 878, __pyx_L1_error)
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;

  /* "typped/lexer.py":877
 *         text) which is to be lexically scanned.  The parameter `program` should
 *         be a string."""
 *         if not (self.token_table.begin_token_label             # <<<<<<<<<<<<<<
 *                 and self.token_table.end_token_label):
 *             raise LexerException("Begin and end tokens must be defined by calling"
 */
  __pyx_t_2 = ((!__pyx_t_1) != 0);
  if (__pyx_t_2) {

    /* "typped/lexer.py":879
 *         if not (self.token_table.begin_token_label
 *                 and self.token_table.end_token_label):
 *             raise LexerException("Begin and end tokens must be defined by calling"             # <<<<<<<<<<<<<<
 *                     " `def_begin_end_tokens` before set_text can be called.")
 * 
 */
    __pyx_t_3 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 879, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_tuple__15, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 879, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_Raise(__pyx_t_4, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __PYX_ERR(0, 879, __pyx_L1_error)

    /* "typped/lexer.py":877
 *         text) which is to be lexically scanned.  The parameter `program` should
 *         be a string."""
 *         if not (self.token_table.begin_token_label             # <<<<<<<<<<<<<<
 *                 and self.token_table.end_token_label):
 *             raise LexerException("Begin and end tokens must be defined by calling"
 */
  }

  /* "typped/lexer.py":882
 *                     " `def_begin_end_tokens` before set_text can be called.")
 * 
 *         self.already_returned_end_token = False             # <<<<<<<<<<<<<<
 *         self._curr_token_is_first = False # Is curr token first non-ignored in text?
 *         self._returned_first_token = False
 */
  __pyx_v_self->already_returned_end_token = 0;

  /* "typped/lexer.py":883
 * 
 *         self.already_returned_end_token = False
 *         self._curr_token_is_first = False # Is curr token first non-ignored in text?             # <<<<<<<<<<<<<<
 *         self._returned_first_token = False
 * 
 */
  __pyx_v_self->_curr_token_is_first = 0;

  /* "typped/lexer.py":884
 *         self.already_returned_end_token = False
 *         self._curr_token_is_first = False # Is curr token first non-ignored in text?
 *         self._returned_first_token = False             # <<<<<<<<<<<<<<
 * 
 *         # Reset line, character, and token counts.  All counts include the buffer.
 */
  __pyx_v_self->_returned_first_token = 0;

  /* "typped/lexer.py":887
 * 
 *         # Reset line, character, and token counts.  All counts include the buffer.
 *         if reset_linenumber:             # <<<<<<<<<<<<<<
 *             self.raw_linenumber = 1
 *         if reset_charnumber:
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_reset_linenumber); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 887, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "typped/lexer.py":888
 *         # Reset line, character, and token counts.  All counts include the buffer.
 *         if reset_linenumber:
 *             self.raw_linenumber = 1             # <<<<<<<<<<<<<<
 *         if reset_charnumber:
 *             self.upcoming_raw_charnumber = 1
 */
    __pyx_v_self->raw_linenumber = 1;

    /* "typped/lexer.py":887
 * 
 *         # Reset line, character, and token counts.  All counts include the buffer.
 *         if reset_linenumber:             # <<<<<<<<<<<<<<
 *             self.raw_linenumber = 1
 *         if reset_charnumber:
 */
  }

  /* "typped/lexer.py":889
 *         if reset_linenumber:
 *             self.raw_linenumber = 1
 *         if reset_charnumber:             # <<<<<<<<<<<<<<
 *             self.upcoming_raw_charnumber = 1
 *             self.upcoming_raw_total_chars = 1
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_reset_charnumber); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 889, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "typped/lexer.py":890
 *             self.raw_linenumber = 1
 *         if reset_charnumber:
 *             self.upcoming_raw_charnumber = 1             # <<<<<<<<<<<<<<
 *             self.upcoming_raw_total_chars = 1
 *         self.all_token_count = 0 # Count all actual tokens (not begin and end).
 */
    __pyx_v_self->upcoming_raw_charnumber = 1;

    /* "typped/lexer.py":891
 *         if reset_charnumber:
 *             self.upcoming_raw_charnumber = 1
 *             self.upcoming_raw_total_chars = 1             # <<<<<<<<<<<<<<
 *         self.all_token_count = 0 # Count all actual tokens (not begin and end).
 *         self.non_ignored_token_count = 0 # Count non-ignored actual tokens.
 */
    __pyx_v_self->upcoming_raw_total_chars = 1;

    /* "typped/lexer.py":889
 *         if reset_linenumber:
 *             self.raw_linenumber = 1
 *         if reset_charnumber:             # <<<<<<<<<<<<<<
 *             self.upcoming_raw_charnumber = 1
 *             self.upcoming_raw_total_chars = 1
 */
  }

  /* "typped/lexer.py":892
 *             self.upcoming_raw_charnumber = 1
 *             self.upcoming_raw_total_chars = 1
 *         self.all_token_count = 0 # Count all actual tokens (not begin and end).             # <<<<<<<<<<<<<<
 *         self.non_ignored_token_count = 0 # Count non-ignored actual tokens.
 * 
 */
  __pyx_v_self->all_token_count = 0;

  /* "typped/lexer.py":893
 *             self.upcoming_raw_total_chars = 1
 *         self.all_token_count = 0 # Count all actual tokens (not begin and end).
 *         self.non_ignored_token_count = 0 # Count non-ignored actual tokens.             # <<<<<<<<<<<<<<
 * 
 *         self.program = program # The program text currently being scanned/lexed.
 */
  __pyx_v_self->non_ignored_token_count = 0;

  /* "typped/lexer.py":895
 *         self.non_ignored_token_count = 0 # Count non-ignored actual tokens.
 * 
 *         self.program = program # The program text currently being scanned/lexed.             # <<<<<<<<<<<<<<
 *         # The prog_unprocessed list holds slice indices for the unprocessed part
 *         # of the program text.  The go_back routine can modify this.
 */
  __Pyx_INCREF(__pyx_v_program);
  __Pyx_GIVEREF(__pyx_v_program);
  __Pyx_GOTREF(__pyx_v_self->program);
  __Pyx_DECREF(__pyx_v_self->program);
  __pyx_v_self->program = __pyx_v_program;

  /* "typped/lexer.py":898
 *         # The prog_unprocessed list holds slice indices for the unprocessed part
 *         # of the program text.  The go_back routine can modify this.
 *         self.prog_unprocessed = [0, len(self.program)] # The unprocessed slice.             # <<<<<<<<<<<<<<
 *         self.token_generator_state = GenTokenState.ordinary
 * 
 */
  __pyx_t_4 = __pyx_v_self->program;
  __Pyx_INCREF(__pyx_t_4);
  __pyx_t_5 = PyObject_Length(__pyx_t_4); if (unlikely(__pyx_t_5 == -1)) __PYX_ERR(0, 898, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyInt_FromSsize_t(__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 898, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = PyList_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 898, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_int_0);
  __Pyx_GIVEREF(__pyx_int_0);
  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_int_0);
  __Pyx_GIVEREF(__pyx_t_4);
  PyList_SET_ITEM(__pyx_t_3, 1, __pyx_t_4);
  __pyx_t_4 = 0;
  __Pyx_GIVEREF(__pyx_t_3);
  __Pyx_GOTREF(__pyx_v_self->prog_unprocessed);
  __Pyx_DECREF(__pyx_v_self->prog_unprocessed);
  __pyx_v_self->prog_unprocessed = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "typped/lexer.py":899
 *         # of the program text.  The go_back routine can modify this.
 *         self.prog_unprocessed = [0, len(self.program)] # The unprocessed slice.
 *         self.token_generator_state = GenTokenState.ordinary             # <<<<<<<<<<<<<<
 * 
 *         # Set up the token buffer.
 */
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState), __pyx_n_s_ordinary); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 899, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_6 = __Pyx_PyInt_As_long(__pyx_t_3); if (unlikely((__pyx_t_6 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 899, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_self->token_generator_state = __pyx_t_6;

  /* "typped/lexer.py":902
 * 
 *         # Set up the token buffer.
 *         self._initialize_token_buffer()             # <<<<<<<<<<<<<<
 *         self.token = self.token_buffer[0] # Last token returned; begin-token here.
 *         self.text_is_set = True
 */
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_initialize_token_buffer); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 902, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_7 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
    __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
    if (likely(__pyx_t_7)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_7);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_4, function);
    }
  }
  if (__pyx_t_7) {
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 902, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  } else {
    __pyx_t_3 = __Pyx_PyObject_CallNoArg(__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 902, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":903
 *         # Set up the token buffer.
 *         self._initialize_token_buffer()
 *         self.token = self.token_buffer[0] # Last token returned; begin-token here.             # <<<<<<<<<<<<<<
 *         self.text_is_set = True
 * 
 */
  __pyx_t_3 = __Pyx_GetItemInt(((PyObject *)__pyx_v_self->token_buffer), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 903, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_3);
  __Pyx_GOTREF(__pyx_v_self->token);
  __Pyx_DECREF(__pyx_v_self->token);
  __pyx_v_self->token = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "typped/lexer.py":904
 *         self._initialize_token_buffer()
 *         self.token = self.token_buffer[0] # Last token returned; begin-token here.
 *         self.text_is_set = True             # <<<<<<<<<<<<<<
 * 
 *     def _initialize_token_buffer(self):
 */
  __pyx_v_self->text_is_set = 1;

  /* "typped/lexer.py":868
 *             self.go_back(0) # Re-scan the current token.
 * 
 *     def set_text(self, program,             # <<<<<<<<<<<<<<
 *                  reset_linenumber=True, reset_charnumber=True):
 *         # TODO: redefine to take a TextStream.  Be sure to also pass back position
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("typped.lexer.Lexer.set_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":906
 *         self.text_is_set = True
 * 
 *     def _initialize_token_buffer(self):             # <<<<<<<<<<<<<<
 *         """A utility routine to initialize (fill) the token buffer.  The
 *         `token_buffer[0]` slot is the current token.  The current token will be
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_9_initialize_token_buffer(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_8_initialize_token_buffer[] = "A utility routine to initialize (fill) the token buffer.  The\n        `token_buffer[0]` slot is the current token.  The current token will be\n        set to the begin-token after this routine runs (since no tokens have\n        yet been read with `next`).  Any tokens in the buffer past the first\n        end-token are also set to end-tokens.  The size of the token buffer is\n        `self.NUM_LOOKAHEAD_TOKENS` plus one for the current token.  For\n        two-token lookahead the buffer deque has the form:\n            [<current_token>, <peek1>, <peek2>]\n        ";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_9_initialize_token_buffer = {"_initialize_token_buffer", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_9_initialize_token_buffer, METH_NOARGS, __pyx_doc_6typped_5lexer_5Lexer_8_initialize_token_buffer};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_9_initialize_token_buffer(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("_initialize_token_buffer (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_8_initialize_token_buffer(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_8_initialize_token_buffer(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_v_begin_tok = NULL;
  struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_tb = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("_initialize_token_buffer", 0);

  /* "typped/lexer.py":916
 *             [<current_token>, <peek1>, <peek2>]
 *         """
 *         begin_tok = self.token_table.begin_token_subclass(None) # Get instance.             # <<<<<<<<<<<<<<
 *         if self.final_mod_function:
 *             begin_tok = self.final_mod_function(self, begin_tok)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_v_self->token_table->begin_token_subclass, __pyx_tuple__16, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 916, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_begin_tok = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":917
 *         """
 *         begin_tok = self.token_table.begin_token_subclass(None) # Get instance.
 *         if self.final_mod_function:             # <<<<<<<<<<<<<<
 *             begin_tok = self.final_mod_function(self, begin_tok)
 *         tb = self.token_buffer
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_self->final_mod_function); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 917, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "typped/lexer.py":918
 *         begin_tok = self.token_table.begin_token_subclass(None) # Get instance.
 *         if self.final_mod_function:
 *             begin_tok = self.final_mod_function(self, begin_tok)             # <<<<<<<<<<<<<<
 *         tb = self.token_buffer
 *         tb.reset(begin_tok) # Begin token set as current; first next() returns it.
 */
    __Pyx_INCREF(__pyx_v_self->final_mod_function);
    __pyx_t_3 = __pyx_v_self->final_mod_function; __pyx_t_4 = NULL;
    __pyx_t_5 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
        __pyx_t_5 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_4, ((PyObject *)__pyx_v_self), __pyx_v_begin_tok};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 918, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_4, ((PyObject *)__pyx_v_self), __pyx_v_begin_tok};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 918, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_6 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 918, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      if (__pyx_t_4) {
        __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      __Pyx_INCREF(((PyObject *)__pyx_v_self));
      __Pyx_GIVEREF(((PyObject *)__pyx_v_self));
      PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, ((PyObject *)__pyx_v_self));
      __Pyx_INCREF(__pyx_v_begin_tok);
      __Pyx_GIVEREF(__pyx_v_begin_tok);
      PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_v_begin_tok);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 918, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF_SET(__pyx_v_begin_tok, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "typped/lexer.py":917
 *         """
 *         begin_tok = self.token_table.begin_token_subclass(None) # Get instance.
 *         if self.final_mod_function:             # <<<<<<<<<<<<<<
 *             begin_tok = self.final_mod_function(self, begin_tok)
 *         tb = self.token_buffer
 */
  }

  /* "typped/lexer.py":919
 *         if self.final_mod_function:
 *             begin_tok = self.final_mod_function(self, begin_tok)
 *         tb = self.token_buffer             # <<<<<<<<<<<<<<
 *         tb.reset(begin_tok) # Begin token set as current; first next() returns it.
 *         self.token = tb[0]
 */
  __pyx_t_1 = ((PyObject *)__pyx_v_self->token_buffer);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_tb = ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "typped/lexer.py":920
 *             begin_tok = self.final_mod_function(self, begin_tok)
 *         tb = self.token_buffer
 *         tb.reset(begin_tok) # Begin token set as current; first next() returns it.             # <<<<<<<<<<<<<<
 *         self.token = tb[0]
 *         assert tb[0].is_begin_token() # DEBUG check, remove later
 */
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_tb->__pyx_vtab)->reset(__pyx_v_tb, __pyx_v_begin_tok, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 920, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":921
 *         tb = self.token_buffer
 *         tb.reset(begin_tok) # Begin token set as current; first next() returns it.
 *         self.token = tb[0]             # <<<<<<<<<<<<<<
 *         assert tb[0].is_begin_token() # DEBUG check, remove later
 * 
 */
  __pyx_t_1 = __Pyx_GetItemInt(((PyObject *)__pyx_v_tb), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 921, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->token);
  __Pyx_DECREF(__pyx_v_self->token);
  __pyx_v_self->token = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":922
 *         tb.reset(begin_tok) # Begin token set as current; first next() returns it.
 *         self.token = tb[0]
 *         assert tb[0].is_begin_token() # DEBUG check, remove later             # <<<<<<<<<<<<<<
 * 
 *     #
 */
  #ifndef CYTHON_WITHOUT_ASSERTIONS
  if (unlikely(!Py_OptimizeFlag)) {
    __pyx_t_3 = __Pyx_GetItemInt(((PyObject *)__pyx_v_tb), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 922, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_is_begin_token); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 922, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    if (__pyx_t_3) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 922, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    } else {
      __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 922, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 922, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (unlikely(!__pyx_t_2)) {
      PyErr_SetNone(PyExc_AssertionError);
      __PYX_ERR(0, 922, __pyx_L1_error)
    }
  }
  #endif

  /* "typped/lexer.py":906
 *         self.text_is_set = True
 * 
 *     def _initialize_token_buffer(self):             # <<<<<<<<<<<<<<
 *         """A utility routine to initialize (fill) the token buffer.  The
 *         `token_buffer[0]` slot is the current token.  The current token will be
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.Lexer._initialize_token_buffer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_begin_tok);
  __Pyx_XDECREF((PyObject *)__pyx_v_tb);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":928
 *     #
 * 
 *     def next(self, num=1):             # <<<<<<<<<<<<<<
 *         """Return the next token, consuming from the token stream.  Also sets
 *         `self.token` to the return value.  Returns one end-token and raises
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_11next(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_next(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_next *__pyx_optional_args) {
  long __pyx_v_num = ((long)1);
  PyObject *__pyx_v_ret_list = NULL;
  CYTHON_UNUSED long __pyx_v__;
  struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_tb = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  long __pyx_t_8;
  long __pyx_t_9;
  int __pyx_t_10;
  int __pyx_t_11;
  __Pyx_RefNannySetupContext("next", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_num = __pyx_optional_args->num;
    }
  }
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_next); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 928, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_11next)) {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_num); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 928, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_4 = __pyx_t_1; __pyx_t_5 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      if (!__pyx_t_5) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 928, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_4)) {
          PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_3};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 928, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
          PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_3};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 928, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        {
          __pyx_t_6 = PyTuple_New(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 928, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
          __Pyx_GIVEREF(__pyx_t_3);
          PyTuple_SET_ITEM(__pyx_t_6, 0+1, __pyx_t_3);
          __pyx_t_3 = 0;
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 928, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":937
 *         kind of `next` call will never generate `StopIteration`."""
 * 
 *         if not self.text_is_set:             # <<<<<<<<<<<<<<
 *             raise LexerException(
 *                     "Attempt to call lexer's next method when no text is set.")
 */
  __pyx_t_7 = ((!(__pyx_v_self->text_is_set != 0)) != 0);
  if (__pyx_t_7) {

    /* "typped/lexer.py":938
 * 
 *         if not self.text_is_set:
 *             raise LexerException(             # <<<<<<<<<<<<<<
 *                     "Attempt to call lexer's next method when no text is set.")
 * 
 */
    __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 938, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_tuple__17, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 938, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 938, __pyx_L1_error)

    /* "typped/lexer.py":937
 *         kind of `next` call will never generate `StopIteration`."""
 * 
 *         if not self.text_is_set:             # <<<<<<<<<<<<<<
 *             raise LexerException(
 *                     "Attempt to call lexer's next method when no text is set.")
 */
  }

  /* "typped/lexer.py":941
 *                     "Attempt to call lexer's next method when no text is set.")
 * 
 *         if self.already_returned_end_token:             # <<<<<<<<<<<<<<
 *             self.text_is_set = False
 *             raise StopIteration
 */
  __pyx_t_7 = (__pyx_v_self->already_returned_end_token != 0);
  if (__pyx_t_7) {

    /* "typped/lexer.py":942
 * 
 *         if self.already_returned_end_token:
 *             self.text_is_set = False             # <<<<<<<<<<<<<<
 *             raise StopIteration
 * 
 */
    __pyx_v_self->text_is_set = 0;

    /* "typped/lexer.py":943
 *         if self.already_returned_end_token:
 *             self.text_is_set = False
 *             raise StopIteration             # <<<<<<<<<<<<<<
 * 
 *         # Handle num > 1 case with recursion.
 */
    __Pyx_Raise(__pyx_builtin_StopIteration, 0, 0, 0);
    __PYX_ERR(0, 943, __pyx_L1_error)

    /* "typped/lexer.py":941
 *                     "Attempt to call lexer's next method when no text is set.")
 * 
 *         if self.already_returned_end_token:             # <<<<<<<<<<<<<<
 *             self.text_is_set = False
 *             raise StopIteration
 */
  }

  /* "typped/lexer.py":946
 * 
 *         # Handle num > 1 case with recursion.
 *         if num > 1:             # <<<<<<<<<<<<<<
 *             ret_list = []
 *             for _ in range(num):
 */
  __pyx_t_7 = ((__pyx_v_num > 1) != 0);
  if (__pyx_t_7) {

    /* "typped/lexer.py":947
 *         # Handle num > 1 case with recursion.
 *         if num > 1:
 *             ret_list = []             # <<<<<<<<<<<<<<
 *             for _ in range(num):
 *                 if not self.token.is_end_token():
 */
    __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 947, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_v_ret_list = ((PyObject*)__pyx_t_2);
    __pyx_t_2 = 0;

    /* "typped/lexer.py":948
 *         if num > 1:
 *             ret_list = []
 *             for _ in range(num):             # <<<<<<<<<<<<<<
 *                 if not self.token.is_end_token():
 *                     ret_list.append(self.next())
 */
    __pyx_t_8 = __pyx_v_num;
    for (__pyx_t_9 = 0; __pyx_t_9 < __pyx_t_8; __pyx_t_9+=1) {
      __pyx_v__ = __pyx_t_9;

      /* "typped/lexer.py":949
 *             ret_list = []
 *             for _ in range(num):
 *                 if not self.token.is_end_token():             # <<<<<<<<<<<<<<
 *                     ret_list.append(self.next())
 *                 else:
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token, __pyx_n_s_is_end_token); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 949, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_1);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_1, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 949, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 949, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 949, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_10 = ((!__pyx_t_7) != 0);
      if (__pyx_t_10) {

        /* "typped/lexer.py":950
 *             for _ in range(num):
 *                 if not self.token.is_end_token():
 *                     ret_list.append(self.next())             # <<<<<<<<<<<<<<
 *                 else:
 *                     break
 */
        __pyx_t_2 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->next(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 950, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_ret_list, __pyx_t_2); if (unlikely(__pyx_t_11 == -1)) __PYX_ERR(0, 950, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

        /* "typped/lexer.py":949
 *             ret_list = []
 *             for _ in range(num):
 *                 if not self.token.is_end_token():             # <<<<<<<<<<<<<<
 *                     ret_list.append(self.next())
 *                 else:
 */
        goto __pyx_L8;
      }

      /* "typped/lexer.py":952
 *                     ret_list.append(self.next())
 *                 else:
 *                     break             # <<<<<<<<<<<<<<
 *             return ret_list
 * 
 */
      /*else*/ {
        goto __pyx_L7_break;
      }
      __pyx_L8:;
    }
    __pyx_L7_break:;

    /* "typped/lexer.py":953
 *                 else:
 *                     break
 *             return ret_list             # <<<<<<<<<<<<<<
 * 
 *         # Handle ordinary case.
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_ret_list);
    __pyx_r = __pyx_v_ret_list;
    goto __pyx_L0;

    /* "typped/lexer.py":946
 * 
 *         # Handle num > 1 case with recursion.
 *         if num > 1:             # <<<<<<<<<<<<<<
 *             ret_list = []
 *             for _ in range(num):
 */
  }

  /* "typped/lexer.py":956
 * 
 *         # Handle ordinary case.
 *         tb = self.token_buffer             # <<<<<<<<<<<<<<
 *         self.token = tb.move_forward()
 *         if self.token.is_end_token():
 */
  __pyx_t_2 = ((PyObject *)__pyx_v_self->token_buffer);
  __Pyx_INCREF(__pyx_t_2);
  __pyx_v_tb = ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "typped/lexer.py":957
 *         # Handle ordinary case.
 *         tb = self.token_buffer
 *         self.token = tb.move_forward()             # <<<<<<<<<<<<<<
 *         if self.token.is_end_token():
 *             self.already_returned_end_token = True
 */
  __pyx_t_2 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_tb->__pyx_vtab)->move_forward(__pyx_v_tb, 0, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 957, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_2);
  __Pyx_GOTREF(__pyx_v_self->token);
  __Pyx_DECREF(__pyx_v_self->token);
  __pyx_v_self->token = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "typped/lexer.py":958
 *         tb = self.token_buffer
 *         self.token = tb.move_forward()
 *         if self.token.is_end_token():             # <<<<<<<<<<<<<<
 *             self.already_returned_end_token = True
 *         return self.token
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token, __pyx_n_s_is_end_token); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 958, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_1, function);
    }
  }
  if (__pyx_t_4) {
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 958, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 958, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 958, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_10) {

    /* "typped/lexer.py":959
 *         self.token = tb.move_forward()
 *         if self.token.is_end_token():
 *             self.already_returned_end_token = True             # <<<<<<<<<<<<<<
 *         return self.token
 * 
 */
    __pyx_v_self->already_returned_end_token = 1;

    /* "typped/lexer.py":958
 *         tb = self.token_buffer
 *         self.token = tb.move_forward()
 *         if self.token.is_end_token():             # <<<<<<<<<<<<<<
 *             self.already_returned_end_token = True
 *         return self.token
 */
  }

  /* "typped/lexer.py":960
 *         if self.token.is_end_token():
 *             self.already_returned_end_token = True
 *         return self.token             # <<<<<<<<<<<<<<
 * 
 *     #__next__ = next # For Python 3.
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->token);
  __pyx_r = __pyx_v_self->token;
  goto __pyx_L0;

  /* "typped/lexer.py":928
 *     #
 * 
 *     def next(self, num=1):             # <<<<<<<<<<<<<<
 *         """Return the next token, consuming from the token stream.  Also sets
 *         `self.token` to the return value.  Returns one end-token and raises
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.Lexer.next", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_ret_list);
  __Pyx_XDECREF((PyObject *)__pyx_v_tb);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_11next(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_10next[] = "Return the next token, consuming from the token stream.  Also sets\n        `self.token` to the return value.  Returns one end-token and raises\n        `StopIteration` on a `next` after that end-token.\n\n        If `num` is greater than one a list of the tokens is returned.  This\n        list is cut short if the first end-token is encountered, so this\n        kind of `next` call will never generate `StopIteration`.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_11next = {"next", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_11next, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_10next};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_11next(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  long __pyx_v_num;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("next (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_num,0};
    PyObject* values[1] = {0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_num);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "next") < 0)) __PYX_ERR(0, 928, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_num = __Pyx_PyInt_As_long(values[0]); if (unlikely((__pyx_v_num == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 928, __pyx_L3_error)
    } else {
      __pyx_v_num = ((long)1);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("next", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 928, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.next", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_10next(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_num);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_10next(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, long __pyx_v_num) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_next __pyx_t_2;
  __Pyx_RefNannySetupContext("next", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 1;
  __pyx_t_2.num = __pyx_v_num;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_Lexer->next(__pyx_v_self, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 928, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.next", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":963
 * 
 *     #__next__ = next # For Python 3.
 *     def __next__(self): # NOTE: Cython needs this wrapper (instead of assignment) or else             # <<<<<<<<<<<<<<
 *         return self.next() # it doesn't think Lexer is an iterator.  But extra overhead.
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_13__next__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_13__next__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__next__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_12__next__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_12__next__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__next__", 0);

  /* "typped/lexer.py":964
 *     #__next__ = next # For Python 3.
 *     def __next__(self): # NOTE: Cython needs this wrapper (instead of assignment) or else
 *         return self.next() # it doesn't think Lexer is an iterator.  But extra overhead.             # <<<<<<<<<<<<<<
 * 
 *     def __iter__(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->next(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 964, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":963
 * 
 *     #__next__ = next # For Python 3.
 *     def __next__(self): # NOTE: Cython needs this wrapper (instead of assignment) or else             # <<<<<<<<<<<<<<
 *         return self.next() # it doesn't think Lexer is an iterator.  But extra overhead.
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.__next__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":966
 *         return self.next() # it doesn't think Lexer is an iterator.  But extra overhead.
 * 
 *     def __iter__(self):             # <<<<<<<<<<<<<<
 *         return self # Class provides its own __next__ method.
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_15__iter__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_15__iter__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__iter__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_14__iter__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_14__iter__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__iter__", 0);

  /* "typped/lexer.py":967
 * 
 *     def __iter__(self):
 *         return self # Class provides its own __next__ method.             # <<<<<<<<<<<<<<
 * 
 *     def peek(self, num_toks=1):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_self));
  __pyx_r = ((PyObject *)__pyx_v_self);
  goto __pyx_L0;

  /* "typped/lexer.py":966
 *         return self.next() # it doesn't think Lexer is an iterator.  But extra overhead.
 * 
 *     def __iter__(self):             # <<<<<<<<<<<<<<
 *         return self # Class provides its own __next__ method.
 * 
 */

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":969
 *         return self # Class provides its own __next__ method.
 * 
 *     def peek(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Peek ahead in the token stream without consuming any tokens.  The
 *         argument `num_toks` is the number of tokens ahead to peek.  The default
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_17peek(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_peek(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_peek *__pyx_optional_args) {
  PyObject *__pyx_v_num_toks = ((PyObject *)__pyx_int_1);
  PyObject *__pyx_v_retval = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("peek", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_num_toks = __pyx_optional_args->num_toks;
    }
  }
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_peek); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 969, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_17peek)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_num_toks); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 969, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_num_toks};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 969, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_num_toks};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 969, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        {
          __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 969, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
          __Pyx_INCREF(__pyx_v_num_toks);
          __Pyx_GIVEREF(__pyx_v_num_toks);
          PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_v_num_toks);
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 969, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":980
 *         peek.  If `max_peek_tokens` is set then an exception will be raised on
 *         attempts to peek farther than that."""
 *         if not self.text_is_set:             # <<<<<<<<<<<<<<
 *             raise LexerException(
 *                     "Attempt to call lexer's peek method when no text is set.")
 */
  __pyx_t_6 = ((!(__pyx_v_self->text_is_set != 0)) != 0);
  if (__pyx_t_6) {

    /* "typped/lexer.py":981
 *         attempts to peek farther than that."""
 *         if not self.text_is_set:
 *             raise LexerException(             # <<<<<<<<<<<<<<
 *                     "Attempt to call lexer's peek method when no text is set.")
 *         try:
 */
    __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 981, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_tuple__18, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 981, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 981, __pyx_L1_error)

    /* "typped/lexer.py":980
 *         peek.  If `max_peek_tokens` is set then an exception will be raised on
 *         attempts to peek farther than that."""
 *         if not self.text_is_set:             # <<<<<<<<<<<<<<
 *             raise LexerException(
 *                     "Attempt to call lexer's peek method when no text is set.")
 */
  }

  /* "typped/lexer.py":983
 *             raise LexerException(
 *                     "Attempt to call lexer's peek method when no text is set.")
 *         try:             # <<<<<<<<<<<<<<
 *             retval = self.token_buffer[num_toks]
 *         except IndexError: # Shouldn't happen.
 */
  {
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ExceptionSave(&__pyx_t_7, &__pyx_t_8, &__pyx_t_9);
    __Pyx_XGOTREF(__pyx_t_7);
    __Pyx_XGOTREF(__pyx_t_8);
    __Pyx_XGOTREF(__pyx_t_9);
    /*try:*/ {

      /* "typped/lexer.py":984
 *                     "Attempt to call lexer's peek method when no text is set.")
 *         try:
 *             retval = self.token_buffer[num_toks]             # <<<<<<<<<<<<<<
 *         except IndexError: # Shouldn't happen.
 *             raise BufferIndexError
 */
      __pyx_t_2 = PyObject_GetItem(((PyObject *)__pyx_v_self->token_buffer), __pyx_v_num_toks); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 984, __pyx_L4_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_v_retval = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "typped/lexer.py":983
 *             raise LexerException(
 *                     "Attempt to call lexer's peek method when no text is set.")
 *         try:             # <<<<<<<<<<<<<<
 *             retval = self.token_buffer[num_toks]
 *         except IndexError: # Shouldn't happen.
 */
    }
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
    goto __pyx_L9_try_end;
    __pyx_L4_error:;
    __Pyx_PyThreadState_assign
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "typped/lexer.py":985
 *         try:
 *             retval = self.token_buffer[num_toks]
 *         except IndexError: # Shouldn't happen.             # <<<<<<<<<<<<<<
 *             raise BufferIndexError
 *         return retval
 */
    __pyx_t_10 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_IndexError);
    if (__pyx_t_10) {
      __Pyx_AddTraceback("typped.lexer.Lexer.peek", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (__Pyx_GetException(&__pyx_t_2, &__pyx_t_1, &__pyx_t_3) < 0) __PYX_ERR(0, 985, __pyx_L6_except_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_GOTREF(__pyx_t_3);

      /* "typped/lexer.py":986
 *             retval = self.token_buffer[num_toks]
 *         except IndexError: # Shouldn't happen.
 *             raise BufferIndexError             # <<<<<<<<<<<<<<
 *         return retval
 * 
 */
      __pyx_t_5 = __Pyx_GetModuleGlobalName(__pyx_n_s_BufferIndexError); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 986, __pyx_L6_except_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_Raise(__pyx_t_5, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __PYX_ERR(0, 986, __pyx_L6_except_error)
    }
    goto __pyx_L6_except_error;
    __pyx_L6_except_error:;

    /* "typped/lexer.py":983
 *             raise LexerException(
 *                     "Attempt to call lexer's peek method when no text is set.")
 *         try:             # <<<<<<<<<<<<<<
 *             retval = self.token_buffer[num_toks]
 *         except IndexError: # Shouldn't happen.
 */
    __Pyx_PyThreadState_assign
    __Pyx_XGIVEREF(__pyx_t_7);
    __Pyx_XGIVEREF(__pyx_t_8);
    __Pyx_XGIVEREF(__pyx_t_9);
    __Pyx_ExceptionReset(__pyx_t_7, __pyx_t_8, __pyx_t_9);
    goto __pyx_L1_error;
    __pyx_L9_try_end:;
  }

  /* "typped/lexer.py":987
 *         except IndexError: # Shouldn't happen.
 *             raise BufferIndexError
 *         return retval             # <<<<<<<<<<<<<<
 * 
 *     def move_back(self, num_toks=1, num_is_raw=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_retval);
  __pyx_r = __pyx_v_retval;
  goto __pyx_L0;

  /* "typped/lexer.py":969
 *         return self # Class provides its own __next__ method.
 * 
 *     def peek(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Peek ahead in the token stream without consuming any tokens.  The
 *         argument `num_toks` is the number of tokens ahead to peek.  The default
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("typped.lexer.Lexer.peek", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_retval);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_17peek(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_16peek[] = "Peek ahead in the token stream without consuming any tokens.  The\n        argument `num_toks` is the number of tokens ahead to peek.  The default\n        peek of `num_toks=1` peeks at the token just beyond the current token.\n        Peeking zero shows the current token.  Negative peeks are allowed, and\n        look back at the previous tokens (up to the number saved in the token\n        buffer).\n\n        Tokens are read into the buffer on-demand to satisfy any requested\n        peek.  If `max_peek_tokens` is set then an exception will be raised on\n        attempts to peek farther than that.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_17peek = {"peek", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_17peek, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_16peek};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_17peek(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_num_toks = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("peek (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_num_toks,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)__pyx_int_1);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_num_toks);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "peek") < 0)) __PYX_ERR(0, 969, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_num_toks = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("peek", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 969, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.peek", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_16peek(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_num_toks);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_16peek(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_num_toks) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_peek __pyx_t_2;
  __Pyx_RefNannySetupContext("peek", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 1;
  __pyx_t_2.num_toks = __pyx_v_num_toks;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_Lexer->peek(__pyx_v_self, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 969, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.peek", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":989
 *         return retval
 * 
 *     def move_back(self, num_toks=1, num_is_raw=False):             # <<<<<<<<<<<<<<
 *         """NOT YET IMPLEMENTED
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_19move_back(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_18move_back[] = "NOT YET IMPLEMENTED\n\n        Move the current token back in the token stream.  This method is\n        similar to methods commonly called `push_back`. It is similar to\n        `go_back` except that tokens are not rescanned.  The current position\n        in the token buffer is just moved back.  This is more efficient than\n        `go_back` but it assumes that there have been no modifications,\n        additions, or deletions to the token definitions.  If the parser is\n        guaranteed to be static with respect to the defined tokens then this is\n        the routine to use.  Otherwise, use `go_back`.\n\n        The optional parameter `num_toks` is the number of tokens to move\n        back.  Negative numbers move forward, consuming more tokens if\n        necessary.  Moving forward will always stop before consuming a second\n        end-token (which would raise `StopIteration` if done in `next`).";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_19move_back = {"move_back", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_19move_back, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_18move_back};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_19move_back(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  CYTHON_UNUSED PyObject *__pyx_v_num_toks = 0;
  CYTHON_UNUSED PyObject *__pyx_v_num_is_raw = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("move_back (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_num_toks,&__pyx_n_s_num_is_raw,0};
    PyObject* values[2] = {0,0};
    values[0] = ((PyObject *)__pyx_int_1);
    values[1] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_num_toks);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_num_is_raw);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "move_back") < 0)) __PYX_ERR(0, 989, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_num_toks = values[0];
    __pyx_v_num_is_raw = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("move_back", 0, 0, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 989, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.move_back", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_18move_back(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_num_toks, __pyx_v_num_is_raw);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_18move_back(CYTHON_UNUSED struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_num_toks, CYTHON_UNUSED PyObject *__pyx_v_num_is_raw) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("move_back", 0);

  /* "typped/lexer.py":1011
 *         # TODO use the token buffer's move_forward and move_back methods;
 *         # finish implementing them...
 *         raise NotImplementedError             # <<<<<<<<<<<<<<
 *         if not self.text_is_set:
 *             raise LexerException(
 */
  __Pyx_Raise(__pyx_builtin_NotImplementedError, 0, 0, 0);
  __PYX_ERR(0, 1011, __pyx_L1_error)

  /* "typped/lexer.py":989
 *         return retval
 * 
 *     def move_back(self, num_toks=1, num_is_raw=False):             # <<<<<<<<<<<<<<
 *         """NOT YET IMPLEMENTED
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.move_back", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1021
 *         token_buffer = self.token_buffer
 * 
 *     def _pop_tokens(self, n):             # <<<<<<<<<<<<<<
 *         """Pop `n` tokens from the token buffer, resetting the slice indices in
 *         `self.prog_unprocessed` and other state variables.  Used by `go_back`."""
 */

static PyObject *__pyx_f_6typped_5lexer_5Lexer__pop_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, long __pyx_v_n) {
  int __pyx_v_popped_to_begin_token;
  int __pyx_v_current_token_is_first;
  CYTHON_UNUSED long __pyx_v__;
  struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_token_buffer = NULL;
  PyObject *__pyx_v_popped = NULL;
  PyObject *__pyx_v_line_and_char = NULL;
  PyObject *__pyx_v_char_index_in_program = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  long __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  Py_ssize_t __pyx_t_7;
  PyObject *(*__pyx_t_8)(PyObject *);
  long __pyx_t_9;
  long __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  Py_ssize_t __pyx_t_12;
  __Pyx_RefNannySetupContext("_pop_tokens", 0);

  /* "typped/lexer.py":1024
 *         """Pop `n` tokens from the token buffer, resetting the slice indices in
 *         `self.prog_unprocessed` and other state variables.  Used by `go_back`."""
 *         popped_to_begin_token = False             # <<<<<<<<<<<<<<
 *         current_token_is_first = False
 *         for _ in range(n):
 */
  __pyx_v_popped_to_begin_token = 0;

  /* "typped/lexer.py":1025
 *         `self.prog_unprocessed` and other state variables.  Used by `go_back`."""
 *         popped_to_begin_token = False
 *         current_token_is_first = False             # <<<<<<<<<<<<<<
 *         for _ in range(n):
 *             token_buffer = self.token_buffer
 */
  __pyx_v_current_token_is_first = 0;

  /* "typped/lexer.py":1026
 *         popped_to_begin_token = False
 *         current_token_is_first = False
 *         for _ in range(n):             # <<<<<<<<<<<<<<
 *             token_buffer = self.token_buffer
 * 
 */
  __pyx_t_1 = __pyx_v_n;
  for (__pyx_t_2 = 0; __pyx_t_2 < __pyx_t_1; __pyx_t_2+=1) {
    __pyx_v__ = __pyx_t_2;

    /* "typped/lexer.py":1027
 *         current_token_is_first = False
 *         for _ in range(n):
 *             token_buffer = self.token_buffer             # <<<<<<<<<<<<<<
 * 
 *             if token_buffer[0].is_begin_token():
 */
    __pyx_t_3 = ((PyObject *)__pyx_v_self->token_buffer);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_XDECREF_SET(__pyx_v_token_buffer, ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_t_3));
    __pyx_t_3 = 0;

    /* "typped/lexer.py":1029
 *             token_buffer = self.token_buffer
 * 
 *             if token_buffer[0].is_begin_token():             # <<<<<<<<<<<<<<
 *                 popped_to_begin_token = True
 *                 self.token = self.token_buffer[0]
 */
    __pyx_t_4 = __Pyx_GetItemInt(((PyObject *)__pyx_v_token_buffer), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1029, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_is_begin_token); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1029, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    if (__pyx_t_4) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1029, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    } else {
      __pyx_t_3 = __Pyx_PyObject_CallNoArg(__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1029, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1029, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_6) {

      /* "typped/lexer.py":1030
 * 
 *             if token_buffer[0].is_begin_token():
 *                 popped_to_begin_token = True             # <<<<<<<<<<<<<<
 *                 self.token = self.token_buffer[0]
 *                 return popped_to_begin_token, current_token_is_first
 */
      __pyx_v_popped_to_begin_token = 1;

      /* "typped/lexer.py":1031
 *             if token_buffer[0].is_begin_token():
 *                 popped_to_begin_token = True
 *                 self.token = self.token_buffer[0]             # <<<<<<<<<<<<<<
 *                 return popped_to_begin_token, current_token_is_first
 * 
 */
      __pyx_t_3 = __Pyx_GetItemInt(((PyObject *)__pyx_v_self->token_buffer), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1031, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_GIVEREF(__pyx_t_3);
      __Pyx_GOTREF(__pyx_v_self->token);
      __Pyx_DECREF(__pyx_v_self->token);
      __pyx_v_self->token = __pyx_t_3;
      __pyx_t_3 = 0;

      /* "typped/lexer.py":1032
 *                 popped_to_begin_token = True
 *                 self.token = self.token_buffer[0]
 *                 return popped_to_begin_token, current_token_is_first             # <<<<<<<<<<<<<<
 * 
 *             popped = token_buffer._pop()
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyBool_FromLong(__pyx_v_popped_to_begin_token); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1032, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_5 = __Pyx_PyBool_FromLong(__pyx_v_current_token_is_first); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1032, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1032, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_3);
      PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_3);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_5);
      __pyx_t_3 = 0;
      __pyx_t_5 = 0;
      __pyx_r = __pyx_t_4;
      __pyx_t_4 = 0;
      goto __pyx_L0;

      /* "typped/lexer.py":1029
 *             token_buffer = self.token_buffer
 * 
 *             if token_buffer[0].is_begin_token():             # <<<<<<<<<<<<<<
 *                 popped_to_begin_token = True
 *                 self.token = self.token_buffer[0]
 */
    }

    /* "typped/lexer.py":1034
 *                 return popped_to_begin_token, current_token_is_first
 * 
 *             popped = token_buffer._pop()             # <<<<<<<<<<<<<<
 * 
 *             if popped.is_end_token():
 */
    __pyx_t_4 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_token_buffer->__pyx_vtab)->_pop(__pyx_v_token_buffer); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1034, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_XDECREF_SET(__pyx_v_popped, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "typped/lexer.py":1036
 *             popped = token_buffer._pop()
 * 
 *             if popped.is_end_token():             # <<<<<<<<<<<<<<
 *                 continue # No actual text was read for end tokens.
 * 
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_popped, __pyx_n_s_is_end_token); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1036, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    if (__pyx_t_3) {
      __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1036, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    } else {
      __pyx_t_4 = __Pyx_PyObject_CallNoArg(__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1036, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1036, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_6) {

      /* "typped/lexer.py":1037
 * 
 *             if popped.is_end_token():
 *                 continue # No actual text was read for end tokens.             # <<<<<<<<<<<<<<
 * 
 *             self.non_ignored_token_count -= 1
 */
      goto __pyx_L3_continue;

      /* "typped/lexer.py":1036
 *             popped = token_buffer._pop()
 * 
 *             if popped.is_end_token():             # <<<<<<<<<<<<<<
 *                 continue # No actual text was read for end tokens.
 * 
 */
    }

    /* "typped/lexer.py":1039
 *                 continue # No actual text was read for end tokens.
 * 
 *             self.non_ignored_token_count -= 1             # <<<<<<<<<<<<<<
 *             self.all_token_count -= (1 + len(popped.ignored_before))
 * 
 */
    __pyx_v_self->non_ignored_token_count = (__pyx_v_self->non_ignored_token_count - 1);

    /* "typped/lexer.py":1040
 * 
 *             self.non_ignored_token_count -= 1
 *             self.all_token_count -= (1 + len(popped.ignored_before))             # <<<<<<<<<<<<<<
 * 
 *             # Reset the line number information.
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_popped, __pyx_n_s_ignored_before); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1040, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = PyObject_Length(__pyx_t_4); if (unlikely(__pyx_t_7 == -1)) __PYX_ERR(0, 1040, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_self->all_token_count = (__pyx_v_self->all_token_count - (1 + __pyx_t_7));

    /* "typped/lexer.py":1043
 * 
 *             # Reset the line number information.
 *             if popped.ignored_before:             # <<<<<<<<<<<<<<
 *                 line_and_char = popped.ignored_before[0].line_and_char
 *                 char_index_in_program = popped.ignored_before[0].char_index_in_program
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_popped, __pyx_n_s_ignored_before); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1043, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1043, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_6) {

      /* "typped/lexer.py":1044
 *             # Reset the line number information.
 *             if popped.ignored_before:
 *                 line_and_char = popped.ignored_before[0].line_and_char             # <<<<<<<<<<<<<<
 *                 char_index_in_program = popped.ignored_before[0].char_index_in_program
 *             else:
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_popped, __pyx_n_s_ignored_before); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1044, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1044, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_line_and_char); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1044, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_XDECREF_SET(__pyx_v_line_and_char, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "typped/lexer.py":1045
 *             if popped.ignored_before:
 *                 line_and_char = popped.ignored_before[0].line_and_char
 *                 char_index_in_program = popped.ignored_before[0].char_index_in_program             # <<<<<<<<<<<<<<
 *             else:
 *                 line_and_char = popped.line_and_char
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_popped, __pyx_n_s_ignored_before); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1045, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1045, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_char_index_in_program); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1045, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_XDECREF_SET(__pyx_v_char_index_in_program, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "typped/lexer.py":1043
 * 
 *             # Reset the line number information.
 *             if popped.ignored_before:             # <<<<<<<<<<<<<<
 *                 line_and_char = popped.ignored_before[0].line_and_char
 *                 char_index_in_program = popped.ignored_before[0].char_index_in_program
 */
      goto __pyx_L7;
    }

    /* "typped/lexer.py":1047
 *                 char_index_in_program = popped.ignored_before[0].char_index_in_program
 *             else:
 *                 line_and_char = popped.line_and_char             # <<<<<<<<<<<<<<
 *                 char_index_in_program = popped.char_index_in_program
 *             self.raw_linenumber, self.upcoming_raw_charnumber = line_and_char
 */
    /*else*/ {
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_popped, __pyx_n_s_line_and_char); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1047, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_XDECREF_SET(__pyx_v_line_and_char, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "typped/lexer.py":1048
 *             else:
 *                 line_and_char = popped.line_and_char
 *                 char_index_in_program = popped.char_index_in_program             # <<<<<<<<<<<<<<
 *             self.raw_linenumber, self.upcoming_raw_charnumber = line_and_char
 *             self.upcoming_raw_total_chars = char_index_in_program
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_popped, __pyx_n_s_char_index_in_program); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1048, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_XDECREF_SET(__pyx_v_char_index_in_program, __pyx_t_4);
      __pyx_t_4 = 0;
    }
    __pyx_L7:;

    /* "typped/lexer.py":1049
 *                 line_and_char = popped.line_and_char
 *                 char_index_in_program = popped.char_index_in_program
 *             self.raw_linenumber, self.upcoming_raw_charnumber = line_and_char             # <<<<<<<<<<<<<<
 *             self.upcoming_raw_total_chars = char_index_in_program
 * 
 */
    if ((likely(PyTuple_CheckExact(__pyx_v_line_and_char))) || (PyList_CheckExact(__pyx_v_line_and_char))) {
      PyObject* sequence = __pyx_v_line_and_char;
      #if !CYTHON_COMPILING_IN_PYPY
      Py_ssize_t size = Py_SIZE(sequence);
      #else
      Py_ssize_t size = PySequence_Size(sequence);
      #endif
      if (unlikely(size != 2)) {
        if (size > 2) __Pyx_RaiseTooManyValuesError(2);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 1049, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_5 = PyTuple_GET_ITEM(sequence, 1); 
      } else {
        __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_5 = PyList_GET_ITEM(sequence, 1); 
      }
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_5);
      #else
      __pyx_t_4 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1049, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1049, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      #endif
    } else {
      Py_ssize_t index = -1;
      __pyx_t_3 = PyObject_GetIter(__pyx_v_line_and_char); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1049, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_8 = Py_TYPE(__pyx_t_3)->tp_iternext;
      index = 0; __pyx_t_4 = __pyx_t_8(__pyx_t_3); if (unlikely(!__pyx_t_4)) goto __pyx_L8_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_4);
      index = 1; __pyx_t_5 = __pyx_t_8(__pyx_t_3); if (unlikely(!__pyx_t_5)) goto __pyx_L8_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_5);
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_8(__pyx_t_3), 2) < 0) __PYX_ERR(0, 1049, __pyx_L1_error)
      __pyx_t_8 = NULL;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      goto __pyx_L9_unpacking_done;
      __pyx_L8_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_8 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 1049, __pyx_L1_error)
      __pyx_L9_unpacking_done:;
    }
    __pyx_t_9 = __Pyx_PyInt_As_long(__pyx_t_4); if (unlikely((__pyx_t_9 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1049, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_10 = __Pyx_PyInt_As_long(__pyx_t_5); if (unlikely((__pyx_t_10 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1049, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_v_self->raw_linenumber = __pyx_t_9;
    __pyx_v_self->upcoming_raw_charnumber = __pyx_t_10;

    /* "typped/lexer.py":1050
 *                 char_index_in_program = popped.char_index_in_program
 *             self.raw_linenumber, self.upcoming_raw_charnumber = line_and_char
 *             self.upcoming_raw_total_chars = char_index_in_program             # <<<<<<<<<<<<<<
 * 
 *             # Reset the slice indices into the program text.
 */
    __pyx_t_10 = __Pyx_PyInt_As_long(__pyx_v_char_index_in_program); if (unlikely((__pyx_t_10 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1050, __pyx_L1_error)
    __pyx_v_self->upcoming_raw_total_chars = __pyx_t_10;

    /* "typped/lexer.py":1053
 * 
 *             # Reset the slice indices into the program text.
 *             self.prog_unprocessed[0] -= len(popped.original_matched_string)             # <<<<<<<<<<<<<<
 * 
 *             if token_buffer[-1].is_begin_token():
 */
    if (unlikely(__pyx_v_self->prog_unprocessed == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 1053, __pyx_L1_error)
    }
    __Pyx_INCREF(__pyx_v_self->prog_unprocessed);
    __pyx_t_11 = __pyx_v_self->prog_unprocessed;
    __pyx_t_7 = 0;
    if (unlikely(__pyx_t_11 == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 1053, __pyx_L1_error)
    }
    __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_t_11, __pyx_t_7, Py_ssize_t, 1, PyInt_FromSsize_t, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1053, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_popped, __pyx_n_s_original_matched_string); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1053, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_12 = PyObject_Length(__pyx_t_4); if (unlikely(__pyx_t_12 == -1)) __PYX_ERR(0, 1053, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyInt_FromSsize_t(__pyx_t_12); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1053, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = PyNumber_InPlaceSubtract(__pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1053, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(__pyx_t_11 == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 1053, __pyx_L1_error)
    }
    if (unlikely(__Pyx_SetItemInt(__pyx_t_11, __pyx_t_7, __pyx_t_3, Py_ssize_t, 1, PyInt_FromSsize_t, 1, 1, 1) < 0)) __PYX_ERR(0, 1053, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;

    /* "typped/lexer.py":1055
 *             self.prog_unprocessed[0] -= len(popped.original_matched_string)
 * 
 *             if token_buffer[-1].is_begin_token():             # <<<<<<<<<<<<<<
 *                 current_token_is_first = True
 * 
 */
    __pyx_t_4 = __Pyx_GetItemInt(((PyObject *)__pyx_v_token_buffer), -1L, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1055, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_is_begin_token); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1055, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    if (__pyx_t_4) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1055, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    } else {
      __pyx_t_3 = __Pyx_PyObject_CallNoArg(__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1055, __pyx_L1_error)
    }
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1055, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_6) {

      /* "typped/lexer.py":1056
 * 
 *             if token_buffer[-1].is_begin_token():
 *                 current_token_is_first = True             # <<<<<<<<<<<<<<
 * 
 *         self.token = self.token_buffer[0]
 */
      __pyx_v_current_token_is_first = 1;

      /* "typped/lexer.py":1055
 *             self.prog_unprocessed[0] -= len(popped.original_matched_string)
 * 
 *             if token_buffer[-1].is_begin_token():             # <<<<<<<<<<<<<<
 *                 current_token_is_first = True
 * 
 */
    }
    __pyx_L3_continue:;
  }

  /* "typped/lexer.py":1058
 *                 current_token_is_first = True
 * 
 *         self.token = self.token_buffer[0]             # <<<<<<<<<<<<<<
 *         return popped_to_begin_token, current_token_is_first
 * 
 */
  __pyx_t_3 = __Pyx_GetItemInt(((PyObject *)__pyx_v_self->token_buffer), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1058, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_3);
  __Pyx_GOTREF(__pyx_v_self->token);
  __Pyx_DECREF(__pyx_v_self->token);
  __pyx_v_self->token = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "typped/lexer.py":1059
 * 
 *         self.token = self.token_buffer[0]
 *         return popped_to_begin_token, current_token_is_first             # <<<<<<<<<<<<<<
 * 
 *     def go_back(self, num_toks=1, num_is_raw=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_3 = __Pyx_PyBool_FromLong(__pyx_v_popped_to_begin_token); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1059, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = __Pyx_PyBool_FromLong(__pyx_v_current_token_is_first); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1059, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1059, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_5);
  PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_5 = 0;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1021
 *         token_buffer = self.token_buffer
 * 
 *     def _pop_tokens(self, n):             # <<<<<<<<<<<<<<
 *         """Pop `n` tokens from the token buffer, resetting the slice indices in
 *         `self.prog_unprocessed` and other state variables.  Used by `go_back`."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("typped.lexer.Lexer._pop_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_token_buffer);
  __Pyx_XDECREF(__pyx_v_popped);
  __Pyx_XDECREF(__pyx_v_line_and_char);
  __Pyx_XDECREF(__pyx_v_char_index_in_program);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1061
 *         return popped_to_begin_token, current_token_is_first
 * 
 *     def go_back(self, num_toks=1, num_is_raw=False):             # <<<<<<<<<<<<<<
 *         """This method allows the lexer to go back in the token buffer by
 *         `num_toks` tokens.  The call `go_back(n)` will undo the effects of the
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_21go_back(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_go_back(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_go_back *__pyx_optional_args) {
  long __pyx_v_num_toks = ((long)1);
  int __pyx_v_num_is_raw = ((int)0);
  struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_token_buffer = NULL;
  unsigned long __pyx_v_peekahead_num;
  long __pyx_v_num_buffered_after_current;
  long __pyx_v_num_to_pop;
  PyObject *__pyx_v_popped_to_begin_token = NULL;
  PyObject *__pyx_v_current_token_is_first = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  unsigned long __pyx_t_10;
  PyObject *(*__pyx_t_11)(PyObject *);
  int __pyx_t_12;
  __Pyx_RefNannySetupContext("go_back", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_num_toks = __pyx_optional_args->num_toks;
      if (__pyx_optional_args->__pyx_n > 1) {
        __pyx_v_num_is_raw = __pyx_optional_args->num_is_raw;
      }
    }
  }
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_go_back); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1061, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_21go_back)) {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_num_toks); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1061, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_4 = __Pyx_PyBool_FromLong(__pyx_v_num_is_raw); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1061, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_5 = __pyx_t_1; __pyx_t_6 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_3, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1061, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_3, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1061, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1061, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        if (__pyx_t_6) {
          __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6); __pyx_t_6 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_4);
        __pyx_t_3 = 0;
        __pyx_t_4 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_8, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1061, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":1103
 *         lookahead buffer must be re-scanned based on those tokens."""
 * 
 *         if not self.text_is_set:             # <<<<<<<<<<<<<<
 *             raise LexerException(
 *                     "Attempt to call lexer's go_back method when no text is set.")
 */
  __pyx_t_9 = ((!(__pyx_v_self->text_is_set != 0)) != 0);
  if (__pyx_t_9) {

    /* "typped/lexer.py":1104
 * 
 *         if not self.text_is_set:
 *             raise LexerException(             # <<<<<<<<<<<<<<
 *                     "Attempt to call lexer's go_back method when no text is set.")
 *         if self.token_generator_state == GenTokenState.uninitialized:
 */
    __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1104, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_tuple__19, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1104, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 1104, __pyx_L1_error)

    /* "typped/lexer.py":1103
 *         lookahead buffer must be re-scanned based on those tokens."""
 * 
 *         if not self.text_is_set:             # <<<<<<<<<<<<<<
 *             raise LexerException(
 *                     "Attempt to call lexer's go_back method when no text is set.")
 */
  }

  /* "typped/lexer.py":1106
 *             raise LexerException(
 *                     "Attempt to call lexer's go_back method when no text is set.")
 *         if self.token_generator_state == GenTokenState.uninitialized:             # <<<<<<<<<<<<<<
 *             raise LexerException("The token generator has not been initialized "
 *                   "or has reached `StopIteration` by reading past the end-token.")
 */
  __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v_self->token_generator_state); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1106, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState), __pyx_n_s_uninitialized); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1106, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_2, __pyx_t_1, Py_EQ); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1106, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1106, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (__pyx_t_9) {

    /* "typped/lexer.py":1107
 *                     "Attempt to call lexer's go_back method when no text is set.")
 *         if self.token_generator_state == GenTokenState.uninitialized:
 *             raise LexerException("The token generator has not been initialized "             # <<<<<<<<<<<<<<
 *                   "or has reached `StopIteration` by reading past the end-token.")
 * 
 */
    __pyx_t_5 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1107, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_tuple__20, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1107, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_Raise(__pyx_t_1, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __PYX_ERR(0, 1107, __pyx_L1_error)

    /* "typped/lexer.py":1106
 *             raise LexerException(
 *                     "Attempt to call lexer's go_back method when no text is set.")
 *         if self.token_generator_state == GenTokenState.uninitialized:             # <<<<<<<<<<<<<<
 *             raise LexerException("The token generator has not been initialized "
 *                   "or has reached `StopIteration` by reading past the end-token.")
 */
  }

  /* "typped/lexer.py":1110
 *                   "or has reached `StopIteration` by reading past the end-token.")
 * 
 *         token_buffer = self.token_buffer # Shorter alias.             # <<<<<<<<<<<<<<
 * 
 *         # For negative values just pop the required number off the end of token_buffer.
 */
  __pyx_t_1 = ((PyObject *)__pyx_v_self->token_buffer);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_token_buffer = ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "typped/lexer.py":1113
 * 
 *         # For negative values just pop the required number off the end of token_buffer.
 *         if num_toks < 0:             # <<<<<<<<<<<<<<
 *             peekahead_num = abs(num_toks)
 *             print("the peekahead num is:", peekahead_num)
 */
  __pyx_t_9 = ((__pyx_v_num_toks < 0) != 0);
  if (__pyx_t_9) {

    /* "typped/lexer.py":1114
 *         # For negative values just pop the required number off the end of token_buffer.
 *         if num_toks < 0:
 *             peekahead_num = abs(num_toks)             # <<<<<<<<<<<<<<
 *             print("the peekahead num is:", peekahead_num)
 *             self._pop_tokens(token_buffer.num_tokens_after_current() - peekahead_num)
 */
    __pyx_t_10 = __Pyx_abs_long(__pyx_v_num_toks); 
    __pyx_v_peekahead_num = __pyx_t_10;

    /* "typped/lexer.py":1115
 *         if num_toks < 0:
 *             peekahead_num = abs(num_toks)
 *             print("the peekahead num is:", peekahead_num)             # <<<<<<<<<<<<<<
 *             self._pop_tokens(token_buffer.num_tokens_after_current() - peekahead_num)
 *             print("returning token with value:", self.token.value)
 */
    __pyx_t_1 = __Pyx_PyInt_From_unsigned_long(__pyx_v_peekahead_num); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1115, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1115, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_kp_s_the_peekahead_num_is);
    __Pyx_GIVEREF(__pyx_kp_s_the_peekahead_num_is);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_kp_s_the_peekahead_num_is);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_1);
    __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1115, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":1116
 *             peekahead_num = abs(num_toks)
 *             print("the peekahead num is:", peekahead_num)
 *             self._pop_tokens(token_buffer.num_tokens_after_current() - peekahead_num)             # <<<<<<<<<<<<<<
 *             print("returning token with value:", self.token.value)
 *             return self.token
 */
    __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->_pop_tokens(__pyx_v_self, (((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_token_buffer->__pyx_vtab)->num_tokens_after_current(__pyx_v_token_buffer, 0) - __pyx_v_peekahead_num)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1116, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":1117
 *             print("the peekahead num is:", peekahead_num)
 *             self._pop_tokens(token_buffer.num_tokens_after_current() - peekahead_num)
 *             print("returning token with value:", self.token.value)             # <<<<<<<<<<<<<<
 *             return self.token
 * 
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token, __pyx_n_s_value); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1117, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1117, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_kp_s_returning_token_with_value);
    __Pyx_GIVEREF(__pyx_kp_s_returning_token_with_value);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_kp_s_returning_token_with_value);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_1);
    __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1117, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":1118
 *             self._pop_tokens(token_buffer.num_tokens_after_current() - peekahead_num)
 *             print("returning token with value:", self.token.value)
 *             return self.token             # <<<<<<<<<<<<<<
 * 
 *         # We will re-scan at least one token, so reset `already_returned_end_token`.
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_self->token);
    __pyx_r = __pyx_v_self->token;
    goto __pyx_L0;

    /* "typped/lexer.py":1113
 * 
 *         # For negative values just pop the required number off the end of token_buffer.
 *         if num_toks < 0:             # <<<<<<<<<<<<<<
 *             peekahead_num = abs(num_toks)
 *             print("the peekahead num is:", peekahead_num)
 */
  }

  /* "typped/lexer.py":1121
 * 
 *         # We will re-scan at least one token, so reset `already_returned_end_token`.
 *         self.already_returned_end_token = False             # <<<<<<<<<<<<<<
 * 
 *         num_buffered_after_current = token_buffer.num_tokens_after_current()
 */
  __pyx_v_self->already_returned_end_token = 0;

  /* "typped/lexer.py":1123
 *         self.already_returned_end_token = False
 * 
 *         num_buffered_after_current = token_buffer.num_tokens_after_current()             # <<<<<<<<<<<<<<
 *         num_to_pop = num_toks + num_buffered_after_current + 1 # new curr is rescanned
 * 
 */
  __pyx_v_num_buffered_after_current = ((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_token_buffer->__pyx_vtab)->num_tokens_after_current(__pyx_v_token_buffer, 0);

  /* "typped/lexer.py":1124
 * 
 *         num_buffered_after_current = token_buffer.num_tokens_after_current()
 *         num_to_pop = num_toks + num_buffered_after_current + 1 # new curr is rescanned             # <<<<<<<<<<<<<<
 * 
 *         if num_is_raw:
 */
  __pyx_v_num_to_pop = ((__pyx_v_num_toks + __pyx_v_num_buffered_after_current) + 1);

  /* "typped/lexer.py":1126
 *         num_to_pop = num_toks + num_buffered_after_current + 1 # new curr is rescanned
 * 
 *         if num_is_raw:             # <<<<<<<<<<<<<<
 *             # Works with lex.all_token_count in production_rules, but why +2?
 *             # Setting max_peek_tokens doesn't affect it.  Clean up code.
 */
  __pyx_t_9 = (__pyx_v_num_is_raw != 0);
  if (__pyx_t_9) {

    /* "typped/lexer.py":1129
 *             # Works with lex.all_token_count in production_rules, but why +2?
 *             # Setting max_peek_tokens doesn't affect it.  Clean up code.
 *             num_to_pop = num_toks + 2 # The added number doesn't matter except when it does...             # <<<<<<<<<<<<<<
 * 
 *         popped_to_begin_token, current_token_is_first = self._pop_tokens(num_to_pop)
 */
    __pyx_v_num_to_pop = (__pyx_v_num_toks + 2);

    /* "typped/lexer.py":1126
 *         num_to_pop = num_toks + num_buffered_after_current + 1 # new curr is rescanned
 * 
 *         if num_is_raw:             # <<<<<<<<<<<<<<
 *             # Works with lex.all_token_count in production_rules, but why +2?
 *             # Setting max_peek_tokens doesn't affect it.  Clean up code.
 */
  }

  /* "typped/lexer.py":1131
 *             num_to_pop = num_toks + 2 # The added number doesn't matter except when it does...
 * 
 *         popped_to_begin_token, current_token_is_first = self._pop_tokens(num_to_pop)             # <<<<<<<<<<<<<<
 * 
 *         # Re-scan to get the new current token.
 */
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->_pop_tokens(__pyx_v_self, __pyx_v_num_to_pop); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1131, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    #if !CYTHON_COMPILING_IN_PYPY
    Py_ssize_t size = Py_SIZE(sequence);
    #else
    Py_ssize_t size = PySequence_Size(sequence);
    #endif
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1131, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_5 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_t_2);
    #else
    __pyx_t_5 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1131, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1131, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_8 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1131, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_11 = Py_TYPE(__pyx_t_8)->tp_iternext;
    index = 0; __pyx_t_5 = __pyx_t_11(__pyx_t_8); if (unlikely(!__pyx_t_5)) goto __pyx_L7_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_5);
    index = 1; __pyx_t_2 = __pyx_t_11(__pyx_t_8); if (unlikely(!__pyx_t_2)) goto __pyx_L7_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_11(__pyx_t_8), 2) < 0) __PYX_ERR(0, 1131, __pyx_L1_error)
    __pyx_t_11 = NULL;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    goto __pyx_L8_unpacking_done;
    __pyx_L7_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_11 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1131, __pyx_L1_error)
    __pyx_L8_unpacking_done:;
  }
  __pyx_v_popped_to_begin_token = __pyx_t_5;
  __pyx_t_5 = 0;
  __pyx_v_current_token_is_first = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "typped/lexer.py":1134
 * 
 *         # Re-scan to get the new current token.
 *         if not popped_to_begin_token:             # <<<<<<<<<<<<<<
 *             self.next()
 * 
 */
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_popped_to_begin_token); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1134, __pyx_L1_error)
  __pyx_t_12 = ((!__pyx_t_9) != 0);
  if (__pyx_t_12) {

    /* "typped/lexer.py":1135
 *         # Re-scan to get the new current token.
 *         if not popped_to_begin_token:
 *             self.next()             # <<<<<<<<<<<<<<
 * 
 *         # Reset some state variables.
 */
    __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->next(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1135, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":1134
 * 
 *         # Re-scan to get the new current token.
 *         if not popped_to_begin_token:             # <<<<<<<<<<<<<<
 *             self.next()
 * 
 */
  }

  /* "typped/lexer.py":1138
 * 
 *         # Reset some state variables.
 *         if popped_to_begin_token:             # <<<<<<<<<<<<<<
 *             self.peek().is_first = True
 *             self._returned_first_token = False
 */
  __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_v_popped_to_begin_token); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 1138, __pyx_L1_error)
  if (__pyx_t_12) {

    /* "typped/lexer.py":1139
 *         # Reset some state variables.
 *         if popped_to_begin_token:
 *             self.peek().is_first = True             # <<<<<<<<<<<<<<
 *             self._returned_first_token = False
 *             self._curr_token_is_first = False
 */
    __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->peek(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1139, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (__Pyx_PyObject_SetAttrStr(__pyx_t_1, __pyx_n_s_is_first, Py_True) < 0) __PYX_ERR(0, 1139, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":1140
 *         if popped_to_begin_token:
 *             self.peek().is_first = True
 *             self._returned_first_token = False             # <<<<<<<<<<<<<<
 *             self._curr_token_is_first = False
 *         elif current_token_is_first:
 */
    __pyx_v_self->_returned_first_token = 0;

    /* "typped/lexer.py":1141
 *             self.peek().is_first = True
 *             self._returned_first_token = False
 *             self._curr_token_is_first = False             # <<<<<<<<<<<<<<
 *         elif current_token_is_first:
 *             self.token.is_first = True
 */
    __pyx_v_self->_curr_token_is_first = 0;

    /* "typped/lexer.py":1138
 * 
 *         # Reset some state variables.
 *         if popped_to_begin_token:             # <<<<<<<<<<<<<<
 *             self.peek().is_first = True
 *             self._returned_first_token = False
 */
    goto __pyx_L10;
  }

  /* "typped/lexer.py":1142
 *             self._returned_first_token = False
 *             self._curr_token_is_first = False
 *         elif current_token_is_first:             # <<<<<<<<<<<<<<
 *             self.token.is_first = True
 *             self._returned_first_token = True
 */
  __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_v_current_token_is_first); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 1142, __pyx_L1_error)
  if (__pyx_t_12) {

    /* "typped/lexer.py":1143
 *             self._curr_token_is_first = False
 *         elif current_token_is_first:
 *             self.token.is_first = True             # <<<<<<<<<<<<<<
 *             self._returned_first_token = True
 *             self._curr_token_is_first = True
 */
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_self->token, __pyx_n_s_is_first, Py_True) < 0) __PYX_ERR(0, 1143, __pyx_L1_error)

    /* "typped/lexer.py":1144
 *         elif current_token_is_first:
 *             self.token.is_first = True
 *             self._returned_first_token = True             # <<<<<<<<<<<<<<
 *             self._curr_token_is_first = True
 *         self.already_returned_end_token = self.token.is_end_token()
 */
    __pyx_v_self->_returned_first_token = 1;

    /* "typped/lexer.py":1145
 *             self.token.is_first = True
 *             self._returned_first_token = True
 *             self._curr_token_is_first = True             # <<<<<<<<<<<<<<
 *         self.already_returned_end_token = self.token.is_end_token()
 * 
 */
    __pyx_v_self->_curr_token_is_first = 1;

    /* "typped/lexer.py":1142
 *             self._returned_first_token = False
 *             self._curr_token_is_first = False
 *         elif current_token_is_first:             # <<<<<<<<<<<<<<
 *             self.token.is_first = True
 *             self._returned_first_token = True
 */
  }
  __pyx_L10:;

  /* "typped/lexer.py":1146
 *             self._returned_first_token = True
 *             self._curr_token_is_first = True
 *         self.already_returned_end_token = self.token.is_end_token()             # <<<<<<<<<<<<<<
 * 
 *         return self.token
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token, __pyx_n_s_is_end_token); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1146, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (__pyx_t_5) {
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1146, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else {
    __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1146, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_12 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1146, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_self->already_returned_end_token = __pyx_t_12;

  /* "typped/lexer.py":1148
 *         self.already_returned_end_token = self.token.is_end_token()
 * 
 *         return self.token             # <<<<<<<<<<<<<<
 * 
 *     def get_current_state(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->token);
  __pyx_r = __pyx_v_self->token;
  goto __pyx_L0;

  /* "typped/lexer.py":1061
 *         return popped_to_begin_token, current_token_is_first
 * 
 *     def go_back(self, num_toks=1, num_is_raw=False):             # <<<<<<<<<<<<<<
 *         """This method allows the lexer to go back in the token buffer by
 *         `num_toks` tokens.  The call `go_back(n)` will undo the effects of the
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("typped.lexer.Lexer.go_back", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_token_buffer);
  __Pyx_XDECREF(__pyx_v_popped_to_begin_token);
  __Pyx_XDECREF(__pyx_v_current_token_is_first);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_21go_back(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_20go_back[] = "This method allows the lexer to go back in the token buffer by\n        `num_toks` tokens.  The call `go_back(n)` will undo the effects of the\n        last `n` calls to `next`.  This operation is different from the usual\n        pushback operations because the program text will be re-scanned for the\n        current token and later tokens (rather than simply backing up to\n        already-scanned tokens and saving the most-recent as lookahead tokens,\n        like with `move_back`).\n\n        Going back one with `go_back(1)` or just `go_back()` results in the\n        current token being set back to the previous token and also re-scanned\n        from the original text.  Calling `go_back(0)` just re-scans the current\n        token (and flushes any tokens in the lookahead buffer).  Values greater\n        than one go farther back in the token stream.  Attempts to go back\n        before the beginning of the program text go back to the beginning and\n        stop there.\n\n        This method returns the current token after any re-scanning.\n\n        Negative numbers of tokens can be specified.  When `num_toks <= 0` the\n        operation only applies to saved loohahead tokens (if there are any).\n        The call `go_back(-1)` flushes all lookahead tokens saved in the buffer\n        except the one immediately following the current token.  The current\n        offset in the token buffer never moves forward when this method is\n        called; only can only go back or stay the same.\n\n        If `num_is_raw` is true then `num_toks` is interpreted as the actual\n        number of tokens to go back, including any in the buffer (which are\n        otherwise handled automatically).  This can be useful when looking at\n        `lex.all_token_count` to determine how far to go back and undo\n        something.\n\n        Going back with re-scanning can be necessary when token definitions\n        themselves change dynamically, such as by semantic actions.  For\n       "" example, a declaration of the string \"my_fun\" as a variable might\n        dynamically add a token for that new variable, which would then stop it\n        from matching a general identifier with a lower on_ties value (set to,\n        say, -1).  This kind of thing is also needed when swapping token\n        tables, such as in parsing a sublanguage with a different parser.\n        Since the sublanguage has a different collection of tokens the\n        lookahead buffer must be re-scanned based on those tokens.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_21go_back = {"go_back", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_21go_back, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_20go_back};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_21go_back(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  long __pyx_v_num_toks;
  int __pyx_v_num_is_raw;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("go_back (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_num_toks,&__pyx_n_s_num_is_raw,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_num_toks);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_num_is_raw);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "go_back") < 0)) __PYX_ERR(0, 1061, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_num_toks = __Pyx_PyInt_As_long(values[0]); if (unlikely((__pyx_v_num_toks == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1061, __pyx_L3_error)
    } else {
      __pyx_v_num_toks = ((long)1);
    }
    if (values[1]) {
      __pyx_v_num_is_raw = __Pyx_PyObject_IsTrue(values[1]); if (unlikely((__pyx_v_num_is_raw == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1061, __pyx_L3_error)
    } else {
      __pyx_v_num_is_raw = ((int)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("go_back", 0, 0, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1061, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.go_back", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_20go_back(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_num_toks, __pyx_v_num_is_raw);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_20go_back(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, long __pyx_v_num_toks, int __pyx_v_num_is_raw) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_go_back __pyx_t_2;
  __Pyx_RefNannySetupContext("go_back", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 2;
  __pyx_t_2.num_toks = __pyx_v_num_toks;
  __pyx_t_2.num_is_raw = __pyx_v_num_is_raw;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_Lexer->go_back(__pyx_v_self, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1061, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.go_back", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1150
 *         return self.token
 * 
 *     def get_current_state(self):             # <<<<<<<<<<<<<<
 *         """Get a lexer state that can be returned to with `go_back_to_state`.
 *         States become invalid after the text is reset, but no check is made."""
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_23get_current_state(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_22get_current_state[] = "Get a lexer state that can be returned to with `go_back_to_state`.\n        States become invalid after the text is reset, but no check is made.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_23get_current_state = {"get_current_state", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_23get_current_state, METH_NOARGS, __pyx_doc_6typped_5lexer_5Lexer_22get_current_state};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_23get_current_state(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_current_state (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_22get_current_state(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_22get_current_state(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("get_current_state", 0);

  /* "typped/lexer.py":1153
 *         """Get a lexer state that can be returned to with `go_back_to_state`.
 *         States become invalid after the text is reset, but no check is made."""
 *         return self.token_buffer.get_state()             # <<<<<<<<<<<<<<
 * 
 *     def go_back_to_state(self, state):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_self->token_buffer->__pyx_vtab)->get_state(__pyx_v_self->token_buffer, 0)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1153, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1150
 *         return self.token
 * 
 *     def get_current_state(self):             # <<<<<<<<<<<<<<
 *         """Get a lexer state that can be returned to with `go_back_to_state`.
 *         States become invalid after the text is reset, but no check is made."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.get_current_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1155
 *         return self.token_buffer.get_state()
 * 
 *     def go_back_to_state(self, state):             # <<<<<<<<<<<<<<
 *         """Return the lexer to the state `state` saved from a previous call to
 *         `get_current_state`."""
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_25go_back_to_state(PyObject *__pyx_v_self, PyObject *__pyx_v_state); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_24go_back_to_state[] = "Return the lexer to the state `state` saved from a previous call to\n        `get_current_state`.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_25go_back_to_state = {"go_back_to_state", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_25go_back_to_state, METH_O, __pyx_doc_6typped_5lexer_5Lexer_24go_back_to_state};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_25go_back_to_state(PyObject *__pyx_v_self, PyObject *__pyx_v_state) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("go_back_to_state (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_24go_back_to_state(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_state));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_24go_back_to_state(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_state) {
  long __pyx_v_index_to_go_back_to;
  long __pyx_v_num_to_go_back;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_next __pyx_t_4;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_go_back __pyx_t_5;
  __Pyx_RefNannySetupContext("go_back_to_state", 0);

  /* "typped/lexer.py":1158
 *         """Return the lexer to the state `state` saved from a previous call to
 *         `get_current_state`."""
 *         index_to_go_back_to = self.token_buffer.state_to_offset(state)             # <<<<<<<<<<<<<<
 *         num_to_go_back = self.token_buffer.current_offset - index_to_go_back_to
 *         if num_to_go_back < 0:
 */
  __pyx_t_1 = __Pyx_PyInt_As_long(__pyx_v_state); if (unlikely((__pyx_t_1 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1158, __pyx_L1_error)
  __pyx_v_index_to_go_back_to = ((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_self->token_buffer->__pyx_vtab)->state_to_offset(__pyx_v_self->token_buffer, __pyx_t_1, 0);

  /* "typped/lexer.py":1159
 *         `get_current_state`."""
 *         index_to_go_back_to = self.token_buffer.state_to_offset(state)
 *         num_to_go_back = self.token_buffer.current_offset - index_to_go_back_to             # <<<<<<<<<<<<<<
 *         if num_to_go_back < 0:
 *             self.next(-num_to_go_back)
 */
  __pyx_v_num_to_go_back = (__pyx_v_self->token_buffer->current_offset - __pyx_v_index_to_go_back_to);

  /* "typped/lexer.py":1160
 *         index_to_go_back_to = self.token_buffer.state_to_offset(state)
 *         num_to_go_back = self.token_buffer.current_offset - index_to_go_back_to
 *         if num_to_go_back < 0:             # <<<<<<<<<<<<<<
 *             self.next(-num_to_go_back)
 *         else:
 */
  __pyx_t_2 = ((__pyx_v_num_to_go_back < 0) != 0);
  if (__pyx_t_2) {

    /* "typped/lexer.py":1161
 *         num_to_go_back = self.token_buffer.current_offset - index_to_go_back_to
 *         if num_to_go_back < 0:
 *             self.next(-num_to_go_back)             # <<<<<<<<<<<<<<
 *         else:
 *             self.go_back(num_to_go_back)
 */
    __pyx_t_4.__pyx_n = 1;
    __pyx_t_4.num = (-__pyx_v_num_to_go_back);
    __pyx_t_3 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->next(__pyx_v_self, 0, &__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1161, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "typped/lexer.py":1160
 *         index_to_go_back_to = self.token_buffer.state_to_offset(state)
 *         num_to_go_back = self.token_buffer.current_offset - index_to_go_back_to
 *         if num_to_go_back < 0:             # <<<<<<<<<<<<<<
 *             self.next(-num_to_go_back)
 *         else:
 */
    goto __pyx_L3;
  }

  /* "typped/lexer.py":1163
 *             self.next(-num_to_go_back)
 *         else:
 *             self.go_back(num_to_go_back)             # <<<<<<<<<<<<<<
 *         return self.token
 * 
 */
  /*else*/ {
    __pyx_t_5.__pyx_n = 1;
    __pyx_t_5.num_toks = __pyx_v_num_to_go_back;
    __pyx_t_3 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->go_back(__pyx_v_self, 0, &__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1163, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  }
  __pyx_L3:;

  /* "typped/lexer.py":1164
 *         else:
 *             self.go_back(num_to_go_back)
 *         return self.token             # <<<<<<<<<<<<<<
 * 
 *     #
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->token);
  __pyx_r = __pyx_v_self->token;
  goto __pyx_L0;

  /* "typped/lexer.py":1155
 *         return self.token_buffer.get_state()
 * 
 *     def go_back_to_state(self, state):             # <<<<<<<<<<<<<<
 *         """Return the lexer to the state `state` saved from a previous call to
 *         `get_current_state`."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("typped.lexer.Lexer.go_back_to_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1170
 *     #
 * 
 *     def curr_token_is_begin(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` method) is
 *         the begin-token."""
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_27curr_token_is_begin(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_curr_token_is_begin(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("curr_token_is_begin", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_curr_token_is_begin); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1170, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_27curr_token_is_begin)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1170, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1170, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":1173
 *         """True if `self.token` (the last one returned by the `next` method) is
 *         the begin-token."""
 *         return self.token.is_begin_token()             # <<<<<<<<<<<<<<
 * 
 *     def curr_token_is_first(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token, __pyx_n_s_is_begin_token); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1173, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (__pyx_t_3) {
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1173, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1173, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1170
 *     #
 * 
 *     def curr_token_is_begin(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` method) is
 *         the begin-token."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("typped.lexer.Lexer.curr_token_is_begin", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_27curr_token_is_begin(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_26curr_token_is_begin[] = "True if `self.token` (the last one returned by the `next` method) is\n        the begin-token.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_27curr_token_is_begin = {"curr_token_is_begin", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_27curr_token_is_begin, METH_NOARGS, __pyx_doc_6typped_5lexer_5Lexer_26curr_token_is_begin};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_27curr_token_is_begin(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("curr_token_is_begin (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_26curr_token_is_begin(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_26curr_token_is_begin(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("curr_token_is_begin", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_f_6typped_5lexer_5Lexer_curr_token_is_begin(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1170, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.curr_token_is_begin", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1175
 *         return self.token.is_begin_token()
 * 
 *     def curr_token_is_first(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` function)
 *         is the first actual token in the currently-set program text.  Resetting
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_29curr_token_is_first(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_28curr_token_is_first[] = "True if `self.token` (the last one returned by the `next` function)\n        is the first actual token in the currently-set program text.  Resetting\n        the text resets this.  This value is also set as the attribute\n        `is_first` on all returned tokens.  This is useful, for example, for\n        finding indentation levels (along with `ignored_before_curr`).";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_29curr_token_is_first = {"curr_token_is_first", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_29curr_token_is_first, METH_NOARGS, __pyx_doc_6typped_5lexer_5Lexer_28curr_token_is_first};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_29curr_token_is_first(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("curr_token_is_first (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_28curr_token_is_first(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_28curr_token_is_first(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("curr_token_is_first", 0);

  /* "typped/lexer.py":1181
 *         `is_first` on all returned tokens.  This is useful, for example, for
 *         finding indentation levels (along with `ignored_before_curr`)."""
 *         return self.token.is_first             # <<<<<<<<<<<<<<
 * 
 *     def ignored_before_curr(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token, __pyx_n_s_is_first); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1181, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1175
 *         return self.token.is_begin_token()
 * 
 *     def curr_token_is_first(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` function)
 *         is the first actual token in the currently-set program text.  Resetting
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.curr_token_is_first", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1183
 *         return self.token.is_first
 * 
 *     def ignored_before_curr(self):             # <<<<<<<<<<<<<<
 *         """Return the list of all tokens ignored just before `self.token` (the
 *         last token returned by the `next` function).  Useful for enforcing
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_31ignored_before_curr(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_ignored_before_curr(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("ignored_before_curr", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_ignored_before_curr); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1183, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_31ignored_before_curr)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1183, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1183, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":1189
 *         `curr_token_is_first`. This list is also set as the attribute
 *         `ignored_before_tokens` on all returned tokens."""
 *         return self.token.ignored_before             # <<<<<<<<<<<<<<
 * 
 *     def curr_token_is_end(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token, __pyx_n_s_ignored_before); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1189, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1183
 *         return self.token.is_first
 * 
 *     def ignored_before_curr(self):             # <<<<<<<<<<<<<<
 *         """Return the list of all tokens ignored just before `self.token` (the
 *         last token returned by the `next` function).  Useful for enforcing
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("typped.lexer.Lexer.ignored_before_curr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_31ignored_before_curr(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_30ignored_before_curr[] = "Return the list of all tokens ignored just before `self.token` (the\n        last token returned by the `next` function).  Useful for enforcing\n        things like syntactic whitespace requirements, along with\n        `curr_token_is_first`. This list is also set as the attribute\n        `ignored_before_tokens` on all returned tokens.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_31ignored_before_curr = {"ignored_before_curr", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_31ignored_before_curr, METH_NOARGS, __pyx_doc_6typped_5lexer_5Lexer_30ignored_before_curr};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_31ignored_before_curr(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("ignored_before_curr (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_30ignored_before_curr(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_30ignored_before_curr(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("ignored_before_curr", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_f_6typped_5lexer_5Lexer_ignored_before_curr(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1183, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.ignored_before_curr", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1191
 *         return self.token.ignored_before
 * 
 *     def curr_token_is_end(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` method) is
 *         the end-token."""
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_33curr_token_is_end(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static int __pyx_f_6typped_5lexer_5Lexer_curr_token_is_end(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("curr_token_is_end", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_curr_token_is_end); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1191, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_33curr_token_is_end)) {
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1191, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1191, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_5 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1191, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_r = __pyx_t_5;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":1194
 *         """True if `self.token` (the last one returned by the `next` method) is
 *         the end-token."""
 *         return self.token.is_end_token()             # <<<<<<<<<<<<<<
 * 
 *     def is_defined_token_label(self, token_label):
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token, __pyx_n_s_is_end_token); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1194, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (__pyx_t_3) {
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1194, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1194, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_5 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1194, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_5;
  goto __pyx_L0;

  /* "typped/lexer.py":1191
 *         return self.token.ignored_before
 * 
 *     def curr_token_is_end(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` method) is
 *         the end-token."""
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_WriteUnraisable("typped.lexer.Lexer.curr_token_is_end", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_33curr_token_is_end(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_32curr_token_is_end[] = "True if `self.token` (the last one returned by the `next` method) is\n        the end-token.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_33curr_token_is_end = {"curr_token_is_end", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_33curr_token_is_end, METH_NOARGS, __pyx_doc_6typped_5lexer_5Lexer_32curr_token_is_end};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_33curr_token_is_end(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("curr_token_is_end (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_32curr_token_is_end(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_32curr_token_is_end(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("curr_token_is_end", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_f_6typped_5lexer_5Lexer_curr_token_is_end(__pyx_v_self, 1)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1191, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.curr_token_is_end", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1196
 *         return self.token.is_end_token()
 * 
 *     def is_defined_token_label(self, token_label):             # <<<<<<<<<<<<<<
 *         """Return true if `token` is currently defined as a token label."""
 *         return self.token_table.is_defined_token_label()
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_35is_defined_token_label(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label); /*proto*/
static int __pyx_f_6typped_5lexer_5Lexer_is_defined_token_label(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_token_label, int __pyx_skip_dispatch) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("is_defined_token_label", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_is_defined_token_label); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1196, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_35is_defined_token_label)) {
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_token_label); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1196, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_token_label};
          __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1196, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_v_token_label};
          __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1196, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_GOTREF(__pyx_t_2);
        } else
        #endif
        {
          __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1196, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
          __Pyx_INCREF(__pyx_v_token_label);
          __Pyx_GIVEREF(__pyx_v_token_label);
          PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_v_token_label);
          __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1196, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely((__pyx_t_6 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1196, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_r = __pyx_t_6;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":1198
 *     def is_defined_token_label(self, token_label):
 *         """Return true if `token` is currently defined as a token label."""
 *         return self.token_table.is_defined_token_label()             # <<<<<<<<<<<<<<
 * 
 *     def last_n_tokens_original_text(self, n):
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self->token_table), __pyx_n_s_is_defined_token_label); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (__pyx_t_3) {
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1198, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1198, __pyx_L1_error)
  }
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_6 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_6;
  goto __pyx_L0;

  /* "typped/lexer.py":1196
 *         return self.token.is_end_token()
 * 
 *     def is_defined_token_label(self, token_label):             # <<<<<<<<<<<<<<
 *         """Return true if `token` is currently defined as a token label."""
 *         return self.token_table.is_defined_token_label()
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_WriteUnraisable("typped.lexer.Lexer.is_defined_token_label", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_35is_defined_token_label(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_34is_defined_token_label[] = "Return true if `token` is currently defined as a token label.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_35is_defined_token_label = {"is_defined_token_label", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_35is_defined_token_label, METH_O, __pyx_doc_6typped_5lexer_5Lexer_34is_defined_token_label};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_35is_defined_token_label(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_defined_token_label (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_token_label), (&PyString_Type), 1, "token_label", 1))) __PYX_ERR(0, 1196, __pyx_L1_error)
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_34is_defined_token_label(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject*)__pyx_v_token_label));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_34is_defined_token_label(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("is_defined_token_label", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_f_6typped_5lexer_5Lexer_is_defined_token_label(__pyx_v_self, __pyx_v_token_label, 1)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1196, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.is_defined_token_label", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1200
 *         return self.token_table.is_defined_token_label()
 * 
 *     def last_n_tokens_original_text(self, n):             # <<<<<<<<<<<<<<
 *         """Returns the original text parsed by the last `n` tokens (back from
 *         and including the current token).  This routine is mainly used to make
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_37last_n_tokens_original_text(PyObject *__pyx_v_self, PyObject *__pyx_v_n); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_36last_n_tokens_original_text[] = "Returns the original text parsed by the last `n` tokens (back from\n        and including the current token).  This routine is mainly used to make\n        error messages more helpful.  It uses the token attribute\n        `original_matched_string` and the saved tokens in the token buffer.\n        (which must be large enough for `n`).";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_37last_n_tokens_original_text = {"last_n_tokens_original_text", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_37last_n_tokens_original_text, METH_O, __pyx_doc_6typped_5lexer_5Lexer_36last_n_tokens_original_text};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_37last_n_tokens_original_text(PyObject *__pyx_v_self, PyObject *__pyx_v_n) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("last_n_tokens_original_text (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_36last_n_tokens_original_text(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_n));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_36last_n_tokens_original_text(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_n) {
  PyObject *__pyx_v_prev_tokens = NULL;
  PyObject *__pyx_v_string_list = NULL;
  PyObject *__pyx_v_full_string = NULL;
  PyObject *__pyx_v_t = NULL;
  PyObject *__pyx_v_s = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  Py_ssize_t __pyx_t_7;
  PyObject *(*__pyx_t_8)(PyObject *);
  __Pyx_RefNannySetupContext("last_n_tokens_original_text", 0);
  __Pyx_INCREF(__pyx_v_n);

  /* "typped/lexer.py":1208
 *         # TODO: Test this, code updated to use token_buffer class.
 *         # Could also print line numbers and stuff....
 *         n = min(n, self.token_buffer.num_saved_previous_tokens() + 1)             # <<<<<<<<<<<<<<
 *         prev_tokens = [self.token_buffer[t] for t in range(-n+1, 1)]
 *         string_list = [s.original_matched_string for s in prev_tokens]
 */
  __pyx_t_1 = (((struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer *)__pyx_v_self->token_buffer->__pyx_vtab)->num_saved_previous_tokens(__pyx_v_self->token_buffer, 0) + 1);
  __Pyx_INCREF(__pyx_v_n);
  __pyx_t_2 = __pyx_v_n;
  __pyx_t_4 = __Pyx_PyInt_From_long(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_4, __pyx_t_2, Py_LT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (__pyx_t_6) {
    __pyx_t_5 = __Pyx_PyInt_From_long(__pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1208, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_3 = __pyx_t_5;
    __pyx_t_5 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_3 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __pyx_t_3;
  __Pyx_INCREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF_SET(__pyx_v_n, __pyx_t_2);
  __pyx_t_2 = 0;

  /* "typped/lexer.py":1209
 *         # Could also print line numbers and stuff....
 *         n = min(n, self.token_buffer.num_saved_previous_tokens() + 1)
 *         prev_tokens = [self.token_buffer[t] for t in range(-n+1, 1)]             # <<<<<<<<<<<<<<
 *         string_list = [s.original_matched_string for s in prev_tokens]
 *         full_string = "".join(string_list)
 */
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Negative(__pyx_v_n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = __Pyx_PyInt_AddObjC(__pyx_t_3, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_5);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_5);
  __Pyx_INCREF(__pyx_int_1);
  __Pyx_GIVEREF(__pyx_int_1);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_int_1);
  __pyx_t_5 = 0;
  __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_range, __pyx_t_3, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (likely(PyList_CheckExact(__pyx_t_5)) || PyTuple_CheckExact(__pyx_t_5)) {
    __pyx_t_3 = __pyx_t_5; __Pyx_INCREF(__pyx_t_3); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1209, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1209, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(PyList_CheckExact(__pyx_t_3))) {
        if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_5); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 1209, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1209, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_5); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 1209, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1209, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_3);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(exc_type == PyExc_StopIteration || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1209, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = PyObject_GetItem(((PyObject *)__pyx_v_self->token_buffer), __pyx_v_t); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1209, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_2, (PyObject*)__pyx_t_5))) __PYX_ERR(0, 1209, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_prev_tokens = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "typped/lexer.py":1210
 *         n = min(n, self.token_buffer.num_saved_previous_tokens() + 1)
 *         prev_tokens = [self.token_buffer[t] for t in range(-n+1, 1)]
 *         string_list = [s.original_matched_string for s in prev_tokens]             # <<<<<<<<<<<<<<
 *         full_string = "".join(string_list)
 *         return full_string
 */
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1210, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __pyx_v_prev_tokens; __Pyx_INCREF(__pyx_t_3); __pyx_t_7 = 0;
  for (;;) {
    if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_3)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_5 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_5); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 1210, __pyx_L1_error)
    #else
    __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1210, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_s, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_s, __pyx_n_s_original_matched_string); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1210, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_2, (PyObject*)__pyx_t_5))) __PYX_ERR(0, 1210, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_string_list = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "typped/lexer.py":1211
 *         prev_tokens = [self.token_buffer[t] for t in range(-n+1, 1)]
 *         string_list = [s.original_matched_string for s in prev_tokens]
 *         full_string = "".join(string_list)             # <<<<<<<<<<<<<<
 *         return full_string
 * 
 */
  __pyx_t_2 = __Pyx_PyString_Join(__pyx_kp_s__21, __pyx_v_string_list); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1211, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_full_string = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "typped/lexer.py":1212
 *         string_list = [s.original_matched_string for s in prev_tokens]
 *         full_string = "".join(string_list)
 *         return full_string             # <<<<<<<<<<<<<<
 * 
 *     def get_unprocessed_text(self, peek=1):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_full_string);
  __pyx_r = __pyx_v_full_string;
  goto __pyx_L0;

  /* "typped/lexer.py":1200
 *         return self.token_table.is_defined_token_label()
 * 
 *     def last_n_tokens_original_text(self, n):             # <<<<<<<<<<<<<<
 *         """Returns the original text parsed by the last `n` tokens (back from
 *         and including the current token).  This routine is mainly used to make
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("typped.lexer.Lexer.last_n_tokens_original_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_prev_tokens);
  __Pyx_XDECREF(__pyx_v_string_list);
  __Pyx_XDECREF(__pyx_v_full_string);
  __Pyx_XDECREF(__pyx_v_t);
  __Pyx_XDECREF(__pyx_v_s);
  __Pyx_XDECREF(__pyx_v_n);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1214
 *         return full_string
 * 
 *     def get_unprocessed_text(self, peek=1):             # <<<<<<<<<<<<<<
 *         """Return all the text that is set but not yet processed.  Returns
 *         `None` if no text is currently set.  The current token is assumed
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_39get_unprocessed_text(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_38get_unprocessed_text[] = "Return all the text that is set but not yet processed.  Returns\n        `None` if no text is currently set.  The current token is assumed\n        to have been processed.\n\n        By default this is relative to the token at a peek of `1`, but the\n        `peek` number can be set to a previous or later one if available in the\n        buffer.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_39get_unprocessed_text = {"get_unprocessed_text", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_39get_unprocessed_text, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_38get_unprocessed_text};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_39get_unprocessed_text(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_peek = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_unprocessed_text (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_peek,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)__pyx_int_1);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_peek);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_unprocessed_text") < 0)) __PYX_ERR(0, 1214, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_peek = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("get_unprocessed_text", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1214, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.get_unprocessed_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_38get_unprocessed_text(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_peek);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_38get_unprocessed_text(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_peek) {
  PyObject *__pyx_v_text = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_peek __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("get_unprocessed_text", 0);

  /* "typped/lexer.py":1222
 *         `peek` number can be set to a previous or later one if available in the
 *         buffer."""
 *         if not self.text_is_set:             # <<<<<<<<<<<<<<
 *             return None
 *         text = self.program[self.peek(peek).char_index_in_program:]
 */
  __pyx_t_1 = ((!(__pyx_v_self->text_is_set != 0)) != 0);
  if (__pyx_t_1) {

    /* "typped/lexer.py":1223
 *         buffer."""
 *         if not self.text_is_set:
 *             return None             # <<<<<<<<<<<<<<
 *         text = self.program[self.peek(peek).char_index_in_program:]
 *         return text
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_None);
    __pyx_r = Py_None;
    goto __pyx_L0;

    /* "typped/lexer.py":1222
 *         `peek` number can be set to a previous or later one if available in the
 *         buffer."""
 *         if not self.text_is_set:             # <<<<<<<<<<<<<<
 *             return None
 *         text = self.program[self.peek(peek).char_index_in_program:]
 */
  }

  /* "typped/lexer.py":1224
 *         if not self.text_is_set:
 *             return None
 *         text = self.program[self.peek(peek).char_index_in_program:]             # <<<<<<<<<<<<<<
 *         return text
 * 
 */
  __pyx_t_3.__pyx_n = 1;
  __pyx_t_3.num_toks = __pyx_v_peek;
  __pyx_t_2 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->peek(__pyx_v_self, 0, &__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1224, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_char_index_in_program); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1224, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetSlice(__pyx_v_self->program, 0, 0, &__pyx_t_4, NULL, NULL, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1224, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_text = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "typped/lexer.py":1225
 *             return None
 *         text = self.program[self.peek(peek).char_index_in_program:]
 *         return text             # <<<<<<<<<<<<<<
 * 
 *     def get_processed_text(self, peek=1):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_text);
  __pyx_r = __pyx_v_text;
  goto __pyx_L0;

  /* "typped/lexer.py":1214
 *         return full_string
 * 
 *     def get_unprocessed_text(self, peek=1):             # <<<<<<<<<<<<<<
 *         """Return all the text that is set but not yet processed.  Returns
 *         `None` if no text is currently set.  The current token is assumed
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("typped.lexer.Lexer.get_unprocessed_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_text);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1227
 *         return text
 * 
 *     def get_processed_text(self, peek=1):             # <<<<<<<<<<<<<<
 *         """Return all the text that is set and has been processed.  Returns
 *         `None` if no text is currently set.  The current token is assumed
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_41get_processed_text(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_40get_processed_text[] = "Return all the text that is set and has been processed.  Returns\n        `None` if no text is currently set.  The current token is assumed\n        to have been processed.\n\n        By default this is relative to the current peek token, but the `peek`\n        number can be set to a previous or later one if available in the\n        buffer.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_41get_processed_text = {"get_processed_text", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_41get_processed_text, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_40get_processed_text};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_41get_processed_text(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_peek = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_processed_text (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_peek,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)__pyx_int_1);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_peek);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_processed_text") < 0)) __PYX_ERR(0, 1227, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_peek = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("get_processed_text", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1227, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.get_processed_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_40get_processed_text(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_peek);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_40get_processed_text(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_peek) {
  PyObject *__pyx_v_text = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_peek __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("get_processed_text", 0);

  /* "typped/lexer.py":1235
 *         number can be set to a previous or later one if available in the
 *         buffer."""
 *         if not self.text_is_set:             # <<<<<<<<<<<<<<
 *             return None
 *         text = self.program[:self.peek(peek).char_index_in_program]
 */
  __pyx_t_1 = ((!(__pyx_v_self->text_is_set != 0)) != 0);
  if (__pyx_t_1) {

    /* "typped/lexer.py":1236
 *         buffer."""
 *         if not self.text_is_set:
 *             return None             # <<<<<<<<<<<<<<
 *         text = self.program[:self.peek(peek).char_index_in_program]
 *         return text
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_None);
    __pyx_r = Py_None;
    goto __pyx_L0;

    /* "typped/lexer.py":1235
 *         number can be set to a previous or later one if available in the
 *         buffer."""
 *         if not self.text_is_set:             # <<<<<<<<<<<<<<
 *             return None
 *         text = self.program[:self.peek(peek).char_index_in_program]
 */
  }

  /* "typped/lexer.py":1237
 *         if not self.text_is_set:
 *             return None
 *         text = self.program[:self.peek(peek).char_index_in_program]             # <<<<<<<<<<<<<<
 *         return text
 * 
 */
  __pyx_t_3.__pyx_n = 1;
  __pyx_t_3.num_toks = __pyx_v_peek;
  __pyx_t_2 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->peek(__pyx_v_self, 0, &__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1237, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_char_index_in_program); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1237, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetSlice(__pyx_v_self->program, 0, 0, NULL, &__pyx_t_4, NULL, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1237, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_text = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "typped/lexer.py":1238
 *             return None
 *         text = self.program[:self.peek(peek).char_index_in_program]
 *         return text             # <<<<<<<<<<<<<<
 * 
 *     #
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_text);
  __pyx_r = __pyx_v_text;
  goto __pyx_L0;

  /* "typped/lexer.py":1227
 *         return text
 * 
 *     def get_processed_text(self, peek=1):             # <<<<<<<<<<<<<<
 *         """Return all the text that is set and has been processed.  Returns
 *         `None` if no text is currently set.  The current token is assumed
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("typped.lexer.Lexer.get_processed_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_text);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1244
 *     #
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """A convenience method to define a token. It calls the corresponding
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_43def_token(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_42def_token[] = "A convenience method to define a token. It calls the corresponding\n        `def_token` method of the current `TokenTable` instance associated with\n        the lexer, and does nothing else.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_43def_token = {"def_token", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_43def_token, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_42def_token};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_43def_token(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_token_label = 0;
  PyObject *__pyx_v_regex_string = 0;
  PyObject *__pyx_v_on_ties = 0;
  PyObject *__pyx_v_ignore = 0;
  PyObject *__pyx_v_matcher_options = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("def_token (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_token_label,&__pyx_n_s_regex_string,&__pyx_n_s_on_ties,&__pyx_n_s_ignore,&__pyx_n_s_matcher_options,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[2] = ((PyObject *)__pyx_int_0);
    values[3] = ((PyObject *)Py_False);

    /* "typped/lexer.py":1245
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,
 *                   matcher_options=None):             # <<<<<<<<<<<<<<
 *         """A convenience method to define a token. It calls the corresponding
 *         `def_token` method of the current `TokenTable` instance associated with
 */
    values[4] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_token_label)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_regex_string)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("def_token", 0, 2, 5, 1); __PYX_ERR(0, 1244, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_on_ties);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_ignore);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_matcher_options);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "def_token") < 0)) __PYX_ERR(0, 1244, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_token_label = values[0];
    __pyx_v_regex_string = values[1];
    __pyx_v_on_ties = values[2];
    __pyx_v_ignore = values[3];
    __pyx_v_matcher_options = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("def_token", 0, 2, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1244, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.def_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_42def_token(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_token_label, __pyx_v_regex_string, __pyx_v_on_ties, __pyx_v_ignore, __pyx_v_matcher_options);

  /* "typped/lexer.py":1244
 *     #
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """A convenience method to define a token. It calls the corresponding
 */

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_42def_token(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label, PyObject *__pyx_v_regex_string, PyObject *__pyx_v_on_ties, PyObject *__pyx_v_ignore, PyObject *__pyx_v_matcher_options) {
  PyObject *__pyx_v_new_subclass = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  struct __pyx_opt_args_6typped_5lexer_10TokenTable_def_token __pyx_t_3;
  __Pyx_RefNannySetupContext("def_token", 0);

  /* "typped/lexer.py":1249
 *         `def_token` method of the current `TokenTable` instance associated with
 *         the lexer, and does nothing else."""
 *         new_subclass = self.token_table.def_token(token_label, regex_string,             # <<<<<<<<<<<<<<
 *                     on_ties=on_ties, ignore=ignore, matcher_options=matcher_options)
 *         return new_subclass
 */
  if (!(likely(PyString_CheckExact(__pyx_v_token_label))||((__pyx_v_token_label) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "str", Py_TYPE(__pyx_v_token_label)->tp_name), 0))) __PYX_ERR(0, 1249, __pyx_L1_error)

  /* "typped/lexer.py":1250
 *         the lexer, and does nothing else."""
 *         new_subclass = self.token_table.def_token(token_label, regex_string,
 *                     on_ties=on_ties, ignore=ignore, matcher_options=matcher_options)             # <<<<<<<<<<<<<<
 *         return new_subclass
 * 
 */
  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_ignore); if (unlikely((__pyx_t_1 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1250, __pyx_L1_error)

  /* "typped/lexer.py":1249
 *         `def_token` method of the current `TokenTable` instance associated with
 *         the lexer, and does nothing else."""
 *         new_subclass = self.token_table.def_token(token_label, regex_string,             # <<<<<<<<<<<<<<
 *                     on_ties=on_ties, ignore=ignore, matcher_options=matcher_options)
 *         return new_subclass
 */
  __pyx_t_3.__pyx_n = 3;
  __pyx_t_3.on_ties = __pyx_v_on_ties;
  __pyx_t_3.ignore = __pyx_t_1;
  __pyx_t_3.matcher_options = __pyx_v_matcher_options;
  __pyx_t_2 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenTable *)__pyx_v_self->token_table->__pyx_vtab)->def_token(__pyx_v_self->token_table, ((PyObject*)__pyx_v_token_label), __pyx_v_regex_string, 0, &__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1249, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_new_subclass = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "typped/lexer.py":1251
 *         new_subclass = self.token_table.def_token(token_label, regex_string,
 *                     on_ties=on_ties, ignore=ignore, matcher_options=matcher_options)
 *         return new_subclass             # <<<<<<<<<<<<<<
 * 
 *     def undef_token(self, token_label):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_new_subclass);
  __pyx_r = __pyx_v_new_subclass;
  goto __pyx_L0;

  /* "typped/lexer.py":1244
 *     #
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """A convenience method to define a token. It calls the corresponding
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("typped.lexer.Lexer.def_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_new_subclass);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1253
 *         return new_subclass
 * 
 *     def undef_token(self, token_label):             # <<<<<<<<<<<<<<
 *         """A convenience function to call the corresponding `undef_token` of
 *         the current `TokenTable` instance associated with the Lexer."""
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_45undef_token(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_44undef_token[] = "A convenience function to call the corresponding `undef_token` of\n        the current `TokenTable` instance associated with the Lexer.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_45undef_token = {"undef_token", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_45undef_token, METH_O, __pyx_doc_6typped_5lexer_5Lexer_44undef_token};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_45undef_token(PyObject *__pyx_v_self, PyObject *__pyx_v_token_label) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("undef_token (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_44undef_token(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_token_label));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_44undef_token(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("undef_token", 0);

  /* "typped/lexer.py":1256
 *         """A convenience function to call the corresponding `undef_token` of
 *         the current `TokenTable` instance associated with the Lexer."""
 *         self.token_table.undef_token(token_label)             # <<<<<<<<<<<<<<
 * 
 *     def def_ignored_token(self, token_label, regex_string, on_ties=0,
 */
  if (!(likely(PyString_CheckExact(__pyx_v_token_label))||((__pyx_v_token_label) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "str", Py_TYPE(__pyx_v_token_label)->tp_name), 0))) __PYX_ERR(0, 1256, __pyx_L1_error)
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenTable *)__pyx_v_self->token_table->__pyx_vtab)->undef_token(__pyx_v_self->token_table, ((PyObject*)__pyx_v_token_label), 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1256, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":1253
 *         return new_subclass
 * 
 *     def undef_token(self, token_label):             # <<<<<<<<<<<<<<
 *         """A convenience function to call the corresponding `undef_token` of
 *         the current `TokenTable` instance associated with the Lexer."""
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.undef_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1258
 *         self.token_table.undef_token(token_label)
 * 
 *     def def_ignored_token(self, token_label, regex_string, on_ties=0,             # <<<<<<<<<<<<<<
 *                           matcher_options=None):
 *         """A convenience function to define an ignored token without setting
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_47def_ignored_token(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_46def_ignored_token[] = "A convenience function to define an ignored token without setting\n        `ignore=True`.  This just calls `def_token` with the value set.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_47def_ignored_token = {"def_ignored_token", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_47def_ignored_token, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_46def_ignored_token};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_47def_ignored_token(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_token_label = 0;
  PyObject *__pyx_v_regex_string = 0;
  PyObject *__pyx_v_on_ties = 0;
  PyObject *__pyx_v_matcher_options = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("def_ignored_token (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_token_label,&__pyx_n_s_regex_string,&__pyx_n_s_on_ties,&__pyx_n_s_matcher_options,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)__pyx_int_0);

    /* "typped/lexer.py":1259
 * 
 *     def def_ignored_token(self, token_label, regex_string, on_ties=0,
 *                           matcher_options=None):             # <<<<<<<<<<<<<<
 *         """A convenience function to define an ignored token without setting
 *         `ignore=True`.  This just calls `def_token` with the value set."""
 */
    values[3] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_token_label)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_regex_string)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("def_ignored_token", 0, 2, 4, 1); __PYX_ERR(0, 1258, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_on_ties);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_matcher_options);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "def_ignored_token") < 0)) __PYX_ERR(0, 1258, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_token_label = values[0];
    __pyx_v_regex_string = values[1];
    __pyx_v_on_ties = values[2];
    __pyx_v_matcher_options = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("def_ignored_token", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1258, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.def_ignored_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_46def_ignored_token(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_token_label, __pyx_v_regex_string, __pyx_v_on_ties, __pyx_v_matcher_options);

  /* "typped/lexer.py":1258
 *         self.token_table.undef_token(token_label)
 * 
 *     def def_ignored_token(self, token_label, regex_string, on_ties=0,             # <<<<<<<<<<<<<<
 *                           matcher_options=None):
 *         """A convenience function to define an ignored token without setting
 */

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_46def_ignored_token(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label, PyObject *__pyx_v_regex_string, PyObject *__pyx_v_on_ties, PyObject *__pyx_v_matcher_options) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("def_ignored_token", 0);

  /* "typped/lexer.py":1262
 *         """A convenience function to define an ignored token without setting
 *         `ignore=True`.  This just calls `def_token` with the value set."""
 *         return self.def_token(token_label, regex_string, on_ties=on_ties, ignore=True,             # <<<<<<<<<<<<<<
 *                               matcher_options=matcher_options)
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_def_token); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1262, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1262, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_v_token_label);
  __Pyx_GIVEREF(__pyx_v_token_label);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_token_label);
  __Pyx_INCREF(__pyx_v_regex_string);
  __Pyx_GIVEREF(__pyx_v_regex_string);
  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_regex_string);
  __pyx_t_3 = PyDict_New(); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1262, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_on_ties, __pyx_v_on_ties) < 0) __PYX_ERR(0, 1262, __pyx_L1_error)
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_ignore, Py_True) < 0) __PYX_ERR(0, 1262, __pyx_L1_error)

  /* "typped/lexer.py":1263
 *         `ignore=True`.  This just calls `def_token` with the value set."""
 *         return self.def_token(token_label, regex_string, on_ties=on_ties, ignore=True,
 *                               matcher_options=matcher_options)             # <<<<<<<<<<<<<<
 * 
 *     def def_multi_tokens(self, tuple_list, **kwargs):
 */
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_matcher_options, __pyx_v_matcher_options) < 0) __PYX_ERR(0, 1262, __pyx_L1_error)

  /* "typped/lexer.py":1262
 *         """A convenience function to define an ignored token without setting
 *         `ignore=True`.  This just calls `def_token` with the value set."""
 *         return self.def_token(token_label, regex_string, on_ties=on_ties, ignore=True,             # <<<<<<<<<<<<<<
 *                               matcher_options=matcher_options)
 * 
 */
  __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1262, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1258
 *         self.token_table.undef_token(token_label)
 * 
 *     def def_ignored_token(self, token_label, regex_string, on_ties=0,             # <<<<<<<<<<<<<<
 *                           matcher_options=None):
 *         """A convenience function to define an ignored token without setting
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("typped.lexer.Lexer.def_ignored_token", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1265
 *                               matcher_options=matcher_options)
 * 
 *     def def_multi_tokens(self, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *         """A convenience function, to define multiple tokens at once.  Each element
 *         of the passed-in list should be a tuple containing the arguments to the
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_49def_multi_tokens(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_48def_multi_tokens[] = "A convenience function, to define multiple tokens at once.  Each element\n        of the passed-in list should be a tuple containing the arguments to the\n        ordinary `def_token` method.  Called in the same order as the list.  Any\n        keyword arguments are passed on to `def_token`.  Returns a tuple of the\n        defined tokens.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_49def_multi_tokens = {"def_multi_tokens", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_49def_multi_tokens, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_48def_multi_tokens};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_49def_multi_tokens(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_tuple_list = 0;
  PyObject *__pyx_v_kwargs = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("def_multi_tokens (wrapper)", 0);
  __pyx_v_kwargs = PyDict_New(); if (unlikely(!__pyx_v_kwargs)) return NULL;
  __Pyx_GOTREF(__pyx_v_kwargs);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_tuple_list,0};
    PyObject* values[1] = {0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_tuple_list)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, __pyx_v_kwargs, values, pos_args, "def_multi_tokens") < 0)) __PYX_ERR(0, 1265, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 1) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
    }
    __pyx_v_tuple_list = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("def_multi_tokens", 1, 1, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1265, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_DECREF(__pyx_v_kwargs); __pyx_v_kwargs = 0;
  __Pyx_AddTraceback("typped.lexer.Lexer.def_multi_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_48def_multi_tokens(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_tuple_list, __pyx_v_kwargs);

  /* function exit code */
  __Pyx_XDECREF(__pyx_v_kwargs);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_48def_multi_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_tuple_list, PyObject *__pyx_v_kwargs) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("def_multi_tokens", 0);

  /* "typped/lexer.py":1271
 *         keyword arguments are passed on to `def_token`.  Returns a tuple of the
 *         defined tokens."""
 *         return multi_funcall(self.def_token, tuple_list, **kwargs)             # <<<<<<<<<<<<<<
 * 
 *     def def_multi_ignored_tokens(self, tuple_list, **kwargs):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_multi_funcall); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1271, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_def_token); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1271, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1271, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2);
  __Pyx_INCREF(__pyx_v_tuple_list);
  __Pyx_GIVEREF(__pyx_v_tuple_list);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_tuple_list);
  __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_3, __pyx_v_kwargs); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1271, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1265
 *                               matcher_options=matcher_options)
 * 
 *     def def_multi_tokens(self, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *         """A convenience function, to define multiple tokens at once.  Each element
 *         of the passed-in list should be a tuple containing the arguments to the
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("typped.lexer.Lexer.def_multi_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1273
 *         return multi_funcall(self.def_token, tuple_list, **kwargs)
 * 
 *     def def_multi_ignored_tokens(self, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *         """A convenience function, to define multiple tokens at once with
 *         `ignore=True` set.  Each element of the passed-in list should be a tuple
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_51def_multi_ignored_tokens(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_50def_multi_ignored_tokens[] = "A convenience function, to define multiple tokens at once with\n        `ignore=True` set.  Each element of the passed-in list should be a tuple\n        containing the arguments to the ordinary `def_token` method.  Called in\n        the same order as the list.  Any keyword arguments are passed on to\n        `def_token`.  Returns a tuple of the defined tokens.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_51def_multi_ignored_tokens = {"def_multi_ignored_tokens", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_51def_multi_ignored_tokens, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_50def_multi_ignored_tokens};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_51def_multi_ignored_tokens(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_tuple_list = 0;
  PyObject *__pyx_v_kwargs = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("def_multi_ignored_tokens (wrapper)", 0);
  __pyx_v_kwargs = PyDict_New(); if (unlikely(!__pyx_v_kwargs)) return NULL;
  __Pyx_GOTREF(__pyx_v_kwargs);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_tuple_list,0};
    PyObject* values[1] = {0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_tuple_list)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, __pyx_v_kwargs, values, pos_args, "def_multi_ignored_tokens") < 0)) __PYX_ERR(0, 1273, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 1) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
    }
    __pyx_v_tuple_list = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("def_multi_ignored_tokens", 1, 1, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1273, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_DECREF(__pyx_v_kwargs); __pyx_v_kwargs = 0;
  __Pyx_AddTraceback("typped.lexer.Lexer.def_multi_ignored_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_50def_multi_ignored_tokens(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_tuple_list, __pyx_v_kwargs);

  /* function exit code */
  __Pyx_XDECREF(__pyx_v_kwargs);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_50def_multi_ignored_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_tuple_list, PyObject *__pyx_v_kwargs) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("def_multi_ignored_tokens", 0);

  /* "typped/lexer.py":1279
 *         the same order as the list.  Any keyword arguments are passed on to
 *         `def_token`.  Returns a tuple of the defined tokens."""
 *         return multi_funcall(self.def_ignored_token, tuple_list, **kwargs)             # <<<<<<<<<<<<<<
 * 
 *     def def_begin_end_tokens(self, begin_token_label, end_token_label):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_multi_funcall); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1279, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_def_ignored_token); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1279, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1279, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2);
  __Pyx_INCREF(__pyx_v_tuple_list);
  __Pyx_GIVEREF(__pyx_v_tuple_list);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_tuple_list);
  __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_3, __pyx_v_kwargs); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1279, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1273
 *         return multi_funcall(self.def_token, tuple_list, **kwargs)
 * 
 *     def def_multi_ignored_tokens(self, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *         """A convenience function, to define multiple tokens at once with
 *         `ignore=True` set.  Each element of the passed-in list should be a tuple
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("typped.lexer.Lexer.def_multi_ignored_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1281
 *         return multi_funcall(self.def_ignored_token, tuple_list, **kwargs)
 * 
 *     def def_begin_end_tokens(self, begin_token_label, end_token_label):             # <<<<<<<<<<<<<<
 *         """Define the sentinel tokens at the beginning and end of the token
 *         stream.  This method must be called before using the Lexer.  It will
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_53def_begin_end_tokens(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_52def_begin_end_tokens[] = "Define the sentinel tokens at the beginning and end of the token\n        stream.  This method must be called before using the Lexer.  It will\n        automatically be called using default token label values unless\n        `default_begin_end_tokens` was set false on initialization.  Returns a\n        tuple of the new begin- and end-token subclasses.  These tokens do not\n        need to be defined with `def_token` because they are never actually\n        scanned and recognized in the program text (which would also require a\n        regex pattern).";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_53def_begin_end_tokens = {"def_begin_end_tokens", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_53def_begin_end_tokens, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_52def_begin_end_tokens};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_53def_begin_end_tokens(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_begin_token_label = 0;
  PyObject *__pyx_v_end_token_label = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("def_begin_end_tokens (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_begin_token_label,&__pyx_n_s_end_token_label,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_begin_token_label)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_end_token_label)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("def_begin_end_tokens", 1, 2, 2, 1); __PYX_ERR(0, 1281, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "def_begin_end_tokens") < 0)) __PYX_ERR(0, 1281, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_begin_token_label = values[0];
    __pyx_v_end_token_label = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("def_begin_end_tokens", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1281, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.def_begin_end_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_52def_begin_end_tokens(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_begin_token_label, __pyx_v_end_token_label);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_52def_begin_end_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_begin_token_label, PyObject *__pyx_v_end_token_label) {
  PyObject *__pyx_v_begin_tok = NULL;
  PyObject *__pyx_v_end_tok = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("def_begin_end_tokens", 0);

  /* "typped/lexer.py":1294
 *         # to change all the self.begin_token_label to have self.token_table
 *         # prefix.
 *         begin_tok = self.token_table.def_begin_token(begin_token_label)             # <<<<<<<<<<<<<<
 *         end_tok = self.token_table.def_end_token(end_token_label)
 *         return begin_tok, end_tok
 */
  if (!(likely(PyString_CheckExact(__pyx_v_begin_token_label))||((__pyx_v_begin_token_label) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "str", Py_TYPE(__pyx_v_begin_token_label)->tp_name), 0))) __PYX_ERR(0, 1294, __pyx_L1_error)
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenTable *)__pyx_v_self->token_table->__pyx_vtab)->def_begin_token(__pyx_v_self->token_table, ((PyObject*)__pyx_v_begin_token_label), 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1294, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_begin_tok = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":1295
 *         # prefix.
 *         begin_tok = self.token_table.def_begin_token(begin_token_label)
 *         end_tok = self.token_table.def_end_token(end_token_label)             # <<<<<<<<<<<<<<
 *         return begin_tok, end_tok
 * 
 */
  if (!(likely(PyString_CheckExact(__pyx_v_end_token_label))||((__pyx_v_end_token_label) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "str", Py_TYPE(__pyx_v_end_token_label)->tp_name), 0))) __PYX_ERR(0, 1295, __pyx_L1_error)
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenTable *)__pyx_v_self->token_table->__pyx_vtab)->def_end_token(__pyx_v_self->token_table, ((PyObject*)__pyx_v_end_token_label), 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1295, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_end_tok = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":1296
 *         begin_tok = self.token_table.def_begin_token(begin_token_label)
 *         end_tok = self.token_table.def_end_token(end_token_label)
 *         return begin_tok, end_tok             # <<<<<<<<<<<<<<
 * 
 *     def def_default_whitespace(self, space_label="k_space", space_regex=r"[ \t]+",
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1296, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_begin_tok);
  __Pyx_GIVEREF(__pyx_v_begin_tok);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_begin_tok);
  __Pyx_INCREF(__pyx_v_end_tok);
  __Pyx_GIVEREF(__pyx_v_end_tok);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_end_tok);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1281
 *         return multi_funcall(self.def_ignored_token, tuple_list, **kwargs)
 * 
 *     def def_begin_end_tokens(self, begin_token_label, end_token_label):             # <<<<<<<<<<<<<<
 *         """Define the sentinel tokens at the beginning and end of the token
 *         stream.  This method must be called before using the Lexer.  It will
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.def_begin_end_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_begin_tok);
  __Pyx_XDECREF(__pyx_v_end_tok);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1298
 *         return begin_tok, end_tok
 * 
 *     def def_default_whitespace(self, space_label="k_space", space_regex=r"[ \t]+",             # <<<<<<<<<<<<<<
 *                         newline_label="k_newline", newline_regex=r"[\n\f\r\v]+",
 *                         matcher_options=None):
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_55def_default_whitespace(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_54def_default_whitespace[] = "Define the standard whitespace tokens for space and newline, setting\n        them as ignored tokens.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_55def_default_whitespace = {"def_default_whitespace", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_55def_default_whitespace, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_54def_default_whitespace};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_55def_default_whitespace(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_space_label = 0;
  PyObject *__pyx_v_space_regex = 0;
  PyObject *__pyx_v_newline_label = 0;
  PyObject *__pyx_v_newline_regex = 0;
  PyObject *__pyx_v_matcher_options = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("def_default_whitespace (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_space_label,&__pyx_n_s_space_regex,&__pyx_n_s_newline_label,&__pyx_n_s_newline_regex,&__pyx_n_s_matcher_options,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[0] = ((PyObject *)__pyx_n_s_k_space);
    values[1] = ((PyObject *)__pyx_kp_s_t);
    values[2] = ((PyObject *)__pyx_n_s_k_newline);
    values[3] = ((PyObject *)__pyx_kp_s_n_f_r_v);

    /* "typped/lexer.py":1300
 *     def def_default_whitespace(self, space_label="k_space", space_regex=r"[ \t]+",
 *                         newline_label="k_newline", newline_regex=r"[\n\f\r\v]+",
 *                         matcher_options=None):             # <<<<<<<<<<<<<<
 *         """Define the standard whitespace tokens for space and newline, setting
 *         them as ignored tokens."""
 */
    values[4] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_space_label);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_space_regex);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_newline_label);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_newline_regex);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_matcher_options);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "def_default_whitespace") < 0)) __PYX_ERR(0, 1298, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_space_label = values[0];
    __pyx_v_space_regex = values[1];
    __pyx_v_newline_label = values[2];
    __pyx_v_newline_regex = values[3];
    __pyx_v_matcher_options = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("def_default_whitespace", 0, 0, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1298, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.def_default_whitespace", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_54def_default_whitespace(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_space_label, __pyx_v_space_regex, __pyx_v_newline_label, __pyx_v_newline_regex, __pyx_v_matcher_options);

  /* "typped/lexer.py":1298
 *         return begin_tok, end_tok
 * 
 *     def def_default_whitespace(self, space_label="k_space", space_regex=r"[ \t]+",             # <<<<<<<<<<<<<<
 *                         newline_label="k_newline", newline_regex=r"[\n\f\r\v]+",
 *                         matcher_options=None):
 */

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_54def_default_whitespace(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_space_label, PyObject *__pyx_v_space_regex, PyObject *__pyx_v_newline_label, PyObject *__pyx_v_newline_regex, PyObject *__pyx_v_matcher_options) {
  PyObject *__pyx_v_tok = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("def_default_whitespace", 0);

  /* "typped/lexer.py":1303
 *         """Define the standard whitespace tokens for space and newline, setting
 *         them as ignored tokens."""
 *         tok = self.def_ignored_token             # <<<<<<<<<<<<<<
 *         tok(space_label, space_regex, matcher_options=matcher_options)
 *         tok(newline_label, newline_regex, matcher_options=matcher_options)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_def_ignored_token); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1303, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_tok = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":1304
 *         them as ignored tokens."""
 *         tok = self.def_ignored_token
 *         tok(space_label, space_regex, matcher_options=matcher_options)             # <<<<<<<<<<<<<<
 *         tok(newline_label, newline_regex, matcher_options=matcher_options)
 * 
 */
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1304, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_space_label);
  __Pyx_GIVEREF(__pyx_v_space_label);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_space_label);
  __Pyx_INCREF(__pyx_v_space_regex);
  __Pyx_GIVEREF(__pyx_v_space_regex);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_space_regex);
  __pyx_t_2 = PyDict_New(); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1304, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_matcher_options, __pyx_v_matcher_options) < 0) __PYX_ERR(0, 1304, __pyx_L1_error)
  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_v_tok, __pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1304, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":1305
 *         tok = self.def_ignored_token
 *         tok(space_label, space_regex, matcher_options=matcher_options)
 *         tok(newline_label, newline_regex, matcher_options=matcher_options)             # <<<<<<<<<<<<<<
 * 
 *     #
 */
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_v_newline_label);
  __Pyx_GIVEREF(__pyx_v_newline_label);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_newline_label);
  __Pyx_INCREF(__pyx_v_newline_regex);
  __Pyx_GIVEREF(__pyx_v_newline_regex);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_newline_regex);
  __pyx_t_2 = PyDict_New(); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_matcher_options, __pyx_v_matcher_options) < 0) __PYX_ERR(0, 1305, __pyx_L1_error)
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_v_tok, __pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":1298
 *         return begin_tok, end_tok
 * 
 *     def def_default_whitespace(self, space_label="k_space", space_regex=r"[ \t]+",             # <<<<<<<<<<<<<<
 *                         newline_label="k_newline", newline_regex=r"[\n\f\r\v]+",
 *                         matcher_options=None):
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("typped.lexer.Lexer.def_default_whitespace", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_tok);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1311
 *     #
 * 
 *     def match_next(self, token_label_to_match, peeklevel=1, consume=True,             # <<<<<<<<<<<<<<
 *                    raise_on_fail=False, raise_on_success=False,
 *                    err_msg_tokens=3):
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_57match_next(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_match_next(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label_to_match, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_match_next *__pyx_optional_args) {
  long __pyx_v_peeklevel = ((long)1);
  int __pyx_v_consume = ((int)1);

  /* "typped/lexer.py":1312
 * 
 *     def match_next(self, token_label_to_match, peeklevel=1, consume=True,
 *                    raise_on_fail=False, raise_on_success=False,             # <<<<<<<<<<<<<<
 *                    err_msg_tokens=3):
 *         # TODO: Consider a way for users to define custom error strings for
 */
  int __pyx_v_raise_on_fail = ((int)0);
  int __pyx_v_raise_on_success = ((int)0);
  long __pyx_v_err_msg_tokens = ((long)3);
  int __pyx_v_retval;
  PyObject *__pyx_v_exception = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_peek __pyx_t_12;
  int __pyx_t_13;
  int __pyx_t_14;
  PyObject *__pyx_t_15 = NULL;
  __Pyx_RefNannySetupContext("match_next", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_peeklevel = __pyx_optional_args->peeklevel;
      if (__pyx_optional_args->__pyx_n > 1) {
        __pyx_v_consume = __pyx_optional_args->consume;
        if (__pyx_optional_args->__pyx_n > 2) {
          __pyx_v_raise_on_fail = __pyx_optional_args->raise_on_fail;
          if (__pyx_optional_args->__pyx_n > 3) {
            __pyx_v_raise_on_success = __pyx_optional_args->raise_on_success;
            if (__pyx_optional_args->__pyx_n > 4) {
              __pyx_v_err_msg_tokens = __pyx_optional_args->err_msg_tokens;
            }
          }
        }
      }
    }
  }

  /* "typped/lexer.py":1311
 *     #
 * 
 *     def match_next(self, token_label_to_match, peeklevel=1, consume=True,             # <<<<<<<<<<<<<<
 *                    raise_on_fail=False, raise_on_success=False,
 *                    err_msg_tokens=3):
 */
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_match_next); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1311, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_57match_next)) {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_peeklevel); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1311, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_4 = __Pyx_PyBool_FromLong(__pyx_v_consume); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1311, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_fail); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1311, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_6 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_success); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1311, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_7 = __Pyx_PyInt_From_long(__pyx_v_err_msg_tokens); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1311, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_8 = __pyx_t_1; __pyx_t_9 = NULL;
      __pyx_t_10 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
        __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_8);
        if (likely(__pyx_t_9)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
          __Pyx_INCREF(__pyx_t_9);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_8, function);
          __pyx_t_10 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_8)) {
        PyObject *__pyx_temp[7] = {__pyx_t_9, __pyx_v_token_label_to_match, __pyx_t_3, __pyx_t_4, __pyx_t_5, __pyx_t_6, __pyx_t_7};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_10, 6+__pyx_t_10); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1311, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
        PyObject *__pyx_temp[7] = {__pyx_t_9, __pyx_v_token_label_to_match, __pyx_t_3, __pyx_t_4, __pyx_t_5, __pyx_t_6, __pyx_t_7};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_10, 6+__pyx_t_10); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1311, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      } else
      #endif
      {
        __pyx_t_11 = PyTuple_New(6+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1311, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        if (__pyx_t_9) {
          __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_9); __pyx_t_9 = NULL;
        }
        __Pyx_INCREF(__pyx_v_token_label_to_match);
        __Pyx_GIVEREF(__pyx_v_token_label_to_match);
        PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_v_token_label_to_match);
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_11, 2+__pyx_t_10, __pyx_t_4);
        __Pyx_GIVEREF(__pyx_t_5);
        PyTuple_SET_ITEM(__pyx_t_11, 3+__pyx_t_10, __pyx_t_5);
        __Pyx_GIVEREF(__pyx_t_6);
        PyTuple_SET_ITEM(__pyx_t_11, 4+__pyx_t_10, __pyx_t_6);
        __Pyx_GIVEREF(__pyx_t_7);
        PyTuple_SET_ITEM(__pyx_t_11, 5+__pyx_t_10, __pyx_t_7);
        __pyx_t_3 = 0;
        __pyx_t_4 = 0;
        __pyx_t_5 = 0;
        __pyx_t_6 = 0;
        __pyx_t_7 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_11, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1311, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      }
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":1339
 *         information) when an exception is raised.  (The count does not
 *         include whitespace, but it is printed, too.)"""
 *         retval = False             # <<<<<<<<<<<<<<
 *         if token_label_to_match == self.peek(peeklevel).token_label:
 *             retval = True
 */
  __pyx_v_retval = 0;

  /* "typped/lexer.py":1340
 *         include whitespace, but it is printed, too.)"""
 *         retval = False
 *         if token_label_to_match == self.peek(peeklevel).token_label:             # <<<<<<<<<<<<<<
 *             retval = True
 *         if consume and retval:
 */
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_peeklevel); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1340, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_12.__pyx_n = 1;
  __pyx_t_12.num_toks = __pyx_t_1;
  __pyx_t_2 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->peek(__pyx_v_self, 0, &__pyx_t_12); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1340, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_token_label); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1340, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_13 = (__Pyx_PyString_Equals(__pyx_v_token_label_to_match, __pyx_t_1, Py_EQ)); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1340, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_13) {

    /* "typped/lexer.py":1341
 *         retval = False
 *         if token_label_to_match == self.peek(peeklevel).token_label:
 *             retval = True             # <<<<<<<<<<<<<<
 *         if consume and retval:
 *             self.next() # Eat the token that was matched.
 */
    __pyx_v_retval = 1;

    /* "typped/lexer.py":1340
 *         include whitespace, but it is printed, too.)"""
 *         retval = False
 *         if token_label_to_match == self.peek(peeklevel).token_label:             # <<<<<<<<<<<<<<
 *             retval = True
 *         if consume and retval:
 */
  }

  /* "typped/lexer.py":1342
 *         if token_label_to_match == self.peek(peeklevel).token_label:
 *             retval = True
 *         if consume and retval:             # <<<<<<<<<<<<<<
 *             self.next() # Eat the token that was matched.
 * 
 */
  __pyx_t_14 = (__pyx_v_consume != 0);
  if (__pyx_t_14) {
  } else {
    __pyx_t_13 = __pyx_t_14;
    goto __pyx_L5_bool_binop_done;
  }
  __pyx_t_14 = (__pyx_v_retval != 0);
  __pyx_t_13 = __pyx_t_14;
  __pyx_L5_bool_binop_done:;
  if (__pyx_t_13) {

    /* "typped/lexer.py":1343
 *             retval = True
 *         if consume and retval:
 *             self.next() # Eat the token that was matched.             # <<<<<<<<<<<<<<
 * 
 *         if retval and raise_on_success:
 */
    __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->next(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1343, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":1342
 *         if token_label_to_match == self.peek(peeklevel).token_label:
 *             retval = True
 *         if consume and retval:             # <<<<<<<<<<<<<<
 *             self.next() # Eat the token that was matched.
 * 
 */
  }

  /* "typped/lexer.py":1345
 *             self.next() # Eat the token that was matched.
 * 
 *         if retval and raise_on_success:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)
 */
  __pyx_t_14 = (__pyx_v_retval != 0);
  if (__pyx_t_14) {
  } else {
    __pyx_t_13 = __pyx_t_14;
    goto __pyx_L8_bool_binop_done;
  }
  __pyx_t_14 = (__pyx_v_raise_on_success != 0);
  __pyx_t_13 = __pyx_t_14;
  __pyx_L8_bool_binop_done:;
  if (__pyx_t_13) {

    /* "typped/lexer.py":1346
 * 
 *         if retval and raise_on_success:
 *             exception = return_first_exception(raise_on_success,             # <<<<<<<<<<<<<<
 *                                                self.default_helper_exception)
 *             raise exception(
 */
    __pyx_t_2 = __Pyx_GetModuleGlobalName(__pyx_n_s_return_first_exception); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1346, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_8 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_success); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1346, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);

    /* "typped/lexer.py":1347
 *         if retval and raise_on_success:
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)             # <<<<<<<<<<<<<<
 *             raise exception(
 *                     "Function match_next (with peeklevel={0}) found unexpected "
 */
    __pyx_t_11 = NULL;
    __pyx_t_10 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_11)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_11);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
        __pyx_t_10 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_t_8, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1346, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_t_8, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1346, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    {
      __pyx_t_7 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1346, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      if (__pyx_t_11) {
        __Pyx_GIVEREF(__pyx_t_11); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_11); __pyx_t_11 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_10, __pyx_t_8);
      __Pyx_INCREF(__pyx_v_self->default_helper_exception);
      __Pyx_GIVEREF(__pyx_v_self->default_helper_exception);
      PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_10, __pyx_v_self->default_helper_exception);
      __pyx_t_8 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_7, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1346, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_v_exception = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "typped/lexer.py":1352
 *                     "token {1}.  The text of the {2} tokens up to "
 *                     "the error is: {3}" # TODO fix below, fails with parser
 *                     .format(peeklevel, str(self.peek(peeklevel)), err_msg_tokens,             # <<<<<<<<<<<<<<
 *                         self.last_n_tokens_original_text(err_msg_tokens)))
 *         if not retval and raise_on_fail:
 */
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_Function_match_next_with_peeklev, __pyx_n_s_format); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_8 = __Pyx_PyInt_From_long(__pyx_v_peeklevel); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_11 = __Pyx_PyInt_From_long(__pyx_v_peeklevel); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __pyx_t_12.__pyx_n = 1;
    __pyx_t_12.num_toks = __pyx_t_11;
    __pyx_t_6 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->peek(__pyx_v_self, 0, &__pyx_t_12); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_11 = PyTuple_New(1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_GIVEREF(__pyx_t_6);
    PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_6);
    __pyx_t_6 = 0;
    __pyx_t_6 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_11, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_11 = __Pyx_PyInt_From_long(__pyx_v_err_msg_tokens); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);

    /* "typped/lexer.py":1353
 *                     "the error is: {3}" # TODO fix below, fails with parser
 *                     .format(peeklevel, str(self.peek(peeklevel)), err_msg_tokens,
 *                         self.last_n_tokens_original_text(err_msg_tokens)))             # <<<<<<<<<<<<<<
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_last_n_tokens_original_text); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1353, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_err_msg_tokens); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1353, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_9 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_9)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_9);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (!__pyx_t_9) {
      __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1353, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_9, __pyx_t_3};
        __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1353, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_9, __pyx_t_3};
        __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1353, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      {
        __pyx_t_15 = PyTuple_New(1+1); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 1353, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_15);
        __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_15, 0, __pyx_t_9); __pyx_t_9 = NULL;
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_15, 0+1, __pyx_t_3);
        __pyx_t_3 = 0;
        __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_15, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1353, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    __pyx_t_10 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
        __pyx_t_10 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_t_8, __pyx_t_6, __pyx_t_11, __pyx_t_5};
      __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_10, 4+__pyx_t_10); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1352, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_t_8, __pyx_t_6, __pyx_t_11, __pyx_t_5};
      __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_10, 4+__pyx_t_10); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1352, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_15 = PyTuple_New(4+__pyx_t_10); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 1352, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_15);
      if (__pyx_t_4) {
        __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_15, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_15, 0+__pyx_t_10, __pyx_t_8);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_15, 1+__pyx_t_10, __pyx_t_6);
      __Pyx_GIVEREF(__pyx_t_11);
      PyTuple_SET_ITEM(__pyx_t_15, 2+__pyx_t_10, __pyx_t_11);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_15, 3+__pyx_t_10, __pyx_t_5);
      __pyx_t_8 = 0;
      __pyx_t_6 = 0;
      __pyx_t_11 = 0;
      __pyx_t_5 = 0;
      __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_15, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1352, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_INCREF(__pyx_v_exception);
    __pyx_t_7 = __pyx_v_exception; __pyx_t_15 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_15 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_15)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_15);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
      }
    }
    if (!__pyx_t_15) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1348, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_7)) {
        PyObject *__pyx_temp[2] = {__pyx_t_15, __pyx_t_2};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1348, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
        PyObject *__pyx_temp[2] = {__pyx_t_15, __pyx_t_2};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1348, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      {
        __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1348, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_GIVEREF(__pyx_t_15); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_15); __pyx_t_15 = NULL;
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_t_2);
        __pyx_t_2 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1348, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_Raise(__pyx_t_1, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __PYX_ERR(0, 1348, __pyx_L1_error)

    /* "typped/lexer.py":1345
 *             self.next() # Eat the token that was matched.
 * 
 *         if retval and raise_on_success:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)
 */
  }

  /* "typped/lexer.py":1354
 *                     .format(peeklevel, str(self.peek(peeklevel)), err_msg_tokens,
 *                         self.last_n_tokens_original_text(err_msg_tokens)))
 *         if not retval and raise_on_fail:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)
 */
  __pyx_t_14 = ((!(__pyx_v_retval != 0)) != 0);
  if (__pyx_t_14) {
  } else {
    __pyx_t_13 = __pyx_t_14;
    goto __pyx_L11_bool_binop_done;
  }
  __pyx_t_14 = (__pyx_v_raise_on_fail != 0);
  __pyx_t_13 = __pyx_t_14;
  __pyx_L11_bool_binop_done:;
  if (__pyx_t_13) {

    /* "typped/lexer.py":1355
 *                         self.last_n_tokens_original_text(err_msg_tokens)))
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,             # <<<<<<<<<<<<<<
 *                                                self.default_helper_exception)
 *             raise exception(
 */
    __pyx_t_7 = __Pyx_GetModuleGlobalName(__pyx_n_s_return_first_exception); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1355, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_5 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_fail); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1355, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);

    /* "typped/lexer.py":1356
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)             # <<<<<<<<<<<<<<
 *             raise exception(
 *                     "Function match_next (with peeklevel={0}) expected token "
 */
    __pyx_t_2 = NULL;
    __pyx_t_10 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
        __pyx_t_10 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_5, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1355, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_5, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1355, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_15 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 1355, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_15);
      if (__pyx_t_2) {
        __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_15, 0, __pyx_t_2); __pyx_t_2 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_15, 0+__pyx_t_10, __pyx_t_5);
      __Pyx_INCREF(__pyx_v_self->default_helper_exception);
      __Pyx_GIVEREF(__pyx_v_self->default_helper_exception);
      PyTuple_SET_ITEM(__pyx_t_15, 1+__pyx_t_10, __pyx_v_self->default_helper_exception);
      __pyx_t_5 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_15, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1355, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_v_exception = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "typped/lexer.py":1361
 *                     "with label '{1}' but found token {2}.  The text parsed "
 *                     "from the tokens up to the error is: {3}" # TODO fix below, fails
 *                     .format(peeklevel, token_label_to_match,             # <<<<<<<<<<<<<<
 *                             str(self.peek(peeklevel)),
 *                             self.last_n_tokens_original_text(err_msg_tokens)))
 */
    __pyx_t_15 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_Function_match_next_with_peeklev_2, __pyx_n_s_format); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 1361, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_15);
    __pyx_t_5 = __Pyx_PyInt_From_long(__pyx_v_peeklevel); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1361, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);

    /* "typped/lexer.py":1362
 *                     "from the tokens up to the error is: {3}" # TODO fix below, fails
 *                     .format(peeklevel, token_label_to_match,
 *                             str(self.peek(peeklevel)),             # <<<<<<<<<<<<<<
 *                             self.last_n_tokens_original_text(err_msg_tokens)))
 *         return retval
 */
    __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v_peeklevel); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_12.__pyx_n = 1;
    __pyx_t_12.num_toks = __pyx_t_2;
    __pyx_t_11 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->peek(__pyx_v_self, 0, &__pyx_t_12); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_11);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_11);
    __pyx_t_11 = 0;
    __pyx_t_11 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_2, NULL); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "typped/lexer.py":1363
 *                     .format(peeklevel, token_label_to_match,
 *                             str(self.peek(peeklevel)),
 *                             self.last_n_tokens_original_text(err_msg_tokens)))             # <<<<<<<<<<<<<<
 *         return retval
 * 
 */
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_last_n_tokens_original_text); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1363, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_8 = __Pyx_PyInt_From_long(__pyx_v_err_msg_tokens); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1363, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    if (!__pyx_t_4) {
      __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_8); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1363, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_2);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_8};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1363, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_8};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1363, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      } else
      #endif
      {
        __pyx_t_3 = PyTuple_New(1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1363, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_4); __pyx_t_4 = NULL;
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_3, 0+1, __pyx_t_8);
        __pyx_t_8 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_3, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1363, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    __pyx_t_10 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_15))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_15);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_15);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_15, function);
        __pyx_t_10 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_15)) {
      PyObject *__pyx_temp[5] = {__pyx_t_6, __pyx_t_5, __pyx_v_token_label_to_match, __pyx_t_11, __pyx_t_2};
      __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_15, __pyx_temp+1-__pyx_t_10, 4+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1361, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_15)) {
      PyObject *__pyx_temp[5] = {__pyx_t_6, __pyx_t_5, __pyx_v_token_label_to_match, __pyx_t_11, __pyx_t_2};
      __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_15, __pyx_temp+1-__pyx_t_10, 4+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1361, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    {
      __pyx_t_3 = PyTuple_New(4+__pyx_t_10); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1361, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__pyx_t_6) {
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_6); __pyx_t_6 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_10, __pyx_t_5);
      __Pyx_INCREF(__pyx_v_token_label_to_match);
      __Pyx_GIVEREF(__pyx_v_token_label_to_match);
      PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_10, __pyx_v_token_label_to_match);
      __Pyx_GIVEREF(__pyx_t_11);
      PyTuple_SET_ITEM(__pyx_t_3, 2+__pyx_t_10, __pyx_t_11);
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_3, 3+__pyx_t_10, __pyx_t_2);
      __pyx_t_5 = 0;
      __pyx_t_11 = 0;
      __pyx_t_2 = 0;
      __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_15, __pyx_t_3, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1361, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
    __Pyx_INCREF(__pyx_v_exception);
    __pyx_t_15 = __pyx_v_exception; __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_15))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_15);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_15);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_15, function);
      }
    }
    if (!__pyx_t_3) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_15, __pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1357, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_15)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_7};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_15, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1357, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_15)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_7};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_15, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1357, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      } else
      #endif
      {
        __pyx_t_2 = PyTuple_New(1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1357, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
        __Pyx_GIVEREF(__pyx_t_7);
        PyTuple_SET_ITEM(__pyx_t_2, 0+1, __pyx_t_7);
        __pyx_t_7 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_15, __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1357, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
    __Pyx_Raise(__pyx_t_1, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __PYX_ERR(0, 1357, __pyx_L1_error)

    /* "typped/lexer.py":1354
 *                     .format(peeklevel, str(self.peek(peeklevel)), err_msg_tokens,
 *                         self.last_n_tokens_original_text(err_msg_tokens)))
 *         if not retval and raise_on_fail:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)
 */
  }

  /* "typped/lexer.py":1364
 *                             str(self.peek(peeklevel)),
 *                             self.last_n_tokens_original_text(err_msg_tokens)))
 *         return retval             # <<<<<<<<<<<<<<
 * 
 *     # TODO document these utilities......
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_retval); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1364, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1311
 *     #
 * 
 *     def match_next(self, token_label_to_match, peeklevel=1, consume=True,             # <<<<<<<<<<<<<<
 *                    raise_on_fail=False, raise_on_success=False,
 *                    err_msg_tokens=3):
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_15);
  __Pyx_AddTraceback("typped.lexer.Lexer.match_next", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_exception);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_57match_next(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_56match_next[] = "A utility function that tests whether the value of the next token\n        label equals a given token label.\n\n        This method consumes a token from the lexer if and only if there is a\n        match.  Either way, a boolean is returned indicating the match status.\n\n        If `consume` is false then no tokens will ever be consumed.  Otherwise,\n        and by default, a token will be consumed if and only if it matches.\n\n        The parameter `peeklevel` is passed to the peek function for how far\n        ahead to look; the default is one.\n\n        If `raise_on_fail` set true then a `LexerException` will be raised by\n        default if the match fails.  The default can be changed by setting the\n        lexer instance attribute `default_helper_exception`.  Similarly,\n        `raise_on_success` raises an exception when a match is found.  Either one\n        can be set to a subclass of `Exception` instead of a boolean, and then\n        that exception will be called.\n\n        The parameter `err_msg_tokens` can be set to change how many tokens\n        worth of text back the error messages report (as debugging\n        information) when an exception is raised.  (The count does not\n        include whitespace, but it is printed, too.)";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_57match_next = {"match_next", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_57match_next, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_56match_next};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_57match_next(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_token_label_to_match = 0;
  long __pyx_v_peeklevel;
  int __pyx_v_consume;
  int __pyx_v_raise_on_fail;
  int __pyx_v_raise_on_success;
  long __pyx_v_err_msg_tokens;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("match_next (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_token_label_to_match,&__pyx_n_s_peeklevel,&__pyx_n_s_consume,&__pyx_n_s_raise_on_fail,&__pyx_n_s_raise_on_success,&__pyx_n_s_err_msg_tokens,0};
    PyObject* values[6] = {0,0,0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_token_label_to_match)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_peeklevel);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_consume);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_raise_on_fail);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_raise_on_success);
          if (value) { values[4] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  5:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_err_msg_tokens);
          if (value) { values[5] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "match_next") < 0)) __PYX_ERR(0, 1311, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_token_label_to_match = ((PyObject*)values[0]);
    if (values[1]) {
      __pyx_v_peeklevel = __Pyx_PyInt_As_long(values[1]); if (unlikely((__pyx_v_peeklevel == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1311, __pyx_L3_error)
    } else {
      __pyx_v_peeklevel = ((long)1);
    }
    if (values[2]) {
      __pyx_v_consume = __Pyx_PyObject_IsTrue(values[2]); if (unlikely((__pyx_v_consume == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1311, __pyx_L3_error)
    } else {
      __pyx_v_consume = ((int)1);
    }
    if (values[3]) {
      __pyx_v_raise_on_fail = __Pyx_PyObject_IsTrue(values[3]); if (unlikely((__pyx_v_raise_on_fail == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1312, __pyx_L3_error)
    } else {

      /* "typped/lexer.py":1312
 * 
 *     def match_next(self, token_label_to_match, peeklevel=1, consume=True,
 *                    raise_on_fail=False, raise_on_success=False,             # <<<<<<<<<<<<<<
 *                    err_msg_tokens=3):
 *         # TODO: Consider a way for users to define custom error strings for
 */
      __pyx_v_raise_on_fail = ((int)0);
    }
    if (values[4]) {
      __pyx_v_raise_on_success = __Pyx_PyObject_IsTrue(values[4]); if (unlikely((__pyx_v_raise_on_success == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1312, __pyx_L3_error)
    } else {
      __pyx_v_raise_on_success = ((int)0);
    }
    if (values[5]) {
      __pyx_v_err_msg_tokens = __Pyx_PyInt_As_long(values[5]); if (unlikely((__pyx_v_err_msg_tokens == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1313, __pyx_L3_error)
    } else {
      __pyx_v_err_msg_tokens = ((long)3);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("match_next", 0, 1, 6, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1311, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.match_next", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_token_label_to_match), (&PyString_Type), 1, "token_label_to_match", 1))) __PYX_ERR(0, 1311, __pyx_L1_error)
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_56match_next(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_token_label_to_match, __pyx_v_peeklevel, __pyx_v_consume, __pyx_v_raise_on_fail, __pyx_v_raise_on_success, __pyx_v_err_msg_tokens);

  /* "typped/lexer.py":1311
 *     #
 * 
 *     def match_next(self, token_label_to_match, peeklevel=1, consume=True,             # <<<<<<<<<<<<<<
 *                    raise_on_fail=False, raise_on_success=False,
 *                    err_msg_tokens=3):
 */

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_56match_next(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label_to_match, long __pyx_v_peeklevel, int __pyx_v_consume, int __pyx_v_raise_on_fail, int __pyx_v_raise_on_success, long __pyx_v_err_msg_tokens) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_match_next __pyx_t_2;
  __Pyx_RefNannySetupContext("match_next", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 5;
  __pyx_t_2.peeklevel = __pyx_v_peeklevel;
  __pyx_t_2.consume = __pyx_v_consume;
  __pyx_t_2.raise_on_fail = __pyx_v_raise_on_fail;
  __pyx_t_2.raise_on_success = __pyx_v_raise_on_success;
  __pyx_t_2.err_msg_tokens = __pyx_v_err_msg_tokens;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_Lexer->match_next(__pyx_v_self, __pyx_v_token_label_to_match, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1311, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.match_next", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1367
 * 
 *     # TODO document these utilities......
 *     def in_ignored_tokens(self, token_label_to_match,             # <<<<<<<<<<<<<<
 *                           raise_on_fail=False, raise_on_success=False):
 *         """A utility function to test if a particular token label is among
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_59in_ignored_tokens(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_in_ignored_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label_to_match, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_in_ignored_tokens *__pyx_optional_args) {

  /* "typped/lexer.py":1368
 *     # TODO document these utilities......
 *     def in_ignored_tokens(self, token_label_to_match,
 *                           raise_on_fail=False, raise_on_success=False):             # <<<<<<<<<<<<<<
 *         """A utility function to test if a particular token label is among
 *         the tokens ignored before the current token.  Returns a boolean
 */
  int __pyx_v_raise_on_fail = ((int)0);
  int __pyx_v_raise_on_success = ((int)0);
  int __pyx_v_retval;
  PyObject *__pyx_v_ignored_token_labels = NULL;
  PyObject *__pyx_v_exception = NULL;
  PyObject *__pyx_v_t = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  Py_ssize_t __pyx_t_9;
  PyObject *(*__pyx_t_10)(PyObject *);
  int __pyx_t_11;
  int __pyx_t_12;
  __Pyx_RefNannySetupContext("in_ignored_tokens", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_raise_on_fail = __pyx_optional_args->raise_on_fail;
      if (__pyx_optional_args->__pyx_n > 1) {
        __pyx_v_raise_on_success = __pyx_optional_args->raise_on_success;
      }
    }
  }

  /* "typped/lexer.py":1367
 * 
 *     # TODO document these utilities......
 *     def in_ignored_tokens(self, token_label_to_match,             # <<<<<<<<<<<<<<
 *                           raise_on_fail=False, raise_on_success=False):
 *         """A utility function to test if a particular token label is among
 */
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_in_ignored_tokens); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1367, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_59in_ignored_tokens)) {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_fail); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1367, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_4 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_success); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1367, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_5 = __pyx_t_1; __pyx_t_6 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[4] = {__pyx_t_6, __pyx_v_token_label_to_match, __pyx_t_3, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 3+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1367, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[4] = {__pyx_t_6, __pyx_v_token_label_to_match, __pyx_t_3, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 3+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1367, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(3+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1367, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        if (__pyx_t_6) {
          __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6); __pyx_t_6 = NULL;
        }
        __Pyx_INCREF(__pyx_v_token_label_to_match);
        __Pyx_GIVEREF(__pyx_v_token_label_to_match);
        PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_token_label_to_match);
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_t_4);
        __pyx_t_3 = 0;
        __pyx_t_4 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_8, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1367, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":1373
 *         value.  Like `match_next`, this method can be set to raise an
 *         exception on success or failure."""
 *         retval = False             # <<<<<<<<<<<<<<
 *         ignored_token_labels = [t.token_label for t in self.peek().ignored_before]
 *         if token_label_to_match in ignored_token_labels:
 */
  __pyx_v_retval = 0;

  /* "typped/lexer.py":1374
 *         exception on success or failure."""
 *         retval = False
 *         ignored_token_labels = [t.token_label for t in self.peek().ignored_before]             # <<<<<<<<<<<<<<
 *         if token_label_to_match in ignored_token_labels:
 *             retval = True
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1374, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->peek(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1374, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_ignored_before); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1374, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (likely(PyList_CheckExact(__pyx_t_5)) || PyTuple_CheckExact(__pyx_t_5)) {
    __pyx_t_2 = __pyx_t_5; __Pyx_INCREF(__pyx_t_2); __pyx_t_9 = 0;
    __pyx_t_10 = NULL;
  } else {
    __pyx_t_9 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1374, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_10 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1374, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_10)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_9); __Pyx_INCREF(__pyx_t_5); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1374, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1374, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_9); __Pyx_INCREF(__pyx_t_5); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1374, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1374, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_10(__pyx_t_2);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(exc_type == PyExc_StopIteration || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1374, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_token_label); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1374, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_5))) __PYX_ERR(0, 1374, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_ignored_token_labels = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "typped/lexer.py":1375
 *         retval = False
 *         ignored_token_labels = [t.token_label for t in self.peek().ignored_before]
 *         if token_label_to_match in ignored_token_labels:             # <<<<<<<<<<<<<<
 *             retval = True
 * 
 */
  __pyx_t_11 = (__Pyx_PySequence_ContainsTF(__pyx_v_token_label_to_match, __pyx_v_ignored_token_labels, Py_EQ)); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 1375, __pyx_L1_error)
  __pyx_t_12 = (__pyx_t_11 != 0);
  if (__pyx_t_12) {

    /* "typped/lexer.py":1376
 *         ignored_token_labels = [t.token_label for t in self.peek().ignored_before]
 *         if token_label_to_match in ignored_token_labels:
 *             retval = True             # <<<<<<<<<<<<<<
 * 
 *         if retval and raise_on_success:
 */
    __pyx_v_retval = 1;

    /* "typped/lexer.py":1375
 *         retval = False
 *         ignored_token_labels = [t.token_label for t in self.peek().ignored_before]
 *         if token_label_to_match in ignored_token_labels:             # <<<<<<<<<<<<<<
 *             retval = True
 * 
 */
  }

  /* "typped/lexer.py":1378
 *             retval = True
 * 
 *         if retval and raise_on_success:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)
 */
  __pyx_t_11 = (__pyx_v_retval != 0);
  if (__pyx_t_11) {
  } else {
    __pyx_t_12 = __pyx_t_11;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_11 = (__pyx_v_raise_on_success != 0);
  __pyx_t_12 = __pyx_t_11;
  __pyx_L7_bool_binop_done:;
  if (__pyx_t_12) {

    /* "typped/lexer.py":1379
 * 
 *         if retval and raise_on_success:
 *             exception = return_first_exception(raise_on_success,             # <<<<<<<<<<<<<<
 *                                                self.default_helper_exception)
 *             raise exception(
 */
    __pyx_t_2 = __Pyx_GetModuleGlobalName(__pyx_n_s_return_first_exception); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1379, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_5 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_success); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1379, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);

    /* "typped/lexer.py":1380
 *         if retval and raise_on_success:
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)             # <<<<<<<<<<<<<<
 *             raise exception(
 *                     "Function in_ignored_tokens found unexpected token with "
 */
    __pyx_t_8 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_5, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1379, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_5, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1379, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1379, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      if (__pyx_t_8) {
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_8); __pyx_t_8 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_4, 0+__pyx_t_7, __pyx_t_5);
      __Pyx_INCREF(__pyx_v_self->default_helper_exception);
      __Pyx_GIVEREF(__pyx_v_self->default_helper_exception);
      PyTuple_SET_ITEM(__pyx_t_4, 1+__pyx_t_7, __pyx_v_self->default_helper_exception);
      __pyx_t_5 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1379, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_v_exception = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "typped/lexer.py":1384
 *                     "Function in_ignored_tokens found unexpected token with "
 *                     "label '{0}' before the current token {1}."
 *                     .format(token_label_to_match, str(self.token)))             # <<<<<<<<<<<<<<
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_Function_in_ignored_tokens_found, __pyx_n_s_format); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1384, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1384, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_v_self->token);
    __Pyx_GIVEREF(__pyx_v_self->token);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_self->token);
    __pyx_t_8 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_5, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1384, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_token_label_to_match, __pyx_t_8};
      __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1384, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_token_label_to_match, __pyx_t_8};
      __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1384, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    {
      __pyx_t_3 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1384, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_token_label_to_match);
      __Pyx_GIVEREF(__pyx_v_token_label_to_match);
      PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_7, __pyx_v_token_label_to_match);
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_7, __pyx_t_8);
      __pyx_t_8 = 0;
      __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_3, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1384, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_INCREF(__pyx_v_exception);
    __pyx_t_4 = __pyx_v_exception; __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (!__pyx_t_3) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1381, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_2};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1381, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_2};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1381, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(1+1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1381, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_3); __pyx_t_3 = NULL;
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_8, 0+1, __pyx_t_2);
        __pyx_t_2 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_8, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1381, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_1, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __PYX_ERR(0, 1381, __pyx_L1_error)

    /* "typped/lexer.py":1378
 *             retval = True
 * 
 *         if retval and raise_on_success:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)
 */
  }

  /* "typped/lexer.py":1385
 *                     "label '{0}' before the current token {1}."
 *                     .format(token_label_to_match, str(self.token)))
 *         if not retval and raise_on_fail:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)
 */
  __pyx_t_11 = ((!(__pyx_v_retval != 0)) != 0);
  if (__pyx_t_11) {
  } else {
    __pyx_t_12 = __pyx_t_11;
    goto __pyx_L10_bool_binop_done;
  }
  __pyx_t_11 = (__pyx_v_raise_on_fail != 0);
  __pyx_t_12 = __pyx_t_11;
  __pyx_L10_bool_binop_done:;
  if (__pyx_t_12) {

    /* "typped/lexer.py":1386
 *                     .format(token_label_to_match, str(self.token)))
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,             # <<<<<<<<<<<<<<
 *                                                self.default_helper_exception)
 *             raise exception(
 */
    __pyx_t_4 = __Pyx_GetModuleGlobalName(__pyx_n_s_return_first_exception); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1386, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_8 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_fail); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1386, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);

    /* "typped/lexer.py":1387
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)             # <<<<<<<<<<<<<<
 *             raise exception(
 *                     "Function in_ignored_tokens expected token with label "
 */
    __pyx_t_2 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_8, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1386, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_8, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1386, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    {
      __pyx_t_3 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1386, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__pyx_t_2) {
        __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2); __pyx_t_2 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_7, __pyx_t_8);
      __Pyx_INCREF(__pyx_v_self->default_helper_exception);
      __Pyx_GIVEREF(__pyx_v_self->default_helper_exception);
      PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_7, __pyx_v_self->default_helper_exception);
      __pyx_t_8 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1386, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_exception = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "typped/lexer.py":1391
 *                     "Function in_ignored_tokens expected token with label "
 *                     "'{0}' before the current token {1}, but it was not found."
 *                     .format(token_label_to_match, str(self.token)))             # <<<<<<<<<<<<<<
 *         return retval
 * 
 */
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_Function_in_ignored_tokens_expec, __pyx_n_s_format); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1391, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = PyTuple_New(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1391, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_INCREF(__pyx_v_self->token);
    __Pyx_GIVEREF(__pyx_v_self->token);
    PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_self->token);
    __pyx_t_2 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_8, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1391, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_token_label_to_match, __pyx_t_2};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1391, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_token_label_to_match, __pyx_t_2};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1391, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    {
      __pyx_t_5 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1391, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      if (__pyx_t_8) {
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_8); __pyx_t_8 = NULL;
      }
      __Pyx_INCREF(__pyx_v_token_label_to_match);
      __Pyx_GIVEREF(__pyx_v_token_label_to_match);
      PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_7, __pyx_v_token_label_to_match);
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_7, __pyx_t_2);
      __pyx_t_2 = 0;
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1391, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_INCREF(__pyx_v_exception);
    __pyx_t_3 = __pyx_v_exception; __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
      }
    }
    if (!__pyx_t_5) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1388, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1388, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1388, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_2 = PyTuple_New(1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1388, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_5); __pyx_t_5 = NULL;
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_2, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1388, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_Raise(__pyx_t_1, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __PYX_ERR(0, 1388, __pyx_L1_error)

    /* "typped/lexer.py":1385
 *                     "label '{0}' before the current token {1}."
 *                     .format(token_label_to_match, str(self.token)))
 *         if not retval and raise_on_fail:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)
 */
  }

  /* "typped/lexer.py":1392
 *                     "'{0}' before the current token {1}, but it was not found."
 *                     .format(token_label_to_match, str(self.token)))
 *         return retval             # <<<<<<<<<<<<<<
 * 
 *     def no_ignored_after(self, raise_on_fail=False, raise_on_success=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_retval); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1392, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1367
 * 
 *     # TODO document these utilities......
 *     def in_ignored_tokens(self, token_label_to_match,             # <<<<<<<<<<<<<<
 *                           raise_on_fail=False, raise_on_success=False):
 *         """A utility function to test if a particular token label is among
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("typped.lexer.Lexer.in_ignored_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_ignored_token_labels);
  __Pyx_XDECREF(__pyx_v_exception);
  __Pyx_XDECREF(__pyx_v_t);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_59in_ignored_tokens(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_58in_ignored_tokens[] = "A utility function to test if a particular token label is among\n        the tokens ignored before the current token.  Returns a boolean\n        value.  Like `match_next`, this method can be set to raise an\n        exception on success or failure.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_59in_ignored_tokens = {"in_ignored_tokens", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_59in_ignored_tokens, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_58in_ignored_tokens};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_59in_ignored_tokens(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_token_label_to_match = 0;
  int __pyx_v_raise_on_fail;
  int __pyx_v_raise_on_success;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("in_ignored_tokens (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_token_label_to_match,&__pyx_n_s_raise_on_fail,&__pyx_n_s_raise_on_success,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_token_label_to_match)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_raise_on_fail);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_raise_on_success);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "in_ignored_tokens") < 0)) __PYX_ERR(0, 1367, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_token_label_to_match = ((PyObject*)values[0]);
    if (values[1]) {
      __pyx_v_raise_on_fail = __Pyx_PyObject_IsTrue(values[1]); if (unlikely((__pyx_v_raise_on_fail == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1368, __pyx_L3_error)
    } else {

      /* "typped/lexer.py":1368
 *     # TODO document these utilities......
 *     def in_ignored_tokens(self, token_label_to_match,
 *                           raise_on_fail=False, raise_on_success=False):             # <<<<<<<<<<<<<<
 *         """A utility function to test if a particular token label is among
 *         the tokens ignored before the current token.  Returns a boolean
 */
      __pyx_v_raise_on_fail = ((int)0);
    }
    if (values[2]) {
      __pyx_v_raise_on_success = __Pyx_PyObject_IsTrue(values[2]); if (unlikely((__pyx_v_raise_on_success == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1368, __pyx_L3_error)
    } else {
      __pyx_v_raise_on_success = ((int)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("in_ignored_tokens", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1367, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.in_ignored_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_token_label_to_match), (&PyString_Type), 1, "token_label_to_match", 1))) __PYX_ERR(0, 1367, __pyx_L1_error)
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_58in_ignored_tokens(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_token_label_to_match, __pyx_v_raise_on_fail, __pyx_v_raise_on_success);

  /* "typped/lexer.py":1367
 * 
 *     # TODO document these utilities......
 *     def in_ignored_tokens(self, token_label_to_match,             # <<<<<<<<<<<<<<
 *                           raise_on_fail=False, raise_on_success=False):
 *         """A utility function to test if a particular token label is among
 */

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_58in_ignored_tokens(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_token_label_to_match, int __pyx_v_raise_on_fail, int __pyx_v_raise_on_success) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_in_ignored_tokens __pyx_t_2;
  __Pyx_RefNannySetupContext("in_ignored_tokens", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 2;
  __pyx_t_2.raise_on_fail = __pyx_v_raise_on_fail;
  __pyx_t_2.raise_on_success = __pyx_v_raise_on_success;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_Lexer->in_ignored_tokens(__pyx_v_self, __pyx_v_token_label_to_match, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1367, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.in_ignored_tokens", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1394
 *         return retval
 * 
 *     def no_ignored_after(self, raise_on_fail=False, raise_on_success=False):             # <<<<<<<<<<<<<<
 *         """A boolean utility function to test if any tokens were ignored
 *         between current token and lookahead.  Like `match_next`, this method
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_61no_ignored_after(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_no_ignored_after(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_after *__pyx_optional_args) {
  int __pyx_v_raise_on_fail = ((int)0);
  int __pyx_v_raise_on_success = ((int)0);
  int __pyx_v_retval;
  PyObject *__pyx_v_exception = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("no_ignored_after", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_raise_on_fail = __pyx_optional_args->raise_on_fail;
      if (__pyx_optional_args->__pyx_n > 1) {
        __pyx_v_raise_on_success = __pyx_optional_args->raise_on_success;
      }
    }
  }
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_no_ignored_after); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1394, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_61no_ignored_after)) {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_fail); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1394, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_4 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_success); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1394, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_5 = __pyx_t_1; __pyx_t_6 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_3, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1394, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_3, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1394, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1394, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        if (__pyx_t_6) {
          __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6); __pyx_t_6 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_4);
        __pyx_t_3 = 0;
        __pyx_t_4 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_8, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1394, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":1398
 *         between current token and lookahead.  Like `match_next`, this method
 *         can be set to raise an exception on success or failure."""
 *         retval = True             # <<<<<<<<<<<<<<
 *         if self.peek().ignored_before:
 *             retval = False
 */
  __pyx_v_retval = 1;

  /* "typped/lexer.py":1399
 *         can be set to raise an exception on success or failure."""
 *         retval = True
 *         if self.peek().ignored_before:             # <<<<<<<<<<<<<<
 *             retval = False
 * 
 */
  __pyx_t_1 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->peek(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1399, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_ignored_before); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1399, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1399, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_9) {

    /* "typped/lexer.py":1400
 *         retval = True
 *         if self.peek().ignored_before:
 *             retval = False             # <<<<<<<<<<<<<<
 * 
 *         if retval and raise_on_success:
 */
    __pyx_v_retval = 0;

    /* "typped/lexer.py":1399
 *         can be set to raise an exception on success or failure."""
 *         retval = True
 *         if self.peek().ignored_before:             # <<<<<<<<<<<<<<
 *             retval = False
 * 
 */
  }

  /* "typped/lexer.py":1402
 *             retval = False
 * 
 *         if retval and raise_on_success:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)
 */
  __pyx_t_10 = (__pyx_v_retval != 0);
  if (__pyx_t_10) {
  } else {
    __pyx_t_9 = __pyx_t_10;
    goto __pyx_L5_bool_binop_done;
  }
  __pyx_t_10 = (__pyx_v_raise_on_success != 0);
  __pyx_t_9 = __pyx_t_10;
  __pyx_L5_bool_binop_done:;
  if (__pyx_t_9) {

    /* "typped/lexer.py":1403
 * 
 *         if retval and raise_on_success:
 *             exception = return_first_exception(raise_on_success,             # <<<<<<<<<<<<<<
 *                                                self.default_helper_exception)
 *             raise exception(
 */
    __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_return_first_exception); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1403, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_success); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1403, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);

    /* "typped/lexer.py":1404
 *         if retval and raise_on_success:
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)             # <<<<<<<<<<<<<<
 *             raise exception(
 *                     "Function no_ignored_after expected tokens between the current "
 */
    __pyx_t_8 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_1);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_1, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_1)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_5, __pyx_v_self->default_helper_exception};
      __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1403, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_1)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_5, __pyx_v_self->default_helper_exception};
      __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1403, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1403, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      if (__pyx_t_8) {
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_8); __pyx_t_8 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_4, 0+__pyx_t_7, __pyx_t_5);
      __Pyx_INCREF(__pyx_v_self->default_helper_exception);
      __Pyx_GIVEREF(__pyx_v_self->default_helper_exception);
      PyTuple_SET_ITEM(__pyx_t_4, 1+__pyx_t_7, __pyx_v_self->default_helper_exception);
      __pyx_t_5 = 0;
      __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_4, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1403, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_v_exception = __pyx_t_2;
    __pyx_t_2 = 0;

    /* "typped/lexer.py":1408
 *                     "Function no_ignored_after expected tokens between the current "
 *                     "token {0} and the following token {1}, but there were none."
 *                     .format(str(self.token), str(self.peek())))             # <<<<<<<<<<<<<<
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_Function_no_ignored_after_expect, __pyx_n_s_format); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1408, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1408, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_v_self->token);
    __Pyx_GIVEREF(__pyx_v_self->token);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_self->token);
    __pyx_t_8 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_5, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1408, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->peek(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1408, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1408, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_3, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1408, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_8, __pyx_t_5};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1408, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_8, __pyx_t_5};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1408, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_6 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1408, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      if (__pyx_t_3) {
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_3); __pyx_t_3 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_7, __pyx_t_8);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_7, __pyx_t_5);
      __pyx_t_8 = 0;
      __pyx_t_5 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1408, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_INCREF(__pyx_v_exception);
    __pyx_t_4 = __pyx_v_exception; __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (!__pyx_t_6) {
      __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1405, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_2);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_1};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1405, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_1};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1405, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      } else
      #endif
      {
        __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1405, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_6); __pyx_t_6 = NULL;
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_t_1);
        __pyx_t_1 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1405, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 1405, __pyx_L1_error)

    /* "typped/lexer.py":1402
 *             retval = False
 * 
 *         if retval and raise_on_success:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)
 */
  }

  /* "typped/lexer.py":1409
 *                     "token {0} and the following token {1}, but there were none."
 *                     .format(str(self.token), str(self.peek())))
 *         if not retval and raise_on_fail:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)
 */
  __pyx_t_10 = ((!(__pyx_v_retval != 0)) != 0);
  if (__pyx_t_10) {
  } else {
    __pyx_t_9 = __pyx_t_10;
    goto __pyx_L8_bool_binop_done;
  }
  __pyx_t_10 = (__pyx_v_raise_on_fail != 0);
  __pyx_t_9 = __pyx_t_10;
  __pyx_L8_bool_binop_done:;
  if (__pyx_t_9) {

    /* "typped/lexer.py":1410
 *                     .format(str(self.token), str(self.peek())))
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,             # <<<<<<<<<<<<<<
 *                                                self.default_helper_exception)
 *             raise exception(
 */
    __pyx_t_4 = __Pyx_GetModuleGlobalName(__pyx_n_s_return_first_exception); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1410, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_fail); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1410, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);

    /* "typped/lexer.py":1411
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)             # <<<<<<<<<<<<<<
 *             raise exception(
 *                     "Function no_ignored_after expected nothing between the "
 */
    __pyx_t_1 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_1)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_1);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_t_5, __pyx_v_self->default_helper_exception};
      __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1410, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_t_5, __pyx_v_self->default_helper_exception};
      __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1410, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_6 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1410, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      if (__pyx_t_1) {
        __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_1); __pyx_t_1 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_7, __pyx_t_5);
      __Pyx_INCREF(__pyx_v_self->default_helper_exception);
      __Pyx_GIVEREF(__pyx_v_self->default_helper_exception);
      PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_7, __pyx_v_self->default_helper_exception);
      __pyx_t_5 = 0;
      __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1410, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_exception = __pyx_t_2;
    __pyx_t_2 = 0;

    /* "typped/lexer.py":1416
 *                     "current token {0} and the following token {1}, but there "
 *                     "were ignored tokens."
 *                     .format(str(self.token), str(self.peek())))             # <<<<<<<<<<<<<<
 *         else:
 *             return False
 */
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_Function_no_ignored_after_expect_2, __pyx_n_s_format); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1416, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1416, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_v_self->token);
    __Pyx_GIVEREF(__pyx_v_self->token);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_self->token);
    __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1416, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = ((struct __pyx_vtabstruct_6typped_5lexer_Lexer *)__pyx_v_self->__pyx_vtab)->peek(__pyx_v_self, 0, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1416, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = PyTuple_New(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1416, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_8, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1416, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_1, __pyx_t_5};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1416, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_1, __pyx_t_5};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1416, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_3 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1416, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__pyx_t_8) {
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_8); __pyx_t_8 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_1);
      PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_7, __pyx_t_1);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_7, __pyx_t_5);
      __pyx_t_1 = 0;
      __pyx_t_5 = 0;
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_3, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1416, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_INCREF(__pyx_v_exception);
    __pyx_t_6 = __pyx_v_exception; __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    if (!__pyx_t_3) {
      __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1412, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_2);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1412, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1412, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1412, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3); __pyx_t_3 = NULL;
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1412, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 1412, __pyx_L1_error)

    /* "typped/lexer.py":1409
 *                     "token {0} and the following token {1}, but there were none."
 *                     .format(str(self.token), str(self.peek())))
 *         if not retval and raise_on_fail:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)
 */
  }

  /* "typped/lexer.py":1418
 *                     .format(str(self.token), str(self.peek())))
 *         else:
 *             return False             # <<<<<<<<<<<<<<
 *         return retval
 * 
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;
  }

  /* "typped/lexer.py":1394
 *         return retval
 * 
 *     def no_ignored_after(self, raise_on_fail=False, raise_on_success=False):             # <<<<<<<<<<<<<<
 *         """A boolean utility function to test if any tokens were ignored
 *         between current token and lookahead.  Like `match_next`, this method
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("typped.lexer.Lexer.no_ignored_after", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_exception);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_61no_ignored_after(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_60no_ignored_after[] = "A boolean utility function to test if any tokens were ignored\n        between current token and lookahead.  Like `match_next`, this method\n        can be set to raise an exception on success or failure.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_61no_ignored_after = {"no_ignored_after", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_61no_ignored_after, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_60no_ignored_after};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_61no_ignored_after(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_raise_on_fail;
  int __pyx_v_raise_on_success;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("no_ignored_after (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_raise_on_fail,&__pyx_n_s_raise_on_success,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_raise_on_fail);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_raise_on_success);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "no_ignored_after") < 0)) __PYX_ERR(0, 1394, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_raise_on_fail = __Pyx_PyObject_IsTrue(values[0]); if (unlikely((__pyx_v_raise_on_fail == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1394, __pyx_L3_error)
    } else {
      __pyx_v_raise_on_fail = ((int)0);
    }
    if (values[1]) {
      __pyx_v_raise_on_success = __Pyx_PyObject_IsTrue(values[1]); if (unlikely((__pyx_v_raise_on_success == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1394, __pyx_L3_error)
    } else {
      __pyx_v_raise_on_success = ((int)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("no_ignored_after", 0, 0, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1394, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.no_ignored_after", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_60no_ignored_after(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_raise_on_fail, __pyx_v_raise_on_success);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_60no_ignored_after(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_v_raise_on_fail, int __pyx_v_raise_on_success) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_after __pyx_t_2;
  __Pyx_RefNannySetupContext("no_ignored_after", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 2;
  __pyx_t_2.raise_on_fail = __pyx_v_raise_on_fail;
  __pyx_t_2.raise_on_success = __pyx_v_raise_on_success;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_Lexer->no_ignored_after(__pyx_v_self, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1394, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.no_ignored_after", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1421
 *         return retval
 * 
 *     def no_ignored_before(self, raise_on_fail=False, raise_on_success=False):             # <<<<<<<<<<<<<<
 *         """A boolean utility function to test if any tokens were ignored between
 *         previous token and current token.  Like `match_next`, this method
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_63no_ignored_before(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer_no_ignored_before(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_before *__pyx_optional_args) {
  int __pyx_v_raise_on_fail = ((int)0);
  int __pyx_v_raise_on_success = ((int)0);
  int __pyx_v_retval;
  PyObject *__pyx_v_exception = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("no_ignored_before", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_raise_on_fail = __pyx_optional_args->raise_on_fail;
      if (__pyx_optional_args->__pyx_n > 1) {
        __pyx_v_raise_on_success = __pyx_optional_args->raise_on_success;
      }
    }
  }
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_no_ignored_before); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1421, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_63no_ignored_before)) {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_fail); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1421, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_4 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_success); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1421, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_5 = __pyx_t_1; __pyx_t_6 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_3, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1421, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_3, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1421, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1421, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        if (__pyx_t_6) {
          __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6); __pyx_t_6 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_4);
        __pyx_t_3 = 0;
        __pyx_t_4 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_8, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1421, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":1425
 *         previous token and current token.  Like `match_next`, this method
 *         can be set to raise an exception on success or failure."""
 *         retval = True             # <<<<<<<<<<<<<<
 *         if self.token.ignored_before:
 *             retval = False
 */
  __pyx_v_retval = 1;

  /* "typped/lexer.py":1426
 *         can be set to raise an exception on success or failure."""
 *         retval = True
 *         if self.token.ignored_before:             # <<<<<<<<<<<<<<
 *             retval = False
 * 
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->token, __pyx_n_s_ignored_before); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1426, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1426, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_9) {

    /* "typped/lexer.py":1427
 *         retval = True
 *         if self.token.ignored_before:
 *             retval = False             # <<<<<<<<<<<<<<
 * 
 *         if retval and raise_on_success:
 */
    __pyx_v_retval = 0;

    /* "typped/lexer.py":1426
 *         can be set to raise an exception on success or failure."""
 *         retval = True
 *         if self.token.ignored_before:             # <<<<<<<<<<<<<<
 *             retval = False
 * 
 */
  }

  /* "typped/lexer.py":1429
 *             retval = False
 * 
 *         if retval and raise_on_success:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)
 */
  __pyx_t_10 = (__pyx_v_retval != 0);
  if (__pyx_t_10) {
  } else {
    __pyx_t_9 = __pyx_t_10;
    goto __pyx_L5_bool_binop_done;
  }
  __pyx_t_10 = (__pyx_v_raise_on_success != 0);
  __pyx_t_9 = __pyx_t_10;
  __pyx_L5_bool_binop_done:;
  if (__pyx_t_9) {

    /* "typped/lexer.py":1430
 * 
 *         if retval and raise_on_success:
 *             exception = return_first_exception(raise_on_success,             # <<<<<<<<<<<<<<
 *                                                self.default_helper_exception)
 *             raise exception(
 */
    __pyx_t_2 = __Pyx_GetModuleGlobalName(__pyx_n_s_return_first_exception); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_5 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_success); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);

    /* "typped/lexer.py":1431
 *         if retval and raise_on_success:
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)             # <<<<<<<<<<<<<<
 *             raise exception(
 *                     "Function no_ignored_before expected ignored tokens before "
 */
    __pyx_t_8 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_5, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1430, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_5, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1430, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1430, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      if (__pyx_t_8) {
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_8); __pyx_t_8 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_4, 0+__pyx_t_7, __pyx_t_5);
      __Pyx_INCREF(__pyx_v_self->default_helper_exception);
      __Pyx_GIVEREF(__pyx_v_self->default_helper_exception);
      PyTuple_SET_ITEM(__pyx_t_4, 1+__pyx_t_7, __pyx_v_self->default_helper_exception);
      __pyx_t_5 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1430, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_v_exception = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "typped/lexer.py":1435
 *                     "Function no_ignored_before expected ignored tokens before "
 *                     " the current token {0}, but none were found."
 *                     .format(str(self.token)))             # <<<<<<<<<<<<<<
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_Function_no_ignored_before_expec, __pyx_n_s_format); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1435, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1435, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_v_self->token);
    __Pyx_GIVEREF(__pyx_v_self->token);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_self->token);
    __pyx_t_8 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_5, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1435, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (!__pyx_t_5) {
      __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_8); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1435, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_2);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_8};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1435, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_8};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1435, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      } else
      #endif
      {
        __pyx_t_3 = PyTuple_New(1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1435, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_5); __pyx_t_5 = NULL;
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_3, 0+1, __pyx_t_8);
        __pyx_t_8 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_3, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1435, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_INCREF(__pyx_v_exception);
    __pyx_t_4 = __pyx_v_exception; __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (!__pyx_t_3) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1432, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_2};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1432, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_2};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1432, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(1+1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1432, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_3); __pyx_t_3 = NULL;
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_8, 0+1, __pyx_t_2);
        __pyx_t_2 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_8, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1432, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_1, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __PYX_ERR(0, 1432, __pyx_L1_error)

    /* "typped/lexer.py":1429
 *             retval = False
 * 
 *         if retval and raise_on_success:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_success,
 *                                                self.default_helper_exception)
 */
  }

  /* "typped/lexer.py":1436
 *                     " the current token {0}, but none were found."
 *                     .format(str(self.token)))
 *         if not retval and raise_on_fail:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)
 */
  __pyx_t_10 = ((!(__pyx_v_retval != 0)) != 0);
  if (__pyx_t_10) {
  } else {
    __pyx_t_9 = __pyx_t_10;
    goto __pyx_L8_bool_binop_done;
  }
  __pyx_t_10 = (__pyx_v_raise_on_fail != 0);
  __pyx_t_9 = __pyx_t_10;
  __pyx_L8_bool_binop_done:;
  if (__pyx_t_9) {

    /* "typped/lexer.py":1437
 *                     .format(str(self.token)))
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,             # <<<<<<<<<<<<<<
 *                                                self.default_helper_exception)
 *             raise exception(
 */
    __pyx_t_4 = __Pyx_GetModuleGlobalName(__pyx_n_s_return_first_exception); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1437, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_8 = __Pyx_PyBool_FromLong(__pyx_v_raise_on_fail); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1437, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);

    /* "typped/lexer.py":1438
 *         if not retval and raise_on_fail:
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)             # <<<<<<<<<<<<<<
 *             raise exception(
 *                     "Function no_ignored_before expected no ignored tokens "
 */
    __pyx_t_2 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_8, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1437, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_8, __pyx_v_self->default_helper_exception};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1437, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    {
      __pyx_t_3 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1437, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__pyx_t_2) {
        __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2); __pyx_t_2 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_7, __pyx_t_8);
      __Pyx_INCREF(__pyx_v_self->default_helper_exception);
      __Pyx_GIVEREF(__pyx_v_self->default_helper_exception);
      PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_7, __pyx_v_self->default_helper_exception);
      __pyx_t_8 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1437, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_exception = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "typped/lexer.py":1442
 *                     "Function no_ignored_before expected no ignored tokens "
 *                     "before the current token {0}, but at least one was found."
 *                     .format(str(self.token)))             # <<<<<<<<<<<<<<
 *         return retval
 * 
 */
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_Function_no_ignored_before_expec_2, __pyx_n_s_format); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1442, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = PyTuple_New(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1442, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_INCREF(__pyx_v_self->token);
    __Pyx_GIVEREF(__pyx_v_self->token);
    PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_self->token);
    __pyx_t_2 = __Pyx_PyObject_Call(((PyObject *)(&PyString_Type)), __pyx_t_8, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1442, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
      }
    }
    if (!__pyx_t_8) {
      __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1442, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[2] = {__pyx_t_8, __pyx_t_2};
        __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1442, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[2] = {__pyx_t_8, __pyx_t_2};
        __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1442, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      {
        __pyx_t_5 = PyTuple_New(1+1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1442, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_8); __pyx_t_8 = NULL;
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_5, 0+1, __pyx_t_2);
        __pyx_t_2 = 0;
        __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1442, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_INCREF(__pyx_v_exception);
    __pyx_t_3 = __pyx_v_exception; __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
      }
    }
    if (!__pyx_t_5) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1439, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1439, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1439, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_2 = PyTuple_New(1+1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1439, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_5); __pyx_t_5 = NULL;
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_2, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1439, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_Raise(__pyx_t_1, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __PYX_ERR(0, 1439, __pyx_L1_error)

    /* "typped/lexer.py":1436
 *                     " the current token {0}, but none were found."
 *                     .format(str(self.token)))
 *         if not retval and raise_on_fail:             # <<<<<<<<<<<<<<
 *             exception = return_first_exception(raise_on_fail,
 *                                                self.default_helper_exception)
 */
  }

  /* "typped/lexer.py":1443
 *                     "before the current token {0}, but at least one was found."
 *                     .format(str(self.token)))
 *         return retval             # <<<<<<<<<<<<<<
 * 
 *     #
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_retval); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1421
 *         return retval
 * 
 *     def no_ignored_before(self, raise_on_fail=False, raise_on_success=False):             # <<<<<<<<<<<<<<
 *         """A boolean utility function to test if any tokens were ignored between
 *         previous token and current token.  Like `match_next`, this method
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("typped.lexer.Lexer.no_ignored_before", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_exception);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_63no_ignored_before(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_62no_ignored_before[] = "A boolean utility function to test if any tokens were ignored between\n        previous token and current token.  Like `match_next`, this method\n        can be set to raise an exception on success or failure.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_63no_ignored_before = {"no_ignored_before", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_63no_ignored_before, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_62no_ignored_before};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_63no_ignored_before(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_raise_on_fail;
  int __pyx_v_raise_on_success;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("no_ignored_before (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_raise_on_fail,&__pyx_n_s_raise_on_success,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_raise_on_fail);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = PyDict_GetItem(__pyx_kwds, __pyx_n_s_raise_on_success);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "no_ignored_before") < 0)) __PYX_ERR(0, 1421, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_raise_on_fail = __Pyx_PyObject_IsTrue(values[0]); if (unlikely((__pyx_v_raise_on_fail == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1421, __pyx_L3_error)
    } else {
      __pyx_v_raise_on_fail = ((int)0);
    }
    if (values[1]) {
      __pyx_v_raise_on_success = __Pyx_PyObject_IsTrue(values[1]); if (unlikely((__pyx_v_raise_on_success == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1421, __pyx_L3_error)
    } else {
      __pyx_v_raise_on_success = ((int)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("no_ignored_before", 0, 0, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1421, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.no_ignored_before", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_62no_ignored_before(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), __pyx_v_raise_on_fail, __pyx_v_raise_on_success);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_62no_ignored_before(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_v_raise_on_fail, int __pyx_v_raise_on_success) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_before __pyx_t_2;
  __Pyx_RefNannySetupContext("no_ignored_before", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2.__pyx_n = 2;
  __pyx_t_2.raise_on_fail = __pyx_v_raise_on_fail;
  __pyx_t_2.raise_on_success = __pyx_v_raise_on_success;
  __pyx_t_1 = __pyx_vtabptr_6typped_5lexer_Lexer->no_ignored_before(__pyx_v_self, 1, &__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.no_ignored_before", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1449
 *     #
 * 
 *     def _unbuffered_token_getter(self):             # <<<<<<<<<<<<<<
 *         """This routine generates tokens from the program text in the attribute
 *         `self.program`.  It does not modify the program itself, but keeps slice
 */

static PyObject *__pyx_pw_6typped_5lexer_5Lexer_65_unbuffered_token_getter(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_f_6typped_5lexer_5Lexer__unbuffered_token_getter(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, int __pyx_skip_dispatch) {
  PyObject *__pyx_v_ignored_before_labels = NULL;
  PyObject *__pyx_v_ignored_before_tokens = NULL;
  PyObject *__pyx_v_original_matched_string = NULL;
  struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_token_table = NULL;
  int __pyx_v_first_after_newline;
  PyObject *__pyx_v_label_and_value = NULL;
  PyObject *__pyx_v_token_label = NULL;
  PyObject *__pyx_v_token_value = NULL;
  PyObject *__pyx_v_token_subclass_for_label = NULL;
  PyObject *__pyx_v_token_instance = NULL;
  PyObject *__pyx_v_num_newlines = NULL;
  PyObject *__pyx_v_last_newline = NULL;
  PyObject *__pyx_v_token_subclass_for_end = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  long __pyx_t_6;
  PyObject *(*__pyx_t_7)(PyObject *);
  Py_ssize_t __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  Py_ssize_t __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  PyObject *__pyx_t_13 = NULL;
  int __pyx_t_14;
  PyObject *__pyx_t_15 = NULL;
  PyObject *__pyx_t_16 = NULL;
  PyObject *__pyx_t_17 = NULL;
  PyObject *__pyx_t_18 = NULL;
  PyObject *__pyx_t_19 = NULL;
  int __pyx_t_20;
  int __pyx_t_21;
  __Pyx_RefNannySetupContext("_unbuffered_token_getter", 0);
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))->tp_dictoffset != 0)) {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_unbuffered_token_getter); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1449, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_65_unbuffered_token_getter)) {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1; __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      if (__pyx_t_4) {
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1449, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else {
        __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1449, __pyx_L1_error)
      }
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "typped/lexer.py":1475
 *         back to ordinary.  (The lexer's `next` routine handles any raising of
 *         `StopIteration`.)"""
 *         ignored_before_labels = []             # <<<<<<<<<<<<<<
 *         ignored_before_tokens = []
 *         original_matched_string = ""
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1475, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_ignored_before_labels = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "typped/lexer.py":1476
 *         `StopIteration`.)"""
 *         ignored_before_labels = []
 *         ignored_before_tokens = []             # <<<<<<<<<<<<<<
 *         original_matched_string = ""
 *         token_table = self.token_table
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1476, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_ignored_before_tokens = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "typped/lexer.py":1477
 *         ignored_before_labels = []
 *         ignored_before_tokens = []
 *         original_matched_string = ""             # <<<<<<<<<<<<<<
 *         token_table = self.token_table
 * 
 */
  __Pyx_INCREF(__pyx_kp_s__21);
  __pyx_v_original_matched_string = __pyx_kp_s__21;

  /* "typped/lexer.py":1478
 *         ignored_before_tokens = []
 *         original_matched_string = ""
 *         token_table = self.token_table             # <<<<<<<<<<<<<<
 * 
 *         while True:
 */
  __pyx_t_1 = ((PyObject *)__pyx_v_self->token_table);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_token_table = ((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "typped/lexer.py":1480
 *         token_table = self.token_table
 * 
 *         while True:             # <<<<<<<<<<<<<<
 *             self._curr_token_is_first = not self._returned_first_token
 *             self._returned_first_token = True
 */
  while (1) {

    /* "typped/lexer.py":1481
 * 
 *         while True:
 *             self._curr_token_is_first = not self._returned_first_token             # <<<<<<<<<<<<<<
 *             self._returned_first_token = True
 * 
 */
    __pyx_v_self->_curr_token_is_first = (!(__pyx_v_self->_returned_first_token != 0));

    /* "typped/lexer.py":1482
 *         while True:
 *             self._curr_token_is_first = not self._returned_first_token
 *             self._returned_first_token = True             # <<<<<<<<<<<<<<
 * 
 *             if self.prog_unprocessed[0] == self.prog_unprocessed[1]:
 */
    __pyx_v_self->_returned_first_token = 1;

    /* "typped/lexer.py":1484
 *             self._returned_first_token = True
 * 
 *             if self.prog_unprocessed[0] == self.prog_unprocessed[1]:             # <<<<<<<<<<<<<<
 *                 self.token_generator_state = GenTokenState.end
 *             else:
 */
    if (unlikely(__pyx_v_self->prog_unprocessed == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 1484, __pyx_L1_error)
    }
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_self->prog_unprocessed, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1484, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (unlikely(__pyx_v_self->prog_unprocessed == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 1484, __pyx_L1_error)
    }
    __pyx_t_2 = __Pyx_GetItemInt_List(__pyx_v_self->prog_unprocessed, 1, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1484, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_EQ); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1484, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1484, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_5) {

      /* "typped/lexer.py":1485
 * 
 *             if self.prog_unprocessed[0] == self.prog_unprocessed[1]:
 *                 self.token_generator_state = GenTokenState.end             # <<<<<<<<<<<<<<
 *             else:
 *                 self.token_generator_state = GenTokenState.ordinary
 */
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState), __pyx_n_s_end); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1485, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_6 = __Pyx_PyInt_As_long(__pyx_t_3); if (unlikely((__pyx_t_6 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1485, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_v_self->token_generator_state = __pyx_t_6;

      /* "typped/lexer.py":1484
 *             self._returned_first_token = True
 * 
 *             if self.prog_unprocessed[0] == self.prog_unprocessed[1]:             # <<<<<<<<<<<<<<
 *                 self.token_generator_state = GenTokenState.end
 *             else:
 */
      goto __pyx_L5;
    }

    /* "typped/lexer.py":1487
 *                 self.token_generator_state = GenTokenState.end
 *             else:
 *                 self.token_generator_state = GenTokenState.ordinary             # <<<<<<<<<<<<<<
 * 
 *             first_after_newline = False
 */
    /*else*/ {
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState), __pyx_n_s_ordinary); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1487, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_6 = __Pyx_PyInt_As_long(__pyx_t_3); if (unlikely((__pyx_t_6 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1487, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_v_self->token_generator_state = __pyx_t_6;
    }
    __pyx_L5:;

    /* "typped/lexer.py":1489
 *                 self.token_generator_state = GenTokenState.ordinary
 * 
 *             first_after_newline = False             # <<<<<<<<<<<<<<
 * 
 *             # =======================================================================
 */
    __pyx_v_first_after_newline = 0;

    /* "typped/lexer.py":1494
 *             # === Ordinary execution state ==========================================
 *             # =======================================================================
 *             if self.token_generator_state == GenTokenState.ordinary:             # <<<<<<<<<<<<<<
 *                 # Find the token_label and token_value of the matching prefix
 *                 # which is longest (with ties broken by the on_ties values).
 */
    __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_self->token_generator_state); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1494, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState), __pyx_n_s_ordinary); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1494, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_t_2, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1494, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1494, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_5) {

      /* "typped/lexer.py":1498
 *                 # which is longest (with ties broken by the on_ties values).
 *                 label_and_value = token_table.get_next_token_label_and_value(
 *                                     self.program, self.prog_unprocessed,             # <<<<<<<<<<<<<<
 *                                     self.ERROR_MSG_TEXT_SNIPPET_SIZE)
 *                 token_label, token_value = label_and_value
 */
      __pyx_t_1 = __pyx_v_self->program;
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_2 = __pyx_v_self->prog_unprocessed;
      __Pyx_INCREF(__pyx_t_2);

      /* "typped/lexer.py":1499
 *                 label_and_value = token_table.get_next_token_label_and_value(
 *                                     self.program, self.prog_unprocessed,
 *                                     self.ERROR_MSG_TEXT_SNIPPET_SIZE)             # <<<<<<<<<<<<<<
 *                 token_label, token_value = label_and_value
 * 
 */
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_ERROR_MSG_TEXT_SNIPPET_SIZE); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1499, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_6 = __Pyx_PyInt_As_long(__pyx_t_3); if (unlikely((__pyx_t_6 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1499, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "typped/lexer.py":1497
 *                 # Find the token_label and token_value of the matching prefix
 *                 # which is longest (with ties broken by the on_ties values).
 *                 label_and_value = token_table.get_next_token_label_and_value(             # <<<<<<<<<<<<<<
 *                                     self.program, self.prog_unprocessed,
 *                                     self.ERROR_MSG_TEXT_SNIPPET_SIZE)
 */
      __pyx_t_3 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenTable *)__pyx_v_token_table->__pyx_vtab)->get_next_token_label_and_value(__pyx_v_token_table, __pyx_t_1, __pyx_t_2, __pyx_t_6, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1497, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_XDECREF_SET(__pyx_v_label_and_value, __pyx_t_3);
      __pyx_t_3 = 0;

      /* "typped/lexer.py":1500
 *                                     self.program, self.prog_unprocessed,
 *                                     self.ERROR_MSG_TEXT_SNIPPET_SIZE)
 *                 token_label, token_value = label_and_value             # <<<<<<<<<<<<<<
 * 
 *                 # Remove matched prefix of the self.prog_unprocessed argument after
 */
      if ((likely(PyTuple_CheckExact(__pyx_v_label_and_value))) || (PyList_CheckExact(__pyx_v_label_and_value))) {
        PyObject* sequence = __pyx_v_label_and_value;
        #if !CYTHON_COMPILING_IN_PYPY
        Py_ssize_t size = Py_SIZE(sequence);
        #else
        Py_ssize_t size = PySequence_Size(sequence);
        #endif
        if (unlikely(size != 2)) {
          if (size > 2) __Pyx_RaiseTooManyValuesError(2);
          else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
          __PYX_ERR(0, 1500, __pyx_L1_error)
        }
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        if (likely(PyTuple_CheckExact(sequence))) {
          __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
          __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
        } else {
          __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
          __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
        }
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_2);
        #else
        __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1500, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1500, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      } else {
        Py_ssize_t index = -1;
        __pyx_t_1 = PyObject_GetIter(__pyx_v_label_and_value); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1500, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_7 = Py_TYPE(__pyx_t_1)->tp_iternext;
        index = 0; __pyx_t_3 = __pyx_t_7(__pyx_t_1); if (unlikely(!__pyx_t_3)) goto __pyx_L7_unpacking_failed;
        __Pyx_GOTREF(__pyx_t_3);
        index = 1; __pyx_t_2 = __pyx_t_7(__pyx_t_1); if (unlikely(!__pyx_t_2)) goto __pyx_L7_unpacking_failed;
        __Pyx_GOTREF(__pyx_t_2);
        if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_1), 2) < 0) __PYX_ERR(0, 1500, __pyx_L1_error)
        __pyx_t_7 = NULL;
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        goto __pyx_L8_unpacking_done;
        __pyx_L7_unpacking_failed:;
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_7 = NULL;
        if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
        __PYX_ERR(0, 1500, __pyx_L1_error)
        __pyx_L8_unpacking_done:;
      }
      __Pyx_XDECREF_SET(__pyx_v_token_label, __pyx_t_3);
      __pyx_t_3 = 0;
      __Pyx_XDECREF_SET(__pyx_v_token_value, __pyx_t_2);
      __pyx_t_2 = 0;

      /* "typped/lexer.py":1504
 *                 # Remove matched prefix of the self.prog_unprocessed argument after
 *                 # saving the matched prefix string.
 *                 original_matched_string += self.program[self.prog_unprocessed[0]:             # <<<<<<<<<<<<<<
 *                                         self.prog_unprocessed[0]+len(token_value)]
 *                 self.prog_unprocessed[0] += len(token_value)
 */
      if (unlikely(__pyx_v_self->prog_unprocessed == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 1504, __pyx_L1_error)
      }
      __pyx_t_2 = __Pyx_GetItemInt_List(__pyx_v_self->prog_unprocessed, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1504, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);

      /* "typped/lexer.py":1505
 *                 # saving the matched prefix string.
 *                 original_matched_string += self.program[self.prog_unprocessed[0]:
 *                                         self.prog_unprocessed[0]+len(token_value)]             # <<<<<<<<<<<<<<
 *                 self.prog_unprocessed[0] += len(token_value)
 * 
 */
      if (unlikely(__pyx_v_self->prog_unprocessed == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 1505, __pyx_L1_error)
      }
      __pyx_t_3 = __Pyx_GetItemInt_List(__pyx_v_self->prog_unprocessed, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1505, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_8 = PyObject_Length(__pyx_v_token_value); if (unlikely(__pyx_t_8 == -1)) __PYX_ERR(0, 1505, __pyx_L1_error)
      __pyx_t_1 = PyInt_FromSsize_t(__pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1505, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_4 = PyNumber_Add(__pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1505, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "typped/lexer.py":1504
 *                 # Remove matched prefix of the self.prog_unprocessed argument after
 *                 # saving the matched prefix string.
 *                 original_matched_string += self.program[self.prog_unprocessed[0]:             # <<<<<<<<<<<<<<
 *                                         self.prog_unprocessed[0]+len(token_value)]
 *                 self.prog_unprocessed[0] += len(token_value)
 */
      __pyx_t_1 = __Pyx_PyObject_GetSlice(__pyx_v_self->program, 0, 0, &__pyx_t_2, &__pyx_t_4, NULL, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1504, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyNumber_InPlaceAdd(__pyx_v_original_matched_string, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1504, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF_SET(__pyx_v_original_matched_string, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "typped/lexer.py":1506
 *                 original_matched_string += self.program[self.prog_unprocessed[0]:
 *                                         self.prog_unprocessed[0]+len(token_value)]
 *                 self.prog_unprocessed[0] += len(token_value)             # <<<<<<<<<<<<<<
 * 
 *                 # Look up the class to represent the winning_index.
 */
      if (unlikely(__pyx_v_self->prog_unprocessed == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 1506, __pyx_L1_error)
      }
      __Pyx_INCREF(__pyx_v_self->prog_unprocessed);
      __pyx_t_9 = __pyx_v_self->prog_unprocessed;
      __pyx_t_8 = 0;
      if (unlikely(__pyx_t_9 == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 1506, __pyx_L1_error)
      }
      __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_t_9, __pyx_t_8, Py_ssize_t, 1, PyInt_FromSsize_t, 1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1506, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_10 = PyObject_Length(__pyx_v_token_value); if (unlikely(__pyx_t_10 == -1)) __PYX_ERR(0, 1506, __pyx_L1_error)
      __pyx_t_1 = PyInt_FromSsize_t(__pyx_t_10); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1506, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_t_4, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1506, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      if (unlikely(__pyx_t_9 == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 1506, __pyx_L1_error)
      }
      if (unlikely(__Pyx_SetItemInt(__pyx_t_9, __pyx_t_8, __pyx_t_2, Py_ssize_t, 1, PyInt_FromSsize_t, 1, 1, 1) < 0)) __PYX_ERR(0, 1506, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;

      /* "typped/lexer.py":1509
 * 
 *                 # Look up the class to represent the winning_index.
 *                 try:             # <<<<<<<<<<<<<<
 *                     token_subclass_for_label = token_table[token_label]
 *                 except LexerException:
 */
      {
        __Pyx_PyThreadState_declare
        __Pyx_PyThreadState_assign
        __Pyx_ExceptionSave(&__pyx_t_11, &__pyx_t_12, &__pyx_t_13);
        __Pyx_XGOTREF(__pyx_t_11);
        __Pyx_XGOTREF(__pyx_t_12);
        __Pyx_XGOTREF(__pyx_t_13);
        /*try:*/ {

          /* "typped/lexer.py":1510
 *                 # Look up the class to represent the winning_index.
 *                 try:
 *                     token_subclass_for_label = token_table[token_label]             # <<<<<<<<<<<<<<
 *                 except LexerException:
 *                     raise LexerException("Undefined key in token table for "
 */
          __pyx_t_2 = PyObject_GetItem(((PyObject *)__pyx_v_token_table), __pyx_v_token_label); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1510, __pyx_L9_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_XDECREF_SET(__pyx_v_token_subclass_for_label, __pyx_t_2);
          __pyx_t_2 = 0;

          /* "typped/lexer.py":1509
 * 
 *                 # Look up the class to represent the winning_index.
 *                 try:             # <<<<<<<<<<<<<<
 *                     token_subclass_for_label = token_table[token_label]
 *                 except LexerException:
 */
        }
        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
        __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
        goto __pyx_L16_try_end;
        __pyx_L9_error:;
        __Pyx_PyThreadState_assign
        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;

        /* "typped/lexer.py":1511
 *                 try:
 *                     token_subclass_for_label = token_table[token_label]
 *                 except LexerException:             # <<<<<<<<<<<<<<
 *                     raise LexerException("Undefined key in token table for "
 *                                          "token_label '{0}'.".format(token_label))
 */
        __pyx_t_2 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1511, __pyx_L11_except_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_14 = __Pyx_PyErr_ExceptionMatches(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        if (__pyx_t_14) {
          __Pyx_AddTraceback("typped.lexer.Lexer._unbuffered_token_getter", __pyx_clineno, __pyx_lineno, __pyx_filename);
          if (__Pyx_GetException(&__pyx_t_2, &__pyx_t_1, &__pyx_t_4) < 0) __PYX_ERR(0, 1511, __pyx_L11_except_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_GOTREF(__pyx_t_4);

          /* "typped/lexer.py":1512
 *                     token_subclass_for_label = token_table[token_label]
 *                 except LexerException:
 *                     raise LexerException("Undefined key in token table for "             # <<<<<<<<<<<<<<
 *                                          "token_label '{0}'.".format(token_label))
 * 
 */
          __pyx_t_15 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 1512, __pyx_L11_except_error)
          __Pyx_GOTREF(__pyx_t_15);

          /* "typped/lexer.py":1513
 *                 except LexerException:
 *                     raise LexerException("Undefined key in token table for "
 *                                          "token_label '{0}'.".format(token_label))             # <<<<<<<<<<<<<<
 * 
 *                 # Make an instance of the class to return (or at least to save
 */
          __pyx_t_17 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_Undefined_key_in_token_table_for, __pyx_n_s_format); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 1513, __pyx_L11_except_error)
          __Pyx_GOTREF(__pyx_t_17);
          __pyx_t_18 = NULL;
          if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_17))) {
            __pyx_t_18 = PyMethod_GET_SELF(__pyx_t_17);
            if (likely(__pyx_t_18)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_17);
              __Pyx_INCREF(__pyx_t_18);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_17, function);
            }
          }
          if (!__pyx_t_18) {
            __pyx_t_16 = __Pyx_PyObject_CallOneArg(__pyx_t_17, __pyx_v_token_label); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 1513, __pyx_L11_except_error)
            __Pyx_GOTREF(__pyx_t_16);
          } else {
            #if CYTHON_FAST_PYCALL
            if (PyFunction_Check(__pyx_t_17)) {
              PyObject *__pyx_temp[2] = {__pyx_t_18, __pyx_v_token_label};
              __pyx_t_16 = __Pyx_PyFunction_FastCall(__pyx_t_17, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 1513, __pyx_L11_except_error)
              __Pyx_XDECREF(__pyx_t_18); __pyx_t_18 = 0;
              __Pyx_GOTREF(__pyx_t_16);
            } else
            #endif
            #if CYTHON_FAST_PYCCALL
            if (__Pyx_PyFastCFunction_Check(__pyx_t_17)) {
              PyObject *__pyx_temp[2] = {__pyx_t_18, __pyx_v_token_label};
              __pyx_t_16 = __Pyx_PyCFunction_FastCall(__pyx_t_17, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 1513, __pyx_L11_except_error)
              __Pyx_XDECREF(__pyx_t_18); __pyx_t_18 = 0;
              __Pyx_GOTREF(__pyx_t_16);
            } else
            #endif
            {
              __pyx_t_19 = PyTuple_New(1+1); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 1513, __pyx_L11_except_error)
              __Pyx_GOTREF(__pyx_t_19);
              __Pyx_GIVEREF(__pyx_t_18); PyTuple_SET_ITEM(__pyx_t_19, 0, __pyx_t_18); __pyx_t_18 = NULL;
              __Pyx_INCREF(__pyx_v_token_label);
              __Pyx_GIVEREF(__pyx_v_token_label);
              PyTuple_SET_ITEM(__pyx_t_19, 0+1, __pyx_v_token_label);
              __pyx_t_16 = __Pyx_PyObject_Call(__pyx_t_17, __pyx_t_19, NULL); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 1513, __pyx_L11_except_error)
              __Pyx_GOTREF(__pyx_t_16);
              __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
            }
          }
          __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;
          __pyx_t_17 = NULL;
          if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_15))) {
            __pyx_t_17 = PyMethod_GET_SELF(__pyx_t_15);
            if (likely(__pyx_t_17)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_15);
              __Pyx_INCREF(__pyx_t_17);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_15, function);
            }
          }
          if (!__pyx_t_17) {
            __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_15, __pyx_t_16); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1512, __pyx_L11_except_error)
            __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
            __Pyx_GOTREF(__pyx_t_3);
          } else {
            #if CYTHON_FAST_PYCALL
            if (PyFunction_Check(__pyx_t_15)) {
              PyObject *__pyx_temp[2] = {__pyx_t_17, __pyx_t_16};
              __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_15, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1512, __pyx_L11_except_error)
              __Pyx_XDECREF(__pyx_t_17); __pyx_t_17 = 0;
              __Pyx_GOTREF(__pyx_t_3);
              __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
            } else
            #endif
            #if CYTHON_FAST_PYCCALL
            if (__Pyx_PyFastCFunction_Check(__pyx_t_15)) {
              PyObject *__pyx_temp[2] = {__pyx_t_17, __pyx_t_16};
              __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_15, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1512, __pyx_L11_except_error)
              __Pyx_XDECREF(__pyx_t_17); __pyx_t_17 = 0;
              __Pyx_GOTREF(__pyx_t_3);
              __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
            } else
            #endif
            {
              __pyx_t_19 = PyTuple_New(1+1); if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 1512, __pyx_L11_except_error)
              __Pyx_GOTREF(__pyx_t_19);
              __Pyx_GIVEREF(__pyx_t_17); PyTuple_SET_ITEM(__pyx_t_19, 0, __pyx_t_17); __pyx_t_17 = NULL;
              __Pyx_GIVEREF(__pyx_t_16);
              PyTuple_SET_ITEM(__pyx_t_19, 0+1, __pyx_t_16);
              __pyx_t_16 = 0;
              __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_15, __pyx_t_19, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1512, __pyx_L11_except_error)
              __Pyx_GOTREF(__pyx_t_3);
              __Pyx_DECREF(__pyx_t_19); __pyx_t_19 = 0;
            }
          }
          __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
          __Pyx_Raise(__pyx_t_3, 0, 0, 0);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
          __PYX_ERR(0, 1512, __pyx_L11_except_error)
        }
        goto __pyx_L11_except_error;
        __pyx_L11_except_error:;

        /* "typped/lexer.py":1509
 * 
 *                 # Look up the class to represent the winning_index.
 *                 try:             # <<<<<<<<<<<<<<
 *                     token_subclass_for_label = token_table[token_label]
 *                 except LexerException:
 */
        __Pyx_PyThreadState_assign
        __Pyx_XGIVEREF(__pyx_t_11);
        __Pyx_XGIVEREF(__pyx_t_12);
        __Pyx_XGIVEREF(__pyx_t_13);
        __Pyx_ExceptionReset(__pyx_t_11, __pyx_t_12, __pyx_t_13);
        goto __pyx_L1_error;
        __pyx_L16_try_end:;
      }

      /* "typped/lexer.py":1517
 *                 # Make an instance of the class to return (or at least to save
 *                 # in the token's ignored_before if ignored).
 *                 token_instance = token_subclass_for_label(token_value)             # <<<<<<<<<<<<<<
 *                 if self.final_mod_function:
 *                     token_instance = self.final_mod_function(self, token_instance)
 */
      __Pyx_INCREF(__pyx_v_token_subclass_for_label);
      __pyx_t_1 = __pyx_v_token_subclass_for_label; __pyx_t_2 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
        __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_1);
        if (likely(__pyx_t_2)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
          __Pyx_INCREF(__pyx_t_2);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_1, function);
        }
      }
      if (!__pyx_t_2) {
        __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_v_token_value); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1517, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
      } else {
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_1)) {
          PyObject *__pyx_temp[2] = {__pyx_t_2, __pyx_v_token_value};
          __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_1, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1517, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
          __Pyx_GOTREF(__pyx_t_4);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_1)) {
          PyObject *__pyx_temp[2] = {__pyx_t_2, __pyx_v_token_value};
          __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_1, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1517, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
          __Pyx_GOTREF(__pyx_t_4);
        } else
        #endif
        {
          __pyx_t_3 = PyTuple_New(1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1517, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2); __pyx_t_2 = NULL;
          __Pyx_INCREF(__pyx_v_token_value);
          __Pyx_GIVEREF(__pyx_v_token_value);
          PyTuple_SET_ITEM(__pyx_t_3, 0+1, __pyx_v_token_value);
          __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_3, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1517, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        }
      }
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_XDECREF_SET(__pyx_v_token_instance, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "typped/lexer.py":1518
 *                 # in the token's ignored_before if ignored).
 *                 token_instance = token_subclass_for_label(token_value)
 *                 if self.final_mod_function:             # <<<<<<<<<<<<<<
 *                     token_instance = self.final_mod_function(self, token_instance)
 *                 self.all_token_count += 1
 */
      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_self->final_mod_function); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1518, __pyx_L1_error)
      if (__pyx_t_5) {

        /* "typped/lexer.py":1519
 *                 token_instance = token_subclass_for_label(token_value)
 *                 if self.final_mod_function:
 *                     token_instance = self.final_mod_function(self, token_instance)             # <<<<<<<<<<<<<<
 *                 self.all_token_count += 1
 * 
 */
        __Pyx_INCREF(__pyx_v_self->final_mod_function);
        __pyx_t_1 = __pyx_v_self->final_mod_function; __pyx_t_3 = NULL;
        __pyx_t_14 = 0;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
          __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
          if (likely(__pyx_t_3)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
            __Pyx_INCREF(__pyx_t_3);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_1, function);
            __pyx_t_14 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_1)) {
          PyObject *__pyx_temp[3] = {__pyx_t_3, ((PyObject *)__pyx_v_self), __pyx_v_token_instance};
          __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1519, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_GOTREF(__pyx_t_4);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_1)) {
          PyObject *__pyx_temp[3] = {__pyx_t_3, ((PyObject *)__pyx_v_self), __pyx_v_token_instance};
          __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1519, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_GOTREF(__pyx_t_4);
        } else
        #endif
        {
          __pyx_t_2 = PyTuple_New(2+__pyx_t_14); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1519, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          if (__pyx_t_3) {
            __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
          }
          __Pyx_INCREF(((PyObject *)__pyx_v_self));
          __Pyx_GIVEREF(((PyObject *)__pyx_v_self));
          PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_14, ((PyObject *)__pyx_v_self));
          __Pyx_INCREF(__pyx_v_token_instance);
          __Pyx_GIVEREF(__pyx_v_token_instance);
          PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_14, __pyx_v_token_instance);
          __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_2, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1519, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        }
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF_SET(__pyx_v_token_instance, __pyx_t_4);
        __pyx_t_4 = 0;

        /* "typped/lexer.py":1518
 *                 # in the token's ignored_before if ignored).
 *                 token_instance = token_subclass_for_label(token_value)
 *                 if self.final_mod_function:             # <<<<<<<<<<<<<<
 *                     token_instance = self.final_mod_function(self, token_instance)
 *                 self.all_token_count += 1
 */
      }

      /* "typped/lexer.py":1520
 *                 if self.final_mod_function:
 *                     token_instance = self.final_mod_function(self, token_instance)
 *                 self.all_token_count += 1             # <<<<<<<<<<<<<<
 * 
 *                 # Save the line and char counts for the beginning text of the
 */
      __pyx_v_self->all_token_count = (__pyx_v_self->all_token_count + 1);

      /* "typped/lexer.py":1534
 *                 # out to be ignored tokens (tested just below this block).
 *                 token_instance.line_and_char = (
 *                                  self.raw_linenumber, self.upcoming_raw_charnumber)             # <<<<<<<<<<<<<<
 *                 token_instance.char_index_in_program = self.upcoming_raw_total_chars
 *                 num_newlines = token_value.count("\n")
 */
      __pyx_t_4 = __Pyx_PyInt_From_long(__pyx_v_self->raw_linenumber); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1534, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_self->upcoming_raw_charnumber); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1534, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1534, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_1);
      PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_1);
      __pyx_t_4 = 0;
      __pyx_t_1 = 0;

      /* "typped/lexer.py":1533
 *                 # Remember that we are looping and getting tokens which may turn
 *                 # out to be ignored tokens (tested just below this block).
 *                 token_instance.line_and_char = (             # <<<<<<<<<<<<<<
 *                                  self.raw_linenumber, self.upcoming_raw_charnumber)
 *                 token_instance.char_index_in_program = self.upcoming_raw_total_chars
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_token_instance, __pyx_n_s_line_and_char, __pyx_t_2) < 0) __PYX_ERR(0, 1533, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "typped/lexer.py":1535
 *                 token_instance.line_and_char = (
 *                                  self.raw_linenumber, self.upcoming_raw_charnumber)
 *                 token_instance.char_index_in_program = self.upcoming_raw_total_chars             # <<<<<<<<<<<<<<
 *                 num_newlines = token_value.count("\n")
 *                 self.raw_linenumber += num_newlines
 */
      __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v_self->upcoming_raw_total_chars); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1535, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_token_instance, __pyx_n_s_char_index_in_program, __pyx_t_2) < 0) __PYX_ERR(0, 1535, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "typped/lexer.py":1536
 *                                  self.raw_linenumber, self.upcoming_raw_charnumber)
 *                 token_instance.char_index_in_program = self.upcoming_raw_total_chars
 *                 num_newlines = token_value.count("\n")             # <<<<<<<<<<<<<<
 *                 self.raw_linenumber += num_newlines
 *                 if num_newlines == 0:
 */
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_token_value, __pyx_n_s_count); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1536, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1536, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_XDECREF_SET(__pyx_v_num_newlines, __pyx_t_1);
      __pyx_t_1 = 0;

      /* "typped/lexer.py":1537
 *                 token_instance.char_index_in_program = self.upcoming_raw_total_chars
 *                 num_newlines = token_value.count("\n")
 *                 self.raw_linenumber += num_newlines             # <<<<<<<<<<<<<<
 *                 if num_newlines == 0:
 *                     self.upcoming_raw_charnumber += len(token_value)
 */
      __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_self->raw_linenumber); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1537, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_t_1, __pyx_v_num_newlines); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1537, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_6 = __Pyx_PyInt_As_long(__pyx_t_2); if (unlikely((__pyx_t_6 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1537, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_v_self->raw_linenumber = __pyx_t_6;

      /* "typped/lexer.py":1538
 *                 num_newlines = token_value.count("\n")
 *                 self.raw_linenumber += num_newlines
 *                 if num_newlines == 0:             # <<<<<<<<<<<<<<
 *                     self.upcoming_raw_charnumber += len(token_value)
 *                 else:
 */
      __pyx_t_2 = __Pyx_PyInt_EqObjC(__pyx_v_num_newlines, __pyx_int_0, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1538, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1538, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      if (__pyx_t_5) {

        /* "typped/lexer.py":1539
 *                 self.raw_linenumber += num_newlines
 *                 if num_newlines == 0:
 *                     self.upcoming_raw_charnumber += len(token_value)             # <<<<<<<<<<<<<<
 *                 else:
 *                     first_after_newline = True
 */
        __pyx_t_8 = PyObject_Length(__pyx_v_token_value); if (unlikely(__pyx_t_8 == -1)) __PYX_ERR(0, 1539, __pyx_L1_error)
        __pyx_v_self->upcoming_raw_charnumber = (__pyx_v_self->upcoming_raw_charnumber + __pyx_t_8);

        /* "typped/lexer.py":1538
 *                 num_newlines = token_value.count("\n")
 *                 self.raw_linenumber += num_newlines
 *                 if num_newlines == 0:             # <<<<<<<<<<<<<<
 *                     self.upcoming_raw_charnumber += len(token_value)
 *                 else:
 */
        goto __pyx_L20;
      }

      /* "typped/lexer.py":1541
 *                     self.upcoming_raw_charnumber += len(token_value)
 *                 else:
 *                     first_after_newline = True             # <<<<<<<<<<<<<<
 *                     last_newline = token_value.rfind("\n")
 *                     self.upcoming_raw_charnumber = (
 */
      /*else*/ {
        __pyx_v_first_after_newline = 1;

        /* "typped/lexer.py":1542
 *                 else:
 *                     first_after_newline = True
 *                     last_newline = token_value.rfind("\n")             # <<<<<<<<<<<<<<
 *                     self.upcoming_raw_charnumber = (
 *                             len(token_value) - (last_newline + 1) + 1)
 */
        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_token_value, __pyx_n_s_rfind); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1542, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_tuple__23, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1542, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __Pyx_XDECREF_SET(__pyx_v_last_newline, __pyx_t_1);
        __pyx_t_1 = 0;

        /* "typped/lexer.py":1544
 *                     last_newline = token_value.rfind("\n")
 *                     self.upcoming_raw_charnumber = (
 *                             len(token_value) - (last_newline + 1) + 1)             # <<<<<<<<<<<<<<
 *                 self.upcoming_raw_total_chars += len(token_value)
 * 
 */
        __pyx_t_8 = PyObject_Length(__pyx_v_token_value); if (unlikely(__pyx_t_8 == -1)) __PYX_ERR(0, 1544, __pyx_L1_error)
        __pyx_t_1 = PyInt_FromSsize_t(__pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1544, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_2 = __Pyx_PyInt_AddObjC(__pyx_v_last_newline, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1544, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_4 = PyNumber_Subtract(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1544, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __pyx_t_2 = __Pyx_PyInt_AddObjC(__pyx_t_4, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1544, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __pyx_t_6 = __Pyx_PyInt_As_long(__pyx_t_2); if (unlikely((__pyx_t_6 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 1544, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

        /* "typped/lexer.py":1543
 *                     first_after_newline = True
 *                     last_newline = token_value.rfind("\n")
 *                     self.upcoming_raw_charnumber = (             # <<<<<<<<<<<<<<
 *                             len(token_value) - (last_newline + 1) + 1)
 *                 self.upcoming_raw_total_chars += len(token_value)
 */
        __pyx_v_self->upcoming_raw_charnumber = __pyx_t_6;
      }
      __pyx_L20:;

      /* "typped/lexer.py":1545
 *                     self.upcoming_raw_charnumber = (
 *                             len(token_value) - (last_newline + 1) + 1)
 *                 self.upcoming_raw_total_chars += len(token_value)             # <<<<<<<<<<<<<<
 * 
 *                 # ------------------------------------------------------------------
 */
      __pyx_t_8 = PyObject_Length(__pyx_v_token_value); if (unlikely(__pyx_t_8 == -1)) __PYX_ERR(0, 1545, __pyx_L1_error)
      __pyx_v_self->upcoming_raw_total_chars = (__pyx_v_self->upcoming_raw_total_chars + __pyx_t_8);

      /* "typped/lexer.py":1550
 *                 # Go to the top of the loop and get another if the token is ignored.
 *                 # ------------------------------------------------------------------
 *                 if token_label in token_table.ignored_tokens():             # <<<<<<<<<<<<<<
 *                     ignored_before_labels.append(token_label)
 *                     ignored_before_tokens.append(token_instance)
 */
      __pyx_t_2 = ((struct __pyx_vtabstruct_6typped_5lexer_TokenTable *)__pyx_v_token_table->__pyx_vtab)->ignored_tokens(__pyx_v_token_table, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1550, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_v_token_label, __pyx_t_2, Py_EQ)); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1550, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_20 = (__pyx_t_5 != 0);
      if (__pyx_t_20) {

        /* "typped/lexer.py":1551
 *                 # ------------------------------------------------------------------
 *                 if token_label in token_table.ignored_tokens():
 *                     ignored_before_labels.append(token_label)             # <<<<<<<<<<<<<<
 *                     ignored_before_tokens.append(token_instance)
 *                     continue
 */
        __pyx_t_21 = __Pyx_PyList_Append(__pyx_v_ignored_before_labels, __pyx_v_token_label); if (unlikely(__pyx_t_21 == -1)) __PYX_ERR(0, 1551, __pyx_L1_error)

        /* "typped/lexer.py":1552
 *                 if token_label in token_table.ignored_tokens():
 *                     ignored_before_labels.append(token_label)
 *                     ignored_before_tokens.append(token_instance)             # <<<<<<<<<<<<<<
 *                     continue
 * 
 */
        __pyx_t_21 = __Pyx_PyList_Append(__pyx_v_ignored_before_tokens, __pyx_v_token_instance); if (unlikely(__pyx_t_21 == -1)) __PYX_ERR(0, 1552, __pyx_L1_error)

        /* "typped/lexer.py":1553
 *                     ignored_before_labels.append(token_label)
 *                     ignored_before_tokens.append(token_instance)
 *                     continue             # <<<<<<<<<<<<<<
 * 
 *                 self.non_ignored_token_count += 1
 */
        goto __pyx_L3_continue;

        /* "typped/lexer.py":1550
 *                 # Go to the top of the loop and get another if the token is ignored.
 *                 # ------------------------------------------------------------------
 *                 if token_label in token_table.ignored_tokens():             # <<<<<<<<<<<<<<
 *                     ignored_before_labels.append(token_label)
 *                     ignored_before_tokens.append(token_instance)
 */
      }

      /* "typped/lexer.py":1555
 *                     continue
 * 
 *                 self.non_ignored_token_count += 1             # <<<<<<<<<<<<<<
 * 
 *             # =======================================================================
 */
      __pyx_v_self->non_ignored_token_count = (__pyx_v_self->non_ignored_token_count + 1);

      /* "typped/lexer.py":1494
 *             # === Ordinary execution state ==========================================
 *             # =======================================================================
 *             if self.token_generator_state == GenTokenState.ordinary:             # <<<<<<<<<<<<<<
 *                 # Find the token_label and token_value of the matching prefix
 *                 # which is longest (with ties broken by the on_ties values).
 */
      goto __pyx_L6;
    }

    /* "typped/lexer.py":1560
 *             # === Return only end-tokens state ======================================
 *             # =======================================================================
 *             elif self.token_generator_state == GenTokenState.end:             # <<<<<<<<<<<<<<
 *                 token_subclass_for_end = token_table[token_table.end_token_label]
 *                 token_instance = token_subclass_for_end(None)
 */
    __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v_self->token_generator_state); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1560, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState), __pyx_n_s_end); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1560, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_t_4, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1560, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_20 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_20 < 0)) __PYX_ERR(0, 1560, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_20) {

      /* "typped/lexer.py":1561
 *             # =======================================================================
 *             elif self.token_generator_state == GenTokenState.end:
 *                 token_subclass_for_end = token_table[token_table.end_token_label]             # <<<<<<<<<<<<<<
 *                 token_instance = token_subclass_for_end(None)
 *                 if self.final_mod_function:
 */
      __pyx_t_1 = PyObject_GetItem(((PyObject *)__pyx_v_token_table), __pyx_v_token_table->end_token_label); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1561, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_v_token_subclass_for_end = __pyx_t_1;
      __pyx_t_1 = 0;

      /* "typped/lexer.py":1562
 *             elif self.token_generator_state == GenTokenState.end:
 *                 token_subclass_for_end = token_table[token_table.end_token_label]
 *                 token_instance = token_subclass_for_end(None)             # <<<<<<<<<<<<<<
 *                 if self.final_mod_function:
 *                     token_instance = self.final_mod_function(self, token_instance)
 */
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_v_token_subclass_for_end, __pyx_tuple__24, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1562, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_XDECREF_SET(__pyx_v_token_instance, __pyx_t_1);
      __pyx_t_1 = 0;

      /* "typped/lexer.py":1563
 *                 token_subclass_for_end = token_table[token_table.end_token_label]
 *                 token_instance = token_subclass_for_end(None)
 *                 if self.final_mod_function:             # <<<<<<<<<<<<<<
 *                     token_instance = self.final_mod_function(self, token_instance)
 * 
 */
      __pyx_t_20 = __Pyx_PyObject_IsTrue(__pyx_v_self->final_mod_function); if (unlikely(__pyx_t_20 < 0)) __PYX_ERR(0, 1563, __pyx_L1_error)
      if (__pyx_t_20) {

        /* "typped/lexer.py":1564
 *                 token_instance = token_subclass_for_end(None)
 *                 if self.final_mod_function:
 *                     token_instance = self.final_mod_function(self, token_instance)             # <<<<<<<<<<<<<<
 * 
 *                 token_instance.line_and_char = (self.raw_linenumber,
 */
        __Pyx_INCREF(__pyx_v_self->final_mod_function);
        __pyx_t_4 = __pyx_v_self->final_mod_function; __pyx_t_2 = NULL;
        __pyx_t_14 = 0;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
          __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_4);
          if (likely(__pyx_t_2)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
            __Pyx_INCREF(__pyx_t_2);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_4, function);
            __pyx_t_14 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_4)) {
          PyObject *__pyx_temp[3] = {__pyx_t_2, ((PyObject *)__pyx_v_self), __pyx_v_token_instance};
          __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1564, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
          __Pyx_GOTREF(__pyx_t_1);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
          PyObject *__pyx_temp[3] = {__pyx_t_2, ((PyObject *)__pyx_v_self), __pyx_v_token_instance};
          __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1564, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
          __Pyx_GOTREF(__pyx_t_1);
        } else
        #endif
        {
          __pyx_t_3 = PyTuple_New(2+__pyx_t_14); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1564, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          if (__pyx_t_2) {
            __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2); __pyx_t_2 = NULL;
          }
          __Pyx_INCREF(((PyObject *)__pyx_v_self));
          __Pyx_GIVEREF(((PyObject *)__pyx_v_self));
          PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_14, ((PyObject *)__pyx_v_self));
          __Pyx_INCREF(__pyx_v_token_instance);
          __Pyx_GIVEREF(__pyx_v_token_instance);
          PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_14, __pyx_v_token_instance);
          __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1564, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        }
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_DECREF_SET(__pyx_v_token_instance, __pyx_t_1);
        __pyx_t_1 = 0;

        /* "typped/lexer.py":1563
 *                 token_subclass_for_end = token_table[token_table.end_token_label]
 *                 token_instance = token_subclass_for_end(None)
 *                 if self.final_mod_function:             # <<<<<<<<<<<<<<
 *                     token_instance = self.final_mod_function(self, token_instance)
 * 
 */
      }

      /* "typped/lexer.py":1566
 *                     token_instance = self.final_mod_function(self, token_instance)
 * 
 *                 token_instance.line_and_char = (self.raw_linenumber,             # <<<<<<<<<<<<<<
 *                                                 self.upcoming_raw_charnumber)
 *                 token_instance.char_index_in_program = self.upcoming_raw_total_chars
 */
      __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_self->raw_linenumber); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1566, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);

      /* "typped/lexer.py":1567
 * 
 *                 token_instance.line_and_char = (self.raw_linenumber,
 *                                                 self.upcoming_raw_charnumber)             # <<<<<<<<<<<<<<
 *                 token_instance.char_index_in_program = self.upcoming_raw_total_chars
 * 
 */
      __pyx_t_4 = __Pyx_PyInt_From_long(__pyx_v_self->upcoming_raw_charnumber); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1567, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);

      /* "typped/lexer.py":1566
 *                     token_instance = self.final_mod_function(self, token_instance)
 * 
 *                 token_instance.line_and_char = (self.raw_linenumber,             # <<<<<<<<<<<<<<
 *                                                 self.upcoming_raw_charnumber)
 *                 token_instance.char_index_in_program = self.upcoming_raw_total_chars
 */
      __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1566, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_GIVEREF(__pyx_t_1);
      PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_1);
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_4);
      __pyx_t_1 = 0;
      __pyx_t_4 = 0;
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_token_instance, __pyx_n_s_line_and_char, __pyx_t_3) < 0) __PYX_ERR(0, 1566, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "typped/lexer.py":1568
 *                 token_instance.line_and_char = (self.raw_linenumber,
 *                                                 self.upcoming_raw_charnumber)
 *                 token_instance.char_index_in_program = self.upcoming_raw_total_chars             # <<<<<<<<<<<<<<
 * 
 *             # Got a token to return.  Set some attributes and return it.
 */
      __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_self->upcoming_raw_total_chars); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1568, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_token_instance, __pyx_n_s_char_index_in_program, __pyx_t_3) < 0) __PYX_ERR(0, 1568, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "typped/lexer.py":1560
 *             # === Return only end-tokens state ======================================
 *             # =======================================================================
 *             elif self.token_generator_state == GenTokenState.end:             # <<<<<<<<<<<<<<
 *                 token_subclass_for_end = token_table[token_table.end_token_label]
 *                 token_instance = token_subclass_for_end(None)
 */
    }
    __pyx_L6:;

    /* "typped/lexer.py":1572
 *             # Got a token to return.  Set some attributes and return it.
 *             # Note that the attributes below are not set on ignored tokens!
 *             token_instance.original_matched_string = original_matched_string             # <<<<<<<<<<<<<<
 *             token_instance.ignored_before = tuple(ignored_before_tokens)
 *             token_instance.all_token_count = self.all_token_count
 */
    if (unlikely(!__pyx_v_token_instance)) { __Pyx_RaiseUnboundLocalError("token_instance"); __PYX_ERR(0, 1572, __pyx_L1_error) }
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_token_instance, __pyx_n_s_original_matched_string, __pyx_v_original_matched_string) < 0) __PYX_ERR(0, 1572, __pyx_L1_error)

    /* "typped/lexer.py":1573
 *             # Note that the attributes below are not set on ignored tokens!
 *             token_instance.original_matched_string = original_matched_string
 *             token_instance.ignored_before = tuple(ignored_before_tokens)             # <<<<<<<<<<<<<<
 *             token_instance.all_token_count = self.all_token_count
 *             token_instance.non_ignored_token_count = self.non_ignored_token_count
 */
    __pyx_t_3 = PyList_AsTuple(__pyx_v_ignored_before_tokens); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1573, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (unlikely(!__pyx_v_token_instance)) { __Pyx_RaiseUnboundLocalError("token_instance"); __PYX_ERR(0, 1573, __pyx_L1_error) }
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_token_instance, __pyx_n_s_ignored_before, __pyx_t_3) < 0) __PYX_ERR(0, 1573, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "typped/lexer.py":1574
 *             token_instance.original_matched_string = original_matched_string
 *             token_instance.ignored_before = tuple(ignored_before_tokens)
 *             token_instance.all_token_count = self.all_token_count             # <<<<<<<<<<<<<<
 *             token_instance.non_ignored_token_count = self.non_ignored_token_count
 *             token_instance.is_first = self._curr_token_is_first
 */
    __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_self->all_token_count); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1574, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (unlikely(!__pyx_v_token_instance)) { __Pyx_RaiseUnboundLocalError("token_instance"); __PYX_ERR(0, 1574, __pyx_L1_error) }
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_token_instance, __pyx_n_s_all_token_count, __pyx_t_3) < 0) __PYX_ERR(0, 1574, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "typped/lexer.py":1575
 *             token_instance.ignored_before = tuple(ignored_before_tokens)
 *             token_instance.all_token_count = self.all_token_count
 *             token_instance.non_ignored_token_count = self.non_ignored_token_count             # <<<<<<<<<<<<<<
 *             token_instance.is_first = self._curr_token_is_first
 *             token_instance.is_first_on_line = token_instance.is_first or first_after_newline
 */
    __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_self->non_ignored_token_count); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1575, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (unlikely(!__pyx_v_token_instance)) { __Pyx_RaiseUnboundLocalError("token_instance"); __PYX_ERR(0, 1575, __pyx_L1_error) }
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_token_instance, __pyx_n_s_non_ignored_token_count, __pyx_t_3) < 0) __PYX_ERR(0, 1575, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "typped/lexer.py":1576
 *             token_instance.all_token_count = self.all_token_count
 *             token_instance.non_ignored_token_count = self.non_ignored_token_count
 *             token_instance.is_first = self._curr_token_is_first             # <<<<<<<<<<<<<<
 *             token_instance.is_first_on_line = token_instance.is_first or first_after_newline
 * 
 */
    __pyx_t_3 = __Pyx_PyBool_FromLong(__pyx_v_self->_curr_token_is_first); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1576, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (unlikely(!__pyx_v_token_instance)) { __Pyx_RaiseUnboundLocalError("token_instance"); __PYX_ERR(0, 1576, __pyx_L1_error) }
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_token_instance, __pyx_n_s_is_first, __pyx_t_3) < 0) __PYX_ERR(0, 1576, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "typped/lexer.py":1577
 *             token_instance.non_ignored_token_count = self.non_ignored_token_count
 *             token_instance.is_first = self._curr_token_is_first
 *             token_instance.is_first_on_line = token_instance.is_first or first_after_newline             # <<<<<<<<<<<<<<
 * 
 *             return token_instance
 */
    if (unlikely(!__pyx_v_token_instance)) { __Pyx_RaiseUnboundLocalError("token_instance"); __PYX_ERR(0, 1577, __pyx_L1_error) }
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_token_instance, __pyx_n_s_is_first); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1577, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_20 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_20 < 0)) __PYX_ERR(0, 1577, __pyx_L1_error)
    if (!__pyx_t_20) {
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    } else {
      __Pyx_INCREF(__pyx_t_4);
      __pyx_t_3 = __pyx_t_4;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      goto __pyx_L23_bool_binop_done;
    }
    __pyx_t_4 = __Pyx_PyBool_FromLong(__pyx_v_first_after_newline); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1577, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = __pyx_t_4;
    __pyx_t_4 = 0;
    __pyx_L23_bool_binop_done:;
    if (unlikely(!__pyx_v_token_instance)) { __Pyx_RaiseUnboundLocalError("token_instance"); __PYX_ERR(0, 1577, __pyx_L1_error) }
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_token_instance, __pyx_n_s_is_first_on_line, __pyx_t_3) < 0) __PYX_ERR(0, 1577, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "typped/lexer.py":1579
 *             token_instance.is_first_on_line = token_instance.is_first or first_after_newline
 * 
 *             return token_instance             # <<<<<<<<<<<<<<
 * 
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    if (unlikely(!__pyx_v_token_instance)) { __Pyx_RaiseUnboundLocalError("token_instance"); __PYX_ERR(0, 1579, __pyx_L1_error) }
    __Pyx_INCREF(__pyx_v_token_instance);
    __pyx_r = __pyx_v_token_instance;
    goto __pyx_L0;
    __pyx_L3_continue:;
  }

  /* "typped/lexer.py":1449
 *     #
 * 
 *     def _unbuffered_token_getter(self):             # <<<<<<<<<<<<<<
 *         """This routine generates tokens from the program text in the attribute
 *         `self.program`.  It does not modify the program itself, but keeps slice
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_15);
  __Pyx_XDECREF(__pyx_t_16);
  __Pyx_XDECREF(__pyx_t_17);
  __Pyx_XDECREF(__pyx_t_18);
  __Pyx_XDECREF(__pyx_t_19);
  __Pyx_AddTraceback("typped.lexer.Lexer._unbuffered_token_getter", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_ignored_before_labels);
  __Pyx_XDECREF(__pyx_v_ignored_before_tokens);
  __Pyx_XDECREF(__pyx_v_original_matched_string);
  __Pyx_XDECREF((PyObject *)__pyx_v_token_table);
  __Pyx_XDECREF(__pyx_v_label_and_value);
  __Pyx_XDECREF(__pyx_v_token_label);
  __Pyx_XDECREF(__pyx_v_token_value);
  __Pyx_XDECREF(__pyx_v_token_subclass_for_label);
  __Pyx_XDECREF(__pyx_v_token_instance);
  __Pyx_XDECREF(__pyx_v_num_newlines);
  __Pyx_XDECREF(__pyx_v_last_newline);
  __Pyx_XDECREF(__pyx_v_token_subclass_for_end);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_65_unbuffered_token_getter(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_6typped_5lexer_5Lexer_64_unbuffered_token_getter[] = "This routine generates tokens from the program text in the attribute\n        `self.program`.  It does not modify the program itself, but keeps slice\n        indices in a list `self.prog_unprocessed` indexing the unprocessed\n        part.  That slice can be externally modified (the `go_back` routine\n        does this).\n\n        This is a lower-level function used by `next` to do the real work.  All\n        the token subclasses should have been defined and stored in the the\n        `TokenTable`.  Regexes defined for tokens are repeatedly matched at the\n        beinning of the string `program`.  When a winning_index is found it is\n        stripped off the beginning of the unprocessed slice of `program`.  For\n        each winning_index the token subclass is looked up in the `TokenTable`\n        object and an instance of that subclass is returned to represent the\n        token.  Every token processed is represented by a unique new instance\n        of the appropriate subclass of `TokenNode`.\n\n        This generator has two states which can be set instance-globally to\n        alter the state of the generator.  The states are\n        `GenTokenState.ordinary` for ordinary scanning execution, and\n        `GenTokenState.end` when all the tokens have been read.  In the\n        `GenTokenState.end` state the method returns nothing but end tokens.\n        The end state is normally entered when the program text becomes empty.\n        If that variable is later is set to have text again the state switches\n        back to ordinary.  (The lexer's `next` routine handles any raising of\n        `StopIteration`.)";
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_65_unbuffered_token_getter = {"_unbuffered_token_getter", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_65_unbuffered_token_getter, METH_NOARGS, __pyx_doc_6typped_5lexer_5Lexer_64_unbuffered_token_getter};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_65_unbuffered_token_getter(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("_unbuffered_token_getter (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_64_unbuffered_token_getter(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_64_unbuffered_token_getter(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("_unbuffered_token_getter", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_f_6typped_5lexer_5Lexer__unbuffered_token_getter(__pyx_v_self, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer._unbuffered_token_getter", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":98
 * 
 * cdef class Lexer(object):
 *     cdef public TokenBuffer token_buffer             # <<<<<<<<<<<<<<
 *     cdef public TokenTable token_table
 *     cdef public token
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_12token_buffer_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_12token_buffer_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_12token_buffer___get__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_12token_buffer___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_self->token_buffer));
  __pyx_r = ((PyObject *)__pyx_v_self->token_buffer);
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_12token_buffer_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_12token_buffer_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_12token_buffer_2__set__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_12token_buffer_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__set__", 0);
  if (!(likely(((__pyx_v_value) == Py_None) || likely(__Pyx_TypeTest(__pyx_v_value, __pyx_ptype_6typped_5lexer_TokenBuffer))))) __PYX_ERR(1, 98, __pyx_L1_error)
  __pyx_t_1 = __pyx_v_value;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->token_buffer);
  __Pyx_DECREF(((PyObject *)__pyx_v_self->token_buffer));
  __pyx_v_self->token_buffer = ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.token_buffer.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_12token_buffer_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_12token_buffer_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_12token_buffer_4__del__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_12token_buffer_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->token_buffer);
  __Pyx_DECREF(((PyObject *)__pyx_v_self->token_buffer));
  __pyx_v_self->token_buffer = ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)Py_None);

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":99
 * cdef class Lexer(object):
 *     cdef public TokenBuffer token_buffer
 *     cdef public TokenTable token_table             # <<<<<<<<<<<<<<
 *     cdef public token
 *     cdef public bint text_is_set
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_11token_table_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_11token_table_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_11token_table___get__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_11token_table___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_self->token_table));
  __pyx_r = ((PyObject *)__pyx_v_self->token_table);
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_11token_table_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_11token_table_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_11token_table_2__set__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_11token_table_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__set__", 0);
  if (!(likely(((__pyx_v_value) == Py_None) || likely(__Pyx_TypeTest(__pyx_v_value, __pyx_ptype_6typped_5lexer_TokenTable))))) __PYX_ERR(1, 99, __pyx_L1_error)
  __pyx_t_1 = __pyx_v_value;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->token_table);
  __Pyx_DECREF(((PyObject *)__pyx_v_self->token_table));
  __pyx_v_self->token_table = ((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.token_table.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_11token_table_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_11token_table_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_11token_table_4__del__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_11token_table_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->token_table);
  __Pyx_DECREF(((PyObject *)__pyx_v_self->token_table));
  __pyx_v_self->token_table = ((struct __pyx_obj_6typped_5lexer_TokenTable *)Py_None);

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":100
 *     cdef public TokenBuffer token_buffer
 *     cdef public TokenTable token_table
 *     cdef public token             # <<<<<<<<<<<<<<
 *     cdef public bint text_is_set
 *     cdef public long all_token_count, non_ignored_token_count
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_5token_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_5token_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_5token___get__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_5token___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->token);
  __pyx_r = __pyx_v_self->token;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_5token_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_5token_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_5token_2__set__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_5token_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__", 0);
  __Pyx_INCREF(__pyx_v_value);
  __Pyx_GIVEREF(__pyx_v_value);
  __Pyx_GOTREF(__pyx_v_self->token);
  __Pyx_DECREF(__pyx_v_self->token);
  __pyx_v_self->token = __pyx_v_value;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_5token_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_5token_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_5token_4__del__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_5token_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->token);
  __Pyx_DECREF(__pyx_v_self->token);
  __pyx_v_self->token = Py_None;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":101
 *     cdef public TokenTable token_table
 *     cdef public token
 *     cdef public bint text_is_set             # <<<<<<<<<<<<<<
 *     cdef public long all_token_count, non_ignored_token_count
 *     cdef long raw_linenumber
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_11text_is_set_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_11text_is_set_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_11text_is_set___get__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_11text_is_set___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_self->text_is_set); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 101, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.text_is_set.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_11text_is_set_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_11text_is_set_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_11text_is_set_2__set__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_11text_is_set_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  __Pyx_RefNannySetupContext("__set__", 0);
  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_value); if (unlikely((__pyx_t_1 == (int)-1) && PyErr_Occurred())) __PYX_ERR(1, 101, __pyx_L1_error)
  __pyx_v_self->text_is_set = __pyx_t_1;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.text_is_set.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":102
 *     cdef public token
 *     cdef public bint text_is_set
 *     cdef public long all_token_count, non_ignored_token_count             # <<<<<<<<<<<<<<
 *     cdef long raw_linenumber
 *     cdef long upcoming_raw_linenumber, upcoming_raw_charnumber, upcoming_raw_total_chars
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_15all_token_count_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_15all_token_count_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_15all_token_count___get__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_15all_token_count___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_self->all_token_count); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 102, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.all_token_count.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_15all_token_count_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_15all_token_count_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_15all_token_count_2__set__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_15all_token_count_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  __Pyx_RefNannySetupContext("__set__", 0);
  __pyx_t_1 = __Pyx_PyInt_As_long(__pyx_v_value); if (unlikely((__pyx_t_1 == (long)-1) && PyErr_Occurred())) __PYX_ERR(1, 102, __pyx_L1_error)
  __pyx_v_self->all_token_count = __pyx_t_1;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.all_token_count.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_23non_ignored_token_count_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_23non_ignored_token_count_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_23non_ignored_token_count___get__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_23non_ignored_token_count___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_long(__pyx_v_self->non_ignored_token_count); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 102, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.non_ignored_token_count.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_23non_ignored_token_count_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_23non_ignored_token_count_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_23non_ignored_token_count_2__set__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_23non_ignored_token_count_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  __Pyx_RefNannySetupContext("__set__", 0);
  __pyx_t_1 = __Pyx_PyInt_As_long(__pyx_v_value); if (unlikely((__pyx_t_1 == (long)-1) && PyErr_Occurred())) __PYX_ERR(1, 102, __pyx_L1_error)
  __pyx_v_self->non_ignored_token_count = __pyx_t_1;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_AddTraceback("typped.lexer.Lexer.non_ignored_token_count.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":106
 *     cdef long upcoming_raw_linenumber, upcoming_raw_charnumber, upcoming_raw_total_chars
 *     cdef long token_generator_state # Holds a state, not the class object.
 *     cdef public final_mod_function, default_helper_exception             # <<<<<<<<<<<<<<
 *     cdef bint already_returned_end_token, _curr_token_is_first, _returned_first_token
 *     cdef public list prog_unprocessed
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_18final_mod_function_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_18final_mod_function_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_18final_mod_function___get__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_18final_mod_function___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->final_mod_function);
  __pyx_r = __pyx_v_self->final_mod_function;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_18final_mod_function_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_18final_mod_function_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_18final_mod_function_2__set__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_18final_mod_function_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__", 0);
  __Pyx_INCREF(__pyx_v_value);
  __Pyx_GIVEREF(__pyx_v_value);
  __Pyx_GOTREF(__pyx_v_self->final_mod_function);
  __Pyx_DECREF(__pyx_v_self->final_mod_function);
  __pyx_v_self->final_mod_function = __pyx_v_value;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_18final_mod_function_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_18final_mod_function_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_18final_mod_function_4__del__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_18final_mod_function_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->final_mod_function);
  __Pyx_DECREF(__pyx_v_self->final_mod_function);
  __pyx_v_self->final_mod_function = Py_None;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_24default_helper_exception_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_24default_helper_exception_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_24default_helper_exception___get__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_24default_helper_exception___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->default_helper_exception);
  __pyx_r = __pyx_v_self->default_helper_exception;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_24default_helper_exception_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_24default_helper_exception_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_24default_helper_exception_2__set__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_24default_helper_exception_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__", 0);
  __Pyx_INCREF(__pyx_v_value);
  __Pyx_GIVEREF(__pyx_v_value);
  __Pyx_GOTREF(__pyx_v_self->default_helper_exception);
  __Pyx_DECREF(__pyx_v_self->default_helper_exception);
  __pyx_v_self->default_helper_exception = __pyx_v_value;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_24default_helper_exception_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_24default_helper_exception_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_24default_helper_exception_4__del__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_24default_helper_exception_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->default_helper_exception);
  __Pyx_DECREF(__pyx_v_self->default_helper_exception);
  __pyx_v_self->default_helper_exception = Py_None;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":108
 *     cdef public final_mod_function, default_helper_exception
 *     cdef bint already_returned_end_token, _curr_token_is_first, _returned_first_token
 *     cdef public list prog_unprocessed             # <<<<<<<<<<<<<<
 *     cdef public program
 *     cpdef dict __dict__ # Allow attributes to be set.
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_16prog_unprocessed_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_16prog_unprocessed_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_16prog_unprocessed___get__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_16prog_unprocessed___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->prog_unprocessed);
  __pyx_r = __pyx_v_self->prog_unprocessed;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_16prog_unprocessed_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_16prog_unprocessed_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_16prog_unprocessed_2__set__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_16prog_unprocessed_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__set__", 0);
  if (!(likely(PyList_CheckExact(__pyx_v_value))||((__pyx_v_value) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_v_value)->tp_name), 0))) __PYX_ERR(1, 108, __pyx_L1_error)
  __pyx_t_1 = __pyx_v_value;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->prog_unprocessed);
  __Pyx_DECREF(__pyx_v_self->prog_unprocessed);
  __pyx_v_self->prog_unprocessed = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.prog_unprocessed.__set__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_16prog_unprocessed_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_16prog_unprocessed_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_16prog_unprocessed_4__del__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_16prog_unprocessed_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->prog_unprocessed);
  __Pyx_DECREF(__pyx_v_self->prog_unprocessed);
  __pyx_v_self->prog_unprocessed = ((PyObject*)Py_None);

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.pxd":109
 *     cdef bint already_returned_end_token, _curr_token_is_first, _returned_first_token
 *     cdef public list prog_unprocessed
 *     cdef public program             # <<<<<<<<<<<<<<
 *     cpdef dict __dict__ # Allow attributes to be set.
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_7program_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_7program_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_7program___get__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_7program___get__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->program);
  __pyx_r = __pyx_v_self->program;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_7program_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_7program_3__set__(PyObject *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_7program_2__set__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v_value));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_7program_2__set__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v_value) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__set__", 0);
  __Pyx_INCREF(__pyx_v_value);
  __Pyx_GIVEREF(__pyx_v_value);
  __Pyx_GOTREF(__pyx_v_self->program);
  __Pyx_DECREF(__pyx_v_self->program);
  __pyx_v_self->program = __pyx_v_value;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* Python wrapper */
static int __pyx_pw_6typped_5lexer_5Lexer_7program_5__del__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_pw_6typped_5lexer_5Lexer_7program_5__del__(PyObject *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_7program_4__del__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_6typped_5lexer_5Lexer_7program_4__del__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__del__", 0);
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->program);
  __Pyx_DECREF(__pyx_v_self->program);
  __pyx_v_self->program = Py_None;

  /* function exit code */
  __pyx_r = 0;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self._curr_token_is_first, self._returned_first_token, self.all_token_count, self.already_returned_end_token, self.default_helper_exception, self.final_mod_function, self.non_ignored_token_count, self.prog_unprocessed, self.program, self.raw_linenumber, self.text_is_set, self.token, self.token_buffer, self.token_generator_state, self.token_table, self.upcoming_raw_charnumber, self.upcoming_raw_linenumber, self.upcoming_raw_total_chars)
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_67__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_67__reduce_cython__ = {"__reduce_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_67__reduce_cython__, METH_NOARGS, 0};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_67__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__reduce_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_66__reduce_cython__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_66__reduce_cython__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self) {
  int __pyx_v_use_setstate;
  PyObject *__pyx_v_state = NULL;
  PyObject *__pyx_v__dict = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  int __pyx_t_13;
  int __pyx_t_14;
  int __pyx_t_15;
  __Pyx_RefNannySetupContext("__reduce_cython__", 0);

  /* "(tree fragment)":3
 * def __reduce_cython__(self):
 *     cdef bint use_setstate
 *     state = (self._curr_token_is_first, self._returned_first_token, self.all_token_count, self.already_returned_end_token, self.default_helper_exception, self.final_mod_function, self.non_ignored_token_count, self.prog_unprocessed, self.program, self.raw_linenumber, self.text_is_set, self.token, self.token_buffer, self.token_generator_state, self.token_table, self.upcoming_raw_charnumber, self.upcoming_raw_linenumber, self.upcoming_raw_total_chars)             # <<<<<<<<<<<<<<
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:
 */
  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_self->_curr_token_is_first); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyBool_FromLong(__pyx_v_self->_returned_first_token); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_self->all_token_count); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyBool_FromLong(__pyx_v_self->already_returned_end_token); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = __Pyx_PyInt_From_long(__pyx_v_self->non_ignored_token_count); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_6 = __Pyx_PyInt_From_long(__pyx_v_self->raw_linenumber); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_7 = __Pyx_PyBool_FromLong(__pyx_v_self->text_is_set); if (unlikely(!__pyx_t_7)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_8 = __Pyx_PyInt_From_long(__pyx_v_self->token_generator_state); if (unlikely(!__pyx_t_8)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_8);
  __pyx_t_9 = __Pyx_PyInt_From_long(__pyx_v_self->upcoming_raw_charnumber); if (unlikely(!__pyx_t_9)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __pyx_t_10 = __Pyx_PyInt_From_long(__pyx_v_self->upcoming_raw_linenumber); if (unlikely(!__pyx_t_10)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __pyx_t_11 = __Pyx_PyInt_From_long(__pyx_v_self->upcoming_raw_total_chars); if (unlikely(!__pyx_t_11)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_11);
  __pyx_t_12 = PyTuple_New(18); if (unlikely(!__pyx_t_12)) __PYX_ERR(2, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_12);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_12, 1, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_12, 2, __pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_4);
  PyTuple_SET_ITEM(__pyx_t_12, 3, __pyx_t_4);
  __Pyx_INCREF(__pyx_v_self->default_helper_exception);
  __Pyx_GIVEREF(__pyx_v_self->default_helper_exception);
  PyTuple_SET_ITEM(__pyx_t_12, 4, __pyx_v_self->default_helper_exception);
  __Pyx_INCREF(__pyx_v_self->final_mod_function);
  __Pyx_GIVEREF(__pyx_v_self->final_mod_function);
  PyTuple_SET_ITEM(__pyx_t_12, 5, __pyx_v_self->final_mod_function);
  __Pyx_GIVEREF(__pyx_t_5);
  PyTuple_SET_ITEM(__pyx_t_12, 6, __pyx_t_5);
  __Pyx_INCREF(__pyx_v_self->prog_unprocessed);
  __Pyx_GIVEREF(__pyx_v_self->prog_unprocessed);
  PyTuple_SET_ITEM(__pyx_t_12, 7, __pyx_v_self->prog_unprocessed);
  __Pyx_INCREF(__pyx_v_self->program);
  __Pyx_GIVEREF(__pyx_v_self->program);
  PyTuple_SET_ITEM(__pyx_t_12, 8, __pyx_v_self->program);
  __Pyx_GIVEREF(__pyx_t_6);
  PyTuple_SET_ITEM(__pyx_t_12, 9, __pyx_t_6);
  __Pyx_GIVEREF(__pyx_t_7);
  PyTuple_SET_ITEM(__pyx_t_12, 10, __pyx_t_7);
  __Pyx_INCREF(__pyx_v_self->token);
  __Pyx_GIVEREF(__pyx_v_self->token);
  PyTuple_SET_ITEM(__pyx_t_12, 11, __pyx_v_self->token);
  __Pyx_INCREF(((PyObject *)__pyx_v_self->token_buffer));
  __Pyx_GIVEREF(((PyObject *)__pyx_v_self->token_buffer));
  PyTuple_SET_ITEM(__pyx_t_12, 12, ((PyObject *)__pyx_v_self->token_buffer));
  __Pyx_GIVEREF(__pyx_t_8);
  PyTuple_SET_ITEM(__pyx_t_12, 13, __pyx_t_8);
  __Pyx_INCREF(((PyObject *)__pyx_v_self->token_table));
  __Pyx_GIVEREF(((PyObject *)__pyx_v_self->token_table));
  PyTuple_SET_ITEM(__pyx_t_12, 14, ((PyObject *)__pyx_v_self->token_table));
  __Pyx_GIVEREF(__pyx_t_9);
  PyTuple_SET_ITEM(__pyx_t_12, 15, __pyx_t_9);
  __Pyx_GIVEREF(__pyx_t_10);
  PyTuple_SET_ITEM(__pyx_t_12, 16, __pyx_t_10);
  __Pyx_GIVEREF(__pyx_t_11);
  PyTuple_SET_ITEM(__pyx_t_12, 17, __pyx_t_11);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_3 = 0;
  __pyx_t_4 = 0;
  __pyx_t_5 = 0;
  __pyx_t_6 = 0;
  __pyx_t_7 = 0;
  __pyx_t_8 = 0;
  __pyx_t_9 = 0;
  __pyx_t_10 = 0;
  __pyx_t_11 = 0;
  __pyx_v_state = ((PyObject*)__pyx_t_12);
  __pyx_t_12 = 0;

  /* "(tree fragment)":4
 *     cdef bint use_setstate
 *     state = (self._curr_token_is_first, self._returned_first_token, self.all_token_count, self.already_returned_end_token, self.default_helper_exception, self.final_mod_function, self.non_ignored_token_count, self.prog_unprocessed, self.program, self.raw_linenumber, self.text_is_set, self.token, self.token_buffer, self.token_generator_state, self.token_table, self.upcoming_raw_charnumber, self.upcoming_raw_linenumber, self.upcoming_raw_total_chars)
 *     _dict = getattr(self, '__dict__', None)             # <<<<<<<<<<<<<<
 *     if _dict is not None:
 *         state += _dict,
 */
  __pyx_t_12 = __Pyx_GetAttr3(((PyObject *)__pyx_v_self), __pyx_n_s_dict, Py_None); if (unlikely(!__pyx_t_12)) __PYX_ERR(2, 4, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_12);
  __pyx_v__dict = __pyx_t_12;
  __pyx_t_12 = 0;

  /* "(tree fragment)":5
 *     state = (self._curr_token_is_first, self._returned_first_token, self.all_token_count, self.already_returned_end_token, self.default_helper_exception, self.final_mod_function, self.non_ignored_token_count, self.prog_unprocessed, self.program, self.raw_linenumber, self.text_is_set, self.token, self.token_buffer, self.token_generator_state, self.token_table, self.upcoming_raw_charnumber, self.upcoming_raw_linenumber, self.upcoming_raw_total_chars)
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:             # <<<<<<<<<<<<<<
 *         state += _dict,
 *         use_setstate = True
 */
  __pyx_t_13 = (__pyx_v__dict != Py_None);
  __pyx_t_14 = (__pyx_t_13 != 0);
  if (__pyx_t_14) {

    /* "(tree fragment)":6
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:
 *         state += _dict,             # <<<<<<<<<<<<<<
 *         use_setstate = True
 *     else:
 */
    __pyx_t_12 = PyTuple_New(1); if (unlikely(!__pyx_t_12)) __PYX_ERR(2, 6, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_12);
    __Pyx_INCREF(__pyx_v__dict);
    __Pyx_GIVEREF(__pyx_v__dict);
    PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_v__dict);
    __pyx_t_11 = PyNumber_InPlaceAdd(__pyx_v_state, __pyx_t_12); if (unlikely(!__pyx_t_11)) __PYX_ERR(2, 6, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
    __Pyx_DECREF_SET(__pyx_v_state, ((PyObject*)__pyx_t_11));
    __pyx_t_11 = 0;

    /* "(tree fragment)":7
 *     if _dict is not None:
 *         state += _dict,
 *         use_setstate = True             # <<<<<<<<<<<<<<
 *     else:
 *         use_setstate = self.default_helper_exception is not None or self.final_mod_function is not None or self.prog_unprocessed is not None or self.program is not None or self.token is not None or self.token_buffer is not None or self.token_table is not None
 */
    __pyx_v_use_setstate = 1;

    /* "(tree fragment)":5
 *     state = (self._curr_token_is_first, self._returned_first_token, self.all_token_count, self.already_returned_end_token, self.default_helper_exception, self.final_mod_function, self.non_ignored_token_count, self.prog_unprocessed, self.program, self.raw_linenumber, self.text_is_set, self.token, self.token_buffer, self.token_generator_state, self.token_table, self.upcoming_raw_charnumber, self.upcoming_raw_linenumber, self.upcoming_raw_total_chars)
 *     _dict = getattr(self, '__dict__', None)
 *     if _dict is not None:             # <<<<<<<<<<<<<<
 *         state += _dict,
 *         use_setstate = True
 */
    goto __pyx_L3;
  }

  /* "(tree fragment)":9
 *         use_setstate = True
 *     else:
 *         use_setstate = self.default_helper_exception is not None or self.final_mod_function is not None or self.prog_unprocessed is not None or self.program is not None or self.token is not None or self.token_buffer is not None or self.token_table is not None             # <<<<<<<<<<<<<<
 *     if use_setstate:
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, None), state
 */
  /*else*/ {
    __pyx_t_13 = (__pyx_v_self->default_helper_exception != Py_None);
    __pyx_t_15 = (__pyx_t_13 != 0);
    if (!__pyx_t_15) {
    } else {
      __pyx_t_14 = __pyx_t_15;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_15 = (__pyx_v_self->final_mod_function != Py_None);
    __pyx_t_13 = (__pyx_t_15 != 0);
    if (!__pyx_t_13) {
    } else {
      __pyx_t_14 = __pyx_t_13;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_13 = (__pyx_v_self->prog_unprocessed != ((PyObject*)Py_None));
    __pyx_t_15 = (__pyx_t_13 != 0);
    if (!__pyx_t_15) {
    } else {
      __pyx_t_14 = __pyx_t_15;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_15 = (__pyx_v_self->program != Py_None);
    __pyx_t_13 = (__pyx_t_15 != 0);
    if (!__pyx_t_13) {
    } else {
      __pyx_t_14 = __pyx_t_13;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_13 = (__pyx_v_self->token != Py_None);
    __pyx_t_15 = (__pyx_t_13 != 0);
    if (!__pyx_t_15) {
    } else {
      __pyx_t_14 = __pyx_t_15;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_15 = (((PyObject *)__pyx_v_self->token_buffer) != Py_None);
    __pyx_t_13 = (__pyx_t_15 != 0);
    if (!__pyx_t_13) {
    } else {
      __pyx_t_14 = __pyx_t_13;
      goto __pyx_L4_bool_binop_done;
    }
    __pyx_t_13 = (((PyObject *)__pyx_v_self->token_table) != Py_None);
    __pyx_t_15 = (__pyx_t_13 != 0);
    __pyx_t_14 = __pyx_t_15;
    __pyx_L4_bool_binop_done:;
    __pyx_v_use_setstate = __pyx_t_14;
  }
  __pyx_L3:;

  /* "(tree fragment)":10
 *     else:
 *         use_setstate = self.default_helper_exception is not None or self.final_mod_function is not None or self.prog_unprocessed is not None or self.program is not None or self.token is not None or self.token_buffer is not None or self.token_table is not None
 *     if use_setstate:             # <<<<<<<<<<<<<<
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, None), state
 *     else:
 */
  __pyx_t_14 = (__pyx_v_use_setstate != 0);
  if (__pyx_t_14) {

    /* "(tree fragment)":11
 *         use_setstate = self.default_helper_exception is not None or self.final_mod_function is not None or self.prog_unprocessed is not None or self.program is not None or self.token is not None or self.token_buffer is not None or self.token_table is not None
 *     if use_setstate:
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, None), state             # <<<<<<<<<<<<<<
 *     else:
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, state)
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_11 = __Pyx_GetModuleGlobalName(__pyx_n_s_pyx_unpickle_Lexer); if (unlikely(!__pyx_t_11)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __pyx_t_12 = PyTuple_New(3); if (unlikely(!__pyx_t_12)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_12);
    __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    PyTuple_SET_ITEM(__pyx_t_12, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_INCREF(__pyx_int_219943058);
    __Pyx_GIVEREF(__pyx_int_219943058);
    PyTuple_SET_ITEM(__pyx_t_12, 1, __pyx_int_219943058);
    __Pyx_INCREF(Py_None);
    __Pyx_GIVEREF(Py_None);
    PyTuple_SET_ITEM(__pyx_t_12, 2, Py_None);
    __pyx_t_10 = PyTuple_New(3); if (unlikely(!__pyx_t_10)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __Pyx_GIVEREF(__pyx_t_11);
    PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_11);
    __Pyx_GIVEREF(__pyx_t_12);
    PyTuple_SET_ITEM(__pyx_t_10, 1, __pyx_t_12);
    __Pyx_INCREF(__pyx_v_state);
    __Pyx_GIVEREF(__pyx_v_state);
    PyTuple_SET_ITEM(__pyx_t_10, 2, __pyx_v_state);
    __pyx_t_11 = 0;
    __pyx_t_12 = 0;
    __pyx_r = __pyx_t_10;
    __pyx_t_10 = 0;
    goto __pyx_L0;

    /* "(tree fragment)":10
 *     else:
 *         use_setstate = self.default_helper_exception is not None or self.final_mod_function is not None or self.prog_unprocessed is not None or self.program is not None or self.token is not None or self.token_buffer is not None or self.token_table is not None
 *     if use_setstate:             # <<<<<<<<<<<<<<
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, None), state
 *     else:
 */
  }

  /* "(tree fragment)":13
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, None), state
 *     else:
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, state)             # <<<<<<<<<<<<<<
 * def __setstate_cython__(self, __pyx_state):
 *     __pyx_unpickle_Lexer__set_state(self, __pyx_state)
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_10 = __Pyx_GetModuleGlobalName(__pyx_n_s_pyx_unpickle_Lexer); if (unlikely(!__pyx_t_10)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __pyx_t_12 = PyTuple_New(3); if (unlikely(!__pyx_t_12)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_12);
    __Pyx_INCREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_GIVEREF(((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    PyTuple_SET_ITEM(__pyx_t_12, 0, ((PyObject *)Py_TYPE(((PyObject *)__pyx_v_self))));
    __Pyx_INCREF(__pyx_int_219943058);
    __Pyx_GIVEREF(__pyx_int_219943058);
    PyTuple_SET_ITEM(__pyx_t_12, 1, __pyx_int_219943058);
    __Pyx_INCREF(__pyx_v_state);
    __Pyx_GIVEREF(__pyx_v_state);
    PyTuple_SET_ITEM(__pyx_t_12, 2, __pyx_v_state);
    __pyx_t_11 = PyTuple_New(2); if (unlikely(!__pyx_t_11)) __PYX_ERR(2, 13, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_GIVEREF(__pyx_t_10);
    PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_10);
    __Pyx_GIVEREF(__pyx_t_12);
    PyTuple_SET_ITEM(__pyx_t_11, 1, __pyx_t_12);
    __pyx_t_10 = 0;
    __pyx_t_12 = 0;
    __pyx_r = __pyx_t_11;
    __pyx_t_11 = 0;
    goto __pyx_L0;
  }

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self._curr_token_is_first, self._returned_first_token, self.all_token_count, self.already_returned_end_token, self.default_helper_exception, self.final_mod_function, self.non_ignored_token_count, self.prog_unprocessed, self.program, self.raw_linenumber, self.text_is_set, self.token, self.token_buffer, self.token_generator_state, self.token_table, self.upcoming_raw_charnumber, self.upcoming_raw_linenumber, self.upcoming_raw_total_chars)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_AddTraceback("typped.lexer.Lexer.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_state);
  __Pyx_XDECREF(__pyx_v__dict);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_Lexer__set_state(self, __pyx_state)
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_69__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_5Lexer_69__setstate_cython__ = {"__setstate_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_69__setstate_cython__, METH_O, 0};
static PyObject *__pyx_pw_6typped_5lexer_5Lexer_69__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__setstate_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_6typped_5lexer_5Lexer_68__setstate_cython__(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_self), ((PyObject *)__pyx_v___pyx_state));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_5Lexer_68__setstate_cython__(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__setstate_cython__", 0);

  /* "(tree fragment)":15
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, state)
 * def __setstate_cython__(self, __pyx_state):
 *     __pyx_unpickle_Lexer__set_state(self, __pyx_state)             # <<<<<<<<<<<<<<
 */
  if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "tuple", Py_TYPE(__pyx_v___pyx_state)->tp_name), 0))) __PYX_ERR(2, 15, __pyx_L1_error)
  __pyx_t_1 = __pyx_f_6typped_5lexer___pyx_unpickle_Lexer__set_state(__pyx_v_self, ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 15, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_Lexer__set_state(self, __pyx_state)
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("typped.lexer.Lexer.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1582
 * 
 * 
 * def multi_funcall(function, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *     """A convenience function that takes a function (or method) and a list of tuples
 *     and calls `function` with the values in those tuple as arguments.
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_3multi_funcall(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_2multi_funcall[] = "A convenience function that takes a function (or method) and a list of tuples\n    and calls `function` with the values in those tuple as arguments.\n    Any unrecognized keyword arguments are passed on to the function `function`\n    as keyword arguments.  If the `exception_to_raise` keyword argument is provided with\n    an exception then that exception will be called whenever a `TypeError` results from\n    the attempt to call `function` (defaulting to `LexerException`).";
static PyMethodDef __pyx_mdef_6typped_5lexer_3multi_funcall = {"multi_funcall", (PyCFunction)__pyx_pw_6typped_5lexer_3multi_funcall, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_2multi_funcall};
static PyObject *__pyx_pw_6typped_5lexer_3multi_funcall(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_function = 0;
  PyObject *__pyx_v_tuple_list = 0;
  PyObject *__pyx_v_kwargs = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("multi_funcall (wrapper)", 0);
  __pyx_v_kwargs = PyDict_New(); if (unlikely(!__pyx_v_kwargs)) return NULL;
  __Pyx_GOTREF(__pyx_v_kwargs);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_function,&__pyx_n_s_tuple_list,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_function)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_tuple_list)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("multi_funcall", 1, 2, 2, 1); __PYX_ERR(0, 1582, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, __pyx_v_kwargs, values, pos_args, "multi_funcall") < 0)) __PYX_ERR(0, 1582, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_function = values[0];
    __pyx_v_tuple_list = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("multi_funcall", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1582, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_DECREF(__pyx_v_kwargs); __pyx_v_kwargs = 0;
  __Pyx_AddTraceback("typped.lexer.multi_funcall", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_2multi_funcall(__pyx_self, __pyx_v_function, __pyx_v_tuple_list, __pyx_v_kwargs);

  /* function exit code */
  __Pyx_XDECREF(__pyx_v_kwargs);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_2multi_funcall(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_function, PyObject *__pyx_v_tuple_list, PyObject *__pyx_v_kwargs) {
  PyObject *__pyx_v_retval_list = NULL;
  PyObject *__pyx_v_exception_to_raise = NULL;
  PyObject *__pyx_v_t = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  Py_ssize_t __pyx_t_7;
  PyObject *(*__pyx_t_8)(PyObject *);
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  PyObject *__pyx_t_13 = NULL;
  PyObject *__pyx_t_14 = NULL;
  PyObject *__pyx_t_15 = NULL;
  PyObject *__pyx_t_16 = NULL;
  PyObject *__pyx_t_17 = NULL;
  __Pyx_RefNannySetupContext("multi_funcall", 0);

  /* "typped/lexer.py":1589
 *     an exception then that exception will be called whenever a `TypeError` results from
 *     the attempt to call `function` (defaulting to `LexerException`)."""
 *     retval_list = []             # <<<<<<<<<<<<<<
 *     exception_to_raise = kwargs.pop("exception_to_raise", LexerException)
 *     for t in tuple_list:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1589, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_retval_list = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "typped/lexer.py":1590
 *     the attempt to call `function` (defaulting to `LexerException`)."""
 *     retval_list = []
 *     exception_to_raise = kwargs.pop("exception_to_raise", LexerException)             # <<<<<<<<<<<<<<
 *     for t in tuple_list:
 *         try:
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_kwargs, __pyx_n_s_pop); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1590, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1590, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_n_s_exception_to_raise, __pyx_t_3};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1590, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_n_s_exception_to_raise, __pyx_t_3};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1590, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  {
    __pyx_t_6 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1590, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_INCREF(__pyx_n_s_exception_to_raise);
    __Pyx_GIVEREF(__pyx_n_s_exception_to_raise);
    PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, __pyx_n_s_exception_to_raise);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_t_3);
    __pyx_t_3 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1590, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_exception_to_raise = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "typped/lexer.py":1591
 *     retval_list = []
 *     exception_to_raise = kwargs.pop("exception_to_raise", LexerException)
 *     for t in tuple_list:             # <<<<<<<<<<<<<<
 *         try:
 *             retval_list.append(function(*t, **kwargs))
 */
  if (likely(PyList_CheckExact(__pyx_v_tuple_list)) || PyTuple_CheckExact(__pyx_v_tuple_list)) {
    __pyx_t_1 = __pyx_v_tuple_list; __Pyx_INCREF(__pyx_t_1); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_tuple_list); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1591, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_8 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1591, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_7); __Pyx_INCREF(__pyx_t_2); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 1591, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1591, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      } else {
        if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_7); __Pyx_INCREF(__pyx_t_2); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 1591, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1591, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      }
    } else {
      __pyx_t_2 = __pyx_t_8(__pyx_t_1);
      if (unlikely(!__pyx_t_2)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(exc_type == PyExc_StopIteration || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1591, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_2);
    }
    __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "typped/lexer.py":1592
 *     exception_to_raise = kwargs.pop("exception_to_raise", LexerException)
 *     for t in tuple_list:
 *         try:             # <<<<<<<<<<<<<<
 *             retval_list.append(function(*t, **kwargs))
 *         except TypeError:
 */
    {
      __Pyx_PyThreadState_declare
      __Pyx_PyThreadState_assign
      __Pyx_ExceptionSave(&__pyx_t_9, &__pyx_t_10, &__pyx_t_11);
      __Pyx_XGOTREF(__pyx_t_9);
      __Pyx_XGOTREF(__pyx_t_10);
      __Pyx_XGOTREF(__pyx_t_11);
      /*try:*/ {

        /* "typped/lexer.py":1593
 *     for t in tuple_list:
 *         try:
 *             retval_list.append(function(*t, **kwargs))             # <<<<<<<<<<<<<<
 *         except TypeError:
 *             raise exception_to_raise(
 */
        __pyx_t_2 = PySequence_Tuple(__pyx_v_t); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1593, __pyx_L5_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_6 = __Pyx_PyObject_Call(__pyx_v_function, __pyx_t_2, __pyx_v_kwargs); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1593, __pyx_L5_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_retval_list, __pyx_t_6); if (unlikely(__pyx_t_12 == -1)) __PYX_ERR(0, 1593, __pyx_L5_error)
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

        /* "typped/lexer.py":1592
 *     exception_to_raise = kwargs.pop("exception_to_raise", LexerException)
 *     for t in tuple_list:
 *         try:             # <<<<<<<<<<<<<<
 *             retval_list.append(function(*t, **kwargs))
 *         except TypeError:
 */
      }
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
      goto __pyx_L12_try_end;
      __pyx_L5_error:;
      __Pyx_PyThreadState_assign
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;

      /* "typped/lexer.py":1594
 *         try:
 *             retval_list.append(function(*t, **kwargs))
 *         except TypeError:             # <<<<<<<<<<<<<<
 *             raise exception_to_raise(
 *                     "Bad multi-definition of {0}: Omitted required arguments or bad "
 */
      __pyx_t_5 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_TypeError);
      if (__pyx_t_5) {
        __Pyx_AddTraceback("typped.lexer.multi_funcall", __pyx_clineno, __pyx_lineno, __pyx_filename);
        if (__Pyx_GetException(&__pyx_t_6, &__pyx_t_2, &__pyx_t_3) < 0) __PYX_ERR(0, 1594, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_GOTREF(__pyx_t_3);

        /* "typped/lexer.py":1598
 *                     "Bad multi-definition of {0}: Omitted required arguments or bad "
 *                     "keyword arguments passed in.  Error on this tuple:\n{1}\nwith "
 *                     "keyword arguments\n{2}".format(function.__name__, t, kwargs))             # <<<<<<<<<<<<<<
 *     return tuple(retval_list)
 * 
 */
        __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_kp_s_Bad_multi_definition_of_0_Omitte, __pyx_n_s_format); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 1598, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_14);
        __pyx_t_15 = __Pyx_PyObject_GetAttrStr(__pyx_v_function, __pyx_n_s_name); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 1598, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_15);
        __pyx_t_16 = NULL;
        __pyx_t_5 = 0;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_14))) {
          __pyx_t_16 = PyMethod_GET_SELF(__pyx_t_14);
          if (likely(__pyx_t_16)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_14);
            __Pyx_INCREF(__pyx_t_16);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_14, function);
            __pyx_t_5 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_14)) {
          PyObject *__pyx_temp[4] = {__pyx_t_16, __pyx_t_15, __pyx_v_t, __pyx_v_kwargs};
          __pyx_t_13 = __Pyx_PyFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1598, __pyx_L7_except_error)
          __Pyx_XDECREF(__pyx_t_16); __pyx_t_16 = 0;
          __Pyx_GOTREF(__pyx_t_13);
          __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_14)) {
          PyObject *__pyx_temp[4] = {__pyx_t_16, __pyx_t_15, __pyx_v_t, __pyx_v_kwargs};
          __pyx_t_13 = __Pyx_PyCFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1598, __pyx_L7_except_error)
          __Pyx_XDECREF(__pyx_t_16); __pyx_t_16 = 0;
          __Pyx_GOTREF(__pyx_t_13);
          __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
        } else
        #endif
        {
          __pyx_t_17 = PyTuple_New(3+__pyx_t_5); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 1598, __pyx_L7_except_error)
          __Pyx_GOTREF(__pyx_t_17);
          if (__pyx_t_16) {
            __Pyx_GIVEREF(__pyx_t_16); PyTuple_SET_ITEM(__pyx_t_17, 0, __pyx_t_16); __pyx_t_16 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_15);
          PyTuple_SET_ITEM(__pyx_t_17, 0+__pyx_t_5, __pyx_t_15);
          __Pyx_INCREF(__pyx_v_t);
          __Pyx_GIVEREF(__pyx_v_t);
          PyTuple_SET_ITEM(__pyx_t_17, 1+__pyx_t_5, __pyx_v_t);
          __Pyx_INCREF(__pyx_v_kwargs);
          __Pyx_GIVEREF(__pyx_v_kwargs);
          PyTuple_SET_ITEM(__pyx_t_17, 2+__pyx_t_5, __pyx_v_kwargs);
          __pyx_t_15 = 0;
          __pyx_t_13 = __Pyx_PyObject_Call(__pyx_t_14, __pyx_t_17, NULL); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1598, __pyx_L7_except_error)
          __Pyx_GOTREF(__pyx_t_13);
          __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;
        }
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __Pyx_INCREF(__pyx_v_exception_to_raise);
        __pyx_t_14 = __pyx_v_exception_to_raise; __pyx_t_17 = NULL;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_14))) {
          __pyx_t_17 = PyMethod_GET_SELF(__pyx_t_14);
          if (likely(__pyx_t_17)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_14);
            __Pyx_INCREF(__pyx_t_17);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_14, function);
          }
        }
        if (!__pyx_t_17) {
          __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_t_14, __pyx_t_13); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1595, __pyx_L7_except_error)
          __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
          __Pyx_GOTREF(__pyx_t_4);
        } else {
          #if CYTHON_FAST_PYCALL
          if (PyFunction_Check(__pyx_t_14)) {
            PyObject *__pyx_temp[2] = {__pyx_t_17, __pyx_t_13};
            __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_14, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1595, __pyx_L7_except_error)
            __Pyx_XDECREF(__pyx_t_17); __pyx_t_17 = 0;
            __Pyx_GOTREF(__pyx_t_4);
            __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
          } else
          #endif
          #if CYTHON_FAST_PYCCALL
          if (__Pyx_PyFastCFunction_Check(__pyx_t_14)) {
            PyObject *__pyx_temp[2] = {__pyx_t_17, __pyx_t_13};
            __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_14, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1595, __pyx_L7_except_error)
            __Pyx_XDECREF(__pyx_t_17); __pyx_t_17 = 0;
            __Pyx_GOTREF(__pyx_t_4);
            __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
          } else
          #endif
          {
            __pyx_t_15 = PyTuple_New(1+1); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 1595, __pyx_L7_except_error)
            __Pyx_GOTREF(__pyx_t_15);
            __Pyx_GIVEREF(__pyx_t_17); PyTuple_SET_ITEM(__pyx_t_15, 0, __pyx_t_17); __pyx_t_17 = NULL;
            __Pyx_GIVEREF(__pyx_t_13);
            PyTuple_SET_ITEM(__pyx_t_15, 0+1, __pyx_t_13);
            __pyx_t_13 = 0;
            __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_14, __pyx_t_15, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1595, __pyx_L7_except_error)
            __Pyx_GOTREF(__pyx_t_4);
            __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
          }
        }
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __Pyx_Raise(__pyx_t_4, 0, 0, 0);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __PYX_ERR(0, 1595, __pyx_L7_except_error)
      }
      goto __pyx_L7_except_error;
      __pyx_L7_except_error:;

      /* "typped/lexer.py":1592
 *     exception_to_raise = kwargs.pop("exception_to_raise", LexerException)
 *     for t in tuple_list:
 *         try:             # <<<<<<<<<<<<<<
 *             retval_list.append(function(*t, **kwargs))
 *         except TypeError:
 */
      __Pyx_PyThreadState_assign
      __Pyx_XGIVEREF(__pyx_t_9);
      __Pyx_XGIVEREF(__pyx_t_10);
      __Pyx_XGIVEREF(__pyx_t_11);
      __Pyx_ExceptionReset(__pyx_t_9, __pyx_t_10, __pyx_t_11);
      goto __pyx_L1_error;
      __pyx_L12_try_end:;
    }

    /* "typped/lexer.py":1591
 *     retval_list = []
 *     exception_to_raise = kwargs.pop("exception_to_raise", LexerException)
 *     for t in tuple_list:             # <<<<<<<<<<<<<<
 *         try:
 *             retval_list.append(function(*t, **kwargs))
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":1599
 *                     "keyword arguments passed in.  Error on this tuple:\n{1}\nwith "
 *                     "keyword arguments\n{2}".format(function.__name__, t, kwargs))
 *     return tuple(retval_list)             # <<<<<<<<<<<<<<
 * 
 * def return_first_exception(*args):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyList_AsTuple(__pyx_v_retval_list); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1599, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "typped/lexer.py":1582
 * 
 * 
 * def multi_funcall(function, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *     """A convenience function that takes a function (or method) and a list of tuples
 *     and calls `function` with the values in those tuple as arguments.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_XDECREF(__pyx_t_15);
  __Pyx_XDECREF(__pyx_t_16);
  __Pyx_XDECREF(__pyx_t_17);
  __Pyx_AddTraceback("typped.lexer.multi_funcall", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_retval_list);
  __Pyx_XDECREF(__pyx_v_exception_to_raise);
  __Pyx_XDECREF(__pyx_v_t);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "typped/lexer.py":1601
 *     return tuple(retval_list)
 * 
 * def return_first_exception(*args):             # <<<<<<<<<<<<<<
 *     """Go down the argument list and return the first object that is a
 *     subclass of the `Exception` class.  Arguments do not need to all be
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_5return_first_exception(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_6typped_5lexer_4return_first_exception[] = "Go down the argument list and return the first object that is a\n    subclass of the `Exception` class.  Arguments do not need to all be\n    classes.  Returns `None` if all fail.  Used to allow an optional exception\n    class to be passed to a function instead of true, with a default called\n    if the passed-in value is not an exception.";
static PyMethodDef __pyx_mdef_6typped_5lexer_5return_first_exception = {"return_first_exception", (PyCFunction)__pyx_pw_6typped_5lexer_5return_first_exception, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_4return_first_exception};
static PyObject *__pyx_pw_6typped_5lexer_5return_first_exception(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_args = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("return_first_exception (wrapper)", 0);
  if (unlikely(__pyx_kwds) && unlikely(PyDict_Size(__pyx_kwds) > 0) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "return_first_exception", 0))) return NULL;
  __Pyx_INCREF(__pyx_args);
  __pyx_v_args = __pyx_args;
  __pyx_r = __pyx_pf_6typped_5lexer_4return_first_exception(__pyx_self, __pyx_v_args);

  /* function exit code */
  __Pyx_XDECREF(__pyx_v_args);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_4return_first_exception(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_args) {
  PyObject *__pyx_v_item = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("return_first_exception", 0);

  /* "typped/lexer.py":1607
 *     class to be passed to a function instead of true, with a default called
 *     if the passed-in value is not an exception."""
 *     for item in args:             # <<<<<<<<<<<<<<
 *         if is_subclass_of(item, Exception):
 *             return item
 */
  __pyx_t_1 = __pyx_v_args; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
  for (;;) {
    if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_3); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1607, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1607, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_item, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "typped/lexer.py":1608
 *     if the passed-in value is not an exception."""
 *     for item in args:
 *         if is_subclass_of(item, Exception):             # <<<<<<<<<<<<<<
 *             return item
 *     return None
 */
    __pyx_t_4 = __Pyx_GetModuleGlobalName(__pyx_n_s_is_subclass_of); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1608, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = NULL;
    __pyx_t_6 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_6 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_item, ((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0]))};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1608, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_item, ((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0]))};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1608, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    {
      __pyx_t_7 = PyTuple_New(2+__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1608, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_item);
      __Pyx_GIVEREF(__pyx_v_item);
      PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_6, __pyx_v_item);
      __Pyx_INCREF(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])));
      __Pyx_GIVEREF(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])));
      PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_6, ((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])));
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_7, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1608, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1608, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_8) {

      /* "typped/lexer.py":1609
 *     for item in args:
 *         if is_subclass_of(item, Exception):
 *             return item             # <<<<<<<<<<<<<<
 *     return None
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_item);
      __pyx_r = __pyx_v_item;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "typped/lexer.py":1608
 *     if the passed-in value is not an exception."""
 *     for item in args:
 *         if is_subclass_of(item, Exception):             # <<<<<<<<<<<<<<
 *             return item
 *     return None
 */
    }

    /* "typped/lexer.py":1607
 *     class to be passed to a function instead of true, with a default called
 *     if the passed-in value is not an exception."""
 *     for item in args:             # <<<<<<<<<<<<<<
 *         if is_subclass_of(item, Exception):
 *             return item
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":1610
 *         if is_subclass_of(item, Exception):
 *             return item
 *     return None             # <<<<<<<<<<<<<<
 * 
 * #
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_None);
  __pyx_r = Py_None;
  goto __pyx_L0;

  /* "typped/lexer.py":1601
 *     return tuple(retval_list)
 * 
 * def return_first_exception(*args):             # <<<<<<<<<<<<<<
 *     """Go down the argument list and return the first object that is a
 *     subclass of the `Exception` class.  Arguments do not need to all be
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("typped.lexer.return_first_exception", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_item);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":1
 * def __pyx_unpickle_TokenTable(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0xe1e7798:
 *         from pickle import PickleError
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_7__pyx_unpickle_TokenTable(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_7__pyx_unpickle_TokenTable = {"__pyx_unpickle_TokenTable", (PyCFunction)__pyx_pw_6typped_5lexer_7__pyx_unpickle_TokenTable, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_6typped_5lexer_7__pyx_unpickle_TokenTable(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v___pyx_type = 0;
  long __pyx_v___pyx_checksum;
  PyObject *__pyx_v___pyx_state = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__pyx_unpickle_TokenTable (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_pyx_type,&__pyx_n_s_pyx_checksum,&__pyx_n_s_pyx_state,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_type)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_checksum)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_TokenTable", 1, 3, 3, 1); __PYX_ERR(2, 1, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_state)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_TokenTable", 1, 3, 3, 2); __PYX_ERR(2, 1, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__pyx_unpickle_TokenTable") < 0)) __PYX_ERR(2, 1, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v___pyx_type = values[0];
    __pyx_v___pyx_checksum = __Pyx_PyInt_As_long(values[1]); if (unlikely((__pyx_v___pyx_checksum == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
    __pyx_v___pyx_state = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_TokenTable", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(2, 1, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_TokenTable", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_6__pyx_unpickle_TokenTable(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_6__pyx_unpickle_TokenTable(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_v_PickleError = NULL;
  PyObject *__pyx_v_result = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("__pyx_unpickle_TokenTable", 0);

  /* "(tree fragment)":2
 * def __pyx_unpickle_TokenTable(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0xe1e7798:             # <<<<<<<<<<<<<<
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xe1e7798 = (begin_token_label, begin_token_subclass, end_token_label, end_token_subclass, lex, pattern_matcher, token_subclass_dict, token_subclassing_fun))" % __pyx_checksum)
 */
  __pyx_t_1 = ((__pyx_v___pyx_checksum != 0xe1e7798) != 0);
  if (__pyx_t_1) {

    /* "(tree fragment)":3
 * def __pyx_unpickle_TokenTable(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0xe1e7798:
 *         from pickle import PickleError             # <<<<<<<<<<<<<<
 *         raise PickleError("Incompatible checksums (%s vs 0xe1e7798 = (begin_token_label, begin_token_subclass, end_token_label, end_token_subclass, lex, pattern_matcher, token_subclass_dict, token_subclassing_fun))" % __pyx_checksum)
 *     result = TokenTable.__new__(__pyx_type)
 */
    __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_n_s_PickleError);
    __Pyx_GIVEREF(__pyx_n_s_PickleError);
    PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_PickleError);
    __pyx_t_3 = __Pyx_Import(__pyx_n_s_pickle, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_PickleError); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_2);
    __pyx_v_PickleError = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "(tree fragment)":4
 *     if __pyx_checksum != 0xe1e7798:
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xe1e7798 = (begin_token_label, begin_token_subclass, end_token_label, end_token_subclass, lex, pattern_matcher, token_subclass_dict, token_subclassing_fun))" % __pyx_checksum)             # <<<<<<<<<<<<<<
 *     result = TokenTable.__new__(__pyx_type)
 *     if __pyx_state is not None:
 */
    __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v___pyx_checksum); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 4, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_Incompatible_checksums_s_vs_0xe1, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 4, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_INCREF(__pyx_v_PickleError);
    __pyx_t_2 = __pyx_v_PickleError; __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    if (!__pyx_t_5) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_6 = PyTuple_New(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_6, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_6, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(2, 4, __pyx_L1_error)

    /* "(tree fragment)":2
 * def __pyx_unpickle_TokenTable(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0xe1e7798:             # <<<<<<<<<<<<<<
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xe1e7798 = (begin_token_label, begin_token_subclass, end_token_label, end_token_subclass, lex, pattern_matcher, token_subclass_dict, token_subclassing_fun))" % __pyx_checksum)
 */
  }

  /* "(tree fragment)":5
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xe1e7798 = (begin_token_label, begin_token_subclass, end_token_label, end_token_subclass, lex, pattern_matcher, token_subclass_dict, token_subclassing_fun))" % __pyx_checksum)
 *     result = TokenTable.__new__(__pyx_type)             # <<<<<<<<<<<<<<
 *     if __pyx_state is not None:
 *         __pyx_unpickle_TokenTable__set_state(<TokenTable> result, __pyx_state)
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_TokenTable), __pyx_n_s_new); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 5, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_6)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (!__pyx_t_6) {
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_v___pyx_type); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
  } else {
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_v___pyx_type};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_v___pyx_type};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_6); __pyx_t_6 = NULL;
      __Pyx_INCREF(__pyx_v___pyx_type);
      __Pyx_GIVEREF(__pyx_v___pyx_type);
      PyTuple_SET_ITEM(__pyx_t_4, 0+1, __pyx_v___pyx_type);
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_result = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "(tree fragment)":6
 *         raise PickleError("Incompatible checksums (%s vs 0xe1e7798 = (begin_token_label, begin_token_subclass, end_token_label, end_token_subclass, lex, pattern_matcher, token_subclass_dict, token_subclassing_fun))" % __pyx_checksum)
 *     result = TokenTable.__new__(__pyx_type)
 *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
 *         __pyx_unpickle_TokenTable__set_state(<TokenTable> result, __pyx_state)
 *     return result
 */
  __pyx_t_1 = (__pyx_v___pyx_state != Py_None);
  __pyx_t_7 = (__pyx_t_1 != 0);
  if (__pyx_t_7) {

    /* "(tree fragment)":7
 *     result = TokenTable.__new__(__pyx_type)
 *     if __pyx_state is not None:
 *         __pyx_unpickle_TokenTable__set_state(<TokenTable> result, __pyx_state)             # <<<<<<<<<<<<<<
 *     return result
 * cdef __pyx_unpickle_TokenTable__set_state(TokenTable result, tuple __pyx_state):
 */
    if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "tuple", Py_TYPE(__pyx_v___pyx_state)->tp_name), 0))) __PYX_ERR(2, 7, __pyx_L1_error)
    __pyx_t_3 = __pyx_f_6typped_5lexer___pyx_unpickle_TokenTable__set_state(((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_v_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "(tree fragment)":6
 *         raise PickleError("Incompatible checksums (%s vs 0xe1e7798 = (begin_token_label, begin_token_subclass, end_token_label, end_token_subclass, lex, pattern_matcher, token_subclass_dict, token_subclassing_fun))" % __pyx_checksum)
 *     result = TokenTable.__new__(__pyx_type)
 *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
 *         __pyx_unpickle_TokenTable__set_state(<TokenTable> result, __pyx_state)
 *     return result
 */
  }

  /* "(tree fragment)":8
 *     if __pyx_state is not None:
 *         __pyx_unpickle_TokenTable__set_state(<TokenTable> result, __pyx_state)
 *     return result             # <<<<<<<<<<<<<<
 * cdef __pyx_unpickle_TokenTable__set_state(TokenTable result, tuple __pyx_state):
 *     result.begin_token_label = __pyx_state[0]; result.begin_token_subclass = __pyx_state[1]; result.end_token_label = __pyx_state[2]; result.end_token_subclass = __pyx_state[3]; result.lex = __pyx_state[4]; result.pattern_matcher = __pyx_state[5]; result.token_subclass_dict = __pyx_state[6]; result.token_subclassing_fun = __pyx_state[7]
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_result);
  __pyx_r = __pyx_v_result;
  goto __pyx_L0;

  /* "(tree fragment)":1
 * def __pyx_unpickle_TokenTable(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0xe1e7798:
 *         from pickle import PickleError
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_TokenTable", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_PickleError);
  __Pyx_XDECREF(__pyx_v_result);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":9
 *         __pyx_unpickle_TokenTable__set_state(<TokenTable> result, __pyx_state)
 *     return result
 * cdef __pyx_unpickle_TokenTable__set_state(TokenTable result, tuple __pyx_state):             # <<<<<<<<<<<<<<
 *     result.begin_token_label = __pyx_state[0]; result.begin_token_subclass = __pyx_state[1]; result.end_token_label = __pyx_state[2]; result.end_token_subclass = __pyx_state[3]; result.lex = __pyx_state[4]; result.pattern_matcher = __pyx_state[5]; result.token_subclass_dict = __pyx_state[6]; result.token_subclassing_fun = __pyx_state[7]
 *     if hasattr(result, '__dict__'):
 */

static PyObject *__pyx_f_6typped_5lexer___pyx_unpickle_TokenTable__set_state(struct __pyx_obj_6typped_5lexer_TokenTable *__pyx_v_result, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("__pyx_unpickle_TokenTable__set_state", 0);

  /* "(tree fragment)":10
 *     return result
 * cdef __pyx_unpickle_TokenTable__set_state(TokenTable result, tuple __pyx_state):
 *     result.begin_token_label = __pyx_state[0]; result.begin_token_subclass = __pyx_state[1]; result.end_token_label = __pyx_state[2]; result.end_token_subclass = __pyx_state[3]; result.lex = __pyx_state[4]; result.pattern_matcher = __pyx_state[5]; result.token_subclass_dict = __pyx_state[6]; result.token_subclassing_fun = __pyx_state[7]             # <<<<<<<<<<<<<<
 *     if hasattr(result, '__dict__'):
 *         result.__dict__.update(__pyx_state[8])
 */
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (!(likely(PyString_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "str", Py_TYPE(__pyx_t_1)->tp_name), 0))) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->begin_token_label);
  __Pyx_DECREF(__pyx_v_result->begin_token_label);
  __pyx_v_result->begin_token_label = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->begin_token_subclass);
  __Pyx_DECREF(__pyx_v_result->begin_token_subclass);
  __pyx_v_result->begin_token_subclass = __pyx_t_1;
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (!(likely(PyString_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "str", Py_TYPE(__pyx_t_1)->tp_name), 0))) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->end_token_label);
  __Pyx_DECREF(__pyx_v_result->end_token_label);
  __pyx_v_result->end_token_label = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->end_token_subclass);
  __Pyx_DECREF(__pyx_v_result->end_token_subclass);
  __pyx_v_result->end_token_subclass = __pyx_t_1;
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 4, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (!(likely(((__pyx_t_1) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_1, __pyx_ptype_6typped_5lexer_Lexer))))) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->lex);
  __Pyx_DECREF(((PyObject *)__pyx_v_result->lex));
  __pyx_v_result->lex = ((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_t_1);
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 5, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (!(likely(((__pyx_t_1) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_1, __pyx_ptype_6typped_7matcher_Matcher))))) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->pattern_matcher);
  __Pyx_DECREF(((PyObject *)__pyx_v_result->pattern_matcher));
  __pyx_v_result->pattern_matcher = ((struct __pyx_obj_6typped_7matcher_Matcher *)__pyx_t_1);
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 6, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (!(likely(PyDict_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_t_1)->tp_name), 0))) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->token_subclass_dict);
  __Pyx_DECREF(__pyx_v_result->token_subclass_dict);
  __pyx_v_result->token_subclass_dict = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 7, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->token_subclassing_fun);
  __Pyx_DECREF(__pyx_v_result->token_subclassing_fun);
  __pyx_v_result->token_subclassing_fun = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "(tree fragment)":11
 * cdef __pyx_unpickle_TokenTable__set_state(TokenTable result, tuple __pyx_state):
 *     result.begin_token_label = __pyx_state[0]; result.begin_token_subclass = __pyx_state[1]; result.end_token_label = __pyx_state[2]; result.end_token_subclass = __pyx_state[3]; result.lex = __pyx_state[4]; result.pattern_matcher = __pyx_state[5]; result.token_subclass_dict = __pyx_state[6]; result.token_subclassing_fun = __pyx_state[7]
 *     if hasattr(result, '__dict__'):             # <<<<<<<<<<<<<<
 *         result.__dict__.update(__pyx_state[8])
 */
  __pyx_t_2 = __Pyx_HasAttr(((PyObject *)__pyx_v_result), __pyx_n_s_dict); if (unlikely(__pyx_t_2 == -1)) __PYX_ERR(2, 11, __pyx_L1_error)
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "(tree fragment)":12
 *     result.begin_token_label = __pyx_state[0]; result.begin_token_subclass = __pyx_state[1]; result.end_token_label = __pyx_state[2]; result.end_token_subclass = __pyx_state[3]; result.lex = __pyx_state[4]; result.pattern_matcher = __pyx_state[5]; result.token_subclass_dict = __pyx_state[6]; result.token_subclassing_fun = __pyx_state[7]
 *     if hasattr(result, '__dict__'):
 *         result.__dict__.update(__pyx_state[8])             # <<<<<<<<<<<<<<
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_result->__dict__, __pyx_n_s_update); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 12, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if (unlikely(__pyx_v___pyx_state == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(2, 12, __pyx_L1_error)
    }
    __pyx_t_5 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 8, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 12, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    if (!__pyx_t_6) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_5};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_5};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      {
        __pyx_t_7 = PyTuple_New(1+1); if (unlikely(!__pyx_t_7)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_6); __pyx_t_6 = NULL;
        __Pyx_GIVEREF(__pyx_t_5);
        PyTuple_SET_ITEM(__pyx_t_7, 0+1, __pyx_t_5);
        __pyx_t_5 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_7, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "(tree fragment)":11
 * cdef __pyx_unpickle_TokenTable__set_state(TokenTable result, tuple __pyx_state):
 *     result.begin_token_label = __pyx_state[0]; result.begin_token_subclass = __pyx_state[1]; result.end_token_label = __pyx_state[2]; result.end_token_subclass = __pyx_state[3]; result.lex = __pyx_state[4]; result.pattern_matcher = __pyx_state[5]; result.token_subclass_dict = __pyx_state[6]; result.token_subclassing_fun = __pyx_state[7]
 *     if hasattr(result, '__dict__'):             # <<<<<<<<<<<<<<
 *         result.__dict__.update(__pyx_state[8])
 */
  }

  /* "(tree fragment)":9
 *         __pyx_unpickle_TokenTable__set_state(<TokenTable> result, __pyx_state)
 *     return result
 * cdef __pyx_unpickle_TokenTable__set_state(TokenTable result, tuple __pyx_state):             # <<<<<<<<<<<<<<
 *     result.begin_token_label = __pyx_state[0]; result.begin_token_subclass = __pyx_state[1]; result.end_token_label = __pyx_state[2]; result.end_token_subclass = __pyx_state[3]; result.lex = __pyx_state[4]; result.pattern_matcher = __pyx_state[5]; result.token_subclass_dict = __pyx_state[6]; result.token_subclassing_fun = __pyx_state[7]
 *     if hasattr(result, '__dict__'):
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_TokenTable__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":1
 * def __pyx_unpickle_TokenBuffer(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0x6999650:
 *         from pickle import PickleError
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_9__pyx_unpickle_TokenBuffer(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_9__pyx_unpickle_TokenBuffer = {"__pyx_unpickle_TokenBuffer", (PyCFunction)__pyx_pw_6typped_5lexer_9__pyx_unpickle_TokenBuffer, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_6typped_5lexer_9__pyx_unpickle_TokenBuffer(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v___pyx_type = 0;
  long __pyx_v___pyx_checksum;
  PyObject *__pyx_v___pyx_state = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__pyx_unpickle_TokenBuffer (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_pyx_type,&__pyx_n_s_pyx_checksum,&__pyx_n_s_pyx_state,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_type)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_checksum)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_TokenBuffer", 1, 3, 3, 1); __PYX_ERR(2, 1, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_state)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_TokenBuffer", 1, 3, 3, 2); __PYX_ERR(2, 1, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__pyx_unpickle_TokenBuffer") < 0)) __PYX_ERR(2, 1, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v___pyx_type = values[0];
    __pyx_v___pyx_checksum = __Pyx_PyInt_As_long(values[1]); if (unlikely((__pyx_v___pyx_checksum == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
    __pyx_v___pyx_state = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_TokenBuffer", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(2, 1, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_TokenBuffer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_8__pyx_unpickle_TokenBuffer(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_8__pyx_unpickle_TokenBuffer(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_v_PickleError = NULL;
  PyObject *__pyx_v_result = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("__pyx_unpickle_TokenBuffer", 0);

  /* "(tree fragment)":2
 * def __pyx_unpickle_TokenBuffer(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0x6999650:             # <<<<<<<<<<<<<<
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0x6999650 = (current_offset, max_deque_size, max_peek, reference_point, token_buffer, token_getter_fun))" % __pyx_checksum)
 */
  __pyx_t_1 = ((__pyx_v___pyx_checksum != 0x6999650) != 0);
  if (__pyx_t_1) {

    /* "(tree fragment)":3
 * def __pyx_unpickle_TokenBuffer(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0x6999650:
 *         from pickle import PickleError             # <<<<<<<<<<<<<<
 *         raise PickleError("Incompatible checksums (%s vs 0x6999650 = (current_offset, max_deque_size, max_peek, reference_point, token_buffer, token_getter_fun))" % __pyx_checksum)
 *     result = TokenBuffer.__new__(__pyx_type)
 */
    __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_n_s_PickleError);
    __Pyx_GIVEREF(__pyx_n_s_PickleError);
    PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_PickleError);
    __pyx_t_3 = __Pyx_Import(__pyx_n_s_pickle, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_PickleError); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_2);
    __pyx_v_PickleError = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "(tree fragment)":4
 *     if __pyx_checksum != 0x6999650:
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0x6999650 = (current_offset, max_deque_size, max_peek, reference_point, token_buffer, token_getter_fun))" % __pyx_checksum)             # <<<<<<<<<<<<<<
 *     result = TokenBuffer.__new__(__pyx_type)
 *     if __pyx_state is not None:
 */
    __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v___pyx_checksum); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 4, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_Incompatible_checksums_s_vs_0x69, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 4, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_INCREF(__pyx_v_PickleError);
    __pyx_t_2 = __pyx_v_PickleError; __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    if (!__pyx_t_5) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_6 = PyTuple_New(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_6, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_6, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(2, 4, __pyx_L1_error)

    /* "(tree fragment)":2
 * def __pyx_unpickle_TokenBuffer(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0x6999650:             # <<<<<<<<<<<<<<
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0x6999650 = (current_offset, max_deque_size, max_peek, reference_point, token_buffer, token_getter_fun))" % __pyx_checksum)
 */
  }

  /* "(tree fragment)":5
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0x6999650 = (current_offset, max_deque_size, max_peek, reference_point, token_buffer, token_getter_fun))" % __pyx_checksum)
 *     result = TokenBuffer.__new__(__pyx_type)             # <<<<<<<<<<<<<<
 *     if __pyx_state is not None:
 *         __pyx_unpickle_TokenBuffer__set_state(<TokenBuffer> result, __pyx_state)
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_TokenBuffer), __pyx_n_s_new); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 5, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_6)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (!__pyx_t_6) {
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_v___pyx_type); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
  } else {
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_v___pyx_type};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_v___pyx_type};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_6); __pyx_t_6 = NULL;
      __Pyx_INCREF(__pyx_v___pyx_type);
      __Pyx_GIVEREF(__pyx_v___pyx_type);
      PyTuple_SET_ITEM(__pyx_t_4, 0+1, __pyx_v___pyx_type);
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_result = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "(tree fragment)":6
 *         raise PickleError("Incompatible checksums (%s vs 0x6999650 = (current_offset, max_deque_size, max_peek, reference_point, token_buffer, token_getter_fun))" % __pyx_checksum)
 *     result = TokenBuffer.__new__(__pyx_type)
 *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
 *         __pyx_unpickle_TokenBuffer__set_state(<TokenBuffer> result, __pyx_state)
 *     return result
 */
  __pyx_t_1 = (__pyx_v___pyx_state != Py_None);
  __pyx_t_7 = (__pyx_t_1 != 0);
  if (__pyx_t_7) {

    /* "(tree fragment)":7
 *     result = TokenBuffer.__new__(__pyx_type)
 *     if __pyx_state is not None:
 *         __pyx_unpickle_TokenBuffer__set_state(<TokenBuffer> result, __pyx_state)             # <<<<<<<<<<<<<<
 *     return result
 * cdef __pyx_unpickle_TokenBuffer__set_state(TokenBuffer result, tuple __pyx_state):
 */
    if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "tuple", Py_TYPE(__pyx_v___pyx_state)->tp_name), 0))) __PYX_ERR(2, 7, __pyx_L1_error)
    __pyx_t_3 = __pyx_f_6typped_5lexer___pyx_unpickle_TokenBuffer__set_state(((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_v_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "(tree fragment)":6
 *         raise PickleError("Incompatible checksums (%s vs 0x6999650 = (current_offset, max_deque_size, max_peek, reference_point, token_buffer, token_getter_fun))" % __pyx_checksum)
 *     result = TokenBuffer.__new__(__pyx_type)
 *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
 *         __pyx_unpickle_TokenBuffer__set_state(<TokenBuffer> result, __pyx_state)
 *     return result
 */
  }

  /* "(tree fragment)":8
 *     if __pyx_state is not None:
 *         __pyx_unpickle_TokenBuffer__set_state(<TokenBuffer> result, __pyx_state)
 *     return result             # <<<<<<<<<<<<<<
 * cdef __pyx_unpickle_TokenBuffer__set_state(TokenBuffer result, tuple __pyx_state):
 *     result.current_offset = __pyx_state[0]; result.max_deque_size = __pyx_state[1]; result.max_peek = __pyx_state[2]; result.reference_point = __pyx_state[3]; result.token_buffer = __pyx_state[4]; result.token_getter_fun = __pyx_state[5]
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_result);
  __pyx_r = __pyx_v_result;
  goto __pyx_L0;

  /* "(tree fragment)":1
 * def __pyx_unpickle_TokenBuffer(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0x6999650:
 *         from pickle import PickleError
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_TokenBuffer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_PickleError);
  __Pyx_XDECREF(__pyx_v_result);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":9
 *         __pyx_unpickle_TokenBuffer__set_state(<TokenBuffer> result, __pyx_state)
 *     return result
 * cdef __pyx_unpickle_TokenBuffer__set_state(TokenBuffer result, tuple __pyx_state):             # <<<<<<<<<<<<<<
 *     result.current_offset = __pyx_state[0]; result.max_deque_size = __pyx_state[1]; result.max_peek = __pyx_state[2]; result.reference_point = __pyx_state[3]; result.token_buffer = __pyx_state[4]; result.token_getter_fun = __pyx_state[5]
 *     if hasattr(result, '__dict__'):
 */

static PyObject *__pyx_f_6typped_5lexer___pyx_unpickle_TokenBuffer__set_state(struct __pyx_obj_6typped_5lexer_TokenBuffer *__pyx_v_result, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  long __pyx_t_2;
  int __pyx_t_3;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("__pyx_unpickle_TokenBuffer__set_state", 0);

  /* "(tree fragment)":10
 *     return result
 * cdef __pyx_unpickle_TokenBuffer__set_state(TokenBuffer result, tuple __pyx_state):
 *     result.current_offset = __pyx_state[0]; result.max_deque_size = __pyx_state[1]; result.max_peek = __pyx_state[2]; result.reference_point = __pyx_state[3]; result.token_buffer = __pyx_state[4]; result.token_getter_fun = __pyx_state[5]             # <<<<<<<<<<<<<<
 *     if hasattr(result, '__dict__'):
 *         result.__dict__.update(__pyx_state[6])
 */
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_2 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->current_offset = __pyx_t_2;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_2 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->max_deque_size = __pyx_t_2;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_2 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->max_peek = __pyx_t_2;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_2 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->reference_point = __pyx_t_2;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 4, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->token_buffer);
  __Pyx_DECREF(__pyx_v_result->token_buffer);
  __pyx_v_result->token_buffer = __pyx_t_1;
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 5, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->token_getter_fun);
  __Pyx_DECREF(__pyx_v_result->token_getter_fun);
  __pyx_v_result->token_getter_fun = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "(tree fragment)":11
 * cdef __pyx_unpickle_TokenBuffer__set_state(TokenBuffer result, tuple __pyx_state):
 *     result.current_offset = __pyx_state[0]; result.max_deque_size = __pyx_state[1]; result.max_peek = __pyx_state[2]; result.reference_point = __pyx_state[3]; result.token_buffer = __pyx_state[4]; result.token_getter_fun = __pyx_state[5]
 *     if hasattr(result, '__dict__'):             # <<<<<<<<<<<<<<
 *         result.__dict__.update(__pyx_state[6])
 */
  __pyx_t_3 = __Pyx_HasAttr(((PyObject *)__pyx_v_result), __pyx_n_s_dict); if (unlikely(__pyx_t_3 == -1)) __PYX_ERR(2, 11, __pyx_L1_error)
  __pyx_t_4 = (__pyx_t_3 != 0);
  if (__pyx_t_4) {

    /* "(tree fragment)":12
 *     result.current_offset = __pyx_state[0]; result.max_deque_size = __pyx_state[1]; result.max_peek = __pyx_state[2]; result.reference_point = __pyx_state[3]; result.token_buffer = __pyx_state[4]; result.token_getter_fun = __pyx_state[5]
 *     if hasattr(result, '__dict__'):
 *         result.__dict__.update(__pyx_state[6])             # <<<<<<<<<<<<<<
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_result), __pyx_n_s_dict); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 12, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_update); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 12, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(__pyx_v___pyx_state == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(2, 12, __pyx_L1_error)
    }
    __pyx_t_5 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 6, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 12, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    if (!__pyx_t_7) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_5};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_5};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(1+1); if (unlikely(!__pyx_t_8)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_7); __pyx_t_7 = NULL;
        __Pyx_GIVEREF(__pyx_t_5);
        PyTuple_SET_ITEM(__pyx_t_8, 0+1, __pyx_t_5);
        __pyx_t_5 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "(tree fragment)":11
 * cdef __pyx_unpickle_TokenBuffer__set_state(TokenBuffer result, tuple __pyx_state):
 *     result.current_offset = __pyx_state[0]; result.max_deque_size = __pyx_state[1]; result.max_peek = __pyx_state[2]; result.reference_point = __pyx_state[3]; result.token_buffer = __pyx_state[4]; result.token_getter_fun = __pyx_state[5]
 *     if hasattr(result, '__dict__'):             # <<<<<<<<<<<<<<
 *         result.__dict__.update(__pyx_state[6])
 */
  }

  /* "(tree fragment)":9
 *         __pyx_unpickle_TokenBuffer__set_state(<TokenBuffer> result, __pyx_state)
 *     return result
 * cdef __pyx_unpickle_TokenBuffer__set_state(TokenBuffer result, tuple __pyx_state):             # <<<<<<<<<<<<<<
 *     result.current_offset = __pyx_state[0]; result.max_deque_size = __pyx_state[1]; result.max_peek = __pyx_state[2]; result.reference_point = __pyx_state[3]; result.token_buffer = __pyx_state[4]; result.token_getter_fun = __pyx_state[5]
 *     if hasattr(result, '__dict__'):
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_TokenBuffer__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":1
 * def __pyx_unpickle_GenTokenState(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0xd41d8cd:
 *         from pickle import PickleError
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_11__pyx_unpickle_GenTokenState(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_11__pyx_unpickle_GenTokenState = {"__pyx_unpickle_GenTokenState", (PyCFunction)__pyx_pw_6typped_5lexer_11__pyx_unpickle_GenTokenState, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_6typped_5lexer_11__pyx_unpickle_GenTokenState(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v___pyx_type = 0;
  long __pyx_v___pyx_checksum;
  PyObject *__pyx_v___pyx_state = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__pyx_unpickle_GenTokenState (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_pyx_type,&__pyx_n_s_pyx_checksum,&__pyx_n_s_pyx_state,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_type)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_checksum)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_GenTokenState", 1, 3, 3, 1); __PYX_ERR(2, 1, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_state)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_GenTokenState", 1, 3, 3, 2); __PYX_ERR(2, 1, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__pyx_unpickle_GenTokenState") < 0)) __PYX_ERR(2, 1, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v___pyx_type = values[0];
    __pyx_v___pyx_checksum = __Pyx_PyInt_As_long(values[1]); if (unlikely((__pyx_v___pyx_checksum == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
    __pyx_v___pyx_state = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_GenTokenState", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(2, 1, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_GenTokenState", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_10__pyx_unpickle_GenTokenState(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_10__pyx_unpickle_GenTokenState(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_v_PickleError = NULL;
  PyObject *__pyx_v_result = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("__pyx_unpickle_GenTokenState", 0);

  /* "(tree fragment)":2
 * def __pyx_unpickle_GenTokenState(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0xd41d8cd:             # <<<<<<<<<<<<<<
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xd41d8cd = ())" % __pyx_checksum)
 */
  __pyx_t_1 = ((__pyx_v___pyx_checksum != 0xd41d8cd) != 0);
  if (__pyx_t_1) {

    /* "(tree fragment)":3
 * def __pyx_unpickle_GenTokenState(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0xd41d8cd:
 *         from pickle import PickleError             # <<<<<<<<<<<<<<
 *         raise PickleError("Incompatible checksums (%s vs 0xd41d8cd = ())" % __pyx_checksum)
 *     result = GenTokenState.__new__(__pyx_type)
 */
    __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_n_s_PickleError);
    __Pyx_GIVEREF(__pyx_n_s_PickleError);
    PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_PickleError);
    __pyx_t_3 = __Pyx_Import(__pyx_n_s_pickle, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_PickleError); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_2);
    __pyx_v_PickleError = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "(tree fragment)":4
 *     if __pyx_checksum != 0xd41d8cd:
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xd41d8cd = ())" % __pyx_checksum)             # <<<<<<<<<<<<<<
 *     result = GenTokenState.__new__(__pyx_type)
 *     if __pyx_state is not None:
 */
    __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v___pyx_checksum); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 4, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_Incompatible_checksums_s_vs_0xd4, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 4, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_INCREF(__pyx_v_PickleError);
    __pyx_t_2 = __pyx_v_PickleError; __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    if (!__pyx_t_5) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_6 = PyTuple_New(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_6, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_6, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(2, 4, __pyx_L1_error)

    /* "(tree fragment)":2
 * def __pyx_unpickle_GenTokenState(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0xd41d8cd:             # <<<<<<<<<<<<<<
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xd41d8cd = ())" % __pyx_checksum)
 */
  }

  /* "(tree fragment)":5
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xd41d8cd = ())" % __pyx_checksum)
 *     result = GenTokenState.__new__(__pyx_type)             # <<<<<<<<<<<<<<
 *     if __pyx_state is not None:
 *         __pyx_unpickle_GenTokenState__set_state(<GenTokenState> result, __pyx_state)
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState), __pyx_n_s_new); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 5, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_6)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (!__pyx_t_6) {
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_v___pyx_type); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
  } else {
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_v___pyx_type};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_v___pyx_type};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_6); __pyx_t_6 = NULL;
      __Pyx_INCREF(__pyx_v___pyx_type);
      __Pyx_GIVEREF(__pyx_v___pyx_type);
      PyTuple_SET_ITEM(__pyx_t_4, 0+1, __pyx_v___pyx_type);
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_result = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "(tree fragment)":6
 *         raise PickleError("Incompatible checksums (%s vs 0xd41d8cd = ())" % __pyx_checksum)
 *     result = GenTokenState.__new__(__pyx_type)
 *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
 *         __pyx_unpickle_GenTokenState__set_state(<GenTokenState> result, __pyx_state)
 *     return result
 */
  __pyx_t_1 = (__pyx_v___pyx_state != Py_None);
  __pyx_t_7 = (__pyx_t_1 != 0);
  if (__pyx_t_7) {

    /* "(tree fragment)":7
 *     result = GenTokenState.__new__(__pyx_type)
 *     if __pyx_state is not None:
 *         __pyx_unpickle_GenTokenState__set_state(<GenTokenState> result, __pyx_state)             # <<<<<<<<<<<<<<
 *     return result
 * cdef __pyx_unpickle_GenTokenState__set_state(GenTokenState result, tuple __pyx_state):
 */
    if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "tuple", Py_TYPE(__pyx_v___pyx_state)->tp_name), 0))) __PYX_ERR(2, 7, __pyx_L1_error)
    __pyx_t_3 = __pyx_f_6typped_5lexer___pyx_unpickle_GenTokenState__set_state(((struct __pyx_obj_6typped_5lexer_GenTokenState *)__pyx_v_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "(tree fragment)":6
 *         raise PickleError("Incompatible checksums (%s vs 0xd41d8cd = ())" % __pyx_checksum)
 *     result = GenTokenState.__new__(__pyx_type)
 *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
 *         __pyx_unpickle_GenTokenState__set_state(<GenTokenState> result, __pyx_state)
 *     return result
 */
  }

  /* "(tree fragment)":8
 *     if __pyx_state is not None:
 *         __pyx_unpickle_GenTokenState__set_state(<GenTokenState> result, __pyx_state)
 *     return result             # <<<<<<<<<<<<<<
 * cdef __pyx_unpickle_GenTokenState__set_state(GenTokenState result, tuple __pyx_state):
 *     if hasattr(result, '__dict__'):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_result);
  __pyx_r = __pyx_v_result;
  goto __pyx_L0;

  /* "(tree fragment)":1
 * def __pyx_unpickle_GenTokenState(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0xd41d8cd:
 *         from pickle import PickleError
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_GenTokenState", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_PickleError);
  __Pyx_XDECREF(__pyx_v_result);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":9
 *         __pyx_unpickle_GenTokenState__set_state(<GenTokenState> result, __pyx_state)
 *     return result
 * cdef __pyx_unpickle_GenTokenState__set_state(GenTokenState result, tuple __pyx_state):             # <<<<<<<<<<<<<<
 *     if hasattr(result, '__dict__'):
 *         result.__dict__.update(__pyx_state[0])
 */

static PyObject *__pyx_f_6typped_5lexer___pyx_unpickle_GenTokenState__set_state(struct __pyx_obj_6typped_5lexer_GenTokenState *__pyx_v_result, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("__pyx_unpickle_GenTokenState__set_state", 0);

  /* "(tree fragment)":10
 *     return result
 * cdef __pyx_unpickle_GenTokenState__set_state(GenTokenState result, tuple __pyx_state):
 *     if hasattr(result, '__dict__'):             # <<<<<<<<<<<<<<
 *         result.__dict__.update(__pyx_state[0])
 */
  __pyx_t_1 = __Pyx_HasAttr(((PyObject *)__pyx_v_result), __pyx_n_s_dict); if (unlikely(__pyx_t_1 == -1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "(tree fragment)":11
 * cdef __pyx_unpickle_GenTokenState__set_state(GenTokenState result, tuple __pyx_state):
 *     if hasattr(result, '__dict__'):
 *         result.__dict__.update(__pyx_state[0])             # <<<<<<<<<<<<<<
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_result), __pyx_n_s_dict); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_update); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(__pyx_v___pyx_state == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(2, 11, __pyx_L1_error)
    }
    __pyx_t_4 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 11, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    if (!__pyx_t_6) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 11, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_4};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 11, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_t_4};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 11, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_7 = PyTuple_New(1+1); if (unlikely(!__pyx_t_7)) __PYX_ERR(2, 11, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_6); __pyx_t_6 = NULL;
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_7, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_7, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 11, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "(tree fragment)":10
 *     return result
 * cdef __pyx_unpickle_GenTokenState__set_state(GenTokenState result, tuple __pyx_state):
 *     if hasattr(result, '__dict__'):             # <<<<<<<<<<<<<<
 *         result.__dict__.update(__pyx_state[0])
 */
  }

  /* "(tree fragment)":9
 *         __pyx_unpickle_GenTokenState__set_state(<GenTokenState> result, __pyx_state)
 *     return result
 * cdef __pyx_unpickle_GenTokenState__set_state(GenTokenState result, tuple __pyx_state):             # <<<<<<<<<<<<<<
 *     if hasattr(result, '__dict__'):
 *         result.__dict__.update(__pyx_state[0])
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_GenTokenState__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":1
 * def __pyx_unpickle_Lexer(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0xd1c1092:
 *         from pickle import PickleError
 */

/* Python wrapper */
static PyObject *__pyx_pw_6typped_5lexer_13__pyx_unpickle_Lexer(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_6typped_5lexer_13__pyx_unpickle_Lexer = {"__pyx_unpickle_Lexer", (PyCFunction)__pyx_pw_6typped_5lexer_13__pyx_unpickle_Lexer, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_6typped_5lexer_13__pyx_unpickle_Lexer(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v___pyx_type = 0;
  long __pyx_v___pyx_checksum;
  PyObject *__pyx_v___pyx_state = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__pyx_unpickle_Lexer (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_pyx_type,&__pyx_n_s_pyx_checksum,&__pyx_n_s_pyx_state,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_type)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_checksum)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_Lexer", 1, 3, 3, 1); __PYX_ERR(2, 1, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = PyDict_GetItem(__pyx_kwds, __pyx_n_s_pyx_state)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_Lexer", 1, 3, 3, 2); __PYX_ERR(2, 1, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__pyx_unpickle_Lexer") < 0)) __PYX_ERR(2, 1, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v___pyx_type = values[0];
    __pyx_v___pyx_checksum = __Pyx_PyInt_As_long(values[1]); if (unlikely((__pyx_v___pyx_checksum == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 1, __pyx_L3_error)
    __pyx_v___pyx_state = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__pyx_unpickle_Lexer", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(2, 1, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_Lexer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_6typped_5lexer_12__pyx_unpickle_Lexer(__pyx_self, __pyx_v___pyx_type, __pyx_v___pyx_checksum, __pyx_v___pyx_state);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_6typped_5lexer_12__pyx_unpickle_Lexer(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v___pyx_type, long __pyx_v___pyx_checksum, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_v_PickleError = NULL;
  PyObject *__pyx_v_result = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("__pyx_unpickle_Lexer", 0);

  /* "(tree fragment)":2
 * def __pyx_unpickle_Lexer(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0xd1c1092:             # <<<<<<<<<<<<<<
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xd1c1092 = (_curr_token_is_first, _returned_first_token, all_token_count, already_returned_end_token, default_helper_exception, final_mod_function, non_ignored_token_count, prog_unprocessed, program, raw_linenumber, text_is_set, token, token_buffer, token_generator_state, token_table, upcoming_raw_charnumber, upcoming_raw_linenumber, upcoming_raw_total_chars))" % __pyx_checksum)
 */
  __pyx_t_1 = ((__pyx_v___pyx_checksum != 0xd1c1092) != 0);
  if (__pyx_t_1) {

    /* "(tree fragment)":3
 * def __pyx_unpickle_Lexer(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0xd1c1092:
 *         from pickle import PickleError             # <<<<<<<<<<<<<<
 *         raise PickleError("Incompatible checksums (%s vs 0xd1c1092 = (_curr_token_is_first, _returned_first_token, all_token_count, already_returned_end_token, default_helper_exception, final_mod_function, non_ignored_token_count, prog_unprocessed, program, raw_linenumber, text_is_set, token, token_buffer, token_generator_state, token_table, upcoming_raw_charnumber, upcoming_raw_linenumber, upcoming_raw_total_chars))" % __pyx_checksum)
 *     result = Lexer.__new__(__pyx_type)
 */
    __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_n_s_PickleError);
    __Pyx_GIVEREF(__pyx_n_s_PickleError);
    PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_PickleError);
    __pyx_t_3 = __Pyx_Import(__pyx_n_s_pickle, __pyx_t_2, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_PickleError); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 3, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_2);
    __pyx_v_PickleError = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "(tree fragment)":4
 *     if __pyx_checksum != 0xd1c1092:
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xd1c1092 = (_curr_token_is_first, _returned_first_token, all_token_count, already_returned_end_token, default_helper_exception, final_mod_function, non_ignored_token_count, prog_unprocessed, program, raw_linenumber, text_is_set, token, token_buffer, token_generator_state, token_table, upcoming_raw_charnumber, upcoming_raw_linenumber, upcoming_raw_total_chars))" % __pyx_checksum)             # <<<<<<<<<<<<<<
 *     result = Lexer.__new__(__pyx_type)
 *     if __pyx_state is not None:
 */
    __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v___pyx_checksum); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 4, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_Incompatible_checksums_s_vs_0xd1, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 4, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_INCREF(__pyx_v_PickleError);
    __pyx_t_2 = __pyx_v_PickleError; __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    if (!__pyx_t_5) {
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_6 = PyTuple_New(1+1); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_5); __pyx_t_5 = NULL;
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_6, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_6, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 4, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(2, 4, __pyx_L1_error)

    /* "(tree fragment)":2
 * def __pyx_unpickle_Lexer(__pyx_type, long __pyx_checksum, __pyx_state):
 *     if __pyx_checksum != 0xd1c1092:             # <<<<<<<<<<<<<<
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xd1c1092 = (_curr_token_is_first, _returned_first_token, all_token_count, already_returned_end_token, default_helper_exception, final_mod_function, non_ignored_token_count, prog_unprocessed, program, raw_linenumber, text_is_set, token, token_buffer, token_generator_state, token_table, upcoming_raw_charnumber, upcoming_raw_linenumber, upcoming_raw_total_chars))" % __pyx_checksum)
 */
  }

  /* "(tree fragment)":5
 *         from pickle import PickleError
 *         raise PickleError("Incompatible checksums (%s vs 0xd1c1092 = (_curr_token_is_first, _returned_first_token, all_token_count, already_returned_end_token, default_helper_exception, final_mod_function, non_ignored_token_count, prog_unprocessed, program, raw_linenumber, text_is_set, token, token_buffer, token_generator_state, token_table, upcoming_raw_charnumber, upcoming_raw_linenumber, upcoming_raw_total_chars))" % __pyx_checksum)
 *     result = Lexer.__new__(__pyx_type)             # <<<<<<<<<<<<<<
 *     if __pyx_state is not None:
 *         __pyx_unpickle_Lexer__set_state(<Lexer> result, __pyx_state)
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_ptype_6typped_5lexer_Lexer), __pyx_n_s_new); if (unlikely(!__pyx_t_2)) __PYX_ERR(2, 5, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_6)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (!__pyx_t_6) {
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_v___pyx_type); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
  } else {
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_v___pyx_type};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_6, __pyx_v___pyx_type};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_6); __pyx_t_6 = NULL;
      __Pyx_INCREF(__pyx_v___pyx_type);
      __Pyx_GIVEREF(__pyx_v___pyx_type);
      PyTuple_SET_ITEM(__pyx_t_4, 0+1, __pyx_v___pyx_type);
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 5, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_result = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "(tree fragment)":6
 *         raise PickleError("Incompatible checksums (%s vs 0xd1c1092 = (_curr_token_is_first, _returned_first_token, all_token_count, already_returned_end_token, default_helper_exception, final_mod_function, non_ignored_token_count, prog_unprocessed, program, raw_linenumber, text_is_set, token, token_buffer, token_generator_state, token_table, upcoming_raw_charnumber, upcoming_raw_linenumber, upcoming_raw_total_chars))" % __pyx_checksum)
 *     result = Lexer.__new__(__pyx_type)
 *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
 *         __pyx_unpickle_Lexer__set_state(<Lexer> result, __pyx_state)
 *     return result
 */
  __pyx_t_1 = (__pyx_v___pyx_state != Py_None);
  __pyx_t_7 = (__pyx_t_1 != 0);
  if (__pyx_t_7) {

    /* "(tree fragment)":7
 *     result = Lexer.__new__(__pyx_type)
 *     if __pyx_state is not None:
 *         __pyx_unpickle_Lexer__set_state(<Lexer> result, __pyx_state)             # <<<<<<<<<<<<<<
 *     return result
 * cdef __pyx_unpickle_Lexer__set_state(Lexer result, tuple __pyx_state):
 */
    if (!(likely(PyTuple_CheckExact(__pyx_v___pyx_state))||((__pyx_v___pyx_state) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "tuple", Py_TYPE(__pyx_v___pyx_state)->tp_name), 0))) __PYX_ERR(2, 7, __pyx_L1_error)
    __pyx_t_3 = __pyx_f_6typped_5lexer___pyx_unpickle_Lexer__set_state(((struct __pyx_obj_6typped_5lexer_Lexer *)__pyx_v_result), ((PyObject*)__pyx_v___pyx_state)); if (unlikely(!__pyx_t_3)) __PYX_ERR(2, 7, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "(tree fragment)":6
 *         raise PickleError("Incompatible checksums (%s vs 0xd1c1092 = (_curr_token_is_first, _returned_first_token, all_token_count, already_returned_end_token, default_helper_exception, final_mod_function, non_ignored_token_count, prog_unprocessed, program, raw_linenumber, text_is_set, token, token_buffer, token_generator_state, token_table, upcoming_raw_charnumber, upcoming_raw_linenumber, upcoming_raw_total_chars))" % __pyx_checksum)
 *     result = Lexer.__new__(__pyx_type)
 *     if __pyx_state is not None:             # <<<<<<<<<<<<<<
 *         __pyx_unpickle_Lexer__set_state(<Lexer> result, __pyx_state)
 *     return result
 */
  }

  /* "(tree fragment)":8
 *     if __pyx_state is not None:
 *         __pyx_unpickle_Lexer__set_state(<Lexer> result, __pyx_state)
 *     return result             # <<<<<<<<<<<<<<
 * cdef __pyx_unpickle_Lexer__set_state(Lexer result, tuple __pyx_state):
 *     result._curr_token_is_first = __pyx_state[0]; result._returned_first_token = __pyx_state[1]; result.all_token_count = __pyx_state[2]; result.already_returned_end_token = __pyx_state[3]; result.default_helper_exception = __pyx_state[4]; result.final_mod_function = __pyx_state[5]; result.non_ignored_token_count = __pyx_state[6]; result.prog_unprocessed = __pyx_state[7]; result.program = __pyx_state[8]; result.raw_linenumber = __pyx_state[9]; result.text_is_set = __pyx_state[10]; result.token = __pyx_state[11]; result.token_buffer = __pyx_state[12]; result.token_generator_state = __pyx_state[13]; result.token_table = __pyx_state[14]; result.upcoming_raw_charnumber = __pyx_state[15]; result.upcoming_raw_linenumber = __pyx_state[16]; result.upcoming_raw_total_chars = __pyx_state[17]
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_result);
  __pyx_r = __pyx_v_result;
  goto __pyx_L0;

  /* "(tree fragment)":1
 * def __pyx_unpickle_Lexer(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0xd1c1092:
 *         from pickle import PickleError
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_Lexer", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_PickleError);
  __Pyx_XDECREF(__pyx_v_result);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":9
 *         __pyx_unpickle_Lexer__set_state(<Lexer> result, __pyx_state)
 *     return result
 * cdef __pyx_unpickle_Lexer__set_state(Lexer result, tuple __pyx_state):             # <<<<<<<<<<<<<<
 *     result._curr_token_is_first = __pyx_state[0]; result._returned_first_token = __pyx_state[1]; result.all_token_count = __pyx_state[2]; result.already_returned_end_token = __pyx_state[3]; result.default_helper_exception = __pyx_state[4]; result.final_mod_function = __pyx_state[5]; result.non_ignored_token_count = __pyx_state[6]; result.prog_unprocessed = __pyx_state[7]; result.program = __pyx_state[8]; result.raw_linenumber = __pyx_state[9]; result.text_is_set = __pyx_state[10]; result.token = __pyx_state[11]; result.token_buffer = __pyx_state[12]; result.token_generator_state = __pyx_state[13]; result.token_table = __pyx_state[14]; result.upcoming_raw_charnumber = __pyx_state[15]; result.upcoming_raw_linenumber = __pyx_state[16]; result.upcoming_raw_total_chars = __pyx_state[17]
 *     if hasattr(result, '__dict__'):
 */

static PyObject *__pyx_f_6typped_5lexer___pyx_unpickle_Lexer__set_state(struct __pyx_obj_6typped_5lexer_Lexer *__pyx_v_result, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  long __pyx_t_3;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("__pyx_unpickle_Lexer__set_state", 0);

  /* "(tree fragment)":10
 *     return result
 * cdef __pyx_unpickle_Lexer__set_state(Lexer result, tuple __pyx_state):
 *     result._curr_token_is_first = __pyx_state[0]; result._returned_first_token = __pyx_state[1]; result.all_token_count = __pyx_state[2]; result.already_returned_end_token = __pyx_state[3]; result.default_helper_exception = __pyx_state[4]; result.final_mod_function = __pyx_state[5]; result.non_ignored_token_count = __pyx_state[6]; result.prog_unprocessed = __pyx_state[7]; result.program = __pyx_state[8]; result.raw_linenumber = __pyx_state[9]; result.text_is_set = __pyx_state[10]; result.token = __pyx_state[11]; result.token_buffer = __pyx_state[12]; result.token_generator_state = __pyx_state[13]; result.token_table = __pyx_state[14]; result.upcoming_raw_charnumber = __pyx_state[15]; result.upcoming_raw_linenumber = __pyx_state[16]; result.upcoming_raw_total_chars = __pyx_state[17]             # <<<<<<<<<<<<<<
 *     if hasattr(result, '__dict__'):
 *         result.__dict__.update(__pyx_state[18])
 */
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->_curr_token_is_first = __pyx_t_2;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->_returned_first_token = __pyx_t_2;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_3 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->all_token_count = __pyx_t_3;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->already_returned_end_token = __pyx_t_2;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 4, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->default_helper_exception);
  __Pyx_DECREF(__pyx_v_result->default_helper_exception);
  __pyx_v_result->default_helper_exception = __pyx_t_1;
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 5, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->final_mod_function);
  __Pyx_DECREF(__pyx_v_result->final_mod_function);
  __pyx_v_result->final_mod_function = __pyx_t_1;
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 6, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_3 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->non_ignored_token_count = __pyx_t_3;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 7, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (!(likely(PyList_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_1)->tp_name), 0))) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->prog_unprocessed);
  __Pyx_DECREF(__pyx_v_result->prog_unprocessed);
  __pyx_v_result->prog_unprocessed = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 8, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->program);
  __Pyx_DECREF(__pyx_v_result->program);
  __pyx_v_result->program = __pyx_t_1;
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 9, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_3 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->raw_linenumber = __pyx_t_3;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 10, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely((__pyx_t_2 == (int)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->text_is_set = __pyx_t_2;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 11, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->token);
  __Pyx_DECREF(__pyx_v_result->token);
  __pyx_v_result->token = __pyx_t_1;
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 12, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (!(likely(((__pyx_t_1) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_1, __pyx_ptype_6typped_5lexer_TokenBuffer))))) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->token_buffer);
  __Pyx_DECREF(((PyObject *)__pyx_v_result->token_buffer));
  __pyx_v_result->token_buffer = ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)__pyx_t_1);
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 13, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_3 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->token_generator_state = __pyx_t_3;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 14, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (!(likely(((__pyx_t_1) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_1, __pyx_ptype_6typped_5lexer_TokenTable))))) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_result->token_table);
  __Pyx_DECREF(((PyObject *)__pyx_v_result->token_table));
  __pyx_v_result->token_table = ((struct __pyx_obj_6typped_5lexer_TokenTable *)__pyx_t_1);
  __pyx_t_1 = 0;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 15, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_3 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->upcoming_raw_charnumber = __pyx_t_3;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 16, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_3 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->upcoming_raw_linenumber = __pyx_t_3;
  if (unlikely(__pyx_v___pyx_state == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(2, 10, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 17, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyInt_As_long(__pyx_t_1); if (unlikely((__pyx_t_3 == (long)-1) && PyErr_Occurred())) __PYX_ERR(2, 10, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_result->upcoming_raw_total_chars = __pyx_t_3;

  /* "(tree fragment)":11
 * cdef __pyx_unpickle_Lexer__set_state(Lexer result, tuple __pyx_state):
 *     result._curr_token_is_first = __pyx_state[0]; result._returned_first_token = __pyx_state[1]; result.all_token_count = __pyx_state[2]; result.already_returned_end_token = __pyx_state[3]; result.default_helper_exception = __pyx_state[4]; result.final_mod_function = __pyx_state[5]; result.non_ignored_token_count = __pyx_state[6]; result.prog_unprocessed = __pyx_state[7]; result.program = __pyx_state[8]; result.raw_linenumber = __pyx_state[9]; result.text_is_set = __pyx_state[10]; result.token = __pyx_state[11]; result.token_buffer = __pyx_state[12]; result.token_generator_state = __pyx_state[13]; result.token_table = __pyx_state[14]; result.upcoming_raw_charnumber = __pyx_state[15]; result.upcoming_raw_linenumber = __pyx_state[16]; result.upcoming_raw_total_chars = __pyx_state[17]
 *     if hasattr(result, '__dict__'):             # <<<<<<<<<<<<<<
 *         result.__dict__.update(__pyx_state[18])
 */
  __pyx_t_2 = __Pyx_HasAttr(((PyObject *)__pyx_v_result), __pyx_n_s_dict); if (unlikely(__pyx_t_2 == -1)) __PYX_ERR(2, 11, __pyx_L1_error)
  __pyx_t_4 = (__pyx_t_2 != 0);
  if (__pyx_t_4) {

    /* "(tree fragment)":12
 *     result._curr_token_is_first = __pyx_state[0]; result._returned_first_token = __pyx_state[1]; result.all_token_count = __pyx_state[2]; result.already_returned_end_token = __pyx_state[3]; result.default_helper_exception = __pyx_state[4]; result.final_mod_function = __pyx_state[5]; result.non_ignored_token_count = __pyx_state[6]; result.prog_unprocessed = __pyx_state[7]; result.program = __pyx_state[8]; result.raw_linenumber = __pyx_state[9]; result.text_is_set = __pyx_state[10]; result.token = __pyx_state[11]; result.token_buffer = __pyx_state[12]; result.token_generator_state = __pyx_state[13]; result.token_table = __pyx_state[14]; result.upcoming_raw_charnumber = __pyx_state[15]; result.upcoming_raw_linenumber = __pyx_state[16]; result.upcoming_raw_total_chars = __pyx_state[17]
 *     if hasattr(result, '__dict__'):
 *         result.__dict__.update(__pyx_state[18])             # <<<<<<<<<<<<<<
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_result->__dict__, __pyx_n_s_update); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 12, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (unlikely(__pyx_v___pyx_state == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(2, 12, __pyx_L1_error)
    }
    __pyx_t_6 = __Pyx_GetItemInt_Tuple(__pyx_v___pyx_state, 18, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(2, 12, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    if (!__pyx_t_7) {
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_6};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_6};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(1+1); if (unlikely(!__pyx_t_8)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_7); __pyx_t_7 = NULL;
        __Pyx_GIVEREF(__pyx_t_6);
        PyTuple_SET_ITEM(__pyx_t_8, 0+1, __pyx_t_6);
        __pyx_t_6 = 0;
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_8, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 12, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "(tree fragment)":11
 * cdef __pyx_unpickle_Lexer__set_state(Lexer result, tuple __pyx_state):
 *     result._curr_token_is_first = __pyx_state[0]; result._returned_first_token = __pyx_state[1]; result.all_token_count = __pyx_state[2]; result.already_returned_end_token = __pyx_state[3]; result.default_helper_exception = __pyx_state[4]; result.final_mod_function = __pyx_state[5]; result.non_ignored_token_count = __pyx_state[6]; result.prog_unprocessed = __pyx_state[7]; result.program = __pyx_state[8]; result.raw_linenumber = __pyx_state[9]; result.text_is_set = __pyx_state[10]; result.token = __pyx_state[11]; result.token_buffer = __pyx_state[12]; result.token_generator_state = __pyx_state[13]; result.token_table = __pyx_state[14]; result.upcoming_raw_charnumber = __pyx_state[15]; result.upcoming_raw_linenumber = __pyx_state[16]; result.upcoming_raw_total_chars = __pyx_state[17]
 *     if hasattr(result, '__dict__'):             # <<<<<<<<<<<<<<
 *         result.__dict__.update(__pyx_state[18])
 */
  }

  /* "(tree fragment)":9
 *         __pyx_unpickle_Lexer__set_state(<Lexer> result, __pyx_state)
 *     return result
 * cdef __pyx_unpickle_Lexer__set_state(Lexer result, tuple __pyx_state):             # <<<<<<<<<<<<<<
 *     result._curr_token_is_first = __pyx_state[0]; result._returned_first_token = __pyx_state[1]; result.all_token_count = __pyx_state[2]; result.already_returned_end_token = __pyx_state[3]; result.default_helper_exception = __pyx_state[4]; result.final_mod_function = __pyx_state[5]; result.non_ignored_token_count = __pyx_state[6]; result.prog_unprocessed = __pyx_state[7]; result.program = __pyx_state[8]; result.raw_linenumber = __pyx_state[9]; result.text_is_set = __pyx_state[10]; result.token = __pyx_state[11]; result.token_buffer = __pyx_state[12]; result.token_generator_state = __pyx_state[13]; result.token_table = __pyx_state[14]; result.upcoming_raw_charnumber = __pyx_state[15]; result.upcoming_raw_linenumber = __pyx_state[16]; result.upcoming_raw_total_chars = __pyx_state[17]
 *     if hasattr(result, '__dict__'):
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("typped.lexer.__pyx_unpickle_Lexer__set_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}
static struct __pyx_vtabstruct_6typped_5lexer_TokenBuffer __pyx_vtable_6typped_5lexer_TokenBuffer;

static PyObject *__pyx_tp_new_6typped_5lexer_TokenBuffer(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  struct __pyx_obj_6typped_5lexer_TokenBuffer *p;
  PyObject *o;
  if (likely((t->tp_flags & Py_TPFLAGS_IS_ABSTRACT) == 0)) {
    o = (*t->tp_alloc)(t, 0);
  } else {
    o = (PyObject *) PyBaseObject_Type.tp_new(t, __pyx_empty_tuple, 0);
  }
  if (unlikely(!o)) return 0;
  p = ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)o);
  p->__pyx_vtab = __pyx_vtabptr_6typped_5lexer_TokenBuffer;
  p->token_getter_fun = Py_None; Py_INCREF(Py_None);
  p->token_buffer = Py_None; Py_INCREF(Py_None);
  return o;
}

static void __pyx_tp_dealloc_6typped_5lexer_TokenBuffer(PyObject *o) {
  struct __pyx_obj_6typped_5lexer_TokenBuffer *p = (struct __pyx_obj_6typped_5lexer_TokenBuffer *)o;
  #if PY_VERSION_HEX >= 0x030400a1
  if (unlikely(PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE) && Py_TYPE(o)->tp_finalize) && !_PyGC_FINALIZED(o)) {
    if (PyObject_CallFinalizerFromDealloc(o)) return;
  }
  #endif
  PyObject_GC_UnTrack(o);
  Py_CLEAR(p->token_getter_fun);
  Py_CLEAR(p->token_buffer);
  (*Py_TYPE(o)->tp_free)(o);
}

static int __pyx_tp_traverse_6typped_5lexer_TokenBuffer(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_6typped_5lexer_TokenBuffer *p = (struct __pyx_obj_6typped_5lexer_TokenBuffer *)o;
  if (p->token_getter_fun) {
    e = (*v)(p->token_getter_fun, a); if (e) return e;
  }
  if (p->token_buffer) {
    e = (*v)(p->token_buffer, a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_6typped_5lexer_TokenBuffer(PyObject *o) {
  PyObject* tmp;
  struct __pyx_obj_6typped_5lexer_TokenBuffer *p = (struct __pyx_obj_6typped_5lexer_TokenBuffer *)o;
  tmp = ((PyObject*)p->token_getter_fun);
  p->token_getter_fun = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->token_buffer);
  p->token_buffer = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  return 0;
}
static PyObject *__pyx_sq_item_6typped_5lexer_TokenBuffer(PyObject *o, Py_ssize_t i) {
  PyObject *r;
  PyObject *x = PyInt_FromSsize_t(i); if(!x) return 0;
  r = Py_TYPE(o)->tp_as_mapping->mp_subscript(o, x);
  Py_DECREF(x);
  return r;
}

static PyObject *__pyx_getprop_6typped_5lexer_11TokenBuffer_token_buffer(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_11TokenBuffer_12token_buffer_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_11TokenBuffer_token_buffer(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_11TokenBuffer_12token_buffer_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_11TokenBuffer_12token_buffer_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_11TokenBuffer_max_deque_size(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_11TokenBuffer_14max_deque_size_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_11TokenBuffer_max_deque_size(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_11TokenBuffer_14max_deque_size_3__set__(o, v);
  }
  else {
    PyErr_SetString(PyExc_NotImplementedError, "__del__");
    return -1;
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_11TokenBuffer_max_peek(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_11TokenBuffer_8max_peek_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_11TokenBuffer_max_peek(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_11TokenBuffer_8max_peek_3__set__(o, v);
  }
  else {
    PyErr_SetString(PyExc_NotImplementedError, "__del__");
    return -1;
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_11TokenBuffer_current_offset(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_11TokenBuffer_14current_offset_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_11TokenBuffer_current_offset(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_11TokenBuffer_14current_offset_3__set__(o, v);
  }
  else {
    PyErr_SetString(PyExc_NotImplementedError, "__del__");
    return -1;
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_11TokenBuffer_reference_point(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_11TokenBuffer_15reference_point_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_11TokenBuffer_reference_point(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_11TokenBuffer_15reference_point_3__set__(o, v);
  }
  else {
    PyErr_SetString(PyExc_NotImplementedError, "__del__");
    return -1;
  }
}

static PyMethodDef __pyx_methods_6typped_5lexer_TokenBuffer[] = {
  {"__reduce_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_19__reduce_cython__, METH_NOARGS, 0},
  {"__setstate_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_11TokenBuffer_21__setstate_cython__, METH_O, 0},
  {0, 0, 0, 0}
};

static struct PyGetSetDef __pyx_getsets_6typped_5lexer_TokenBuffer[] = {
  {(char *)"token_buffer", __pyx_getprop_6typped_5lexer_11TokenBuffer_token_buffer, __pyx_setprop_6typped_5lexer_11TokenBuffer_token_buffer, (char *)0, 0},
  {(char *)"max_deque_size", __pyx_getprop_6typped_5lexer_11TokenBuffer_max_deque_size, __pyx_setprop_6typped_5lexer_11TokenBuffer_max_deque_size, (char *)0, 0},
  {(char *)"max_peek", __pyx_getprop_6typped_5lexer_11TokenBuffer_max_peek, __pyx_setprop_6typped_5lexer_11TokenBuffer_max_peek, (char *)0, 0},
  {(char *)"current_offset", __pyx_getprop_6typped_5lexer_11TokenBuffer_current_offset, __pyx_setprop_6typped_5lexer_11TokenBuffer_current_offset, (char *)0, 0},
  {(char *)"reference_point", __pyx_getprop_6typped_5lexer_11TokenBuffer_reference_point, __pyx_setprop_6typped_5lexer_11TokenBuffer_reference_point, (char *)0, 0},
  {0, 0, 0, 0, 0}
};

static PySequenceMethods __pyx_tp_as_sequence_TokenBuffer = {
  0, /*sq_length*/
  0, /*sq_concat*/
  0, /*sq_repeat*/
  __pyx_sq_item_6typped_5lexer_TokenBuffer, /*sq_item*/
  0, /*sq_slice*/
  0, /*sq_ass_item*/
  0, /*sq_ass_slice*/
  0, /*sq_contains*/
  0, /*sq_inplace_concat*/
  0, /*sq_inplace_repeat*/
};

static PyMappingMethods __pyx_tp_as_mapping_TokenBuffer = {
  0, /*mp_length*/
  __pyx_pw_6typped_5lexer_11TokenBuffer_9__getitem__, /*mp_subscript*/
  0, /*mp_ass_subscript*/
};

static PyTypeObject __pyx_type_6typped_5lexer_TokenBuffer = {
  PyVarObject_HEAD_INIT(0, 0)
  "typped.lexer.TokenBuffer", /*tp_name*/
  sizeof(struct __pyx_obj_6typped_5lexer_TokenBuffer), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_6typped_5lexer_TokenBuffer, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  0, /*tp_repr*/
  0, /*tp_as_number*/
  &__pyx_tp_as_sequence_TokenBuffer, /*tp_as_sequence*/
  &__pyx_tp_as_mapping_TokenBuffer, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  "An abstraction of the token buffer.  This is used internally by the\n    `Lexer` class and should not usually be accessed by users.  It is basically\n    a nice wrapper over an underlying deque, but this is complicated by the\n    need to save persistent state pointers into the buffer even in fixed-size\n    buffers when tokens at the front get dropped.\n\n    Previous tokens are stored in the same deque as the current token and any\n    lookahead tokens.  The default indexing is relative to the current token,\n    at `current_offset`, which is zero for the current token.  (The current\n    offset is itself relative to a reference point, but users do not need to\n    know that detail).", /*tp_doc*/
  __pyx_tp_traverse_6typped_5lexer_TokenBuffer, /*tp_traverse*/
  __pyx_tp_clear_6typped_5lexer_TokenBuffer, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  __pyx_methods_6typped_5lexer_TokenBuffer, /*tp_methods*/
  0, /*tp_members*/
  __pyx_getsets_6typped_5lexer_TokenBuffer, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  __pyx_pw_6typped_5lexer_11TokenBuffer_1__init__, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_6typped_5lexer_TokenBuffer, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};
static struct __pyx_vtabstruct_6typped_5lexer_Lexer __pyx_vtable_6typped_5lexer_Lexer;

static PyObject *__pyx_tp_new_6typped_5lexer_Lexer(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  struct __pyx_obj_6typped_5lexer_Lexer *p;
  PyObject *o;
  if (likely((t->tp_flags & Py_TPFLAGS_IS_ABSTRACT) == 0)) {
    o = (*t->tp_alloc)(t, 0);
  } else {
    o = (PyObject *) PyBaseObject_Type.tp_new(t, __pyx_empty_tuple, 0);
  }
  if (unlikely(!o)) return 0;
  p = ((struct __pyx_obj_6typped_5lexer_Lexer *)o);
  p->__pyx_vtab = __pyx_vtabptr_6typped_5lexer_Lexer;
  p->token_buffer = ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)Py_None); Py_INCREF(Py_None);
  p->token_table = ((struct __pyx_obj_6typped_5lexer_TokenTable *)Py_None); Py_INCREF(Py_None);
  p->token = Py_None; Py_INCREF(Py_None);
  p->final_mod_function = Py_None; Py_INCREF(Py_None);
  p->default_helper_exception = Py_None; Py_INCREF(Py_None);
  p->prog_unprocessed = ((PyObject*)Py_None); Py_INCREF(Py_None);
  p->program = Py_None; Py_INCREF(Py_None);
  p->__dict__ = PyDict_New(); if (unlikely(!p->__dict__)) goto bad;return o;
  bad:
  Py_DECREF(o); o = 0;
  return NULL;
}

static void __pyx_tp_dealloc_6typped_5lexer_Lexer(PyObject *o) {
  struct __pyx_obj_6typped_5lexer_Lexer *p = (struct __pyx_obj_6typped_5lexer_Lexer *)o;
  #if PY_VERSION_HEX >= 0x030400a1
  if (unlikely(PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE) && Py_TYPE(o)->tp_finalize) && !_PyGC_FINALIZED(o)) {
    if (PyObject_CallFinalizerFromDealloc(o)) return;
  }
  #endif
  PyObject_GC_UnTrack(o);
  if (p->__dict__) PyDict_Clear(p->__dict__);
  Py_CLEAR(p->token_buffer);
  Py_CLEAR(p->token_table);
  Py_CLEAR(p->token);
  Py_CLEAR(p->final_mod_function);
  Py_CLEAR(p->default_helper_exception);
  Py_CLEAR(p->prog_unprocessed);
  Py_CLEAR(p->program);
  Py_CLEAR(p->__dict__);
  (*Py_TYPE(o)->tp_free)(o);
}

static int __pyx_tp_traverse_6typped_5lexer_Lexer(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_6typped_5lexer_Lexer *p = (struct __pyx_obj_6typped_5lexer_Lexer *)o;
  if (p->token_buffer) {
    e = (*v)(((PyObject *)p->token_buffer), a); if (e) return e;
  }
  if (p->token_table) {
    e = (*v)(((PyObject *)p->token_table), a); if (e) return e;
  }
  if (p->token) {
    e = (*v)(p->token, a); if (e) return e;
  }
  if (p->final_mod_function) {
    e = (*v)(p->final_mod_function, a); if (e) return e;
  }
  if (p->default_helper_exception) {
    e = (*v)(p->default_helper_exception, a); if (e) return e;
  }
  if (p->prog_unprocessed) {
    e = (*v)(p->prog_unprocessed, a); if (e) return e;
  }
  if (p->program) {
    e = (*v)(p->program, a); if (e) return e;
  }
  if (p->__dict__) {
    e = (*v)(p->__dict__, a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_6typped_5lexer_Lexer(PyObject *o) {
  PyObject* tmp;
  struct __pyx_obj_6typped_5lexer_Lexer *p = (struct __pyx_obj_6typped_5lexer_Lexer *)o;
  tmp = ((PyObject*)p->token_buffer);
  p->token_buffer = ((struct __pyx_obj_6typped_5lexer_TokenBuffer *)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->token_table);
  p->token_table = ((struct __pyx_obj_6typped_5lexer_TokenTable *)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->token);
  p->token = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->final_mod_function);
  p->final_mod_function = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->default_helper_exception);
  p->default_helper_exception = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->prog_unprocessed);
  p->prog_unprocessed = ((PyObject*)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->program);
  p->program = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->__dict__);
  p->__dict__ = ((PyObject*)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  return 0;
}

static PyObject *__pyx___dict__getter_6typped_5lexer_Lexer(PyObject *o, CYTHON_UNUSED void *x) {
  struct __pyx_obj_6typped_5lexer_Lexer *p = (struct __pyx_obj_6typped_5lexer_Lexer *)o;
  if (unlikely(!p->__dict__)){
    p->__dict__ = PyDict_New();
  }
  Py_XINCREF(p->__dict__);
  return p->__dict__;
}

static PyObject *__pyx_getprop_6typped_5lexer_5Lexer_token_buffer(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_5Lexer_12token_buffer_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_5Lexer_token_buffer(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_5Lexer_12token_buffer_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_5Lexer_12token_buffer_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_5Lexer_token_table(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_5Lexer_11token_table_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_5Lexer_token_table(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_5Lexer_11token_table_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_5Lexer_11token_table_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_5Lexer_token(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_5Lexer_5token_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_5Lexer_token(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_5Lexer_5token_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_5Lexer_5token_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_5Lexer_text_is_set(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_5Lexer_11text_is_set_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_5Lexer_text_is_set(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_5Lexer_11text_is_set_3__set__(o, v);
  }
  else {
    PyErr_SetString(PyExc_NotImplementedError, "__del__");
    return -1;
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_5Lexer_all_token_count(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_5Lexer_15all_token_count_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_5Lexer_all_token_count(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_5Lexer_15all_token_count_3__set__(o, v);
  }
  else {
    PyErr_SetString(PyExc_NotImplementedError, "__del__");
    return -1;
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_5Lexer_non_ignored_token_count(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_5Lexer_23non_ignored_token_count_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_5Lexer_non_ignored_token_count(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_5Lexer_23non_ignored_token_count_3__set__(o, v);
  }
  else {
    PyErr_SetString(PyExc_NotImplementedError, "__del__");
    return -1;
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_5Lexer_final_mod_function(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_5Lexer_18final_mod_function_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_5Lexer_final_mod_function(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_5Lexer_18final_mod_function_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_5Lexer_18final_mod_function_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_5Lexer_default_helper_exception(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_5Lexer_24default_helper_exception_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_5Lexer_default_helper_exception(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_5Lexer_24default_helper_exception_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_5Lexer_24default_helper_exception_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_5Lexer_prog_unprocessed(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_5Lexer_16prog_unprocessed_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_5Lexer_prog_unprocessed(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_5Lexer_16prog_unprocessed_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_5Lexer_16prog_unprocessed_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_5Lexer_program(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_5Lexer_7program_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_5Lexer_program(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_5Lexer_7program_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_5Lexer_7program_5__del__(o);
  }
}

static PyMethodDef __pyx_methods_6typped_5lexer_Lexer[] = {
  {"set_text", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_7set_text, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_6set_text},
  {"_initialize_token_buffer", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_9_initialize_token_buffer, METH_NOARGS, __pyx_doc_6typped_5lexer_5Lexer_8_initialize_token_buffer},
  {"__next__", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_13__next__, METH_NOARGS|METH_COEXIST, 0},
  {"move_back", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_19move_back, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_18move_back},
  {"get_current_state", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_23get_current_state, METH_NOARGS, __pyx_doc_6typped_5lexer_5Lexer_22get_current_state},
  {"go_back_to_state", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_25go_back_to_state, METH_O, __pyx_doc_6typped_5lexer_5Lexer_24go_back_to_state},
  {"curr_token_is_first", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_29curr_token_is_first, METH_NOARGS, __pyx_doc_6typped_5lexer_5Lexer_28curr_token_is_first},
  {"last_n_tokens_original_text", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_37last_n_tokens_original_text, METH_O, __pyx_doc_6typped_5lexer_5Lexer_36last_n_tokens_original_text},
  {"get_unprocessed_text", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_39get_unprocessed_text, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_38get_unprocessed_text},
  {"get_processed_text", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_41get_processed_text, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_40get_processed_text},
  {"def_token", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_43def_token, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_42def_token},
  {"undef_token", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_45undef_token, METH_O, __pyx_doc_6typped_5lexer_5Lexer_44undef_token},
  {"def_ignored_token", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_47def_ignored_token, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_46def_ignored_token},
  {"def_multi_tokens", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_49def_multi_tokens, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_48def_multi_tokens},
  {"def_multi_ignored_tokens", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_51def_multi_ignored_tokens, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_50def_multi_ignored_tokens},
  {"def_begin_end_tokens", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_53def_begin_end_tokens, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_52def_begin_end_tokens},
  {"def_default_whitespace", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_55def_default_whitespace, METH_VARARGS|METH_KEYWORDS, __pyx_doc_6typped_5lexer_5Lexer_54def_default_whitespace},
  {"__reduce_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_67__reduce_cython__, METH_NOARGS, 0},
  {"__setstate_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_5Lexer_69__setstate_cython__, METH_O, 0},
  {0, 0, 0, 0}
};

static struct PyGetSetDef __pyx_getsets_6typped_5lexer_Lexer[] = {
  {(char *)"__dict__", __pyx___dict__getter_6typped_5lexer_Lexer, 0, (char *)0, 0},
  {(char *)"token_buffer", __pyx_getprop_6typped_5lexer_5Lexer_token_buffer, __pyx_setprop_6typped_5lexer_5Lexer_token_buffer, (char *)0, 0},
  {(char *)"token_table", __pyx_getprop_6typped_5lexer_5Lexer_token_table, __pyx_setprop_6typped_5lexer_5Lexer_token_table, (char *)0, 0},
  {(char *)"token", __pyx_getprop_6typped_5lexer_5Lexer_token, __pyx_setprop_6typped_5lexer_5Lexer_token, (char *)0, 0},
  {(char *)"text_is_set", __pyx_getprop_6typped_5lexer_5Lexer_text_is_set, __pyx_setprop_6typped_5lexer_5Lexer_text_is_set, (char *)0, 0},
  {(char *)"all_token_count", __pyx_getprop_6typped_5lexer_5Lexer_all_token_count, __pyx_setprop_6typped_5lexer_5Lexer_all_token_count, (char *)0, 0},
  {(char *)"non_ignored_token_count", __pyx_getprop_6typped_5lexer_5Lexer_non_ignored_token_count, __pyx_setprop_6typped_5lexer_5Lexer_non_ignored_token_count, (char *)0, 0},
  {(char *)"final_mod_function", __pyx_getprop_6typped_5lexer_5Lexer_final_mod_function, __pyx_setprop_6typped_5lexer_5Lexer_final_mod_function, (char *)0, 0},
  {(char *)"default_helper_exception", __pyx_getprop_6typped_5lexer_5Lexer_default_helper_exception, __pyx_setprop_6typped_5lexer_5Lexer_default_helper_exception, (char *)0, 0},
  {(char *)"prog_unprocessed", __pyx_getprop_6typped_5lexer_5Lexer_prog_unprocessed, __pyx_setprop_6typped_5lexer_5Lexer_prog_unprocessed, (char *)0, 0},
  {(char *)"program", __pyx_getprop_6typped_5lexer_5Lexer_program, __pyx_setprop_6typped_5lexer_5Lexer_program, (char *)0, 0},
  {0, 0, 0, 0, 0}
};

static PyTypeObject __pyx_type_6typped_5lexer_Lexer = {
  PyVarObject_HEAD_INIT(0, 0)
  "typped.lexer.Lexer", /*tp_name*/
  sizeof(struct __pyx_obj_6typped_5lexer_Lexer), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_6typped_5lexer_Lexer, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  0, /*tp_repr*/
  0, /*tp_as_number*/
  0, /*tp_as_sequence*/
  0, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  "Scans text and returns tokens, represented by instances of `TokenNode`\n    subclass instances. There is one subclass for each kind of token, i.e., for\n    each token label.  These subclasses themselves are assumed to have been\n    created before any scanning operation, via the `def_token` method.\n\n    Token sequences are assumed to have both a begin-token and an end-token\n    sentinel, defined via the `def_begin_end_tokens` method.  Exactly one\n    end-token will be returned by `next`; any further calls to `next` raise\n    `StopIteration`.\n\n    The scanning is independent of the order in which tokens are defined.  The\n    longest match over all token patterns will always be the one selected.  In\n    case of ties the `on_ties` value (passed to `def_token`) is used to\n    break it.  If that fails a `LexerException` is raised.\n\n    If no token table is passed into `__init__` the `Lexer` will create its\n    own empty one.", /*tp_doc*/
  __pyx_tp_traverse_6typped_5lexer_Lexer, /*tp_traverse*/
  __pyx_tp_clear_6typped_5lexer_Lexer, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  __pyx_pw_6typped_5lexer_5Lexer_15__iter__, /*tp_iter*/
  __pyx_pw_6typped_5lexer_5Lexer_13__next__, /*tp_iternext*/
  __pyx_methods_6typped_5lexer_Lexer, /*tp_methods*/
  0, /*tp_members*/
  __pyx_getsets_6typped_5lexer_Lexer, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  offsetof(struct __pyx_obj_6typped_5lexer_Lexer, __dict__), /*tp_dictoffset*/
  __pyx_pw_6typped_5lexer_5Lexer_1__init__, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_6typped_5lexer_Lexer, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};
static struct __pyx_vtabstruct_6typped_5lexer_TokenTable __pyx_vtable_6typped_5lexer_TokenTable;

static PyObject *__pyx_tp_new_6typped_5lexer_TokenTable(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  struct __pyx_obj_6typped_5lexer_TokenTable *p;
  PyObject *o;
  if (likely((t->tp_flags & Py_TPFLAGS_IS_ABSTRACT) == 0)) {
    o = (*t->tp_alloc)(t, 0);
  } else {
    o = (PyObject *) PyBaseObject_Type.tp_new(t, __pyx_empty_tuple, 0);
  }
  if (unlikely(!o)) return 0;
  p = ((struct __pyx_obj_6typped_5lexer_TokenTable *)o);
  p->__pyx_vtab = __pyx_vtabptr_6typped_5lexer_TokenTable;
  p->token_subclassing_fun = Py_None; Py_INCREF(Py_None);
  p->token_subclass_dict = ((PyObject*)Py_None); Py_INCREF(Py_None);
  p->lex = ((struct __pyx_obj_6typped_5lexer_Lexer *)Py_None); Py_INCREF(Py_None);
  p->begin_token_label = ((PyObject*)Py_None); Py_INCREF(Py_None);
  p->end_token_label = ((PyObject*)Py_None); Py_INCREF(Py_None);
  p->begin_token_subclass = Py_None; Py_INCREF(Py_None);
  p->end_token_subclass = Py_None; Py_INCREF(Py_None);
  p->pattern_matcher = ((struct __pyx_obj_6typped_7matcher_Matcher *)Py_None); Py_INCREF(Py_None);
  p->__dict__ = PyDict_New(); if (unlikely(!p->__dict__)) goto bad;return o;
  bad:
  Py_DECREF(o); o = 0;
  return NULL;
}

static void __pyx_tp_dealloc_6typped_5lexer_TokenTable(PyObject *o) {
  struct __pyx_obj_6typped_5lexer_TokenTable *p = (struct __pyx_obj_6typped_5lexer_TokenTable *)o;
  #if PY_VERSION_HEX >= 0x030400a1
  if (unlikely(PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE) && Py_TYPE(o)->tp_finalize) && !_PyGC_FINALIZED(o)) {
    if (PyObject_CallFinalizerFromDealloc(o)) return;
  }
  #endif
  PyObject_GC_UnTrack(o);
  if (p->__dict__) PyDict_Clear(p->__dict__);
  Py_CLEAR(p->token_subclassing_fun);
  Py_CLEAR(p->token_subclass_dict);
  Py_CLEAR(p->lex);
  Py_CLEAR(p->begin_token_label);
  Py_CLEAR(p->end_token_label);
  Py_CLEAR(p->begin_token_subclass);
  Py_CLEAR(p->end_token_subclass);
  Py_CLEAR(p->pattern_matcher);
  Py_CLEAR(p->__dict__);
  (*Py_TYPE(o)->tp_free)(o);
}

static int __pyx_tp_traverse_6typped_5lexer_TokenTable(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_6typped_5lexer_TokenTable *p = (struct __pyx_obj_6typped_5lexer_TokenTable *)o;
  if (p->token_subclassing_fun) {
    e = (*v)(p->token_subclassing_fun, a); if (e) return e;
  }
  if (p->token_subclass_dict) {
    e = (*v)(p->token_subclass_dict, a); if (e) return e;
  }
  if (p->lex) {
    e = (*v)(((PyObject *)p->lex), a); if (e) return e;
  }
  if (p->begin_token_subclass) {
    e = (*v)(p->begin_token_subclass, a); if (e) return e;
  }
  if (p->end_token_subclass) {
    e = (*v)(p->end_token_subclass, a); if (e) return e;
  }
  if (p->pattern_matcher) {
    e = (*v)(((PyObject *)p->pattern_matcher), a); if (e) return e;
  }
  if (p->__dict__) {
    e = (*v)(p->__dict__, a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_6typped_5lexer_TokenTable(PyObject *o) {
  PyObject* tmp;
  struct __pyx_obj_6typped_5lexer_TokenTable *p = (struct __pyx_obj_6typped_5lexer_TokenTable *)o;
  tmp = ((PyObject*)p->token_subclassing_fun);
  p->token_subclassing_fun = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->token_subclass_dict);
  p->token_subclass_dict = ((PyObject*)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->lex);
  p->lex = ((struct __pyx_obj_6typped_5lexer_Lexer *)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->begin_token_subclass);
  p->begin_token_subclass = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->end_token_subclass);
  p->end_token_subclass = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->pattern_matcher);
  p->pattern_matcher = ((struct __pyx_obj_6typped_7matcher_Matcher *)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->__dict__);
  p->__dict__ = ((PyObject*)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  return 0;
}
static PyObject *__pyx_sq_item_6typped_5lexer_TokenTable(PyObject *o, Py_ssize_t i) {
  PyObject *r;
  PyObject *x = PyInt_FromSsize_t(i); if(!x) return 0;
  r = Py_TYPE(o)->tp_as_mapping->mp_subscript(o, x);
  Py_DECREF(x);
  return r;
}

static PyObject *__pyx___dict__getter_6typped_5lexer_TokenTable(PyObject *o, CYTHON_UNUSED void *x) {
  struct __pyx_obj_6typped_5lexer_TokenTable *p = (struct __pyx_obj_6typped_5lexer_TokenTable *)o;
  if (unlikely(!p->__dict__)){
    p->__dict__ = PyDict_New();
  }
  Py_XINCREF(p->__dict__);
  return p->__dict__;
}

static PyObject *__pyx_getprop_6typped_5lexer_10TokenTable_token_subclass_dict(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_10TokenTable_19token_subclass_dict_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_10TokenTable_token_subclass_dict(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_10TokenTable_19token_subclass_dict_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_10TokenTable_19token_subclass_dict_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_10TokenTable_lex(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_10TokenTable_3lex_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_10TokenTable_lex(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_10TokenTable_3lex_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_10TokenTable_3lex_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_10TokenTable_begin_token_label(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_10TokenTable_17begin_token_label_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_10TokenTable_begin_token_label(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_10TokenTable_17begin_token_label_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_10TokenTable_17begin_token_label_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_10TokenTable_end_token_label(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_10TokenTable_15end_token_label_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_10TokenTable_end_token_label(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_10TokenTable_15end_token_label_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_10TokenTable_15end_token_label_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_10TokenTable_begin_token_subclass(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_10TokenTable_20begin_token_subclass_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_10TokenTable_begin_token_subclass(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_10TokenTable_20begin_token_subclass_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_10TokenTable_20begin_token_subclass_5__del__(o);
  }
}

static PyObject *__pyx_getprop_6typped_5lexer_10TokenTable_end_token_subclass(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_6typped_5lexer_10TokenTable_18end_token_subclass_1__get__(o);
}

static int __pyx_setprop_6typped_5lexer_10TokenTable_end_token_subclass(PyObject *o, PyObject *v, CYTHON_UNUSED void *x) {
  if (v) {
    return __pyx_pw_6typped_5lexer_10TokenTable_18end_token_subclass_3__set__(o, v);
  }
  else {
    return __pyx_pw_6typped_5lexer_10TokenTable_18end_token_subclass_5__del__(o);
  }
}

static PyMethodDef __pyx_methods_6typped_5lexer_TokenTable[] = {
  {"__reduce_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_21__reduce_cython__, METH_NOARGS, 0},
  {"__setstate_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_10TokenTable_23__setstate_cython__, METH_O, 0},
  {0, 0, 0, 0}
};

static struct PyGetSetDef __pyx_getsets_6typped_5lexer_TokenTable[] = {
  {(char *)"__dict__", __pyx___dict__getter_6typped_5lexer_TokenTable, 0, (char *)0, 0},
  {(char *)"token_subclass_dict", __pyx_getprop_6typped_5lexer_10TokenTable_token_subclass_dict, __pyx_setprop_6typped_5lexer_10TokenTable_token_subclass_dict, (char *)0, 0},
  {(char *)"lex", __pyx_getprop_6typped_5lexer_10TokenTable_lex, __pyx_setprop_6typped_5lexer_10TokenTable_lex, (char *)0, 0},
  {(char *)"begin_token_label", __pyx_getprop_6typped_5lexer_10TokenTable_begin_token_label, __pyx_setprop_6typped_5lexer_10TokenTable_begin_token_label, (char *)0, 0},
  {(char *)"end_token_label", __pyx_getprop_6typped_5lexer_10TokenTable_end_token_label, __pyx_setprop_6typped_5lexer_10TokenTable_end_token_label, (char *)0, 0},
  {(char *)"begin_token_subclass", __pyx_getprop_6typped_5lexer_10TokenTable_begin_token_subclass, __pyx_setprop_6typped_5lexer_10TokenTable_begin_token_subclass, (char *)0, 0},
  {(char *)"end_token_subclass", __pyx_getprop_6typped_5lexer_10TokenTable_end_token_subclass, __pyx_setprop_6typped_5lexer_10TokenTable_end_token_subclass, (char *)0, 0},
  {0, 0, 0, 0, 0}
};

static PySequenceMethods __pyx_tp_as_sequence_TokenTable = {
  0, /*sq_length*/
  0, /*sq_concat*/
  0, /*sq_repeat*/
  __pyx_sq_item_6typped_5lexer_TokenTable, /*sq_item*/
  0, /*sq_slice*/
  0, /*sq_ass_item*/
  0, /*sq_ass_slice*/
  __pyx_pw_6typped_5lexer_10TokenTable_3__contains__, /*sq_contains*/
  0, /*sq_inplace_concat*/
  0, /*sq_inplace_repeat*/
};

static PyMappingMethods __pyx_tp_as_mapping_TokenTable = {
  0, /*mp_length*/
  __pyx_pw_6typped_5lexer_10TokenTable_5__getitem__, /*mp_subscript*/
  0, /*mp_ass_subscript*/
};

static PyTypeObject __pyx_type_6typped_5lexer_TokenTable = {
  PyVarObject_HEAD_INIT(0, 0)
  "typped.lexer.TokenTable", /*tp_name*/
  sizeof(struct __pyx_obj_6typped_5lexer_TokenTable), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_6typped_5lexer_TokenTable, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  0, /*tp_repr*/
  0, /*tp_as_number*/
  &__pyx_tp_as_sequence_TokenTable, /*tp_as_sequence*/
  &__pyx_tp_as_mapping_TokenTable, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  "A symbol table holding subclasses of the `TokenNode` class for each token label\n    defined in a `Lexer` instance.  Also has methods for operating on tokens.\n    Each `Lexer` instance contains an instance of this class to save the subclasses for\n    the kinds of tokens which have been defined for it.", /*tp_doc*/
  __pyx_tp_traverse_6typped_5lexer_TokenTable, /*tp_traverse*/
  __pyx_tp_clear_6typped_5lexer_TokenTable, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  __pyx_methods_6typped_5lexer_TokenTable, /*tp_methods*/
  0, /*tp_members*/
  __pyx_getsets_6typped_5lexer_TokenTable, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  offsetof(struct __pyx_obj_6typped_5lexer_TokenTable, __dict__), /*tp_dictoffset*/
  __pyx_pw_6typped_5lexer_10TokenTable_1__init__, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_6typped_5lexer_TokenTable, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};

static PyObject *__pyx_tp_new_6typped_5lexer_GenTokenState(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  PyObject *o;
  if (likely((t->tp_flags & Py_TPFLAGS_IS_ABSTRACT) == 0)) {
    o = (*t->tp_alloc)(t, 0);
  } else {
    o = (PyObject *) PyBaseObject_Type.tp_new(t, __pyx_empty_tuple, 0);
  }
  if (unlikely(!o)) return 0;
  return o;
}

static void __pyx_tp_dealloc_6typped_5lexer_GenTokenState(PyObject *o) {
  #if PY_VERSION_HEX >= 0x030400a1
  if (unlikely(PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE) && Py_TYPE(o)->tp_finalize) && (!PyType_IS_GC(Py_TYPE(o)) || !_PyGC_FINALIZED(o))) {
    if (PyObject_CallFinalizerFromDealloc(o)) return;
  }
  #endif
  (*Py_TYPE(o)->tp_free)(o);
}

static PyMethodDef __pyx_methods_6typped_5lexer_GenTokenState[] = {
  {"__reduce_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_13GenTokenState_1__reduce_cython__, METH_NOARGS, 0},
  {"__setstate_cython__", (PyCFunction)__pyx_pw_6typped_5lexer_13GenTokenState_3__setstate_cython__, METH_O, 0},
  {0, 0, 0, 0}
};

static PyTypeObject __pyx_type_6typped_5lexer_GenTokenState = {
  PyVarObject_HEAD_INIT(0, 0)
  "typped.lexer.GenTokenState", /*tp_name*/
  sizeof(struct __pyx_obj_6typped_5lexer_GenTokenState), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_6typped_5lexer_GenTokenState, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  0, /*tp_repr*/
  0, /*tp_as_number*/
  0, /*tp_as_sequence*/
  0, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE, /*tp_flags*/
  "The state of the token_generator program execution.", /*tp_doc*/
  0, /*tp_traverse*/
  0, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  __pyx_methods_6typped_5lexer_GenTokenState, /*tp_methods*/
  0, /*tp_members*/
  0, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  0, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_6typped_5lexer_GenTokenState, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};

static struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *__pyx_freelist_6typped_5lexer___pyx_scope_struct__string_tree_repr[8];
static int __pyx_freecount_6typped_5lexer___pyx_scope_struct__string_tree_repr = 0;

static PyObject *__pyx_tp_new_6typped_5lexer___pyx_scope_struct__string_tree_repr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  PyObject *o;
  if (CYTHON_COMPILING_IN_CPYTHON && likely((__pyx_freecount_6typped_5lexer___pyx_scope_struct__string_tree_repr > 0) & (t->tp_basicsize == sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr)))) {
    o = (PyObject*)__pyx_freelist_6typped_5lexer___pyx_scope_struct__string_tree_repr[--__pyx_freecount_6typped_5lexer___pyx_scope_struct__string_tree_repr];
    memset(o, 0, sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr));
    (void) PyObject_INIT(o, t);
    PyObject_GC_Track(o);
  } else {
    o = (*t->tp_alloc)(t, 0);
    if (unlikely(!o)) return 0;
  }
  return o;
}

static void __pyx_tp_dealloc_6typped_5lexer___pyx_scope_struct__string_tree_repr(PyObject *o) {
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *p = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *)o;
  PyObject_GC_UnTrack(o);
  Py_CLEAR(p->__pyx_v_self);
  if (CYTHON_COMPILING_IN_CPYTHON && ((__pyx_freecount_6typped_5lexer___pyx_scope_struct__string_tree_repr < 8) & (Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr)))) {
    __pyx_freelist_6typped_5lexer___pyx_scope_struct__string_tree_repr[__pyx_freecount_6typped_5lexer___pyx_scope_struct__string_tree_repr++] = ((struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *)o);
  } else {
    (*Py_TYPE(o)->tp_free)(o);
  }
}

static int __pyx_tp_traverse_6typped_5lexer___pyx_scope_struct__string_tree_repr(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *p = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *)o;
  if (p->__pyx_v_self) {
    e = (*v)(p->__pyx_v_self, a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_6typped_5lexer___pyx_scope_struct__string_tree_repr(PyObject *o) {
  PyObject* tmp;
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *p = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *)o;
  tmp = ((PyObject*)p->__pyx_v_self);
  p->__pyx_v_self = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  return 0;
}

static PyTypeObject __pyx_type_6typped_5lexer___pyx_scope_struct__string_tree_repr = {
  PyVarObject_HEAD_INIT(0, 0)
  "typped.lexer.__pyx_scope_struct__string_tree_repr", /*tp_name*/
  sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_6typped_5lexer___pyx_scope_struct__string_tree_repr, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  0, /*tp_repr*/
  0, /*tp_as_number*/
  0, /*tp_as_sequence*/
  0, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  0, /*tp_doc*/
  __pyx_tp_traverse_6typped_5lexer___pyx_scope_struct__string_tree_repr, /*tp_traverse*/
  __pyx_tp_clear_6typped_5lexer___pyx_scope_struct__string_tree_repr, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  0, /*tp_methods*/
  0, /*tp_members*/
  0, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  0, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_6typped_5lexer___pyx_scope_struct__string_tree_repr, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};

static struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *__pyx_freelist_6typped_5lexer___pyx_scope_struct_1_genexpr[8];
static int __pyx_freecount_6typped_5lexer___pyx_scope_struct_1_genexpr = 0;

static PyObject *__pyx_tp_new_6typped_5lexer___pyx_scope_struct_1_genexpr(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  PyObject *o;
  if (CYTHON_COMPILING_IN_CPYTHON && likely((__pyx_freecount_6typped_5lexer___pyx_scope_struct_1_genexpr > 0) & (t->tp_basicsize == sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr)))) {
    o = (PyObject*)__pyx_freelist_6typped_5lexer___pyx_scope_struct_1_genexpr[--__pyx_freecount_6typped_5lexer___pyx_scope_struct_1_genexpr];
    memset(o, 0, sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr));
    (void) PyObject_INIT(o, t);
    PyObject_GC_Track(o);
  } else {
    o = (*t->tp_alloc)(t, 0);
    if (unlikely(!o)) return 0;
  }
  return o;
}

static void __pyx_tp_dealloc_6typped_5lexer___pyx_scope_struct_1_genexpr(PyObject *o) {
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *p = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *)o;
  PyObject_GC_UnTrack(o);
  Py_CLEAR(p->__pyx_outer_scope);
  Py_CLEAR(p->__pyx_v_c);
  Py_CLEAR(p->__pyx_t_0);
  if (CYTHON_COMPILING_IN_CPYTHON && ((__pyx_freecount_6typped_5lexer___pyx_scope_struct_1_genexpr < 8) & (Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr)))) {
    __pyx_freelist_6typped_5lexer___pyx_scope_struct_1_genexpr[__pyx_freecount_6typped_5lexer___pyx_scope_struct_1_genexpr++] = ((struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *)o);
  } else {
    (*Py_TYPE(o)->tp_free)(o);
  }
}

static int __pyx_tp_traverse_6typped_5lexer___pyx_scope_struct_1_genexpr(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *p = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *)o;
  if (p->__pyx_outer_scope) {
    e = (*v)(((PyObject *)p->__pyx_outer_scope), a); if (e) return e;
  }
  if (p->__pyx_v_c) {
    e = (*v)(p->__pyx_v_c, a); if (e) return e;
  }
  if (p->__pyx_t_0) {
    e = (*v)(p->__pyx_t_0, a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_6typped_5lexer___pyx_scope_struct_1_genexpr(PyObject *o) {
  PyObject* tmp;
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *p = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr *)o;
  tmp = ((PyObject*)p->__pyx_outer_scope);
  p->__pyx_outer_scope = ((struct __pyx_obj_6typped_5lexer___pyx_scope_struct__string_tree_repr *)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->__pyx_v_c);
  p->__pyx_v_c = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->__pyx_t_0);
  p->__pyx_t_0 = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  return 0;
}

static PyTypeObject __pyx_type_6typped_5lexer___pyx_scope_struct_1_genexpr = {
  PyVarObject_HEAD_INIT(0, 0)
  "typped.lexer.__pyx_scope_struct_1_genexpr", /*tp_name*/
  sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct_1_genexpr), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_6typped_5lexer___pyx_scope_struct_1_genexpr, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  0, /*tp_repr*/
  0, /*tp_as_number*/
  0, /*tp_as_sequence*/
  0, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  0, /*tp_doc*/
  __pyx_tp_traverse_6typped_5lexer___pyx_scope_struct_1_genexpr, /*tp_traverse*/
  __pyx_tp_clear_6typped_5lexer___pyx_scope_struct_1_genexpr, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  0, /*tp_methods*/
  0, /*tp_members*/
  0, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  0, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_6typped_5lexer___pyx_scope_struct_1_genexpr, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};

static struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *__pyx_freelist_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory[8];
static int __pyx_freecount_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory = 0;

static PyObject *__pyx_tp_new_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  PyObject *o;
  if (CYTHON_COMPILING_IN_CPYTHON && likely((__pyx_freecount_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory > 0) & (t->tp_basicsize == sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory)))) {
    o = (PyObject*)__pyx_freelist_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory[--__pyx_freecount_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory];
    memset(o, 0, sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory));
    (void) PyObject_INIT(o, t);
    PyObject_GC_Track(o);
  } else {
    o = (*t->tp_alloc)(t, 0);
    if (unlikely(!o)) return 0;
  }
  return o;
}

static void __pyx_tp_dealloc_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory(PyObject *o) {
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *p = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *)o;
  PyObject_GC_UnTrack(o);
  Py_CLEAR(p->__pyx_v_TokenSubclass);
  if (CYTHON_COMPILING_IN_CPYTHON && ((__pyx_freecount_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory < 8) & (Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory)))) {
    __pyx_freelist_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory[__pyx_freecount_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory++] = ((struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *)o);
  } else {
    (*Py_TYPE(o)->tp_free)(o);
  }
}

static int __pyx_tp_traverse_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *p = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *)o;
  if (p->__pyx_v_TokenSubclass) {
    e = (*v)(p->__pyx_v_TokenSubclass, a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory(PyObject *o) {
  PyObject* tmp;
  struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *p = (struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory *)o;
  tmp = ((PyObject*)p->__pyx_v_TokenSubclass);
  p->__pyx_v_TokenSubclass = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  return 0;
}

static PyTypeObject __pyx_type_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory = {
  PyVarObject_HEAD_INIT(0, 0)
  "typped.lexer.__pyx_scope_struct_2_basic_token_subclass_factory", /*tp_name*/
  sizeof(struct __pyx_obj_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  0, /*tp_repr*/
  0, /*tp_as_number*/
  0, /*tp_as_sequence*/
  0, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  0, /*tp_doc*/
  __pyx_tp_traverse_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory, /*tp_traverse*/
  __pyx_tp_clear_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  0, /*tp_methods*/
  0, /*tp_members*/
  0, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  0, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};

static PyMethodDef __pyx_methods[] = {
  {0, 0, 0, 0}
};

#if PY_MAJOR_VERSION >= 3
static struct PyModuleDef __pyx_moduledef = {
  #if PY_VERSION_HEX < 0x03020000
    { PyObject_HEAD_INIT(NULL) NULL, 0, NULL },
  #else
    PyModuleDef_HEAD_INIT,
  #endif
    "lexer",
    __pyx_k_A_Lexer_class_instance_is_a_gen, /* m_doc */
    -1, /* m_size */
    __pyx_methods /* m_methods */,
    NULL, /* m_reload */
    NULL, /* m_traverse */
    NULL, /* m_clear */
    NULL /* m_free */
};
#endif

static __Pyx_StringTabEntry __pyx_string_tab[] = {
  {&__pyx_kp_s_, __pyx_k_, sizeof(__pyx_k_), 0, 0, 1, 0},
  {&__pyx_kp_s_0_1, __pyx_k_0_1, sizeof(__pyx_k_0_1), 0, 0, 1, 0},
  {&__pyx_kp_s_A_token_with_label_0_is_already, __pyx_k_A_token_with_label_0_is_already, sizeof(__pyx_k_A_token_with_label_0_is_already), 0, 0, 1, 0},
  {&__pyx_kp_s_Attempt_to_call_lexer_s_go_back, __pyx_k_Attempt_to_call_lexer_s_go_back, sizeof(__pyx_k_Attempt_to_call_lexer_s_go_back), 0, 0, 1, 0},
  {&__pyx_kp_s_Attempt_to_call_lexer_s_next_met, __pyx_k_Attempt_to_call_lexer_s_next_met, sizeof(__pyx_k_Attempt_to_call_lexer_s_next_met), 0, 0, 1, 0},
  {&__pyx_kp_s_Attempt_to_call_lexer_s_peek_met, __pyx_k_Attempt_to_call_lexer_s_peek_met, sizeof(__pyx_k_Attempt_to_call_lexer_s_peek_met), 0, 0, 1, 0},
  {&__pyx_kp_s_Bad_multi_definition_of_0_Omitte, __pyx_k_Bad_multi_definition_of_0_Omitte, sizeof(__pyx_k_Bad_multi_definition_of_0_Omitte), 0, 0, 1, 0},
  {&__pyx_kp_s_Begin_and_end_tokens_must_be_def, __pyx_k_Begin_and_end_tokens_must_be_def, sizeof(__pyx_k_Begin_and_end_tokens_must_be_def), 0, 0, 1, 0},
  {&__pyx_n_s_BufferIndexError, __pyx_k_BufferIndexError, sizeof(__pyx_k_BufferIndexError), 0, 0, 1, 1},
  {&__pyx_n_s_DEFAULT_BEGIN, __pyx_k_DEFAULT_BEGIN, sizeof(__pyx_k_DEFAULT_BEGIN), 0, 0, 1, 1},
  {&__pyx_n_s_DEFAULT_END, __pyx_k_DEFAULT_END, sizeof(__pyx_k_DEFAULT_END), 0, 0, 1, 1},
  {&__pyx_n_s_ERROR_MSG_TEXT_SNIPPET_SIZE, __pyx_k_ERROR_MSG_TEXT_SNIPPET_SIZE, sizeof(__pyx_k_ERROR_MSG_TEXT_SNIPPET_SIZE), 0, 0, 1, 1},
  {&__pyx_kp_s_Error_in_TokenBuffer_Maximum_buf, __pyx_k_Error_in_TokenBuffer_Maximum_buf, sizeof(__pyx_k_Error_in_TokenBuffer_Maximum_buf), 0, 0, 1, 0},
  {&__pyx_kp_s_Function_in_ignored_tokens_expec, __pyx_k_Function_in_ignored_tokens_expec, sizeof(__pyx_k_Function_in_ignored_tokens_expec), 0, 0, 1, 0},
  {&__pyx_kp_s_Function_in_ignored_tokens_found, __pyx_k_Function_in_ignored_tokens_found, sizeof(__pyx_k_Function_in_ignored_tokens_found), 0, 0, 1, 0},
  {&__pyx_kp_s_Function_match_next_with_peeklev, __pyx_k_Function_match_next_with_peeklev, sizeof(__pyx_k_Function_match_next_with_peeklev), 0, 0, 1, 0},
  {&__pyx_kp_s_Function_match_next_with_peeklev_2, __pyx_k_Function_match_next_with_peeklev_2, sizeof(__pyx_k_Function_match_next_with_peeklev_2), 0, 0, 1, 0},
  {&__pyx_kp_s_Function_no_ignored_after_expect, __pyx_k_Function_no_ignored_after_expect, sizeof(__pyx_k_Function_no_ignored_after_expect), 0, 0, 1, 0},
  {&__pyx_kp_s_Function_no_ignored_after_expect_2, __pyx_k_Function_no_ignored_after_expect_2, sizeof(__pyx_k_Function_no_ignored_after_expect_2), 0, 0, 1, 0},
  {&__pyx_kp_s_Function_no_ignored_before_expec, __pyx_k_Function_no_ignored_before_expec, sizeof(__pyx_k_Function_no_ignored_before_expec), 0, 0, 1, 0},
  {&__pyx_kp_s_Function_no_ignored_before_expec_2, __pyx_k_Function_no_ignored_before_expec_2, sizeof(__pyx_k_Function_no_ignored_before_expec_2), 0, 0, 1, 0},
  {&__pyx_n_s_GenTokenState___reduce_cython, __pyx_k_GenTokenState___reduce_cython, sizeof(__pyx_k_GenTokenState___reduce_cython), 0, 0, 1, 1},
  {&__pyx_n_s_GenTokenState___setstate_cython, __pyx_k_GenTokenState___setstate_cython, sizeof(__pyx_k_GenTokenState___setstate_cython), 0, 0, 1, 1},
  {&__pyx_kp_s_In__create_token_subclass_alread, __pyx_k_In__create_token_subclass_alread, sizeof(__pyx_k_In__create_token_subclass_alread), 0, 0, 1, 0},
  {&__pyx_kp_s_Incompatible_checksums_s_vs_0x69, __pyx_k_Incompatible_checksums_s_vs_0x69, sizeof(__pyx_k_Incompatible_checksums_s_vs_0x69), 0, 0, 1, 0},
  {&__pyx_kp_s_Incompatible_checksums_s_vs_0xd1, __pyx_k_Incompatible_checksums_s_vs_0xd1, sizeof(__pyx_k_Incompatible_checksums_s_vs_0xd1), 0, 0, 1, 0},
  {&__pyx_kp_s_Incompatible_checksums_s_vs_0xd4, __pyx_k_Incompatible_checksums_s_vs_0xd4, sizeof(__pyx_k_Incompatible_checksums_s_vs_0xd4), 0, 0, 1, 0},
  {&__pyx_kp_s_Incompatible_checksums_s_vs_0xe1, __pyx_k_Incompatible_checksums_s_vs_0xe1, sizeof(__pyx_k_Incompatible_checksums_s_vs_0xe1), 0, 0, 1, 0},
  {&__pyx_n_s_IndexError, __pyx_k_IndexError, sizeof(__pyx_k_IndexError), 0, 0, 1, 1},
  {&__pyx_kp_s_Invalid_argument_type_in___getit, __pyx_k_Invalid_argument_type_in___getit, sizeof(__pyx_k_Invalid_argument_type_in___getit), 0, 0, 1, 0},
  {&__pyx_n_s_KeyError, __pyx_k_KeyError, sizeof(__pyx_k_KeyError), 0, 0, 1, 1},
  {&__pyx_n_s_LexerException, __pyx_k_LexerException, sizeof(__pyx_k_LexerException), 0, 0, 1, 1},
  {&__pyx_n_s_LexerState, __pyx_k_LexerState, sizeof(__pyx_k_LexerState), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer___reduce_cython, __pyx_k_Lexer___reduce_cython, sizeof(__pyx_k_Lexer___reduce_cython), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer___setstate_cython, __pyx_k_Lexer___setstate_cython, sizeof(__pyx_k_Lexer___setstate_cython), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer__initialize_token_buffer, __pyx_k_Lexer__initialize_token_buffer, sizeof(__pyx_k_Lexer__initialize_token_buffer), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer__unbuffered_token_getter, __pyx_k_Lexer__unbuffered_token_getter, sizeof(__pyx_k_Lexer__unbuffered_token_getter), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_curr_token_is_begin, __pyx_k_Lexer_curr_token_is_begin, sizeof(__pyx_k_Lexer_curr_token_is_begin), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_curr_token_is_end, __pyx_k_Lexer_curr_token_is_end, sizeof(__pyx_k_Lexer_curr_token_is_end), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_curr_token_is_first, __pyx_k_Lexer_curr_token_is_first, sizeof(__pyx_k_Lexer_curr_token_is_first), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_def_begin_end_tokens, __pyx_k_Lexer_def_begin_end_tokens, sizeof(__pyx_k_Lexer_def_begin_end_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_def_default_whitespace, __pyx_k_Lexer_def_default_whitespace, sizeof(__pyx_k_Lexer_def_default_whitespace), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_def_ignored_token, __pyx_k_Lexer_def_ignored_token, sizeof(__pyx_k_Lexer_def_ignored_token), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_def_multi_ignored_tokens, __pyx_k_Lexer_def_multi_ignored_tokens, sizeof(__pyx_k_Lexer_def_multi_ignored_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_def_multi_tokens, __pyx_k_Lexer_def_multi_tokens, sizeof(__pyx_k_Lexer_def_multi_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_def_token, __pyx_k_Lexer_def_token, sizeof(__pyx_k_Lexer_def_token), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_get_current_state, __pyx_k_Lexer_get_current_state, sizeof(__pyx_k_Lexer_get_current_state), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_get_processed_text, __pyx_k_Lexer_get_processed_text, sizeof(__pyx_k_Lexer_get_processed_text), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_get_unprocessed_text, __pyx_k_Lexer_get_unprocessed_text, sizeof(__pyx_k_Lexer_get_unprocessed_text), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_go_back, __pyx_k_Lexer_go_back, sizeof(__pyx_k_Lexer_go_back), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_go_back_to_state, __pyx_k_Lexer_go_back_to_state, sizeof(__pyx_k_Lexer_go_back_to_state), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_ignored_before_curr, __pyx_k_Lexer_ignored_before_curr, sizeof(__pyx_k_Lexer_ignored_before_curr), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_in_ignored_tokens, __pyx_k_Lexer_in_ignored_tokens, sizeof(__pyx_k_Lexer_in_ignored_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_is_defined_token_label, __pyx_k_Lexer_is_defined_token_label, sizeof(__pyx_k_Lexer_is_defined_token_label), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_last_n_tokens_original_tex, __pyx_k_Lexer_last_n_tokens_original_tex, sizeof(__pyx_k_Lexer_last_n_tokens_original_tex), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_match_next, __pyx_k_Lexer_match_next, sizeof(__pyx_k_Lexer_match_next), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_move_back, __pyx_k_Lexer_move_back, sizeof(__pyx_k_Lexer_move_back), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_next, __pyx_k_Lexer_next, sizeof(__pyx_k_Lexer_next), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_no_ignored_after, __pyx_k_Lexer_no_ignored_after, sizeof(__pyx_k_Lexer_no_ignored_after), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_no_ignored_before, __pyx_k_Lexer_no_ignored_before, sizeof(__pyx_k_Lexer_no_ignored_before), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_peek, __pyx_k_Lexer_peek, sizeof(__pyx_k_Lexer_peek), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_reset, __pyx_k_Lexer_reset, sizeof(__pyx_k_Lexer_reset), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_set_text, __pyx_k_Lexer_set_text, sizeof(__pyx_k_Lexer_set_text), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_set_token_table, __pyx_k_Lexer_set_token_table, sizeof(__pyx_k_Lexer_set_token_table), 0, 0, 1, 1},
  {&__pyx_n_s_Lexer_undef_token, __pyx_k_Lexer_undef_token, sizeof(__pyx_k_Lexer_undef_token), 0, 0, 1, 1},
  {&__pyx_n_s_Matcher, __pyx_k_Matcher, sizeof(__pyx_k_Matcher), 0, 0, 1, 1},
  {&__pyx_kp_s_No_token_with_label_0_is_in_the, __pyx_k_No_token_with_label_0_is_in_the, sizeof(__pyx_k_No_token_with_label_0_is_in_the), 0, 0, 1, 0},
  {&__pyx_n_s_NotImplementedError, __pyx_k_NotImplementedError, sizeof(__pyx_k_NotImplementedError), 0, 0, 1, 1},
  {&__pyx_kp_s_Not_enough_saved_tokens_to_move, __pyx_k_Not_enough_saved_tokens_to_move, sizeof(__pyx_k_Not_enough_saved_tokens_to_move), 0, 0, 1, 0},
  {&__pyx_n_s_PickleError, __pyx_k_PickleError, sizeof(__pyx_k_PickleError), 0, 0, 1, 1},
  {&__pyx_kp_s_Raised_on_attempts_to_read_past, __pyx_k_Raised_on_attempts_to_read_past, sizeof(__pyx_k_Raised_on_attempts_to_read_past), 0, 0, 1, 0},
  {&__pyx_n_s_StopIteration, __pyx_k_StopIteration, sizeof(__pyx_k_StopIteration), 0, 0, 1, 1},
  {&__pyx_kp_s_The_base_class_for_token_objects, __pyx_k_The_base_class_for_token_objects, sizeof(__pyx_k_The_base_class_for_token_objects), 0, 0, 1, 0},
  {&__pyx_kp_s_The_token_generator_has_not_been, __pyx_k_The_token_generator_has_not_been, sizeof(__pyx_k_The_token_generator_has_not_been), 0, 0, 1, 0},
  {&__pyx_kp_s_This_is_the_class_returned_by_th, __pyx_k_This_is_the_class_returned_by_th, sizeof(__pyx_k_This_is_the_class_returned_by_th), 0, 0, 1, 0},
  {&__pyx_n_s_TokenBuffer___reduce_cython, __pyx_k_TokenBuffer___reduce_cython, sizeof(__pyx_k_TokenBuffer___reduce_cython), 0, 0, 1, 1},
  {&__pyx_n_s_TokenBuffer___setstate_cython, __pyx_k_TokenBuffer___setstate_cython, sizeof(__pyx_k_TokenBuffer___setstate_cython), 0, 0, 1, 1},
  {&__pyx_n_s_TokenBuffer_get_state, __pyx_k_TokenBuffer_get_state, sizeof(__pyx_k_TokenBuffer_get_state), 0, 0, 1, 1},
  {&__pyx_n_s_TokenBuffer_move_back, __pyx_k_TokenBuffer_move_back, sizeof(__pyx_k_TokenBuffer_move_back), 0, 0, 1, 1},
  {&__pyx_n_s_TokenBuffer_move_forward, __pyx_k_TokenBuffer_move_forward, sizeof(__pyx_k_TokenBuffer_move_forward), 0, 0, 1, 1},
  {&__pyx_n_s_TokenBuffer_num_saved_previous_t, __pyx_k_TokenBuffer_num_saved_previous_t, sizeof(__pyx_k_TokenBuffer_num_saved_previous_t), 0, 0, 1, 1},
  {&__pyx_n_s_TokenBuffer_num_tokens_after_cur, __pyx_k_TokenBuffer_num_tokens_after_cur, sizeof(__pyx_k_TokenBuffer_num_tokens_after_cur), 0, 0, 1, 1},
  {&__pyx_n_s_TokenBuffer_reset, __pyx_k_TokenBuffer_reset, sizeof(__pyx_k_TokenBuffer_reset), 0, 0, 1, 1},
  {&__pyx_n_s_TokenBuffer_state_to_offset, __pyx_k_TokenBuffer_state_to_offset, sizeof(__pyx_k_TokenBuffer_state_to_offset), 0, 0, 1, 1},
  {&__pyx_n_s_TokenClass, __pyx_k_TokenClass, sizeof(__pyx_k_TokenClass), 0, 0, 1, 1},
  {&__pyx_kp_s_TokenNode, __pyx_k_TokenNode, sizeof(__pyx_k_TokenNode), 0, 0, 1, 0},
  {&__pyx_n_s_TokenNode_2, __pyx_k_TokenNode_2, sizeof(__pyx_k_TokenNode_2), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode___getitem, __pyx_k_TokenNode___getitem, sizeof(__pyx_k_TokenNode___getitem), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode___init, __pyx_k_TokenNode___init, sizeof(__pyx_k_TokenNode___init), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_append_children, __pyx_k_TokenNode_append_children, sizeof(__pyx_k_TokenNode_append_children), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_convert_to_AST, __pyx_k_TokenNode_convert_to_AST, sizeof(__pyx_k_TokenNode_convert_to_AST), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_ignored_before_labels, __pyx_k_TokenNode_ignored_before_labels, sizeof(__pyx_k_TokenNode_ignored_before_labels), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_is_begin_or_end_token, __pyx_k_TokenNode_is_begin_or_end_token, sizeof(__pyx_k_TokenNode_is_begin_or_end_token), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_is_begin_token, __pyx_k_TokenNode_is_begin_token, sizeof(__pyx_k_TokenNode_is_begin_token), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_is_end_token, __pyx_k_TokenNode_is_end_token, sizeof(__pyx_k_TokenNode_is_end_token), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_label_repr, __pyx_k_TokenNode_label_repr, sizeof(__pyx_k_TokenNode_label_repr), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_old_repr, __pyx_k_TokenNode_old_repr, sizeof(__pyx_k_TokenNode_old_repr), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_original_text, __pyx_k_TokenNode_original_text, sizeof(__pyx_k_TokenNode_original_text), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_string_tree_repr, __pyx_k_TokenNode_string_tree_repr, sizeof(__pyx_k_TokenNode_string_tree_repr), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_string_tree_repr_local, __pyx_k_TokenNode_string_tree_repr_local, sizeof(__pyx_k_TokenNode_string_tree_repr_local), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_summary_repr, __pyx_k_TokenNode_summary_repr, sizeof(__pyx_k_TokenNode_summary_repr), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_traditional_repr, __pyx_k_TokenNode_traditional_repr, sizeof(__pyx_k_TokenNode_traditional_repr), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_tree_repr, __pyx_k_TokenNode_tree_repr, sizeof(__pyx_k_TokenNode_tree_repr), 0, 0, 1, 1},
  {&__pyx_n_s_TokenNode_value_repr, __pyx_k_TokenNode_value_repr, sizeof(__pyx_k_TokenNode_value_repr), 0, 0, 1, 1},
  {&__pyx_n_s_TokenSubclass, __pyx_k_TokenSubclass, sizeof(__pyx_k_TokenSubclass), 0, 0, 1, 1},
  {&__pyx_n_s_TokenTable___reduce_cython, __pyx_k_TokenTable___reduce_cython, sizeof(__pyx_k_TokenTable___reduce_cython), 0, 0, 1, 1},
  {&__pyx_n_s_TokenTable___setstate_cython, __pyx_k_TokenTable___setstate_cython, sizeof(__pyx_k_TokenTable___setstate_cython), 0, 0, 1, 1},
  {&__pyx_n_s_TokenTable_def_begin_token, __pyx_k_TokenTable_def_begin_token, sizeof(__pyx_k_TokenTable_def_begin_token), 0, 0, 1, 1},
  {&__pyx_n_s_TokenTable_def_end_token, __pyx_k_TokenTable_def_end_token, sizeof(__pyx_k_TokenTable_def_end_token), 0, 0, 1, 1},
  {&__pyx_n_s_TokenTable_def_token, __pyx_k_TokenTable_def_token, sizeof(__pyx_k_TokenTable_def_token), 0, 0, 1, 1},
  {&__pyx_n_s_TokenTable_get_next_token_label, __pyx_k_TokenTable_get_next_token_label, sizeof(__pyx_k_TokenTable_get_next_token_label), 0, 0, 1, 1},
  {&__pyx_n_s_TokenTable_ignored_tokens, __pyx_k_TokenTable_ignored_tokens, sizeof(__pyx_k_TokenTable_ignored_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_TokenTable_undef_token, __pyx_k_TokenTable_undef_token, sizeof(__pyx_k_TokenTable_undef_token), 0, 0, 1, 1},
  {&__pyx_n_s_TokenTable_undef_token_subclass, __pyx_k_TokenTable_undef_token_subclass, sizeof(__pyx_k_TokenTable_undef_token_subclass), 0, 0, 1, 1},
  {&__pyx_n_s_TypeError, __pyx_k_TypeError, sizeof(__pyx_k_TypeError), 0, 0, 1, 1},
  {&__pyx_kp_s_Undefined_key_in_token_table_for, __pyx_k_Undefined_key_in_token_table_for, sizeof(__pyx_k_Undefined_key_in_token_table_for), 0, 0, 1, 0},
  {&__pyx_kp_s_User_set_maximum_peeking_level_o, __pyx_k_User_set_maximum_peeking_level_o, sizeof(__pyx_k_User_set_maximum_peeking_level_o), 0, 0, 1, 0},
  {&__pyx_n_s_ValueError, __pyx_k_ValueError, sizeof(__pyx_k_ValueError), 0, 0, 1, 1},
  {&__pyx_kp_s__2, __pyx_k__2, sizeof(__pyx_k__2), 0, 0, 1, 0},
  {&__pyx_kp_s__21, __pyx_k__21, sizeof(__pyx_k__21), 0, 0, 1, 0},
  {&__pyx_kp_s__3, __pyx_k__3, sizeof(__pyx_k__3), 0, 0, 1, 0},
  {&__pyx_kp_s__4, __pyx_k__4, sizeof(__pyx_k__4), 0, 0, 1, 0},
  {&__pyx_kp_s__5, __pyx_k__5, sizeof(__pyx_k__5), 0, 0, 1, 0},
  {&__pyx_kp_s__6, __pyx_k__6, sizeof(__pyx_k__6), 0, 0, 1, 0},
  {&__pyx_kp_s__7, __pyx_k__7, sizeof(__pyx_k__7), 0, 0, 1, 0},
  {&__pyx_kp_s__8, __pyx_k__8, sizeof(__pyx_k__8), 0, 0, 1, 0},
  {&__pyx_n_s_a, __pyx_k_a, sizeof(__pyx_k_a), 0, 0, 1, 1},
  {&__pyx_n_s_all_token_count, __pyx_k_all_token_count, sizeof(__pyx_k_all_token_count), 0, 0, 1, 1},
  {&__pyx_n_s_append, __pyx_k_append, sizeof(__pyx_k_append), 0, 0, 1, 1},
  {&__pyx_n_s_append_children, __pyx_k_append_children, sizeof(__pyx_k_append_children), 0, 0, 1, 1},
  {&__pyx_n_s_args, __pyx_k_args, sizeof(__pyx_k_args), 0, 0, 1, 1},
  {&__pyx_n_s_ast_node, __pyx_k_ast_node, sizeof(__pyx_k_ast_node), 0, 0, 1, 1},
  {&__pyx_n_s_basic_token_subclass_factory, __pyx_k_basic_token_subclass_factory, sizeof(__pyx_k_basic_token_subclass_factory), 0, 0, 1, 1},
  {&__pyx_n_s_basic_token_subclass_factory_loc, __pyx_k_basic_token_subclass_factory_loc, sizeof(__pyx_k_basic_token_subclass_factory_loc), 0, 0, 1, 1},
  {&__pyx_n_s_basic_token_subclass_factory_loc_2, __pyx_k_basic_token_subclass_factory_loc_2, sizeof(__pyx_k_basic_token_subclass_factory_loc_2), 0, 0, 1, 1},
  {&__pyx_n_s_begin_tok, __pyx_k_begin_tok, sizeof(__pyx_k_begin_tok), 0, 0, 1, 1},
  {&__pyx_n_s_begin_token, __pyx_k_begin_token, sizeof(__pyx_k_begin_token), 0, 0, 1, 1},
  {&__pyx_n_s_begin_token_label, __pyx_k_begin_token_label, sizeof(__pyx_k_begin_token_label), 0, 0, 1, 1},
  {&__pyx_n_s_c, __pyx_k_c, sizeof(__pyx_k_c), 0, 0, 1, 1},
  {&__pyx_n_s_char_index_in_program, __pyx_k_char_index_in_program, sizeof(__pyx_k_char_index_in_program), 0, 0, 1, 1},
  {&__pyx_n_s_child, __pyx_k_child, sizeof(__pyx_k_child), 0, 0, 1, 1},
  {&__pyx_n_s_children, __pyx_k_children, sizeof(__pyx_k_children), 0, 0, 1, 1},
  {&__pyx_n_s_clear, __pyx_k_clear, sizeof(__pyx_k_clear), 0, 0, 1, 1},
  {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
  {&__pyx_n_s_close, __pyx_k_close, sizeof(__pyx_k_close), 0, 0, 1, 1},
  {&__pyx_n_s_collections, __pyx_k_collections, sizeof(__pyx_k_collections), 0, 0, 1, 1},
  {&__pyx_n_s_consume, __pyx_k_consume, sizeof(__pyx_k_consume), 0, 0, 1, 1},
  {&__pyx_n_s_convert_TokenNode_to_AST_node_fu, __pyx_k_convert_TokenNode_to_AST_node_fu, sizeof(__pyx_k_convert_TokenNode_to_AST_node_fu), 0, 0, 1, 1},
  {&__pyx_n_s_convert_to_AST, __pyx_k_convert_to_AST, sizeof(__pyx_k_convert_to_AST), 0, 0, 1, 1},
  {&__pyx_n_s_count, __pyx_k_count, sizeof(__pyx_k_count), 0, 0, 1, 1},
  {&__pyx_n_s_curr_token_is_begin, __pyx_k_curr_token_is_begin, sizeof(__pyx_k_curr_token_is_begin), 0, 0, 1, 1},
  {&__pyx_n_s_curr_token_is_end, __pyx_k_curr_token_is_end, sizeof(__pyx_k_curr_token_is_end), 0, 0, 1, 1},
  {&__pyx_n_s_curr_token_is_first, __pyx_k_curr_token_is_first, sizeof(__pyx_k_curr_token_is_first), 0, 0, 1, 1},
  {&__pyx_n_s_def_begin_end_tokens, __pyx_k_def_begin_end_tokens, sizeof(__pyx_k_def_begin_end_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_def_begin_token, __pyx_k_def_begin_token, sizeof(__pyx_k_def_begin_token), 0, 0, 1, 1},
  {&__pyx_n_s_def_default_whitespace, __pyx_k_def_default_whitespace, sizeof(__pyx_k_def_default_whitespace), 0, 0, 1, 1},
  {&__pyx_n_s_def_end_token, __pyx_k_def_end_token, sizeof(__pyx_k_def_end_token), 0, 0, 1, 1},
  {&__pyx_n_s_def_ignored_token, __pyx_k_def_ignored_token, sizeof(__pyx_k_def_ignored_token), 0, 0, 1, 1},
  {&__pyx_n_s_def_multi_ignored_tokens, __pyx_k_def_multi_ignored_tokens, sizeof(__pyx_k_def_multi_ignored_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_def_multi_tokens, __pyx_k_def_multi_tokens, sizeof(__pyx_k_def_multi_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_def_token, __pyx_k_def_token, sizeof(__pyx_k_def_token), 0, 0, 1, 1},
  {&__pyx_n_s_default_begin_end_tokens, __pyx_k_default_begin_end_tokens, sizeof(__pyx_k_default_begin_end_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_deque, __pyx_k_deque, sizeof(__pyx_k_deque), 0, 0, 1, 1},
  {&__pyx_n_s_dict, __pyx_k_dict, sizeof(__pyx_k_dict), 0, 0, 1, 1},
  {&__pyx_n_s_dict_2, __pyx_k_dict_2, sizeof(__pyx_k_dict_2), 0, 0, 1, 1},
  {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
  {&__pyx_n_s_end, __pyx_k_end, sizeof(__pyx_k_end), 0, 0, 1, 1},
  {&__pyx_n_s_end_tok, __pyx_k_end_tok, sizeof(__pyx_k_end_tok), 0, 0, 1, 1},
  {&__pyx_n_s_end_token_label, __pyx_k_end_token_label, sizeof(__pyx_k_end_token_label), 0, 0, 1, 1},
  {&__pyx_n_s_err_msg_tokens, __pyx_k_err_msg_tokens, sizeof(__pyx_k_err_msg_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_exception_to_raise, __pyx_k_exception_to_raise, sizeof(__pyx_k_exception_to_raise), 0, 0, 1, 1},
  {&__pyx_n_s_final_mod_function, __pyx_k_final_mod_function, sizeof(__pyx_k_final_mod_function), 0, 0, 1, 1},
  {&__pyx_n_s_format, __pyx_k_format, sizeof(__pyx_k_format), 0, 0, 1, 1},
  {&__pyx_n_s_full_string, __pyx_k_full_string, sizeof(__pyx_k_full_string), 0, 0, 1, 1},
  {&__pyx_n_s_function, __pyx_k_function, sizeof(__pyx_k_function), 0, 0, 1, 1},
  {&__pyx_n_s_genexpr, __pyx_k_genexpr, sizeof(__pyx_k_genexpr), 0, 0, 1, 1},
  {&__pyx_n_s_get_current_state, __pyx_k_get_current_state, sizeof(__pyx_k_get_current_state), 0, 0, 1, 1},
  {&__pyx_n_s_get_next_token_label_and_value, __pyx_k_get_next_token_label_and_value, sizeof(__pyx_k_get_next_token_label_and_value), 0, 0, 1, 1},
  {&__pyx_n_s_get_processed_text, __pyx_k_get_processed_text, sizeof(__pyx_k_get_processed_text), 0, 0, 1, 1},
  {&__pyx_n_s_get_state, __pyx_k_get_state, sizeof(__pyx_k_get_state), 0, 0, 1, 1},
  {&__pyx_n_s_get_unprocessed_text, __pyx_k_get_unprocessed_text, sizeof(__pyx_k_get_unprocessed_text), 0, 0, 1, 1},
  {&__pyx_n_s_getitem, __pyx_k_getitem, sizeof(__pyx_k_getitem), 0, 0, 1, 1},
  {&__pyx_n_s_go_back, __pyx_k_go_back, sizeof(__pyx_k_go_back), 0, 0, 1, 1},
  {&__pyx_n_s_go_back_to_state, __pyx_k_go_back_to_state, sizeof(__pyx_k_go_back_to_state), 0, 0, 1, 1},
  {&__pyx_n_s_ignore, __pyx_k_ignore, sizeof(__pyx_k_ignore), 0, 0, 1, 1},
  {&__pyx_n_s_ignored_before, __pyx_k_ignored_before, sizeof(__pyx_k_ignored_before), 0, 0, 1, 1},
  {&__pyx_n_s_ignored_before_curr, __pyx_k_ignored_before_curr, sizeof(__pyx_k_ignored_before_curr), 0, 0, 1, 1},
  {&__pyx_n_s_ignored_before_labels, __pyx_k_ignored_before_labels, sizeof(__pyx_k_ignored_before_labels), 0, 0, 1, 1},
  {&__pyx_n_s_ignored_tokens, __pyx_k_ignored_tokens, sizeof(__pyx_k_ignored_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
  {&__pyx_n_s_in_ignored_tokens, __pyx_k_in_ignored_tokens, sizeof(__pyx_k_in_ignored_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_indent, __pyx_k_indent, sizeof(__pyx_k_indent), 0, 0, 1, 1},
  {&__pyx_n_s_index, __pyx_k_index, sizeof(__pyx_k_index), 0, 0, 1, 1},
  {&__pyx_n_s_index_to_go_back_to, __pyx_k_index_to_go_back_to, sizeof(__pyx_k_index_to_go_back_to), 0, 0, 1, 1},
  {&__pyx_n_s_init, __pyx_k_init, sizeof(__pyx_k_init), 0, 0, 1, 1},
  {&__pyx_n_s_initialize_token_buffer, __pyx_k_initialize_token_buffer, sizeof(__pyx_k_initialize_token_buffer), 0, 0, 1, 1},
  {&__pyx_n_s_is_begin_or_end_token, __pyx_k_is_begin_or_end_token, sizeof(__pyx_k_is_begin_or_end_token), 0, 0, 1, 1},
  {&__pyx_n_s_is_begin_token, __pyx_k_is_begin_token, sizeof(__pyx_k_is_begin_token), 0, 0, 1, 1},
  {&__pyx_n_s_is_defined_token_label, __pyx_k_is_defined_token_label, sizeof(__pyx_k_is_defined_token_label), 0, 0, 1, 1},
  {&__pyx_n_s_is_end_token, __pyx_k_is_end_token, sizeof(__pyx_k_is_end_token), 0, 0, 1, 1},
  {&__pyx_n_s_is_first, __pyx_k_is_first, sizeof(__pyx_k_is_first), 0, 0, 1, 1},
  {&__pyx_n_s_is_first_on_line, __pyx_k_is_first_on_line, sizeof(__pyx_k_is_first_on_line), 0, 0, 1, 1},
  {&__pyx_n_s_is_subclass_of, __pyx_k_is_subclass_of, sizeof(__pyx_k_is_subclass_of), 0, 0, 1, 1},
  {&__pyx_n_s_item, __pyx_k_item, sizeof(__pyx_k_item), 0, 0, 1, 1},
  {&__pyx_n_s_join, __pyx_k_join, sizeof(__pyx_k_join), 0, 0, 1, 1},
  {&__pyx_n_s_k_begin, __pyx_k_k_begin, sizeof(__pyx_k_k_begin), 0, 0, 1, 1},
  {&__pyx_n_s_k_end, __pyx_k_k_end, sizeof(__pyx_k_k_end), 0, 0, 1, 1},
  {&__pyx_n_s_k_lpar, __pyx_k_k_lpar, sizeof(__pyx_k_k_lpar), 0, 0, 1, 1},
  {&__pyx_kp_s_k_lpar_0_k_rpar, __pyx_k_k_lpar_0_k_rpar, sizeof(__pyx_k_k_lpar_0_k_rpar), 0, 0, 1, 0},
  {&__pyx_n_s_k_newline, __pyx_k_k_newline, sizeof(__pyx_k_k_newline), 0, 0, 1, 1},
  {&__pyx_n_s_k_number, __pyx_k_k_number, sizeof(__pyx_k_k_number), 0, 0, 1, 1},
  {&__pyx_n_s_k_space, __pyx_k_k_space, sizeof(__pyx_k_k_space), 0, 0, 1, 1},
  {&__pyx_n_s_kwargs, __pyx_k_kwargs, sizeof(__pyx_k_kwargs), 0, 0, 1, 1},
  {&__pyx_n_s_label_repr, __pyx_k_label_repr, sizeof(__pyx_k_label_repr), 0, 0, 1, 1},
  {&__pyx_n_s_last_n_tokens_original_text, __pyx_k_last_n_tokens_original_text, sizeof(__pyx_k_last_n_tokens_original_text), 0, 0, 1, 1},
  {&__pyx_n_s_line_and_char, __pyx_k_line_and_char, sizeof(__pyx_k_line_and_char), 0, 0, 1, 1},
  {&__pyx_kp_s_literal_0, __pyx_k_literal_0, sizeof(__pyx_k_literal_0), 0, 0, 1, 0},
  {&__pyx_kp_s_literal_k_lpar, __pyx_k_literal_k_lpar, sizeof(__pyx_k_literal_k_lpar), 0, 0, 1, 0},
  {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
  {&__pyx_n_s_match_next, __pyx_k_match_next, sizeof(__pyx_k_match_next), 0, 0, 1, 1},
  {&__pyx_n_s_matcher, __pyx_k_matcher, sizeof(__pyx_k_matcher), 0, 0, 1, 1},
  {&__pyx_n_s_matcher_options, __pyx_k_matcher_options, sizeof(__pyx_k_matcher_options), 0, 0, 1, 1},
  {&__pyx_n_s_max_deque_size, __pyx_k_max_deque_size, sizeof(__pyx_k_max_deque_size), 0, 0, 1, 1},
  {&__pyx_n_s_max_peek, __pyx_k_max_peek, sizeof(__pyx_k_max_peek), 0, 0, 1, 1},
  {&__pyx_n_s_max_peek_tokens, __pyx_k_max_peek_tokens, sizeof(__pyx_k_max_peek_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_maxlen, __pyx_k_maxlen, sizeof(__pyx_k_maxlen), 0, 0, 1, 1},
  {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
  {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
  {&__pyx_n_s_move_back, __pyx_k_move_back, sizeof(__pyx_k_move_back), 0, 0, 1, 1},
  {&__pyx_n_s_move_forward, __pyx_k_move_forward, sizeof(__pyx_k_move_forward), 0, 0, 1, 1},
  {&__pyx_n_s_multi_funcall, __pyx_k_multi_funcall, sizeof(__pyx_k_multi_funcall), 0, 0, 1, 1},
  {&__pyx_n_s_n, __pyx_k_n, sizeof(__pyx_k_n), 0, 0, 1, 1},
  {&__pyx_kp_s_n_f_r_v, __pyx_k_n_f_r_v, sizeof(__pyx_k_n_f_r_v), 0, 0, 1, 0},
  {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
  {&__pyx_n_s_namedtuple, __pyx_k_namedtuple, sizeof(__pyx_k_namedtuple), 0, 0, 1, 1},
  {&__pyx_n_s_new, __pyx_k_new, sizeof(__pyx_k_new), 0, 0, 1, 1},
  {&__pyx_n_s_new_subclass, __pyx_k_new_subclass, sizeof(__pyx_k_new_subclass), 0, 0, 1, 1},
  {&__pyx_n_s_newline_label, __pyx_k_newline_label, sizeof(__pyx_k_newline_label), 0, 0, 1, 1},
  {&__pyx_n_s_newline_regex, __pyx_k_newline_regex, sizeof(__pyx_k_newline_regex), 0, 0, 1, 1},
  {&__pyx_n_s_next, __pyx_k_next, sizeof(__pyx_k_next), 0, 0, 1, 1},
  {&__pyx_n_s_no_ignored_after, __pyx_k_no_ignored_after, sizeof(__pyx_k_no_ignored_after), 0, 0, 1, 1},
  {&__pyx_n_s_no_ignored_before, __pyx_k_no_ignored_before, sizeof(__pyx_k_no_ignored_before), 0, 0, 1, 1},
  {&__pyx_n_s_non_ignored_token_count, __pyx_k_non_ignored_token_count, sizeof(__pyx_k_non_ignored_token_count), 0, 0, 1, 1},
  {&__pyx_n_s_num, __pyx_k_num, sizeof(__pyx_k_num), 0, 0, 1, 1},
  {&__pyx_n_s_num_indent, __pyx_k_num_indent, sizeof(__pyx_k_num_indent), 0, 0, 1, 1},
  {&__pyx_n_s_num_is_raw, __pyx_k_num_is_raw, sizeof(__pyx_k_num_is_raw), 0, 0, 1, 1},
  {&__pyx_n_s_num_saved_previous_tokens, __pyx_k_num_saved_previous_tokens, sizeof(__pyx_k_num_saved_previous_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_num_to_go_back, __pyx_k_num_to_go_back, sizeof(__pyx_k_num_to_go_back), 0, 0, 1, 1},
  {&__pyx_n_s_num_tokens_after_current, __pyx_k_num_tokens_after_current, sizeof(__pyx_k_num_tokens_after_current), 0, 0, 1, 1},
  {&__pyx_n_s_num_toks, __pyx_k_num_toks, sizeof(__pyx_k_num_toks), 0, 0, 1, 1},
  {&__pyx_n_s_object, __pyx_k_object, sizeof(__pyx_k_object), 0, 0, 1, 1},
  {&__pyx_n_s_old_repr, __pyx_k_old_repr, sizeof(__pyx_k_old_repr), 0, 0, 1, 1},
  {&__pyx_n_s_on_ties, __pyx_k_on_ties, sizeof(__pyx_k_on_ties), 0, 0, 1, 1},
  {&__pyx_n_s_only_labels, __pyx_k_only_labels, sizeof(__pyx_k_only_labels), 0, 0, 1, 1},
  {&__pyx_n_s_only_vals, __pyx_k_only_vals, sizeof(__pyx_k_only_vals), 0, 0, 1, 1},
  {&__pyx_n_s_ordinary, __pyx_k_ordinary, sizeof(__pyx_k_ordinary), 0, 0, 1, 1},
  {&__pyx_n_s_original_matched_string, __pyx_k_original_matched_string, sizeof(__pyx_k_original_matched_string), 0, 0, 1, 1},
  {&__pyx_n_s_original_text, __pyx_k_original_text, sizeof(__pyx_k_original_text), 0, 0, 1, 1},
  {&__pyx_n_s_parent, __pyx_k_parent, sizeof(__pyx_k_parent), 0, 0, 1, 1},
  {&__pyx_n_s_pattern_matcher_instance, __pyx_k_pattern_matcher_instance, sizeof(__pyx_k_pattern_matcher_instance), 0, 0, 1, 1},
  {&__pyx_n_s_peek, __pyx_k_peek, sizeof(__pyx_k_peek), 0, 0, 1, 1},
  {&__pyx_n_s_peeklevel, __pyx_k_peeklevel, sizeof(__pyx_k_peeklevel), 0, 0, 1, 1},
  {&__pyx_n_s_pickle, __pyx_k_pickle, sizeof(__pyx_k_pickle), 0, 0, 1, 1},
  {&__pyx_n_s_pop, __pyx_k_pop, sizeof(__pyx_k_pop), 0, 0, 1, 1},
  {&__pyx_n_s_popleft, __pyx_k_popleft, sizeof(__pyx_k_popleft), 0, 0, 1, 1},
  {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
  {&__pyx_n_s_prev_tokens, __pyx_k_prev_tokens, sizeof(__pyx_k_prev_tokens), 0, 0, 1, 1},
  {&__pyx_n_s_print, __pyx_k_print, sizeof(__pyx_k_print), 0, 0, 1, 1},
  {&__pyx_n_s_prog_unprocessed_indices, __pyx_k_prog_unprocessed_indices, sizeof(__pyx_k_prog_unprocessed_indices), 0, 0, 1, 1},
  {&__pyx_n_s_program, __pyx_k_program, sizeof(__pyx_k_program), 0, 0, 1, 1},
  {&__pyx_n_s_pytest_args, __pyx_k_pytest_args, sizeof(__pyx_k_pytest_args), 0, 0, 1, 1},
  {&__pyx_n_s_pytest_helper, __pyx_k_pytest_helper, sizeof(__pyx_k_pytest_helper), 0, 0, 1, 1},
  {&__pyx_n_s_pyx_checksum, __pyx_k_pyx_checksum, sizeof(__pyx_k_pyx_checksum), 0, 0, 1, 1},
  {&__pyx_n_s_pyx_state, __pyx_k_pyx_state, sizeof(__pyx_k_pyx_state), 0, 0, 1, 1},
  {&__pyx_n_s_pyx_type, __pyx_k_pyx_type, sizeof(__pyx_k_pyx_type), 0, 0, 1, 1},
  {&__pyx_n_s_pyx_unpickle_GenTokenState, __pyx_k_pyx_unpickle_GenTokenState, sizeof(__pyx_k_pyx_unpickle_GenTokenState), 0, 0, 1, 1},
  {&__pyx_n_s_pyx_unpickle_Lexer, __pyx_k_pyx_unpickle_Lexer, sizeof(__pyx_k_pyx_unpickle_Lexer), 0, 0, 1, 1},
  {&__pyx_n_s_pyx_unpickle_TokenBuffer, __pyx_k_pyx_unpickle_TokenBuffer, sizeof(__pyx_k_pyx_unpickle_TokenBuffer), 0, 0, 1, 1},
  {&__pyx_n_s_pyx_unpickle_TokenTable, __pyx_k_pyx_unpickle_TokenTable, sizeof(__pyx_k_pyx_unpickle_TokenTable), 0, 0, 1, 1},
  {&__pyx_n_s_pyx_vtable, __pyx_k_pyx_vtable, sizeof(__pyx_k_pyx_vtable), 0, 0, 1, 1},
  {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
  {&__pyx_n_s_raise_on_fail, __pyx_k_raise_on_fail, sizeof(__pyx_k_raise_on_fail), 0, 0, 1, 1},
  {&__pyx_n_s_raise_on_success, __pyx_k_raise_on_success, sizeof(__pyx_k_raise_on_success), 0, 0, 1, 1},
  {&__pyx_n_s_range, __pyx_k_range, sizeof(__pyx_k_range), 0, 0, 1, 1},
  {&__pyx_n_s_reduce_cython, __pyx_k_reduce_cython, sizeof(__pyx_k_reduce_cython), 0, 0, 1, 1},
  {&__pyx_n_s_regex_string, __pyx_k_regex_string, sizeof(__pyx_k_regex_string), 0, 0, 1, 1},
  {&__pyx_n_s_repr, __pyx_k_repr, sizeof(__pyx_k_repr), 0, 0, 1, 1},
  {&__pyx_n_s_reset, __pyx_k_reset, sizeof(__pyx_k_reset), 0, 0, 1, 1},
  {&__pyx_n_s_reset_charnumber, __pyx_k_reset_charnumber, sizeof(__pyx_k_reset_charnumber), 0, 0, 1, 1},
  {&__pyx_n_s_reset_linenumber, __pyx_k_reset_linenumber, sizeof(__pyx_k_reset_linenumber), 0, 0, 1, 1},
  {&__pyx_n_s_result, __pyx_k_result, sizeof(__pyx_k_result), 0, 0, 1, 1},
  {&__pyx_n_s_return_first_exception, __pyx_k_return_first_exception, sizeof(__pyx_k_return_first_exception), 0, 0, 1, 1},
  {&__pyx_kp_s_returning_token_with_value, __pyx_k_returning_token_with_value, sizeof(__pyx_k_returning_token_with_value), 0, 0, 1, 0},
  {&__pyx_n_s_retval_list, __pyx_k_retval_list, sizeof(__pyx_k_retval_list), 0, 0, 1, 1},
  {&__pyx_n_s_rfind, __pyx_k_rfind, sizeof(__pyx_k_rfind), 0, 0, 1, 1},
  {&__pyx_n_s_s, __pyx_k_s, sizeof(__pyx_k_s), 0, 0, 1, 1},
  {&__pyx_n_s_script_run, __pyx_k_script_run, sizeof(__pyx_k_script_run), 0, 0, 1, 1},
  {&__pyx_n_s_self, __pyx_k_self, sizeof(__pyx_k_self), 0, 0, 1, 1},
  {&__pyx_n_s_send, __pyx_k_send, sizeof(__pyx_k_send), 0, 0, 1, 1},
  {&__pyx_n_s_set_text, __pyx_k_set_text, sizeof(__pyx_k_set_text), 0, 0, 1, 1},
  {&__pyx_n_s_set_token_table, __pyx_k_set_token_table, sizeof(__pyx_k_set_token_table), 0, 0, 1, 1},
  {&__pyx_n_s_setstate_cython, __pyx_k_setstate_cython, sizeof(__pyx_k_setstate_cython), 0, 0, 1, 1},
  {&__pyx_n_s_shared_settings_and_exceptions, __pyx_k_shared_settings_and_exceptions, sizeof(__pyx_k_shared_settings_and_exceptions), 0, 0, 1, 1},
  {&__pyx_n_s_space_label, __pyx_k_space_label, sizeof(__pyx_k_space_label), 0, 0, 1, 1},
  {&__pyx_n_s_space_regex, __pyx_k_space_regex, sizeof(__pyx_k_space_regex), 0, 0, 1, 1},
  {&__pyx_kp_s_src_typped_lexer_py, __pyx_k_src_typped_lexer_py, sizeof(__pyx_k_src_typped_lexer_py), 0, 0, 1, 0},
  {&__pyx_n_s_state, __pyx_k_state, sizeof(__pyx_k_state), 0, 0, 1, 1},
  {&__pyx_n_s_state_to_offset, __pyx_k_state_to_offset, sizeof(__pyx_k_state_to_offset), 0, 0, 1, 1},
  {&__pyx_n_s_str_val, __pyx_k_str_val, sizeof(__pyx_k_str_val), 0, 0, 1, 1},
  {&__pyx_n_s_string, __pyx_k_string, sizeof(__pyx_k_string), 0, 0, 1, 1},
  {&__pyx_n_s_string_list, __pyx_k_string_list, sizeof(__pyx_k_string_list), 0, 0, 1, 1},
  {&__pyx_n_s_string_tree_repr, __pyx_k_string_tree_repr, sizeof(__pyx_k_string_tree_repr), 0, 0, 1, 1},
  {&__pyx_kp_s_stringsource, __pyx_k_stringsource, sizeof(__pyx_k_stringsource), 0, 0, 1, 0},
  {&__pyx_n_s_summary_repr, __pyx_k_summary_repr, sizeof(__pyx_k_summary_repr), 0, 0, 1, 1},
  {&__pyx_n_s_super, __pyx_k_super, sizeof(__pyx_k_super), 0, 0, 1, 1},
  {&__pyx_kp_s_t, __pyx_k_t, sizeof(__pyx_k_t), 0, 0, 1, 0},
  {&__pyx_n_s_t_2, __pyx_k_t_2, sizeof(__pyx_k_t_2), 0, 0, 1, 1},
  {&__pyx_n_s_tb, __pyx_k_tb, sizeof(__pyx_k_tb), 0, 0, 1, 1},
  {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
  {&__pyx_kp_s_test_test_lexer_py, __pyx_k_test_test_lexer_py, sizeof(__pyx_k_test_test_lexer_py), 0, 0, 1, 0},
  {&__pyx_kp_s_test_test_matcher_py, __pyx_k_test_test_matcher_py, sizeof(__pyx_k_test_test_matcher_py), 0, 0, 1, 0},
  {&__pyx_kp_s_test_test_pratt_parser_py, __pyx_k_test_test_pratt_parser_py, sizeof(__pyx_k_test_test_pratt_parser_py), 0, 0, 1, 0},
  {&__pyx_n_s_text, __pyx_k_text, sizeof(__pyx_k_text), 0, 0, 1, 1},
  {&__pyx_kp_s_the_peekahead_num_is, __pyx_k_the_peekahead_num_is, sizeof(__pyx_k_the_peekahead_num_is), 0, 0, 1, 0},
  {&__pyx_n_s_throw, __pyx_k_throw, sizeof(__pyx_k_throw), 0, 0, 1, 1},
  {&__pyx_n_s_tok, __pyx_k_tok, sizeof(__pyx_k_tok), 0, 0, 1, 1},
  {&__pyx_n_s_token_getter_fun, __pyx_k_token_getter_fun, sizeof(__pyx_k_token_getter_fun), 0, 0, 1, 1},
  {&__pyx_n_s_token_label, __pyx_k_token_label, sizeof(__pyx_k_token_label), 0, 0, 1, 1},
  {&__pyx_n_s_token_label_to_match, __pyx_k_token_label_to_match, sizeof(__pyx_k_token_label_to_match), 0, 0, 1, 1},
  {&__pyx_n_s_token_nodes, __pyx_k_token_nodes, sizeof(__pyx_k_token_nodes), 0, 0, 1, 1},
  {&__pyx_n_s_token_subclass_factory_fun, __pyx_k_token_subclass_factory_fun, sizeof(__pyx_k_token_subclass_factory_fun), 0, 0, 1, 1},
  {&__pyx_n_s_token_table, __pyx_k_token_table, sizeof(__pyx_k_token_table), 0, 0, 1, 1},
  {&__pyx_n_s_traditional_repr, __pyx_k_traditional_repr, sizeof(__pyx_k_traditional_repr), 0, 0, 1, 1},
  {&__pyx_n_s_tree_repr, __pyx_k_tree_repr, sizeof(__pyx_k_tree_repr), 0, 0, 1, 1},
  {&__pyx_n_s_tuple_list, __pyx_k_tuple_list, sizeof(__pyx_k_tuple_list), 0, 0, 1, 1},
  {&__pyx_n_s_typped_lexer, __pyx_k_typped_lexer, sizeof(__pyx_k_typped_lexer), 0, 0, 1, 1},
  {&__pyx_n_s_unbuffered_token_getter, __pyx_k_unbuffered_token_getter, sizeof(__pyx_k_unbuffered_token_getter), 0, 0, 1, 1},
  {&__pyx_n_s_undef_pattern, __pyx_k_undef_pattern, sizeof(__pyx_k_undef_pattern), 0, 0, 1, 1},
  {&__pyx_n_s_undef_token, __pyx_k_undef_token, sizeof(__pyx_k_undef_token), 0, 0, 1, 1},
  {&__pyx_n_s_undef_token_subclass, __pyx_k_undef_token_subclass, sizeof(__pyx_k_undef_token_subclass), 0, 0, 1, 1},
  {&__pyx_n_s_uninitialized, __pyx_k_uninitialized, sizeof(__pyx_k_uninitialized), 0, 0, 1, 1},
  {&__pyx_n_s_update, __pyx_k_update, sizeof(__pyx_k_update), 0, 0, 1, 1},
  {&__pyx_n_s_use_setstate, __pyx_k_use_setstate, sizeof(__pyx_k_use_setstate), 0, 0, 1, 1},
  {&__pyx_kp_s_v, __pyx_k_v, sizeof(__pyx_k_v), 0, 0, 1, 0},
  {&__pyx_n_s_value, __pyx_k_value, sizeof(__pyx_k_value), 0, 0, 1, 1},
  {&__pyx_n_s_value_repr, __pyx_k_value_repr, sizeof(__pyx_k_value_repr), 0, 0, 1, 1},
  {&__pyx_n_s_value_str, __pyx_k_value_str, sizeof(__pyx_k_value_str), 0, 0, 1, 1},
  {&__pyx_n_s_x, __pyx_k_x, sizeof(__pyx_k_x), 0, 0, 1, 1},
  {&__pyx_n_s_y, __pyx_k_y, sizeof(__pyx_k_y), 0, 0, 1, 1},
  {0, 0, 0, 0, 0, 0, 0}
};
static int __Pyx_InitCachedBuiltins(void) {
  __pyx_builtin_object = __Pyx_GetBuiltinName(__pyx_n_s_object); if (!__pyx_builtin_object) __PYX_ERR(0, 224, __pyx_L1_error)
  __pyx_builtin_ValueError = __Pyx_GetBuiltinName(__pyx_n_s_ValueError); if (!__pyx_builtin_ValueError) __PYX_ERR(0, 335, __pyx_L1_error)
  __pyx_builtin_super = __Pyx_GetBuiltinName(__pyx_n_s_super); if (!__pyx_builtin_super) __PYX_ERR(0, 402, __pyx_L1_error)
  __pyx_builtin_KeyError = __Pyx_GetBuiltinName(__pyx_n_s_KeyError); if (!__pyx_builtin_KeyError) __PYX_ERR(0, 477, __pyx_L1_error)
  __pyx_builtin_TypeError = __Pyx_GetBuiltinName(__pyx_n_s_TypeError); if (!__pyx_builtin_TypeError) __PYX_ERR(0, 630, __pyx_L1_error)
  __pyx_builtin_range = __Pyx_GetBuiltinName(__pyx_n_s_range); if (!__pyx_builtin_range) __PYX_ERR(0, 654, __pyx_L1_error)
  __pyx_builtin_StopIteration = __Pyx_GetBuiltinName(__pyx_n_s_StopIteration); if (!__pyx_builtin_StopIteration) __PYX_ERR(0, 943, __pyx_L1_error)
  __pyx_builtin_IndexError = __Pyx_GetBuiltinName(__pyx_n_s_IndexError); if (!__pyx_builtin_IndexError) __PYX_ERR(0, 985, __pyx_L1_error)
  __pyx_builtin_NotImplementedError = __Pyx_GetBuiltinName(__pyx_n_s_NotImplementedError); if (!__pyx_builtin_NotImplementedError) __PYX_ERR(0, 1011, __pyx_L1_error)
  __pyx_builtin_print = __Pyx_GetBuiltinName(__pyx_n_s_print); if (!__pyx_builtin_print) __PYX_ERR(0, 1115, __pyx_L1_error)
  return 0;
  __pyx_L1_error:;
  return -1;
}

static int __Pyx_InitCachedConstants(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);

  /* "typped/lexer.py":401
 *     class TokenSubclass(TokenNode):
 *         """This is the class returned by the factory function."""
 *         def __init__(self, value):             # <<<<<<<<<<<<<<
 *             super(TokenSubclass, self).__init__() # Call base class __init__.
 *             self.value = value # Passed in for instances by the Lexer token generator.
 */
  __pyx_tuple__9 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_value); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 401, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__9);
  __Pyx_GIVEREF(__pyx_tuple__9);
  __pyx_codeobj__10 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__9, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_init, 401, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__10)) __PYX_ERR(0, 401, __pyx_L1_error)

  /* "typped/lexer.py":630
 *             return self.token_buffer[self._index_to_absolute(index)]
 *         else:
 *             raise TypeError("Invalid argument type in __getitem__ of TokenBuffer.")             # <<<<<<<<<<<<<<
 * 
 *     def num_saved_previous_tokens(self):
 */
  __pyx_tuple__12 = PyTuple_Pack(1, __pyx_kp_s_Invalid_argument_type_in___getit); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 630, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "typped/lexer.py":673
 *             curr_token = self[0]
 *             if not curr_token.is_begin_token():
 *                 raise LexerException("Not enough saved tokens to move back to the"             # <<<<<<<<<<<<<<
 *                                      " begin-token in the `move_back` method.")
 *         else:
 */
  __pyx_tuple__13 = PyTuple_Pack(1, __pyx_kp_s_Not_enough_saved_tokens_to_move); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 673, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__13);
  __Pyx_GIVEREF(__pyx_tuple__13);

  /* "typped/lexer.py":734
 *             self.token_buffer.popleft() # Do an explicit popleft.
 *             if self._offset_to_absolute(self.current_offset) < 0:
 *                 raise LexerException("Error in TokenBuffer:"             # <<<<<<<<<<<<<<
 *                     " Maximum buffer size is too small for the amount of peeking."
 *                     " Current token was deleted.")
 */
  __pyx_tuple__14 = PyTuple_Pack(1, __pyx_kp_s_Error_in_TokenBuffer_Maximum_buf); if (unlikely(!__pyx_tuple__14)) __PYX_ERR(0, 734, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__14);
  __Pyx_GIVEREF(__pyx_tuple__14);

  /* "typped/lexer.py":879
 *         if not (self.token_table.begin_token_label
 *                 and self.token_table.end_token_label):
 *             raise LexerException("Begin and end tokens must be defined by calling"             # <<<<<<<<<<<<<<
 *                     " `def_begin_end_tokens` before set_text can be called.")
 * 
 */
  __pyx_tuple__15 = PyTuple_Pack(1, __pyx_kp_s_Begin_and_end_tokens_must_be_def); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 879, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__15);
  __Pyx_GIVEREF(__pyx_tuple__15);

  /* "typped/lexer.py":916
 *             [<current_token>, <peek1>, <peek2>]
 *         """
 *         begin_tok = self.token_table.begin_token_subclass(None) # Get instance.             # <<<<<<<<<<<<<<
 *         if self.final_mod_function:
 *             begin_tok = self.final_mod_function(self, begin_tok)
 */
  __pyx_tuple__16 = PyTuple_Pack(1, Py_None); if (unlikely(!__pyx_tuple__16)) __PYX_ERR(0, 916, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__16);
  __Pyx_GIVEREF(__pyx_tuple__16);

  /* "typped/lexer.py":938
 * 
 *         if not self.text_is_set:
 *             raise LexerException(             # <<<<<<<<<<<<<<
 *                     "Attempt to call lexer's next method when no text is set.")
 * 
 */
  __pyx_tuple__17 = PyTuple_Pack(1, __pyx_kp_s_Attempt_to_call_lexer_s_next_met); if (unlikely(!__pyx_tuple__17)) __PYX_ERR(0, 938, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__17);
  __Pyx_GIVEREF(__pyx_tuple__17);

  /* "typped/lexer.py":981
 *         attempts to peek farther than that."""
 *         if not self.text_is_set:
 *             raise LexerException(             # <<<<<<<<<<<<<<
 *                     "Attempt to call lexer's peek method when no text is set.")
 *         try:
 */
  __pyx_tuple__18 = PyTuple_Pack(1, __pyx_kp_s_Attempt_to_call_lexer_s_peek_met); if (unlikely(!__pyx_tuple__18)) __PYX_ERR(0, 981, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__18);
  __Pyx_GIVEREF(__pyx_tuple__18);

  /* "typped/lexer.py":1104
 * 
 *         if not self.text_is_set:
 *             raise LexerException(             # <<<<<<<<<<<<<<
 *                     "Attempt to call lexer's go_back method when no text is set.")
 *         if self.token_generator_state == GenTokenState.uninitialized:
 */
  __pyx_tuple__19 = PyTuple_Pack(1, __pyx_kp_s_Attempt_to_call_lexer_s_go_back); if (unlikely(!__pyx_tuple__19)) __PYX_ERR(0, 1104, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__19);
  __Pyx_GIVEREF(__pyx_tuple__19);

  /* "typped/lexer.py":1107
 *                     "Attempt to call lexer's go_back method when no text is set.")
 *         if self.token_generator_state == GenTokenState.uninitialized:
 *             raise LexerException("The token generator has not been initialized "             # <<<<<<<<<<<<<<
 *                   "or has reached `StopIteration` by reading past the end-token.")
 * 
 */
  __pyx_tuple__20 = PyTuple_Pack(1, __pyx_kp_s_The_token_generator_has_not_been); if (unlikely(!__pyx_tuple__20)) __PYX_ERR(0, 1107, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__20);
  __Pyx_GIVEREF(__pyx_tuple__20);

  /* "typped/lexer.py":1536
 *                                  self.raw_linenumber, self.upcoming_raw_charnumber)
 *                 token_instance.char_index_in_program = self.upcoming_raw_total_chars
 *                 num_newlines = token_value.count("\n")             # <<<<<<<<<<<<<<
 *                 self.raw_linenumber += num_newlines
 *                 if num_newlines == 0:
 */
  __pyx_tuple__22 = PyTuple_Pack(1, __pyx_kp_s__3); if (unlikely(!__pyx_tuple__22)) __PYX_ERR(0, 1536, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__22);
  __Pyx_GIVEREF(__pyx_tuple__22);

  /* "typped/lexer.py":1542
 *                 else:
 *                     first_after_newline = True
 *                     last_newline = token_value.rfind("\n")             # <<<<<<<<<<<<<<
 *                     self.upcoming_raw_charnumber = (
 *                             len(token_value) - (last_newline + 1) + 1)
 */
  __pyx_tuple__23 = PyTuple_Pack(1, __pyx_kp_s__3); if (unlikely(!__pyx_tuple__23)) __PYX_ERR(0, 1542, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__23);
  __Pyx_GIVEREF(__pyx_tuple__23);

  /* "typped/lexer.py":1562
 *             elif self.token_generator_state == GenTokenState.end:
 *                 token_subclass_for_end = token_table[token_table.end_token_label]
 *                 token_instance = token_subclass_for_end(None)             # <<<<<<<<<<<<<<
 *                 if self.final_mod_function:
 *                     token_instance = self.final_mod_function(self, token_instance)
 */
  __pyx_tuple__24 = PyTuple_Pack(1, Py_None); if (unlikely(!__pyx_tuple__24)) __PYX_ERR(0, 1562, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__24);
  __Pyx_GIVEREF(__pyx_tuple__24);

  /* "typped/lexer.py":242
 *     original_matched_string = "" # Default, for begin- and end-tokens.
 * 
 *     def __init__(self):             # <<<<<<<<<<<<<<
 *         """Initialize the TokenNode."""
 *         self.ignored_before = [] # Values ignored by lexer just before.
 */
  __pyx_tuple__25 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__25)) __PYX_ERR(0, 242, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__25);
  __Pyx_GIVEREF(__pyx_tuple__25);
  __pyx_codeobj__26 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__25, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_init, 242, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__26)) __PYX_ERR(0, 242, __pyx_L1_error)

  /* "typped/lexer.py":249
 *         self.parent = None # The parent in a tree of nodes.
 * 
 *     def original_text(self):             # <<<<<<<<<<<<<<
 *         """Return the original text that was read in lexing the token, including
 *         any ignored text."""
 */
  __pyx_tuple__27 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__27)) __PYX_ERR(0, 249, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__27);
  __Pyx_GIVEREF(__pyx_tuple__27);
  __pyx_codeobj__28 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__27, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_original_text, 249, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__28)) __PYX_ERR(0, 249, __pyx_L1_error)

  /* "typped/lexer.py":257
 *         return self.original_matched_string
 * 
 *     def ignored_before_labels(self):             # <<<<<<<<<<<<<<
 *         """Return the list of token labels of tokens which were ignored just
 *         before this token."""
 */
  __pyx_tuple__29 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_t_2); if (unlikely(!__pyx_tuple__29)) __PYX_ERR(0, 257, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__29);
  __Pyx_GIVEREF(__pyx_tuple__29);
  __pyx_codeobj__30 = (PyObject*)__Pyx_PyCode_New(1, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__29, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_ignored_before_labels, 257, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__30)) __PYX_ERR(0, 257, __pyx_L1_error)

  /* "typped/lexer.py":262
 *         return [t.token_label for t in self.ignored_before]
 * 
 *     def append_children(self, *token_nodes):             # <<<<<<<<<<<<<<
 *         """Append all the arguments as children, also setting their parent to self."""
 *         for t in token_nodes:
 */
  __pyx_tuple__31 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_token_nodes, __pyx_n_s_t_2); if (unlikely(!__pyx_tuple__31)) __PYX_ERR(0, 262, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__31);
  __Pyx_GIVEREF(__pyx_tuple__31);
  __pyx_codeobj__32 = (PyObject*)__Pyx_PyCode_New(1, 0, 3, 0, CO_VARARGS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__31, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_append_children, 262, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__32)) __PYX_ERR(0, 262, __pyx_L1_error)

  /* "typped/lexer.py":268
 *             t.parent = self
 * 
 *     def __getitem__(self, index):             # <<<<<<<<<<<<<<
 *         """Use indexing to access the children.  No check is made, however, to see
 *         if the correct number of children exist."""
 */
  __pyx_tuple__33 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_index); if (unlikely(!__pyx_tuple__33)) __PYX_ERR(0, 268, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__33);
  __Pyx_GIVEREF(__pyx_tuple__33);
  __pyx_codeobj__34 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__33, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_getitem, 268, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__34)) __PYX_ERR(0, 268, __pyx_L1_error)

  /* "typped/lexer.py":273
 *         return self.children[index]
 * 
 *     def convert_to_AST(self, convert_TokenNode_to_AST_node_fun):             # <<<<<<<<<<<<<<
 *         """Call this on the root node.  Converts the token tree to an abstract
 *         syntax tree.  This basically converts the nodes one-to-one to a more
 */
  __pyx_tuple__35 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_convert_TokenNode_to_AST_node_fu, __pyx_n_s_ast_node, __pyx_n_s_child); if (unlikely(!__pyx_tuple__35)) __PYX_ERR(0, 273, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__35);
  __Pyx_GIVEREF(__pyx_tuple__35);
  __pyx_codeobj__36 = (PyObject*)__Pyx_PyCode_New(2, 0, 4, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__35, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_convert_to_AST, 273, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__36)) __PYX_ERR(0, 273, __pyx_L1_error)

  /* "typped/lexer.py":292
 *     #
 * 
 *     def is_begin_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is the begin-token."""
 *         return self.token_label == self.token_table.begin_token_label
 */
  __pyx_tuple__37 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__37)) __PYX_ERR(0, 292, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__37);
  __Pyx_GIVEREF(__pyx_tuple__37);
  __pyx_codeobj__38 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__37, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_is_begin_token, 292, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__38)) __PYX_ERR(0, 292, __pyx_L1_error)

  /* "typped/lexer.py":296
 *         return self.token_label == self.token_table.begin_token_label
 * 
 *     def is_end_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is the end-token."""
 *         return self.token_label == self.token_table.end_token_label
 */
  __pyx_tuple__39 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__39)) __PYX_ERR(0, 296, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__39);
  __Pyx_GIVEREF(__pyx_tuple__39);
  __pyx_codeobj__40 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__39, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_is_end_token, 296, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__40)) __PYX_ERR(0, 296, __pyx_L1_error)

  /* "typped/lexer.py":300
 *         return self.token_label == self.token_table.end_token_label
 * 
 *     def is_begin_or_end_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is either the begin- or end-token."""
 *         return self.is_begin_token() or self.is_end_token()
 */
  __pyx_tuple__41 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__41)) __PYX_ERR(0, 300, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__41);
  __Pyx_GIVEREF(__pyx_tuple__41);
  __pyx_codeobj__42 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__41, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_is_begin_or_end_token, 300, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__42)) __PYX_ERR(0, 300, __pyx_L1_error)

  /* "typped/lexer.py":309
 *     #
 * 
 *     def traditional_repr(self):             # <<<<<<<<<<<<<<
 *         """Representation as a string that looks like class initialization."""
 *         return "TokenNode()"
 */
  __pyx_tuple__43 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__43)) __PYX_ERR(0, 309, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__43);
  __Pyx_GIVEREF(__pyx_tuple__43);
  __pyx_codeobj__44 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__43, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_traditional_repr, 309, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__44)) __PYX_ERR(0, 309, __pyx_L1_error)

  /* "typped/lexer.py":313
 *         return "TokenNode()"
 * 
 *     def value_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as its value."""
 *         return str(self.value)
 */
  __pyx_tuple__45 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__45)) __PYX_ERR(0, 313, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__45);
  __Pyx_GIVEREF(__pyx_tuple__45);
  __pyx_codeobj__46 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__45, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_value_repr, 313, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__46)) __PYX_ERR(0, 313, __pyx_L1_error)

  /* "typped/lexer.py":317
 *         return str(self.value)
 * 
 *     def label_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as its token label."""
 *         return str(self.token_label)
 */
  __pyx_tuple__47 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__47)) __PYX_ERR(0, 317, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__47);
  __Pyx_GIVEREF(__pyx_tuple__47);
  __pyx_codeobj__48 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__47, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_label_repr, 317, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__48)) __PYX_ERR(0, 317, __pyx_L1_error)

  /* "typped/lexer.py":321
 *         return str(self.token_label)
 * 
 *     def summary_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as a summarizing string containing both the label and
 *         the value."""
 */
  __pyx_tuple__49 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_value_str); if (unlikely(!__pyx_tuple__49)) __PYX_ERR(0, 321, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__49);
  __Pyx_GIVEREF(__pyx_tuple__49);
  __pyx_codeobj__50 = (PyObject*)__Pyx_PyCode_New(1, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__49, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_summary_repr, 321, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__50)) __PYX_ERR(0, 321, __pyx_L1_error)

  /* "typped/lexer.py":329
 *         return "<{0},{1}>".format(self.token_label, value_str)
 * 
 *     def tree_repr(self, indent=0):             # <<<<<<<<<<<<<<
 *         """Token representation as the root of a parse subtree, with formatting.
 *         The optional `indent` parameter can be either an indent string or else
 */
  __pyx_tuple__51 = PyTuple_Pack(5, __pyx_n_s_self, __pyx_n_s_indent, __pyx_n_s_num_indent, __pyx_n_s_string, __pyx_n_s_c); if (unlikely(!__pyx_tuple__51)) __PYX_ERR(0, 329, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__51);
  __Pyx_GIVEREF(__pyx_tuple__51);
  __pyx_codeobj__52 = (PyObject*)__Pyx_PyCode_New(2, 0, 5, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__51, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_tree_repr, 329, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__52)) __PYX_ERR(0, 329, __pyx_L1_error)
  __pyx_tuple__53 = PyTuple_Pack(1, ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__53)) __PYX_ERR(0, 329, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__53);
  __Pyx_GIVEREF(__pyx_tuple__53);

  /* "typped/lexer.py":344
 *         return string
 * 
 *     def string_tree_repr(self, only_vals=False, only_labels=False):             # <<<<<<<<<<<<<<
 *         """Token representation as the root of a parse subtree, in a string format.
 *         This is the default representation, used for `__repr__`."""
 */
  __pyx_tuple__54 = PyTuple_Pack(6, __pyx_n_s_self, __pyx_n_s_only_vals, __pyx_n_s_only_labels, __pyx_n_s_string, __pyx_n_s_genexpr, __pyx_n_s_genexpr); if (unlikely(!__pyx_tuple__54)) __PYX_ERR(0, 344, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__54);
  __Pyx_GIVEREF(__pyx_tuple__54);
  __pyx_codeobj__55 = (PyObject*)__Pyx_PyCode_New(3, 0, 6, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__54, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_string_tree_repr, 344, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__55)) __PYX_ERR(0, 344, __pyx_L1_error)
  __pyx_tuple__56 = PyTuple_Pack(2, ((PyObject *)Py_False), ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__56)) __PYX_ERR(0, 344, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__56);
  __Pyx_GIVEREF(__pyx_tuple__56);

  /* "typped/lexer.py":356
 *         return string
 * 
 *     def old_repr(self):             # <<<<<<<<<<<<<<
 *         """This old representation is kept *only* because it is used in some tests."""
 *         if self.token_label == "k_number":
 */
  __pyx_tuple__57 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_str_val, __pyx_n_s_a); if (unlikely(!__pyx_tuple__57)) __PYX_ERR(0, 356, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__57);
  __Pyx_GIVEREF(__pyx_tuple__57);
  __pyx_codeobj__58 = (PyObject*)__Pyx_PyCode_New(1, 0, 3, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__57, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_old_repr, 356, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__58)) __PYX_ERR(0, 356, __pyx_L1_error)

  /* "typped/lexer.py":373
 * 
 * 
 * def basic_token_subclass_factory():             # <<<<<<<<<<<<<<
 *     """Create and return a new token subclass representing tokens with label
 *     `token_label`.  This function is called from the `_create_token_subclass`
 */
  __pyx_tuple__59 = PyTuple_Pack(1, __pyx_n_s_TokenSubclass); if (unlikely(!__pyx_tuple__59)) __PYX_ERR(0, 373, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__59);
  __Pyx_GIVEREF(__pyx_tuple__59);
  __pyx_codeobj__60 = (PyObject*)__Pyx_PyCode_New(0, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__59, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_basic_token_subclass_factory, 373, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__60)) __PYX_ERR(0, 373, __pyx_L1_error)

  /* "typped/lexer.py":472
 *         return TokenSubclass
 * 
 *     def undef_token_subclass(self, token_label):             # <<<<<<<<<<<<<<
 *         """Un-define the token with label token_label.  The `TokenNode` subclass
 *         previously associated with that label is removed from the dictionary."""
 */
  __pyx_tuple__61 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_token_label); if (unlikely(!__pyx_tuple__61)) __PYX_ERR(0, 472, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__61);
  __Pyx_GIVEREF(__pyx_tuple__61);
  __pyx_codeobj__62 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__61, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_undef_token_subclass, 472, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__62)) __PYX_ERR(0, 472, __pyx_L1_error)

  /* "typped/lexer.py":480
 *             return # Not saved in dict, ignore.
 * 
 *     def undef_token(self, token_label):             # <<<<<<<<<<<<<<
 *         """Undefine the token corresponding to `token_label`."""
 *         # Remove from the list of defined tokens and from the token table.
 */
  __pyx_tuple__63 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_token_label); if (unlikely(!__pyx_tuple__63)) __PYX_ERR(0, 480, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__63);
  __Pyx_GIVEREF(__pyx_tuple__63);
  __pyx_codeobj__64 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__63, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_undef_token, 480, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__64)) __PYX_ERR(0, 480, __pyx_L1_error)

  /* "typped/lexer.py":486
 *         self.pattern_matcher.undef_pattern(token_label)
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """Define a token and the regex to recognize it.  Returns the new
 */
  __pyx_tuple__65 = PyTuple_Pack(6, __pyx_n_s_self, __pyx_n_s_token_label, __pyx_n_s_regex_string, __pyx_n_s_on_ties, __pyx_n_s_ignore, __pyx_n_s_matcher_options); if (unlikely(!__pyx_tuple__65)) __PYX_ERR(0, 486, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__65);
  __Pyx_GIVEREF(__pyx_tuple__65);
  __pyx_codeobj__66 = (PyObject*)__Pyx_PyCode_New(6, 0, 6, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__65, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_def_token, 486, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__66)) __PYX_ERR(0, 486, __pyx_L1_error)

  /* "typped/lexer.py":522
 *         return tok
 * 
 *     def def_begin_token(self, begin_token_label):             # <<<<<<<<<<<<<<
 *         """Define the begin-token.  The lexer's `def_begin_end_tokens` method
 *         should usually be called instead."""
 */
  __pyx_tuple__67 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_begin_token_label); if (unlikely(!__pyx_tuple__67)) __PYX_ERR(0, 522, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__67);
  __Pyx_GIVEREF(__pyx_tuple__67);
  __pyx_codeobj__68 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__67, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_def_begin_token, 522, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__68)) __PYX_ERR(0, 522, __pyx_L1_error)

  /* "typped/lexer.py":530
 *         return tok
 * 
 *     def def_end_token(self, end_token_label):             # <<<<<<<<<<<<<<
 *         """Define the end-token.  The `def_begin_end_tokens` method should usually
 *         be called instead."""
 */
  __pyx_tuple__69 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_end_token_label); if (unlikely(!__pyx_tuple__69)) __PYX_ERR(0, 530, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__69);
  __Pyx_GIVEREF(__pyx_tuple__69);
  __pyx_codeobj__70 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__69, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_def_end_token, 530, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__70)) __PYX_ERR(0, 530, __pyx_L1_error)

  /* "typped/lexer.py":538
 *         return tok
 * 
 *     def get_next_token_label_and_value(self, program, prog_unprocessed_indices,             # <<<<<<<<<<<<<<
 *                                              ERROR_MSG_TEXT_SNIPPET_SIZE):
 *         """Return the next token label for the start of the current program
 */
  __pyx_tuple__71 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_program, __pyx_n_s_prog_unprocessed_indices, __pyx_n_s_ERROR_MSG_TEXT_SNIPPET_SIZE); if (unlikely(!__pyx_tuple__71)) __PYX_ERR(0, 538, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__71);
  __Pyx_GIVEREF(__pyx_tuple__71);
  __pyx_codeobj__72 = (PyObject*)__Pyx_PyCode_New(4, 0, 4, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__71, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_get_next_token_label_and_value, 538, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__72)) __PYX_ERR(0, 538, __pyx_L1_error)

  /* "typped/lexer.py":547
 *                                               ERROR_MSG_TEXT_SNIPPET_SIZE)
 * 
 *     def ignored_tokens(self):             # <<<<<<<<<<<<<<
 *         """Return the set of ignored tokens."""
 *         return self.pattern_matcher.ignore_tokens
 */
  __pyx_tuple__73 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__73)) __PYX_ERR(0, 547, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__73);
  __Pyx_GIVEREF(__pyx_tuple__73);
  __pyx_codeobj__74 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__73, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_ignored_tokens, 547, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__74)) __PYX_ERR(0, 547, __pyx_L1_error)

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self.begin_token_label, self.begin_token_subclass, self.end_token_label, self.end_token_subclass, self.lex, self.pattern_matcher, self.token_subclass_dict, self.token_subclassing_fun)
 */
  __pyx_tuple__75 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_use_setstate, __pyx_n_s_state, __pyx_n_s_dict_2); if (unlikely(!__pyx_tuple__75)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__75);
  __Pyx_GIVEREF(__pyx_tuple__75);
  __pyx_codeobj__76 = (PyObject*)__Pyx_PyCode_New(1, 0, 4, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__75, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__76)) __PYX_ERR(2, 1, __pyx_L1_error)

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_TokenTable__set_state(self, __pyx_state)
 */
  __pyx_tuple__77 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_pyx_state); if (unlikely(!__pyx_tuple__77)) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__77);
  __Pyx_GIVEREF(__pyx_tuple__77);
  __pyx_codeobj__78 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__77, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 14, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__78)) __PYX_ERR(2, 14, __pyx_L1_error)

  /* "typped/lexer.py":589
 *         self.reference_point = 0
 * 
 *     def reset(self, begin_token):             # <<<<<<<<<<<<<<
 *         """Initialize the token buffer, or clear an reset it.  Any saved
 *         offsets are no longer valid, but no check is made for that."""
 */
  __pyx_tuple__79 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_begin_token); if (unlikely(!__pyx_tuple__79)) __PYX_ERR(0, 589, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__79);
  __Pyx_GIVEREF(__pyx_tuple__79);
  __pyx_codeobj__80 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__79, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_reset, 589, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__80)) __PYX_ERR(0, 589, __pyx_L1_error)

  /* "typped/lexer.py":597
 *         self._append(begin_token)
 * 
 *     def state_to_offset(self, state):             # <<<<<<<<<<<<<<
 *         """Return the offset into the current deque that corresponds to what
 *         was the offset (absolute index to the current token) at the time when
 */
  __pyx_tuple__81 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_state, __pyx_n_s_state); if (unlikely(!__pyx_tuple__81)) __PYX_ERR(0, 597, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__81);
  __Pyx_GIVEREF(__pyx_tuple__81);
  __pyx_codeobj__82 = (PyObject*)__Pyx_PyCode_New(2, 0, 3, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__81, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_state_to_offset, 597, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__82)) __PYX_ERR(0, 597, __pyx_L1_error)

  /* "typped/lexer.py":603
 *         return state - self.reference_point
 * 
 *     def get_state(self):             # <<<<<<<<<<<<<<
 *         """Return a buffer state indicator that can be returned to later.  The
 *         `go_back` or `push_back` methods of the lexer use this."""
 */
  __pyx_tuple__83 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__83)) __PYX_ERR(0, 603, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__83);
  __Pyx_GIVEREF(__pyx_tuple__83);
  __pyx_codeobj__84 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__83, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_get_state, 603, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__84)) __PYX_ERR(0, 603, __pyx_L1_error)

  /* "typped/lexer.py":632
 *             raise TypeError("Invalid argument type in __getitem__ of TokenBuffer.")
 * 
 *     def num_saved_previous_tokens(self):             # <<<<<<<<<<<<<<
 *         """Return the number of tokens before the current token that are saved."""
 *         return self._offset_to_absolute(self.current_offset)
 */
  __pyx_tuple__85 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__85)) __PYX_ERR(0, 632, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__85);
  __Pyx_GIVEREF(__pyx_tuple__85);
  __pyx_codeobj__86 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__85, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_num_saved_previous_tokens, 632, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__86)) __PYX_ERR(0, 632, __pyx_L1_error)

  /* "typped/lexer.py":636
 *         return self._offset_to_absolute(self.current_offset)
 * 
 *     def num_tokens_after_current(self):             # <<<<<<<<<<<<<<
 *         """An informational method.  Returns the number of tokens from
 *         the current token to the end of the token buffer.  Some may have been
 */
  __pyx_tuple__87 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__87)) __PYX_ERR(0, 636, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__87);
  __Pyx_GIVEREF(__pyx_tuple__87);
  __pyx_codeobj__88 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__87, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_num_tokens_after_current, 636, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__88)) __PYX_ERR(0, 636, __pyx_L1_error)

  /* "typped/lexer.py":644
 *         return len(self.token_buffer) - begin_point
 * 
 *     def move_forward(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Move the current token (i.e., the offset) forward by one.  This is
 *         the token buffer's equivalent of `next`, except that it returns
 */
  __pyx_tuple__89 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_num_toks); if (unlikely(!__pyx_tuple__89)) __PYX_ERR(0, 644, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__89);
  __Pyx_GIVEREF(__pyx_tuple__89);
  __pyx_codeobj__90 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__89, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_move_forward, 644, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__90)) __PYX_ERR(0, 644, __pyx_L1_error)

  /* "typped/lexer.py":661
 *         return self[0]
 * 
 *     def move_back(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Move the current token (i.e., offset) back `num_toks` tokens.  Will
 *         always stop at the begin-token.  Users should check the condition if it
 */
  __pyx_tuple__91 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_num_toks); if (unlikely(!__pyx_tuple__91)) __PYX_ERR(0, 661, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__91);
  __Pyx_GIVEREF(__pyx_tuple__91);
  __pyx_codeobj__92 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__91, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_move_back, 661, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__92)) __PYX_ERR(0, 661, __pyx_L1_error)

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self.current_offset, self.max_deque_size, self.max_peek, self.reference_point, self.token_buffer, self.token_getter_fun)
 */
  __pyx_tuple__93 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_use_setstate, __pyx_n_s_state, __pyx_n_s_dict_2); if (unlikely(!__pyx_tuple__93)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__93);
  __Pyx_GIVEREF(__pyx_tuple__93);
  __pyx_codeobj__94 = (PyObject*)__Pyx_PyCode_New(1, 0, 4, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__93, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__94)) __PYX_ERR(2, 1, __pyx_L1_error)

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_TokenBuffer__set_state(self, __pyx_state)
 */
  __pyx_tuple__95 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_pyx_state); if (unlikely(!__pyx_tuple__95)) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__95);
  __Pyx_GIVEREF(__pyx_tuple__95);
  __pyx_codeobj__96 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__95, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 14, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__96)) __PYX_ERR(2, 14, __pyx_L1_error)

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = ()
 */
  __pyx_tuple__97 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_use_setstate, __pyx_n_s_state, __pyx_n_s_dict_2); if (unlikely(!__pyx_tuple__97)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__97);
  __Pyx_GIVEREF(__pyx_tuple__97);
  __pyx_codeobj__98 = (PyObject*)__Pyx_PyCode_New(1, 0, 4, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__97, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__98)) __PYX_ERR(2, 1, __pyx_L1_error)

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_GenTokenState__set_state(self, __pyx_state)
 */
  __pyx_tuple__99 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_pyx_state); if (unlikely(!__pyx_tuple__99)) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__99);
  __Pyx_GIVEREF(__pyx_tuple__99);
  __pyx_codeobj__100 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__99, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 14, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__100)) __PYX_ERR(2, 14, __pyx_L1_error)

  /* "typped/lexer.py":812
 *                    final_mod_function=final_mod_function)
 * 
 *     def reset(self, token_table=None, max_peek_tokens=None,             # <<<<<<<<<<<<<<
 *                     max_deque_size=None, default_begin_end_tokens=False,
 *                     final_mod_function=None):
 */
  __pyx_tuple__101 = PyTuple_Pack(6, __pyx_n_s_self, __pyx_n_s_token_table, __pyx_n_s_max_peek_tokens, __pyx_n_s_max_deque_size, __pyx_n_s_default_begin_end_tokens, __pyx_n_s_final_mod_function); if (unlikely(!__pyx_tuple__101)) __PYX_ERR(0, 812, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__101);
  __Pyx_GIVEREF(__pyx_tuple__101);
  __pyx_codeobj__102 = (PyObject*)__Pyx_PyCode_New(6, 0, 6, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__101, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_reset, 812, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__102)) __PYX_ERR(0, 812, __pyx_L1_error)

  /* "typped/lexer.py":852
 *         self.default_helper_exception = LexerException
 * 
 *     def set_token_table(self, token_table, go_back=0):             # <<<<<<<<<<<<<<
 *         """Sets the current `TokenTable` instance for the lexer to
 *         `token_table`.  This is called on initialization, but can also be
 */
  __pyx_tuple__103 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_token_table, __pyx_n_s_go_back); if (unlikely(!__pyx_tuple__103)) __PYX_ERR(0, 852, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__103);
  __Pyx_GIVEREF(__pyx_tuple__103);
  __pyx_codeobj__104 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__103, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_set_token_table, 852, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__104)) __PYX_ERR(0, 852, __pyx_L1_error)

  /* "typped/lexer.py":868
 *             self.go_back(0) # Re-scan the current token.
 * 
 *     def set_text(self, program,             # <<<<<<<<<<<<<<
 *                  reset_linenumber=True, reset_charnumber=True):
 *         # TODO: redefine to take a TextStream.  Be sure to also pass back position
 */
  __pyx_tuple__105 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_program, __pyx_n_s_reset_linenumber, __pyx_n_s_reset_charnumber); if (unlikely(!__pyx_tuple__105)) __PYX_ERR(0, 868, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__105);
  __Pyx_GIVEREF(__pyx_tuple__105);
  __pyx_codeobj__106 = (PyObject*)__Pyx_PyCode_New(4, 0, 4, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__105, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_set_text, 868, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__106)) __PYX_ERR(0, 868, __pyx_L1_error)

  /* "typped/lexer.py":906
 *         self.text_is_set = True
 * 
 *     def _initialize_token_buffer(self):             # <<<<<<<<<<<<<<
 *         """A utility routine to initialize (fill) the token buffer.  The
 *         `token_buffer[0]` slot is the current token.  The current token will be
 */
  __pyx_tuple__107 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_begin_tok, __pyx_n_s_tb); if (unlikely(!__pyx_tuple__107)) __PYX_ERR(0, 906, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__107);
  __Pyx_GIVEREF(__pyx_tuple__107);
  __pyx_codeobj__108 = (PyObject*)__Pyx_PyCode_New(1, 0, 3, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__107, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_initialize_token_buffer, 906, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__108)) __PYX_ERR(0, 906, __pyx_L1_error)

  /* "typped/lexer.py":928
 *     #
 * 
 *     def next(self, num=1):             # <<<<<<<<<<<<<<
 *         """Return the next token, consuming from the token stream.  Also sets
 *         `self.token` to the return value.  Returns one end-token and raises
 */
  __pyx_tuple__109 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_num); if (unlikely(!__pyx_tuple__109)) __PYX_ERR(0, 928, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__109);
  __Pyx_GIVEREF(__pyx_tuple__109);
  __pyx_codeobj__110 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__109, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_next, 928, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__110)) __PYX_ERR(0, 928, __pyx_L1_error)

  /* "typped/lexer.py":969
 *         return self # Class provides its own __next__ method.
 * 
 *     def peek(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Peek ahead in the token stream without consuming any tokens.  The
 *         argument `num_toks` is the number of tokens ahead to peek.  The default
 */
  __pyx_tuple__111 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_num_toks); if (unlikely(!__pyx_tuple__111)) __PYX_ERR(0, 969, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__111);
  __Pyx_GIVEREF(__pyx_tuple__111);
  __pyx_codeobj__112 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__111, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_peek, 969, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__112)) __PYX_ERR(0, 969, __pyx_L1_error)

  /* "typped/lexer.py":989
 *         return retval
 * 
 *     def move_back(self, num_toks=1, num_is_raw=False):             # <<<<<<<<<<<<<<
 *         """NOT YET IMPLEMENTED
 * 
 */
  __pyx_tuple__113 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_num_toks, __pyx_n_s_num_is_raw); if (unlikely(!__pyx_tuple__113)) __PYX_ERR(0, 989, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__113);
  __Pyx_GIVEREF(__pyx_tuple__113);
  __pyx_codeobj__114 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__113, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_move_back, 989, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__114)) __PYX_ERR(0, 989, __pyx_L1_error)

  /* "typped/lexer.py":1061
 *         return popped_to_begin_token, current_token_is_first
 * 
 *     def go_back(self, num_toks=1, num_is_raw=False):             # <<<<<<<<<<<<<<
 *         """This method allows the lexer to go back in the token buffer by
 *         `num_toks` tokens.  The call `go_back(n)` will undo the effects of the
 */
  __pyx_tuple__115 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_num_toks, __pyx_n_s_num_is_raw); if (unlikely(!__pyx_tuple__115)) __PYX_ERR(0, 1061, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__115);
  __Pyx_GIVEREF(__pyx_tuple__115);
  __pyx_codeobj__116 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__115, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_go_back, 1061, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__116)) __PYX_ERR(0, 1061, __pyx_L1_error)

  /* "typped/lexer.py":1150
 *         return self.token
 * 
 *     def get_current_state(self):             # <<<<<<<<<<<<<<
 *         """Get a lexer state that can be returned to with `go_back_to_state`.
 *         States become invalid after the text is reset, but no check is made."""
 */
  __pyx_tuple__117 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__117)) __PYX_ERR(0, 1150, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__117);
  __Pyx_GIVEREF(__pyx_tuple__117);
  __pyx_codeobj__118 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__117, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_get_current_state, 1150, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__118)) __PYX_ERR(0, 1150, __pyx_L1_error)

  /* "typped/lexer.py":1155
 *         return self.token_buffer.get_state()
 * 
 *     def go_back_to_state(self, state):             # <<<<<<<<<<<<<<
 *         """Return the lexer to the state `state` saved from a previous call to
 *         `get_current_state`."""
 */
  __pyx_tuple__119 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_state, __pyx_n_s_index_to_go_back_to, __pyx_n_s_num_to_go_back); if (unlikely(!__pyx_tuple__119)) __PYX_ERR(0, 1155, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__119);
  __Pyx_GIVEREF(__pyx_tuple__119);
  __pyx_codeobj__120 = (PyObject*)__Pyx_PyCode_New(2, 0, 4, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__119, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_go_back_to_state, 1155, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__120)) __PYX_ERR(0, 1155, __pyx_L1_error)

  /* "typped/lexer.py":1170
 *     #
 * 
 *     def curr_token_is_begin(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` method) is
 *         the begin-token."""
 */
  __pyx_tuple__121 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__121)) __PYX_ERR(0, 1170, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__121);
  __Pyx_GIVEREF(__pyx_tuple__121);
  __pyx_codeobj__122 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__121, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_curr_token_is_begin, 1170, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__122)) __PYX_ERR(0, 1170, __pyx_L1_error)

  /* "typped/lexer.py":1175
 *         return self.token.is_begin_token()
 * 
 *     def curr_token_is_first(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` function)
 *         is the first actual token in the currently-set program text.  Resetting
 */
  __pyx_tuple__123 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__123)) __PYX_ERR(0, 1175, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__123);
  __Pyx_GIVEREF(__pyx_tuple__123);
  __pyx_codeobj__124 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__123, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_curr_token_is_first, 1175, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__124)) __PYX_ERR(0, 1175, __pyx_L1_error)

  /* "typped/lexer.py":1183
 *         return self.token.is_first
 * 
 *     def ignored_before_curr(self):             # <<<<<<<<<<<<<<
 *         """Return the list of all tokens ignored just before `self.token` (the
 *         last token returned by the `next` function).  Useful for enforcing
 */
  __pyx_tuple__125 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__125)) __PYX_ERR(0, 1183, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__125);
  __Pyx_GIVEREF(__pyx_tuple__125);
  __pyx_codeobj__126 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__125, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_ignored_before_curr, 1183, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__126)) __PYX_ERR(0, 1183, __pyx_L1_error)

  /* "typped/lexer.py":1191
 *         return self.token.ignored_before
 * 
 *     def curr_token_is_end(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` method) is
 *         the end-token."""
 */
  __pyx_tuple__127 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__127)) __PYX_ERR(0, 1191, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__127);
  __Pyx_GIVEREF(__pyx_tuple__127);
  __pyx_codeobj__128 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__127, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_curr_token_is_end, 1191, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__128)) __PYX_ERR(0, 1191, __pyx_L1_error)

  /* "typped/lexer.py":1196
 *         return self.token.is_end_token()
 * 
 *     def is_defined_token_label(self, token_label):             # <<<<<<<<<<<<<<
 *         """Return true if `token` is currently defined as a token label."""
 *         return self.token_table.is_defined_token_label()
 */
  __pyx_tuple__129 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_token_label); if (unlikely(!__pyx_tuple__129)) __PYX_ERR(0, 1196, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__129);
  __Pyx_GIVEREF(__pyx_tuple__129);
  __pyx_codeobj__130 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__129, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_is_defined_token_label, 1196, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__130)) __PYX_ERR(0, 1196, __pyx_L1_error)

  /* "typped/lexer.py":1200
 *         return self.token_table.is_defined_token_label()
 * 
 *     def last_n_tokens_original_text(self, n):             # <<<<<<<<<<<<<<
 *         """Returns the original text parsed by the last `n` tokens (back from
 *         and including the current token).  This routine is mainly used to make
 */
  __pyx_tuple__131 = PyTuple_Pack(7, __pyx_n_s_self, __pyx_n_s_n, __pyx_n_s_prev_tokens, __pyx_n_s_string_list, __pyx_n_s_full_string, __pyx_n_s_t_2, __pyx_n_s_s); if (unlikely(!__pyx_tuple__131)) __PYX_ERR(0, 1200, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__131);
  __Pyx_GIVEREF(__pyx_tuple__131);
  __pyx_codeobj__132 = (PyObject*)__Pyx_PyCode_New(2, 0, 7, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__131, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_last_n_tokens_original_text, 1200, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__132)) __PYX_ERR(0, 1200, __pyx_L1_error)

  /* "typped/lexer.py":1214
 *         return full_string
 * 
 *     def get_unprocessed_text(self, peek=1):             # <<<<<<<<<<<<<<
 *         """Return all the text that is set but not yet processed.  Returns
 *         `None` if no text is currently set.  The current token is assumed
 */
  __pyx_tuple__133 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_peek, __pyx_n_s_text); if (unlikely(!__pyx_tuple__133)) __PYX_ERR(0, 1214, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__133);
  __Pyx_GIVEREF(__pyx_tuple__133);
  __pyx_codeobj__134 = (PyObject*)__Pyx_PyCode_New(2, 0, 3, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__133, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_get_unprocessed_text, 1214, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__134)) __PYX_ERR(0, 1214, __pyx_L1_error)

  /* "typped/lexer.py":1227
 *         return text
 * 
 *     def get_processed_text(self, peek=1):             # <<<<<<<<<<<<<<
 *         """Return all the text that is set and has been processed.  Returns
 *         `None` if no text is currently set.  The current token is assumed
 */
  __pyx_tuple__135 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_peek, __pyx_n_s_text); if (unlikely(!__pyx_tuple__135)) __PYX_ERR(0, 1227, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__135);
  __Pyx_GIVEREF(__pyx_tuple__135);
  __pyx_codeobj__136 = (PyObject*)__Pyx_PyCode_New(2, 0, 3, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__135, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_get_processed_text, 1227, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__136)) __PYX_ERR(0, 1227, __pyx_L1_error)

  /* "typped/lexer.py":1244
 *     #
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """A convenience method to define a token. It calls the corresponding
 */
  __pyx_tuple__137 = PyTuple_Pack(7, __pyx_n_s_self, __pyx_n_s_token_label, __pyx_n_s_regex_string, __pyx_n_s_on_ties, __pyx_n_s_ignore, __pyx_n_s_matcher_options, __pyx_n_s_new_subclass); if (unlikely(!__pyx_tuple__137)) __PYX_ERR(0, 1244, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__137);
  __Pyx_GIVEREF(__pyx_tuple__137);
  __pyx_codeobj__138 = (PyObject*)__Pyx_PyCode_New(6, 0, 7, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__137, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_def_token, 1244, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__138)) __PYX_ERR(0, 1244, __pyx_L1_error)

  /* "typped/lexer.py":1253
 *         return new_subclass
 * 
 *     def undef_token(self, token_label):             # <<<<<<<<<<<<<<
 *         """A convenience function to call the corresponding `undef_token` of
 *         the current `TokenTable` instance associated with the Lexer."""
 */
  __pyx_tuple__139 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_token_label); if (unlikely(!__pyx_tuple__139)) __PYX_ERR(0, 1253, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__139);
  __Pyx_GIVEREF(__pyx_tuple__139);
  __pyx_codeobj__140 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__139, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_undef_token, 1253, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__140)) __PYX_ERR(0, 1253, __pyx_L1_error)

  /* "typped/lexer.py":1258
 *         self.token_table.undef_token(token_label)
 * 
 *     def def_ignored_token(self, token_label, regex_string, on_ties=0,             # <<<<<<<<<<<<<<
 *                           matcher_options=None):
 *         """A convenience function to define an ignored token without setting
 */
  __pyx_tuple__141 = PyTuple_Pack(5, __pyx_n_s_self, __pyx_n_s_token_label, __pyx_n_s_regex_string, __pyx_n_s_on_ties, __pyx_n_s_matcher_options); if (unlikely(!__pyx_tuple__141)) __PYX_ERR(0, 1258, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__141);
  __Pyx_GIVEREF(__pyx_tuple__141);
  __pyx_codeobj__142 = (PyObject*)__Pyx_PyCode_New(5, 0, 5, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__141, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_def_ignored_token, 1258, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__142)) __PYX_ERR(0, 1258, __pyx_L1_error)

  /* "typped/lexer.py":1265
 *                               matcher_options=matcher_options)
 * 
 *     def def_multi_tokens(self, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *         """A convenience function, to define multiple tokens at once.  Each element
 *         of the passed-in list should be a tuple containing the arguments to the
 */
  __pyx_tuple__143 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_tuple_list, __pyx_n_s_kwargs); if (unlikely(!__pyx_tuple__143)) __PYX_ERR(0, 1265, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__143);
  __Pyx_GIVEREF(__pyx_tuple__143);
  __pyx_codeobj__144 = (PyObject*)__Pyx_PyCode_New(2, 0, 3, 0, CO_VARKEYWORDS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__143, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_def_multi_tokens, 1265, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__144)) __PYX_ERR(0, 1265, __pyx_L1_error)

  /* "typped/lexer.py":1273
 *         return multi_funcall(self.def_token, tuple_list, **kwargs)
 * 
 *     def def_multi_ignored_tokens(self, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *         """A convenience function, to define multiple tokens at once with
 *         `ignore=True` set.  Each element of the passed-in list should be a tuple
 */
  __pyx_tuple__145 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_tuple_list, __pyx_n_s_kwargs); if (unlikely(!__pyx_tuple__145)) __PYX_ERR(0, 1273, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__145);
  __Pyx_GIVEREF(__pyx_tuple__145);
  __pyx_codeobj__146 = (PyObject*)__Pyx_PyCode_New(2, 0, 3, 0, CO_VARKEYWORDS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__145, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_def_multi_ignored_tokens, 1273, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__146)) __PYX_ERR(0, 1273, __pyx_L1_error)

  /* "typped/lexer.py":1281
 *         return multi_funcall(self.def_ignored_token, tuple_list, **kwargs)
 * 
 *     def def_begin_end_tokens(self, begin_token_label, end_token_label):             # <<<<<<<<<<<<<<
 *         """Define the sentinel tokens at the beginning and end of the token
 *         stream.  This method must be called before using the Lexer.  It will
 */
  __pyx_tuple__147 = PyTuple_Pack(5, __pyx_n_s_self, __pyx_n_s_begin_token_label, __pyx_n_s_end_token_label, __pyx_n_s_begin_tok, __pyx_n_s_end_tok); if (unlikely(!__pyx_tuple__147)) __PYX_ERR(0, 1281, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__147);
  __Pyx_GIVEREF(__pyx_tuple__147);
  __pyx_codeobj__148 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__147, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_def_begin_end_tokens, 1281, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__148)) __PYX_ERR(0, 1281, __pyx_L1_error)

  /* "typped/lexer.py":1298
 *         return begin_tok, end_tok
 * 
 *     def def_default_whitespace(self, space_label="k_space", space_regex=r"[ \t]+",             # <<<<<<<<<<<<<<
 *                         newline_label="k_newline", newline_regex=r"[\n\f\r\v]+",
 *                         matcher_options=None):
 */
  __pyx_tuple__149 = PyTuple_Pack(7, __pyx_n_s_self, __pyx_n_s_space_label, __pyx_n_s_space_regex, __pyx_n_s_newline_label, __pyx_n_s_newline_regex, __pyx_n_s_matcher_options, __pyx_n_s_tok); if (unlikely(!__pyx_tuple__149)) __PYX_ERR(0, 1298, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__149);
  __Pyx_GIVEREF(__pyx_tuple__149);
  __pyx_codeobj__150 = (PyObject*)__Pyx_PyCode_New(6, 0, 7, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__149, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_def_default_whitespace, 1298, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__150)) __PYX_ERR(0, 1298, __pyx_L1_error)

  /* "typped/lexer.py":1311
 *     #
 * 
 *     def match_next(self, token_label_to_match, peeklevel=1, consume=True,             # <<<<<<<<<<<<<<
 *                    raise_on_fail=False, raise_on_success=False,
 *                    err_msg_tokens=3):
 */
  __pyx_tuple__151 = PyTuple_Pack(7, __pyx_n_s_self, __pyx_n_s_token_label_to_match, __pyx_n_s_peeklevel, __pyx_n_s_consume, __pyx_n_s_raise_on_fail, __pyx_n_s_raise_on_success, __pyx_n_s_err_msg_tokens); if (unlikely(!__pyx_tuple__151)) __PYX_ERR(0, 1311, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__151);
  __Pyx_GIVEREF(__pyx_tuple__151);
  __pyx_codeobj__152 = (PyObject*)__Pyx_PyCode_New(7, 0, 7, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__151, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_match_next, 1311, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__152)) __PYX_ERR(0, 1311, __pyx_L1_error)

  /* "typped/lexer.py":1367
 * 
 *     # TODO document these utilities......
 *     def in_ignored_tokens(self, token_label_to_match,             # <<<<<<<<<<<<<<
 *                           raise_on_fail=False, raise_on_success=False):
 *         """A utility function to test if a particular token label is among
 */
  __pyx_tuple__153 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_token_label_to_match, __pyx_n_s_raise_on_fail, __pyx_n_s_raise_on_success); if (unlikely(!__pyx_tuple__153)) __PYX_ERR(0, 1367, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__153);
  __Pyx_GIVEREF(__pyx_tuple__153);
  __pyx_codeobj__154 = (PyObject*)__Pyx_PyCode_New(4, 0, 4, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__153, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_in_ignored_tokens, 1367, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__154)) __PYX_ERR(0, 1367, __pyx_L1_error)

  /* "typped/lexer.py":1394
 *         return retval
 * 
 *     def no_ignored_after(self, raise_on_fail=False, raise_on_success=False):             # <<<<<<<<<<<<<<
 *         """A boolean utility function to test if any tokens were ignored
 *         between current token and lookahead.  Like `match_next`, this method
 */
  __pyx_tuple__155 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_raise_on_fail, __pyx_n_s_raise_on_success); if (unlikely(!__pyx_tuple__155)) __PYX_ERR(0, 1394, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__155);
  __Pyx_GIVEREF(__pyx_tuple__155);
  __pyx_codeobj__156 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__155, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_no_ignored_after, 1394, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__156)) __PYX_ERR(0, 1394, __pyx_L1_error)

  /* "typped/lexer.py":1421
 *         return retval
 * 
 *     def no_ignored_before(self, raise_on_fail=False, raise_on_success=False):             # <<<<<<<<<<<<<<
 *         """A boolean utility function to test if any tokens were ignored between
 *         previous token and current token.  Like `match_next`, this method
 */
  __pyx_tuple__157 = PyTuple_Pack(3, __pyx_n_s_self, __pyx_n_s_raise_on_fail, __pyx_n_s_raise_on_success); if (unlikely(!__pyx_tuple__157)) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__157);
  __Pyx_GIVEREF(__pyx_tuple__157);
  __pyx_codeobj__158 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__157, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_no_ignored_before, 1421, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__158)) __PYX_ERR(0, 1421, __pyx_L1_error)

  /* "typped/lexer.py":1449
 *     #
 * 
 *     def _unbuffered_token_getter(self):             # <<<<<<<<<<<<<<
 *         """This routine generates tokens from the program text in the attribute
 *         `self.program`.  It does not modify the program itself, but keeps slice
 */
  __pyx_tuple__159 = PyTuple_Pack(1, __pyx_n_s_self); if (unlikely(!__pyx_tuple__159)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__159);
  __Pyx_GIVEREF(__pyx_tuple__159);
  __pyx_codeobj__160 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__159, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_unbuffered_token_getter, 1449, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__160)) __PYX_ERR(0, 1449, __pyx_L1_error)

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self._curr_token_is_first, self._returned_first_token, self.all_token_count, self.already_returned_end_token, self.default_helper_exception, self.final_mod_function, self.non_ignored_token_count, self.prog_unprocessed, self.program, self.raw_linenumber, self.text_is_set, self.token, self.token_buffer, self.token_generator_state, self.token_table, self.upcoming_raw_charnumber, self.upcoming_raw_linenumber, self.upcoming_raw_total_chars)
 */
  __pyx_tuple__161 = PyTuple_Pack(4, __pyx_n_s_self, __pyx_n_s_use_setstate, __pyx_n_s_state, __pyx_n_s_dict_2); if (unlikely(!__pyx_tuple__161)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__161);
  __Pyx_GIVEREF(__pyx_tuple__161);
  __pyx_codeobj__162 = (PyObject*)__Pyx_PyCode_New(1, 0, 4, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__161, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_reduce_cython, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__162)) __PYX_ERR(2, 1, __pyx_L1_error)

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_Lexer__set_state(self, __pyx_state)
 */
  __pyx_tuple__163 = PyTuple_Pack(2, __pyx_n_s_self, __pyx_n_s_pyx_state); if (unlikely(!__pyx_tuple__163)) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__163);
  __Pyx_GIVEREF(__pyx_tuple__163);
  __pyx_codeobj__164 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__163, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_setstate_cython, 14, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__164)) __PYX_ERR(2, 14, __pyx_L1_error)

  /* "typped/lexer.py":1582
 * 
 * 
 * def multi_funcall(function, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *     """A convenience function that takes a function (or method) and a list of tuples
 *     and calls `function` with the values in those tuple as arguments.
 */
  __pyx_tuple__165 = PyTuple_Pack(6, __pyx_n_s_function, __pyx_n_s_tuple_list, __pyx_n_s_kwargs, __pyx_n_s_retval_list, __pyx_n_s_exception_to_raise, __pyx_n_s_t_2); if (unlikely(!__pyx_tuple__165)) __PYX_ERR(0, 1582, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__165);
  __Pyx_GIVEREF(__pyx_tuple__165);
  __pyx_codeobj__166 = (PyObject*)__Pyx_PyCode_New(2, 0, 6, 0, CO_VARKEYWORDS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__165, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_multi_funcall, 1582, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__166)) __PYX_ERR(0, 1582, __pyx_L1_error)

  /* "typped/lexer.py":1601
 *     return tuple(retval_list)
 * 
 * def return_first_exception(*args):             # <<<<<<<<<<<<<<
 *     """Go down the argument list and return the first object that is a
 *     subclass of the `Exception` class.  Arguments do not need to all be
 */
  __pyx_tuple__167 = PyTuple_Pack(2, __pyx_n_s_args, __pyx_n_s_item); if (unlikely(!__pyx_tuple__167)) __PYX_ERR(0, 1601, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__167);
  __Pyx_GIVEREF(__pyx_tuple__167);
  __pyx_codeobj__168 = (PyObject*)__Pyx_PyCode_New(0, 0, 2, 0, CO_VARARGS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__167, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_src_typped_lexer_py, __pyx_n_s_return_first_exception, 1601, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__168)) __PYX_ERR(0, 1601, __pyx_L1_error)

  /* "(tree fragment)":1
 * def __pyx_unpickle_TokenTable(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0xe1e7798:
 *         from pickle import PickleError
 */
  __pyx_tuple__169 = PyTuple_Pack(5, __pyx_n_s_pyx_type, __pyx_n_s_pyx_checksum, __pyx_n_s_pyx_state, __pyx_n_s_PickleError, __pyx_n_s_result); if (unlikely(!__pyx_tuple__169)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__169);
  __Pyx_GIVEREF(__pyx_tuple__169);
  __pyx_codeobj__170 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__169, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_TokenTable, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__170)) __PYX_ERR(2, 1, __pyx_L1_error)
  __pyx_tuple__171 = PyTuple_Pack(5, __pyx_n_s_pyx_type, __pyx_n_s_pyx_checksum, __pyx_n_s_pyx_state, __pyx_n_s_PickleError, __pyx_n_s_result); if (unlikely(!__pyx_tuple__171)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__171);
  __Pyx_GIVEREF(__pyx_tuple__171);
  __pyx_codeobj__172 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__171, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_TokenBuffer, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__172)) __PYX_ERR(2, 1, __pyx_L1_error)
  __pyx_tuple__173 = PyTuple_Pack(5, __pyx_n_s_pyx_type, __pyx_n_s_pyx_checksum, __pyx_n_s_pyx_state, __pyx_n_s_PickleError, __pyx_n_s_result); if (unlikely(!__pyx_tuple__173)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__173);
  __Pyx_GIVEREF(__pyx_tuple__173);
  __pyx_codeobj__174 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__173, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_GenTokenState, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__174)) __PYX_ERR(2, 1, __pyx_L1_error)
  __pyx_tuple__175 = PyTuple_Pack(5, __pyx_n_s_pyx_type, __pyx_n_s_pyx_checksum, __pyx_n_s_pyx_state, __pyx_n_s_PickleError, __pyx_n_s_result); if (unlikely(!__pyx_tuple__175)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__175);
  __Pyx_GIVEREF(__pyx_tuple__175);
  __pyx_codeobj__176 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__175, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_Lexer, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__176)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_RefNannyFinishContext();
  return 0;
  __pyx_L1_error:;
  __Pyx_RefNannyFinishContext();
  return -1;
}

static int __Pyx_InitGlobals(void) {
  __pyx_umethod_PyList_Type_pop.type = (PyObject*)&PyList_Type;
  if (__Pyx_InitStrings(__pyx_string_tab) < 0) __PYX_ERR(0, 1, __pyx_L1_error);
  __pyx_int_0 = PyInt_FromLong(0); if (unlikely(!__pyx_int_0)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_1 = PyInt_FromLong(1); if (unlikely(!__pyx_int_1)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_2 = PyInt_FromLong(2); if (unlikely(!__pyx_int_2)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_3 = PyInt_FromLong(3); if (unlikely(!__pyx_int_3)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_4 = PyInt_FromLong(4); if (unlikely(!__pyx_int_4)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_40 = PyInt_FromLong(40); if (unlikely(!__pyx_int_40)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_110728784 = PyInt_FromLong(110728784L); if (unlikely(!__pyx_int_110728784)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_219943058 = PyInt_FromLong(219943058L); if (unlikely(!__pyx_int_219943058)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_222419149 = PyInt_FromLong(222419149L); if (unlikely(!__pyx_int_222419149)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_236877720 = PyInt_FromLong(236877720L); if (unlikely(!__pyx_int_236877720)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_neg_1 = PyInt_FromLong(-1); if (unlikely(!__pyx_int_neg_1)) __PYX_ERR(0, 1, __pyx_L1_error)
  return 0;
  __pyx_L1_error:;
  return -1;
}

#if PY_MAJOR_VERSION < 3
PyMODINIT_FUNC initlexer(void); /*proto*/
PyMODINIT_FUNC initlexer(void)
#else
PyMODINIT_FUNC PyInit_lexer(void); /*proto*/
PyMODINIT_FUNC PyInit_lexer(void)
#endif
{
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannyDeclarations
  #if CYTHON_REFNANNY
  __Pyx_RefNanny = __Pyx_RefNannyImportAPI("refnanny");
  if (!__Pyx_RefNanny) {
      PyErr_Clear();
      __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
      if (!__Pyx_RefNanny)
          Py_FatalError("failed to import 'refnanny' module");
  }
  #endif
  __Pyx_RefNannySetupContext("PyMODINIT_FUNC PyInit_lexer(void)", 0);
  if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
  #ifdef __Pyx_CyFunction_USED
  if (__pyx_CyFunction_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_FusedFunction_USED
  if (__pyx_FusedFunction_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_Coroutine_USED
  if (__pyx_Coroutine_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_Generator_USED
  if (__pyx_Generator_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_StopAsyncIteration_USED
  if (__pyx_StopAsyncIteration_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  /*--- Library function declarations ---*/
  /*--- Threads initialization code ---*/
  #if defined(__PYX_FORCE_INIT_THREADS) && __PYX_FORCE_INIT_THREADS
  #ifdef WITH_THREAD /* Python build with threading support? */
  PyEval_InitThreads();
  #endif
  #endif
  /*--- Module creation code ---*/
  #if PY_MAJOR_VERSION < 3
  __pyx_m = Py_InitModule4("lexer", __pyx_methods, __pyx_k_A_Lexer_class_instance_is_a_gen, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
  #else
  __pyx_m = PyModule_Create(&__pyx_moduledef);
  #endif
  if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_d = PyModule_GetDict(__pyx_m); if (unlikely(!__pyx_d)) __PYX_ERR(0, 1, __pyx_L1_error)
  Py_INCREF(__pyx_d);
  __pyx_b = PyImport_AddModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_b)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_cython_runtime = PyImport_AddModule((char *) "cython_runtime"); if (unlikely(!__pyx_cython_runtime)) __PYX_ERR(0, 1, __pyx_L1_error)
  #if CYTHON_COMPILING_IN_PYPY
  Py_INCREF(__pyx_b);
  #endif
  if (PyObject_SetAttrString(__pyx_m, "__builtins__", __pyx_b) < 0) __PYX_ERR(0, 1, __pyx_L1_error);
  /*--- Initialize various global constants etc. ---*/
  if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
  if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  if (__pyx_module_is_main_typped__lexer) {
    if (PyObject_SetAttrString(__pyx_m, "__name__", __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  }
  #if PY_MAJOR_VERSION >= 3
  {
    PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
    if (!PyDict_GetItemString(modules, "typped.lexer")) {
      if (unlikely(PyDict_SetItemString(modules, "typped.lexer", __pyx_m) < 0)) __PYX_ERR(0, 1, __pyx_L1_error)
    }
  }
  #endif
  /*--- Builtin init code ---*/
  if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  /*--- Constants init code ---*/
  if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  /*--- Global init code ---*/
  /*--- Variable export code ---*/
  /*--- Function export code ---*/
  /*--- Type init code ---*/
  __pyx_vtabptr_6typped_5lexer_TokenBuffer = &__pyx_vtable_6typped_5lexer_TokenBuffer;
  __pyx_vtable_6typped_5lexer_TokenBuffer.reset = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, PyObject *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_11TokenBuffer_reset;
  __pyx_vtable_6typped_5lexer_TokenBuffer.state_to_offset = (long (*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, long, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_11TokenBuffer_state_to_offset;
  __pyx_vtable_6typped_5lexer_TokenBuffer.get_state = (long (*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_11TokenBuffer_get_state;
  __pyx_vtable_6typped_5lexer_TokenBuffer.num_saved_previous_tokens = (long (*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_11TokenBuffer_num_saved_previous_tokens;
  __pyx_vtable_6typped_5lexer_TokenBuffer.num_tokens_after_current = (long (*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_11TokenBuffer_num_tokens_after_current;
  __pyx_vtable_6typped_5lexer_TokenBuffer.move_forward = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_forward *__pyx_optional_args))__pyx_f_6typped_5lexer_11TokenBuffer_move_forward;
  __pyx_vtable_6typped_5lexer_TokenBuffer.move_back = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer_move_back *__pyx_optional_args))__pyx_f_6typped_5lexer_11TokenBuffer_move_back;
  __pyx_vtable_6typped_5lexer_TokenBuffer._index_to_absolute = (long (*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, long))__pyx_f_6typped_5lexer_11TokenBuffer__index_to_absolute;
  __pyx_vtable_6typped_5lexer_TokenBuffer._offset_to_absolute = (long (*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, long))__pyx_f_6typped_5lexer_11TokenBuffer__offset_to_absolute;
  __pyx_vtable_6typped_5lexer_TokenBuffer._fill_to_current_offset = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *))__pyx_f_6typped_5lexer_11TokenBuffer__fill_to_current_offset;
  __pyx_vtable_6typped_5lexer_TokenBuffer._pop = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *))__pyx_f_6typped_5lexer_11TokenBuffer__pop;
  __pyx_vtable_6typped_5lexer_TokenBuffer._append = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenBuffer *, struct __pyx_opt_args_6typped_5lexer_11TokenBuffer__append *__pyx_optional_args))__pyx_f_6typped_5lexer_11TokenBuffer__append;
  if (PyType_Ready(&__pyx_type_6typped_5lexer_TokenBuffer) < 0) __PYX_ERR(0, 555, __pyx_L1_error)
  __pyx_type_6typped_5lexer_TokenBuffer.tp_print = 0;
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_6typped_5lexer_TokenBuffer, "__init__"); if (unlikely(!wrapper)) __PYX_ERR(0, 555, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_6typped_5lexer_11TokenBuffer___init__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_6typped_5lexer_11TokenBuffer___init__.doc = __pyx_doc_6typped_5lexer_11TokenBuffer___init__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_6typped_5lexer_11TokenBuffer___init__;
    }
  }
  #endif
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_6typped_5lexer_TokenBuffer, "__getitem__"); if (unlikely(!wrapper)) __PYX_ERR(0, 555, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_6typped_5lexer_11TokenBuffer_8__getitem__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_6typped_5lexer_11TokenBuffer_8__getitem__.doc = __pyx_doc_6typped_5lexer_11TokenBuffer_8__getitem__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_6typped_5lexer_11TokenBuffer_8__getitem__;
    }
  }
  #endif
  if (__Pyx_SetVtable(__pyx_type_6typped_5lexer_TokenBuffer.tp_dict, __pyx_vtabptr_6typped_5lexer_TokenBuffer) < 0) __PYX_ERR(0, 555, __pyx_L1_error)
  if (PyObject_SetAttrString(__pyx_m, "TokenBuffer", (PyObject *)&__pyx_type_6typped_5lexer_TokenBuffer) < 0) __PYX_ERR(0, 555, __pyx_L1_error)
  if (__Pyx_setup_reduce((PyObject*)&__pyx_type_6typped_5lexer_TokenBuffer) < 0) __PYX_ERR(0, 555, __pyx_L1_error)
  __pyx_ptype_6typped_5lexer_TokenBuffer = &__pyx_type_6typped_5lexer_TokenBuffer;
  __pyx_vtabptr_6typped_5lexer_Lexer = &__pyx_vtable_6typped_5lexer_Lexer;
  __pyx_vtable_6typped_5lexer_Lexer.reset = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_reset *__pyx_optional_args))__pyx_f_6typped_5lexer_5Lexer_reset;
  __pyx_vtable_6typped_5lexer_Lexer.set_token_table = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, struct __pyx_obj_6typped_5lexer_TokenTable *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_set_token_table *__pyx_optional_args))__pyx_f_6typped_5lexer_5Lexer_set_token_table;
  __pyx_vtable_6typped_5lexer_Lexer.next = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_next *__pyx_optional_args))__pyx_f_6typped_5lexer_5Lexer_next;
  __pyx_vtable_6typped_5lexer_Lexer.peek = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_peek *__pyx_optional_args))__pyx_f_6typped_5lexer_5Lexer_peek;
  __pyx_vtable_6typped_5lexer_Lexer._pop_tokens = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, long))__pyx_f_6typped_5lexer_5Lexer__pop_tokens;
  __pyx_vtable_6typped_5lexer_Lexer.go_back = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_go_back *__pyx_optional_args))__pyx_f_6typped_5lexer_5Lexer_go_back;
  __pyx_vtable_6typped_5lexer_Lexer.curr_token_is_begin = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_5Lexer_curr_token_is_begin;
  __pyx_vtable_6typped_5lexer_Lexer.ignored_before_curr = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_5Lexer_ignored_before_curr;
  __pyx_vtable_6typped_5lexer_Lexer.curr_token_is_end = (int (*)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_5Lexer_curr_token_is_end;
  __pyx_vtable_6typped_5lexer_Lexer.is_defined_token_label = (int (*)(struct __pyx_obj_6typped_5lexer_Lexer *, PyObject *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_5Lexer_is_defined_token_label;
  __pyx_vtable_6typped_5lexer_Lexer.match_next = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_match_next *__pyx_optional_args))__pyx_f_6typped_5lexer_5Lexer_match_next;
  __pyx_vtable_6typped_5lexer_Lexer.in_ignored_tokens = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_in_ignored_tokens *__pyx_optional_args))__pyx_f_6typped_5lexer_5Lexer_in_ignored_tokens;
  __pyx_vtable_6typped_5lexer_Lexer.no_ignored_after = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_after *__pyx_optional_args))__pyx_f_6typped_5lexer_5Lexer_no_ignored_after;
  __pyx_vtable_6typped_5lexer_Lexer.no_ignored_before = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_5Lexer_no_ignored_before *__pyx_optional_args))__pyx_f_6typped_5lexer_5Lexer_no_ignored_before;
  __pyx_vtable_6typped_5lexer_Lexer._unbuffered_token_getter = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_Lexer *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_5Lexer__unbuffered_token_getter;
  if (PyType_Ready(&__pyx_type_6typped_5lexer_Lexer) < 0) __PYX_ERR(0, 761, __pyx_L1_error)
  __pyx_type_6typped_5lexer_Lexer.tp_print = 0;
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_6typped_5lexer_Lexer, "__init__"); if (unlikely(!wrapper)) __PYX_ERR(0, 761, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_6typped_5lexer_5Lexer___init__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_6typped_5lexer_5Lexer___init__.doc = __pyx_doc_6typped_5lexer_5Lexer___init__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_6typped_5lexer_5Lexer___init__;
    }
  }
  #endif
  if (__Pyx_SetVtable(__pyx_type_6typped_5lexer_Lexer.tp_dict, __pyx_vtabptr_6typped_5lexer_Lexer) < 0) __PYX_ERR(0, 761, __pyx_L1_error)
  if (PyObject_SetAttrString(__pyx_m, "Lexer", (PyObject *)&__pyx_type_6typped_5lexer_Lexer) < 0) __PYX_ERR(0, 761, __pyx_L1_error)
  if (__Pyx_setup_reduce((PyObject*)&__pyx_type_6typped_5lexer_Lexer) < 0) __PYX_ERR(0, 761, __pyx_L1_error)
  __pyx_ptype_6typped_5lexer_Lexer = &__pyx_type_6typped_5lexer_Lexer;
  __pyx_vtabptr_6typped_5lexer_TokenTable = &__pyx_vtable_6typped_5lexer_TokenTable;
  __pyx_vtable_6typped_5lexer_TokenTable._create_token_subclass = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, struct __pyx_opt_args_6typped_5lexer_10TokenTable__create_token_subclass *__pyx_optional_args))__pyx_f_6typped_5lexer_10TokenTable__create_token_subclass;
  __pyx_vtable_6typped_5lexer_TokenTable.undef_token_subclass = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_10TokenTable_undef_token_subclass;
  __pyx_vtable_6typped_5lexer_TokenTable.undef_token = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_10TokenTable_undef_token;
  __pyx_vtable_6typped_5lexer_TokenTable.def_token = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_6typped_5lexer_10TokenTable_def_token *__pyx_optional_args))__pyx_f_6typped_5lexer_10TokenTable_def_token;
  __pyx_vtable_6typped_5lexer_TokenTable.def_begin_token = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_10TokenTable_def_begin_token;
  __pyx_vtable_6typped_5lexer_TokenTable.def_end_token = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_10TokenTable_def_end_token;
  __pyx_vtable_6typped_5lexer_TokenTable.get_next_token_label_and_value = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenTable *, PyObject *, PyObject *, long, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_10TokenTable_get_next_token_label_and_value;
  __pyx_vtable_6typped_5lexer_TokenTable.ignored_tokens = (PyObject *(*)(struct __pyx_obj_6typped_5lexer_TokenTable *, int __pyx_skip_dispatch))__pyx_f_6typped_5lexer_10TokenTable_ignored_tokens;
  if (PyType_Ready(&__pyx_type_6typped_5lexer_TokenTable) < 0) __PYX_ERR(0, 411, __pyx_L1_error)
  __pyx_type_6typped_5lexer_TokenTable.tp_print = 0;
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_6typped_5lexer_TokenTable, "__init__"); if (unlikely(!wrapper)) __PYX_ERR(0, 411, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_6typped_5lexer_10TokenTable___init__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_6typped_5lexer_10TokenTable___init__.doc = __pyx_doc_6typped_5lexer_10TokenTable___init__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_6typped_5lexer_10TokenTable___init__;
    }
  }
  #endif
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_6typped_5lexer_TokenTable, "__contains__"); if (unlikely(!wrapper)) __PYX_ERR(0, 411, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_6typped_5lexer_10TokenTable_2__contains__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_6typped_5lexer_10TokenTable_2__contains__.doc = __pyx_doc_6typped_5lexer_10TokenTable_2__contains__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_6typped_5lexer_10TokenTable_2__contains__;
    }
  }
  #endif
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_6typped_5lexer_TokenTable, "__getitem__"); if (unlikely(!wrapper)) __PYX_ERR(0, 411, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_6typped_5lexer_10TokenTable_4__getitem__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_6typped_5lexer_10TokenTable_4__getitem__.doc = __pyx_doc_6typped_5lexer_10TokenTable_4__getitem__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_6typped_5lexer_10TokenTable_4__getitem__;
    }
  }
  #endif
  if (__Pyx_SetVtable(__pyx_type_6typped_5lexer_TokenTable.tp_dict, __pyx_vtabptr_6typped_5lexer_TokenTable) < 0) __PYX_ERR(0, 411, __pyx_L1_error)
  if (PyObject_SetAttrString(__pyx_m, "TokenTable", (PyObject *)&__pyx_type_6typped_5lexer_TokenTable) < 0) __PYX_ERR(0, 411, __pyx_L1_error)
  if (__Pyx_setup_reduce((PyObject*)&__pyx_type_6typped_5lexer_TokenTable) < 0) __PYX_ERR(0, 411, __pyx_L1_error)
  __pyx_ptype_6typped_5lexer_TokenTable = &__pyx_type_6typped_5lexer_TokenTable;
  if (PyType_Ready(&__pyx_type_6typped_5lexer_GenTokenState) < 0) __PYX_ERR(0, 740, __pyx_L1_error)
  __pyx_type_6typped_5lexer_GenTokenState.tp_print = 0;
  if (PyObject_SetAttrString(__pyx_m, "GenTokenState", (PyObject *)&__pyx_type_6typped_5lexer_GenTokenState) < 0) __PYX_ERR(0, 740, __pyx_L1_error)
  if (__Pyx_setup_reduce((PyObject*)&__pyx_type_6typped_5lexer_GenTokenState) < 0) __PYX_ERR(0, 740, __pyx_L1_error)
  __pyx_ptype_6typped_5lexer_GenTokenState = &__pyx_type_6typped_5lexer_GenTokenState;
  if (PyType_Ready(&__pyx_type_6typped_5lexer___pyx_scope_struct__string_tree_repr) < 0) __PYX_ERR(0, 344, __pyx_L1_error)
  __pyx_type_6typped_5lexer___pyx_scope_struct__string_tree_repr.tp_print = 0;
  __pyx_ptype_6typped_5lexer___pyx_scope_struct__string_tree_repr = &__pyx_type_6typped_5lexer___pyx_scope_struct__string_tree_repr;
  if (PyType_Ready(&__pyx_type_6typped_5lexer___pyx_scope_struct_1_genexpr) < 0) __PYX_ERR(0, 352, __pyx_L1_error)
  __pyx_type_6typped_5lexer___pyx_scope_struct_1_genexpr.tp_print = 0;
  __pyx_ptype_6typped_5lexer___pyx_scope_struct_1_genexpr = &__pyx_type_6typped_5lexer___pyx_scope_struct_1_genexpr;
  if (PyType_Ready(&__pyx_type_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory) < 0) __PYX_ERR(0, 373, __pyx_L1_error)
  __pyx_type_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory.tp_print = 0;
  __pyx_ptype_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory = &__pyx_type_6typped_5lexer___pyx_scope_struct_2_basic_token_subclass_factory;
  /*--- Type import code ---*/
  __pyx_ptype_6typped_7matcher_Matcher = __Pyx_ImportType("typped.matcher", "Matcher", sizeof(struct __pyx_obj_6typped_7matcher_Matcher), 1); if (unlikely(!__pyx_ptype_6typped_7matcher_Matcher)) __PYX_ERR(3, 7, __pyx_L1_error)
  __pyx_vtabptr_6typped_7matcher_Matcher = (struct __pyx_vtabstruct_6typped_7matcher_Matcher*)__Pyx_GetVtable(__pyx_ptype_6typped_7matcher_Matcher->tp_dict); if (unlikely(!__pyx_vtabptr_6typped_7matcher_Matcher)) __PYX_ERR(3, 7, __pyx_L1_error)
  /*--- Variable import code ---*/
  /*--- Function import code ---*/
  /*--- Execution code ---*/
  #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
  if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif

  /* "typped/lexer.py":208
 * 
 * # Run tests when invoked as a script.
 * if __name__ == "__main__":             # <<<<<<<<<<<<<<
 *     import pytest_helper
 *     pytest_helper.script_run(["../../test/test_pratt_parser.py",
 */
  __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_name); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_t_1, __pyx_n_s_main, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 208, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "typped/lexer.py":209
 * # Run tests when invoked as a script.
 * if __name__ == "__main__":
 *     import pytest_helper             # <<<<<<<<<<<<<<
 *     pytest_helper.script_run(["../../test/test_pratt_parser.py",
 *                               "../../test/test_matcher.py",
 */
    __pyx_t_1 = __Pyx_Import(__pyx_n_s_pytest_helper, 0, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 209, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (PyDict_SetItem(__pyx_d, __pyx_n_s_pytest_helper, __pyx_t_1) < 0) __PYX_ERR(0, 209, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "typped/lexer.py":210
 * if __name__ == "__main__":
 *     import pytest_helper
 *     pytest_helper.script_run(["../../test/test_pratt_parser.py",             # <<<<<<<<<<<<<<
 *                               "../../test/test_matcher.py",
 *                               "../../test/test_lexer.py",
 */
    __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_pytest_helper); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 210, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_script_run); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 210, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyList_New(3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 210, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_kp_s_test_test_pratt_parser_py);
    __Pyx_GIVEREF(__pyx_kp_s_test_test_pratt_parser_py);
    PyList_SET_ITEM(__pyx_t_1, 0, __pyx_kp_s_test_test_pratt_parser_py);
    __Pyx_INCREF(__pyx_kp_s_test_test_matcher_py);
    __Pyx_GIVEREF(__pyx_kp_s_test_test_matcher_py);
    PyList_SET_ITEM(__pyx_t_1, 1, __pyx_kp_s_test_test_matcher_py);
    __Pyx_INCREF(__pyx_kp_s_test_test_lexer_py);
    __Pyx_GIVEREF(__pyx_kp_s_test_test_lexer_py);
    PyList_SET_ITEM(__pyx_t_1, 2, __pyx_kp_s_test_test_lexer_py);
    __pyx_t_4 = PyTuple_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 210, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "typped/lexer.py":214
 *                               "../../test/test_lexer.py",
 *                               ],
 *                               pytest_args="-v")             # <<<<<<<<<<<<<<
 * 
 * import collections
 */
    __pyx_t_1 = PyDict_New(); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 214, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (PyDict_SetItem(__pyx_t_1, __pyx_n_s_pytest_args, __pyx_kp_s_v) < 0) __PYX_ERR(0, 214, __pyx_L1_error)

    /* "typped/lexer.py":210
 * if __name__ == "__main__":
 *     import pytest_helper
 *     pytest_helper.script_run(["../../test/test_pratt_parser.py",             # <<<<<<<<<<<<<<
 *                               "../../test/test_matcher.py",
 *                               "../../test/test_lexer.py",
 */
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_4, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 210, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "typped/lexer.py":208
 * 
 * # Run tests when invoked as a script.
 * if __name__ == "__main__":             # <<<<<<<<<<<<<<
 *     import pytest_helper
 *     pytest_helper.script_run(["../../test/test_pratt_parser.py",
 */
  }

  /* "typped/lexer.py":216
 *                               pytest_args="-v")
 * 
 * import collections             # <<<<<<<<<<<<<<
 * from .shared_settings_and_exceptions import LexerException, is_subclass_of
 * from .matcher import Matcher
 */
  __pyx_t_5 = __Pyx_Import(__pyx_n_s_collections, 0, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 216, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_collections, __pyx_t_5) < 0) __PYX_ERR(0, 216, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":217
 * 
 * import collections
 * from .shared_settings_and_exceptions import LexerException, is_subclass_of             # <<<<<<<<<<<<<<
 * from .matcher import Matcher
 * 
 */
  __pyx_t_5 = PyList_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 217, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_INCREF(__pyx_n_s_LexerException);
  __Pyx_GIVEREF(__pyx_n_s_LexerException);
  PyList_SET_ITEM(__pyx_t_5, 0, __pyx_n_s_LexerException);
  __Pyx_INCREF(__pyx_n_s_is_subclass_of);
  __Pyx_GIVEREF(__pyx_n_s_is_subclass_of);
  PyList_SET_ITEM(__pyx_t_5, 1, __pyx_n_s_is_subclass_of);
  __pyx_t_1 = __Pyx_Import(__pyx_n_s_shared_settings_and_exceptions, __pyx_t_5, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 217, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = __Pyx_ImportFrom(__pyx_t_1, __pyx_n_s_LexerException); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 217, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_LexerException, __pyx_t_5) < 0) __PYX_ERR(0, 217, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = __Pyx_ImportFrom(__pyx_t_1, __pyx_n_s_is_subclass_of); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 217, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_is_subclass_of, __pyx_t_5) < 0) __PYX_ERR(0, 217, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "typped/lexer.py":218
 * import collections
 * from .shared_settings_and_exceptions import LexerException, is_subclass_of
 * from .matcher import Matcher             # <<<<<<<<<<<<<<
 * 
 * #
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 218, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_Matcher);
  __Pyx_GIVEREF(__pyx_n_s_Matcher);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_Matcher);
  __pyx_t_5 = __Pyx_Import(__pyx_n_s_matcher, __pyx_t_1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 218, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":224
 * #
 * 
 * class TokenNode(object):             # <<<<<<<<<<<<<<
 *     """The base class for token objects.  Each different kind of token is represented
 *     by a subclass of this class.  Instances of the tokens in the program text are
 */
  __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 224, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_INCREF(__pyx_builtin_object);
  __Pyx_GIVEREF(__pyx_builtin_object);
  PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_builtin_object);
  __pyx_t_1 = __Pyx_CalculateMetaclass(NULL, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 224, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = __Pyx_Py3MetaclassPrepare(__pyx_t_1, __pyx_t_5, __pyx_n_s_TokenNode_2, __pyx_n_s_TokenNode_2, (PyObject *) NULL, __pyx_n_s_typped_lexer, __pyx_kp_s_The_base_class_for_token_objects); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 224, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "typped/lexer.py":239
 *     node, i.e. `t_node[0]` would be the leftmost child."""
 * 
 *     token_label = None # A label for subclasses representing kinds of tokens.             # <<<<<<<<<<<<<<
 *     original_matched_string = "" # Default, for begin- and end-tokens.
 * 
 */
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_token_label, Py_None) < 0) __PYX_ERR(0, 239, __pyx_L1_error)

  /* "typped/lexer.py":240
 * 
 *     token_label = None # A label for subclasses representing kinds of tokens.
 *     original_matched_string = "" # Default, for begin- and end-tokens.             # <<<<<<<<<<<<<<
 * 
 *     def __init__(self):
 */
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_original_matched_string, __pyx_kp_s__21) < 0) __PYX_ERR(0, 240, __pyx_L1_error)

  /* "typped/lexer.py":242
 *     original_matched_string = "" # Default, for begin- and end-tokens.
 * 
 *     def __init__(self):             # <<<<<<<<<<<<<<
 *         """Initialize the TokenNode."""
 *         self.ignored_before = [] # Values ignored by lexer just before.
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_1__init__, 0, __pyx_n_s_TokenNode___init, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__26)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 242, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_init, __pyx_t_3) < 0) __PYX_ERR(0, 242, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":249
 *         self.parent = None # The parent in a tree of nodes.
 * 
 *     def original_text(self):             # <<<<<<<<<<<<<<
 *         """Return the original text that was read in lexing the token, including
 *         any ignored text."""
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_3original_text, 0, __pyx_n_s_TokenNode_original_text, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__28)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 249, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_original_text, __pyx_t_3) < 0) __PYX_ERR(0, 249, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":257
 *         return self.original_matched_string
 * 
 *     def ignored_before_labels(self):             # <<<<<<<<<<<<<<
 *         """Return the list of token labels of tokens which were ignored just
 *         before this token."""
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_5ignored_before_labels, 0, __pyx_n_s_TokenNode_ignored_before_labels, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__30)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 257, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_ignored_before_labels, __pyx_t_3) < 0) __PYX_ERR(0, 257, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":262
 *         return [t.token_label for t in self.ignored_before]
 * 
 *     def append_children(self, *token_nodes):             # <<<<<<<<<<<<<<
 *         """Append all the arguments as children, also setting their parent to self."""
 *         for t in token_nodes:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_7append_children, 0, __pyx_n_s_TokenNode_append_children, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__32)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 262, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_append_children, __pyx_t_3) < 0) __PYX_ERR(0, 262, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":268
 *             t.parent = self
 * 
 *     def __getitem__(self, index):             # <<<<<<<<<<<<<<
 *         """Use indexing to access the children.  No check is made, however, to see
 *         if the correct number of children exist."""
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_9__getitem__, 0, __pyx_n_s_TokenNode___getitem, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__34)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 268, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_getitem, __pyx_t_3) < 0) __PYX_ERR(0, 268, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":273
 *         return self.children[index]
 * 
 *     def convert_to_AST(self, convert_TokenNode_to_AST_node_fun):             # <<<<<<<<<<<<<<
 *         """Call this on the root node.  Converts the token tree to an abstract
 *         syntax tree.  This basically converts the nodes one-to-one to a more
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_11convert_to_AST, 0, __pyx_n_s_TokenNode_convert_to_AST, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__36)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 273, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_convert_to_AST, __pyx_t_3) < 0) __PYX_ERR(0, 273, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":292
 *     #
 * 
 *     def is_begin_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is the begin-token."""
 *         return self.token_label == self.token_table.begin_token_label
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_13is_begin_token, 0, __pyx_n_s_TokenNode_is_begin_token, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__38)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 292, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_is_begin_token, __pyx_t_3) < 0) __PYX_ERR(0, 292, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":296
 *         return self.token_label == self.token_table.begin_token_label
 * 
 *     def is_end_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is the end-token."""
 *         return self.token_label == self.token_table.end_token_label
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_15is_end_token, 0, __pyx_n_s_TokenNode_is_end_token, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__40)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 296, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_is_end_token, __pyx_t_3) < 0) __PYX_ERR(0, 296, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":300
 *         return self.token_label == self.token_table.end_token_label
 * 
 *     def is_begin_or_end_token(self):             # <<<<<<<<<<<<<<
 *         """Test whether this token is either the begin- or end-token."""
 *         return self.is_begin_token() or self.is_end_token()
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_17is_begin_or_end_token, 0, __pyx_n_s_TokenNode_is_begin_or_end_token, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__42)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 300, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_is_begin_or_end_token, __pyx_t_3) < 0) __PYX_ERR(0, 300, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":309
 *     #
 * 
 *     def traditional_repr(self):             # <<<<<<<<<<<<<<
 *         """Representation as a string that looks like class initialization."""
 *         return "TokenNode()"
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_19traditional_repr, 0, __pyx_n_s_TokenNode_traditional_repr, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__44)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 309, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_traditional_repr, __pyx_t_3) < 0) __PYX_ERR(0, 309, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":313
 *         return "TokenNode()"
 * 
 *     def value_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as its value."""
 *         return str(self.value)
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_21value_repr, 0, __pyx_n_s_TokenNode_value_repr, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__46)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 313, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_value_repr, __pyx_t_3) < 0) __PYX_ERR(0, 313, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":317
 *         return str(self.value)
 * 
 *     def label_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as its token label."""
 *         return str(self.token_label)
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_23label_repr, 0, __pyx_n_s_TokenNode_label_repr, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__48)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 317, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_label_repr, __pyx_t_3) < 0) __PYX_ERR(0, 317, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":321
 *         return str(self.token_label)
 * 
 *     def summary_repr(self):             # <<<<<<<<<<<<<<
 *         """Token representation as a summarizing string containing both the label and
 *         the value."""
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_25summary_repr, 0, __pyx_n_s_TokenNode_summary_repr, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__50)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 321, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_summary_repr, __pyx_t_3) < 0) __PYX_ERR(0, 321, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":329
 *         return "<{0},{1}>".format(self.token_label, value_str)
 * 
 *     def tree_repr(self, indent=0):             # <<<<<<<<<<<<<<
 *         """Token representation as the root of a parse subtree, with formatting.
 *         The optional `indent` parameter can be either an indent string or else
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_27tree_repr, 0, __pyx_n_s_TokenNode_tree_repr, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__52)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 329, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__53);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_tree_repr, __pyx_t_3) < 0) __PYX_ERR(0, 329, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":344
 *         return string
 * 
 *     def string_tree_repr(self, only_vals=False, only_labels=False):             # <<<<<<<<<<<<<<
 *         """Token representation as the root of a parse subtree, in a string format.
 *         This is the default representation, used for `__repr__`."""
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_29string_tree_repr, 0, __pyx_n_s_TokenNode_string_tree_repr, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__55)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 344, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__56);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_string_tree_repr, __pyx_t_3) < 0) __PYX_ERR(0, 344, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":356
 *         return string
 * 
 *     def old_repr(self):             # <<<<<<<<<<<<<<
 *         """This old representation is kept *only* because it is used in some tests."""
 *         if self.token_label == "k_number":
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9TokenNode_31old_repr, 0, __pyx_n_s_TokenNode_old_repr, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__58)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 356, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_old_repr, __pyx_t_3) < 0) __PYX_ERR(0, 356, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":370
 *             str_val += "]"
 *             return str_val
 *     __repr__ = string_tree_repr             # <<<<<<<<<<<<<<
 * 
 * 
 */
  __pyx_t_3 = PyObject_GetItem(__pyx_t_4, __pyx_n_s_string_tree_repr);
  if (unlikely(!__pyx_t_3)) {
    PyErr_Clear();
    __pyx_t_3 = __Pyx_GetModuleGlobalName(__pyx_n_s_string_tree_repr);
  }
  if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 370, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyObject_SetItem(__pyx_t_4, __pyx_n_s_repr, __pyx_t_3) < 0) __PYX_ERR(0, 370, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "typped/lexer.py":224
 * #
 * 
 * class TokenNode(object):             # <<<<<<<<<<<<<<
 *     """The base class for token objects.  Each different kind of token is represented
 *     by a subclass of this class.  Instances of the tokens in the program text are
 */
  __pyx_t_3 = __Pyx_Py3ClassCreate(__pyx_t_1, __pyx_n_s_TokenNode_2, __pyx_t_5, __pyx_t_4, NULL, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 224, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_TokenNode_2, __pyx_t_3) < 0) __PYX_ERR(0, 224, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":373
 * 
 * 
 * def basic_token_subclass_factory():             # <<<<<<<<<<<<<<
 *     """Create and return a new token subclass representing tokens with label
 *     `token_label`.  This function is called from the `_create_token_subclass`
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_1basic_token_subclass_factory, 0, __pyx_n_s_basic_token_subclass_factory, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__60)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 373, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_basic_token_subclass_factory, __pyx_t_5) < 0) __PYX_ERR(0, 373, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":416
 *     Each `Lexer` instance contains an instance of this class to save the subclasses for
 *     the kinds of tokens which have been defined for it."""
 *     def __init__(self, token_subclass_factory_fun=basic_token_subclass_factory,             # <<<<<<<<<<<<<<
 *                        pattern_matcher_instance=None):
 *         """Initialize the token table.
 */
  __pyx_t_5 = __Pyx_GetModuleGlobalName(__pyx_n_s_basic_token_subclass_factory); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 416, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_k__11 = __pyx_t_5;
  __Pyx_GIVEREF(__pyx_t_5);
  __pyx_t_5 = 0;

  /* "typped/lexer.py":472
 *         return TokenSubclass
 * 
 *     def undef_token_subclass(self, token_label):             # <<<<<<<<<<<<<<
 *         """Un-define the token with label token_label.  The `TokenNode` subclass
 *         previously associated with that label is removed from the dictionary."""
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_10TokenTable_7undef_token_subclass, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenTable_undef_token_subclass, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__62)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 472, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenTable->tp_dict, __pyx_n_s_undef_token_subclass, __pyx_t_5) < 0) __PYX_ERR(0, 472, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenTable);

  /* "typped/lexer.py":480
 *             return # Not saved in dict, ignore.
 * 
 *     def undef_token(self, token_label):             # <<<<<<<<<<<<<<
 *         """Undefine the token corresponding to `token_label`."""
 *         # Remove from the list of defined tokens and from the token table.
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_10TokenTable_9undef_token, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenTable_undef_token, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__64)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 480, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenTable->tp_dict, __pyx_n_s_undef_token, __pyx_t_5) < 0) __PYX_ERR(0, 480, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenTable);

  /* "typped/lexer.py":486
 *         self.pattern_matcher.undef_pattern(token_label)
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """Define a token and the regex to recognize it.  Returns the new
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_10TokenTable_11def_token, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenTable_def_token, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__66)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 486, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenTable->tp_dict, __pyx_n_s_def_token, __pyx_t_5) < 0) __PYX_ERR(0, 486, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenTable);

  /* "typped/lexer.py":522
 *         return tok
 * 
 *     def def_begin_token(self, begin_token_label):             # <<<<<<<<<<<<<<
 *         """Define the begin-token.  The lexer's `def_begin_end_tokens` method
 *         should usually be called instead."""
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_10TokenTable_13def_begin_token, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenTable_def_begin_token, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__68)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 522, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenTable->tp_dict, __pyx_n_s_def_begin_token, __pyx_t_5) < 0) __PYX_ERR(0, 522, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenTable);

  /* "typped/lexer.py":530
 *         return tok
 * 
 *     def def_end_token(self, end_token_label):             # <<<<<<<<<<<<<<
 *         """Define the end-token.  The `def_begin_end_tokens` method should usually
 *         be called instead."""
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_10TokenTable_15def_end_token, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenTable_def_end_token, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__70)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 530, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenTable->tp_dict, __pyx_n_s_def_end_token, __pyx_t_5) < 0) __PYX_ERR(0, 530, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenTable);

  /* "typped/lexer.py":538
 *         return tok
 * 
 *     def get_next_token_label_and_value(self, program, prog_unprocessed_indices,             # <<<<<<<<<<<<<<
 *                                              ERROR_MSG_TEXT_SNIPPET_SIZE):
 *         """Return the next token label for the start of the current program
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_10TokenTable_17get_next_token_label_and_value, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenTable_get_next_token_label, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__72)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 538, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenTable->tp_dict, __pyx_n_s_get_next_token_label_and_value, __pyx_t_5) < 0) __PYX_ERR(0, 538, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenTable);

  /* "typped/lexer.py":547
 *                                               ERROR_MSG_TEXT_SNIPPET_SIZE)
 * 
 *     def ignored_tokens(self):             # <<<<<<<<<<<<<<
 *         """Return the set of ignored tokens."""
 *         return self.pattern_matcher.ignore_tokens
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_10TokenTable_19ignored_tokens, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenTable_ignored_tokens, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__74)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 547, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenTable->tp_dict, __pyx_n_s_ignored_tokens, __pyx_t_5) < 0) __PYX_ERR(0, 547, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenTable);

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self.begin_token_label, self.begin_token_subclass, self.end_token_label, self.end_token_subclass, self.lex, self.pattern_matcher, self.token_subclass_dict, self.token_subclassing_fun)
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_10TokenTable_21__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenTable___reduce_cython, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__76)); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_reduce_cython, __pyx_t_5) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_TokenTable, (type(self), 0xe1e7798, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_TokenTable__set_state(self, __pyx_state)
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_10TokenTable_23__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenTable___setstate_cython, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__78)); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_setstate_cython, __pyx_t_5) < 0) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":589
 *         self.reference_point = 0
 * 
 *     def reset(self, begin_token):             # <<<<<<<<<<<<<<
 *         """Initialize the token buffer, or clear an reset it.  Any saved
 *         offsets are no longer valid, but no check is made for that."""
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_11TokenBuffer_3reset, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenBuffer_reset, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__80)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 589, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenBuffer->tp_dict, __pyx_n_s_reset, __pyx_t_5) < 0) __PYX_ERR(0, 589, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenBuffer);

  /* "typped/lexer.py":597
 *         self._append(begin_token)
 * 
 *     def state_to_offset(self, state):             # <<<<<<<<<<<<<<
 *         """Return the offset into the current deque that corresponds to what
 *         was the offset (absolute index to the current token) at the time when
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_11TokenBuffer_5state_to_offset, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenBuffer_state_to_offset, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__82)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 597, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenBuffer->tp_dict, __pyx_n_s_state_to_offset, __pyx_t_5) < 0) __PYX_ERR(0, 597, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenBuffer);

  /* "typped/lexer.py":603
 *         return state - self.reference_point
 * 
 *     def get_state(self):             # <<<<<<<<<<<<<<
 *         """Return a buffer state indicator that can be returned to later.  The
 *         `go_back` or `push_back` methods of the lexer use this."""
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_11TokenBuffer_7get_state, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenBuffer_get_state, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__84)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 603, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenBuffer->tp_dict, __pyx_n_s_get_state, __pyx_t_5) < 0) __PYX_ERR(0, 603, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenBuffer);

  /* "typped/lexer.py":632
 *             raise TypeError("Invalid argument type in __getitem__ of TokenBuffer.")
 * 
 *     def num_saved_previous_tokens(self):             # <<<<<<<<<<<<<<
 *         """Return the number of tokens before the current token that are saved."""
 *         return self._offset_to_absolute(self.current_offset)
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_11TokenBuffer_11num_saved_previous_tokens, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenBuffer_num_saved_previous_t, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__86)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 632, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenBuffer->tp_dict, __pyx_n_s_num_saved_previous_tokens, __pyx_t_5) < 0) __PYX_ERR(0, 632, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenBuffer);

  /* "typped/lexer.py":636
 *         return self._offset_to_absolute(self.current_offset)
 * 
 *     def num_tokens_after_current(self):             # <<<<<<<<<<<<<<
 *         """An informational method.  Returns the number of tokens from
 *         the current token to the end of the token buffer.  Some may have been
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_11TokenBuffer_13num_tokens_after_current, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenBuffer_num_tokens_after_cur, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__88)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 636, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenBuffer->tp_dict, __pyx_n_s_num_tokens_after_current, __pyx_t_5) < 0) __PYX_ERR(0, 636, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenBuffer);

  /* "typped/lexer.py":644
 *         return len(self.token_buffer) - begin_point
 * 
 *     def move_forward(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Move the current token (i.e., the offset) forward by one.  This is
 *         the token buffer's equivalent of `next`, except that it returns
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_11TokenBuffer_15move_forward, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenBuffer_move_forward, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__90)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 644, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenBuffer->tp_dict, __pyx_n_s_move_forward, __pyx_t_5) < 0) __PYX_ERR(0, 644, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenBuffer);

  /* "typped/lexer.py":661
 *         return self[0]
 * 
 *     def move_back(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Move the current token (i.e., offset) back `num_toks` tokens.  Will
 *         always stop at the begin-token.  Users should check the condition if it
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_11TokenBuffer_17move_back, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenBuffer_move_back, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__92)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 661, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_TokenBuffer->tp_dict, __pyx_n_s_move_back, __pyx_t_5) < 0) __PYX_ERR(0, 661, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_TokenBuffer);

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self.current_offset, self.max_deque_size, self.max_peek, self.reference_point, self.token_buffer, self.token_getter_fun)
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_11TokenBuffer_19__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenBuffer___reduce_cython, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__94)); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_reduce_cython, __pyx_t_5) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_TokenBuffer, (type(self), 0x6999650, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_TokenBuffer__set_state(self, __pyx_state)
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_11TokenBuffer_21__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_TokenBuffer___setstate_cython, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__96)); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_setstate_cython, __pyx_t_5) < 0) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":742
 * class GenTokenState(object):
 *     """The state of the token_generator program execution."""
 *     ordinary = 1             # <<<<<<<<<<<<<<
 *     end = 2
 *     uninitialized = 3
 */
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState->tp_dict, __pyx_n_s_ordinary, __pyx_int_1) < 0) __PYX_ERR(0, 742, __pyx_L1_error)
  PyType_Modified(__pyx_ptype_6typped_5lexer_GenTokenState);

  /* "typped/lexer.py":743
 *     """The state of the token_generator program execution."""
 *     ordinary = 1
 *     end = 2             # <<<<<<<<<<<<<<
 *     uninitialized = 3
 * 
 */
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState->tp_dict, __pyx_n_s_end, __pyx_int_2) < 0) __PYX_ERR(0, 743, __pyx_L1_error)
  PyType_Modified(__pyx_ptype_6typped_5lexer_GenTokenState);

  /* "typped/lexer.py":744
 *     ordinary = 1
 *     end = 2
 *     uninitialized = 3             # <<<<<<<<<<<<<<
 * 
 * # The beginnings of a state tuple for the Lexer.  NOT YET USED AT ALL, but it would
 */
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_GenTokenState->tp_dict, __pyx_n_s_uninitialized, __pyx_int_3) < 0) __PYX_ERR(0, 744, __pyx_L1_error)
  PyType_Modified(__pyx_ptype_6typped_5lexer_GenTokenState);

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = ()
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_13GenTokenState_1__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_GenTokenState___reduce_cython, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__98)); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_reduce_cython, __pyx_t_5) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_GenTokenState, (type(self), 0xd41d8cd, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_GenTokenState__set_state(self, __pyx_state)
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_13GenTokenState_3__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_GenTokenState___setstate_cython, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__100)); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_setstate_cython, __pyx_t_5) < 0) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":748
 * # The beginnings of a state tuple for the Lexer.  NOT YET USED AT ALL, but it would
 * # be more elegant than the current ad hoc state restoration approach.
 * LexerState = collections.namedtuple("LexerState", [             # <<<<<<<<<<<<<<
 *                            "x",
 *                            "y",
 */
  __pyx_t_1 = __Pyx_GetModuleGlobalName(__pyx_n_s_collections); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 748, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_namedtuple); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 748, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyList_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 748, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_x);
  __Pyx_GIVEREF(__pyx_n_s_x);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_x);
  __Pyx_INCREF(__pyx_n_s_y);
  __Pyx_GIVEREF(__pyx_n_s_y);
  PyList_SET_ITEM(__pyx_t_1, 1, __pyx_n_s_y);
  __pyx_t_3 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_4, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_n_s_LexerState, __pyx_t_1};
    __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 748, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_n_s_LexerState, __pyx_t_1};
    __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 748, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else
  #endif
  {
    __pyx_t_7 = PyTuple_New(2+__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 748, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    if (__pyx_t_3) {
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    __Pyx_INCREF(__pyx_n_s_LexerState);
    __Pyx_GIVEREF(__pyx_n_s_LexerState);
    PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_6, __pyx_n_s_LexerState);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_6, __pyx_t_1);
    __pyx_t_1 = 0;
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_7, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 748, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_LexerState, __pyx_t_5) < 0) __PYX_ERR(0, 748, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":780
 *     own empty one."""
 * 
 *     ERROR_MSG_TEXT_SNIPPET_SIZE = 40 # Number of characters to show for context.             # <<<<<<<<<<<<<<
 *     DEFAULT_BEGIN = "k_begin" # Default label for begin-token.
 *     DEFAULT_END = "k_end" # Default label for end-token.
 */
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_ERROR_MSG_TEXT_SNIPPET_SIZE, __pyx_int_40) < 0) __PYX_ERR(0, 780, __pyx_L1_error)
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":781
 * 
 *     ERROR_MSG_TEXT_SNIPPET_SIZE = 40 # Number of characters to show for context.
 *     DEFAULT_BEGIN = "k_begin" # Default label for begin-token.             # <<<<<<<<<<<<<<
 *     DEFAULT_END = "k_end" # Default label for end-token.
 * 
 */
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_DEFAULT_BEGIN, __pyx_n_s_k_begin) < 0) __PYX_ERR(0, 781, __pyx_L1_error)
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":782
 *     ERROR_MSG_TEXT_SNIPPET_SIZE = 40 # Number of characters to show for context.
 *     DEFAULT_BEGIN = "k_begin" # Default label for begin-token.
 *     DEFAULT_END = "k_end" # Default label for end-token.             # <<<<<<<<<<<<<<
 * 
 *     #
 */
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_DEFAULT_END, __pyx_n_s_k_end) < 0) __PYX_ERR(0, 782, __pyx_L1_error)
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":812
 *                    final_mod_function=final_mod_function)
 * 
 *     def reset(self, token_table=None, max_peek_tokens=None,             # <<<<<<<<<<<<<<
 *                     max_deque_size=None, default_begin_end_tokens=False,
 *                     final_mod_function=None):
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_3reset, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_reset, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__102)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 812, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_reset, __pyx_t_5) < 0) __PYX_ERR(0, 812, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":852
 *         self.default_helper_exception = LexerException
 * 
 *     def set_token_table(self, token_table, go_back=0):             # <<<<<<<<<<<<<<
 *         """Sets the current `TokenTable` instance for the lexer to
 *         `token_table`.  This is called on initialization, but can also be
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_5set_token_table, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_set_token_table, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__104)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 852, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_set_token_table, __pyx_t_5) < 0) __PYX_ERR(0, 852, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":868
 *             self.go_back(0) # Re-scan the current token.
 * 
 *     def set_text(self, program,             # <<<<<<<<<<<<<<
 *                  reset_linenumber=True, reset_charnumber=True):
 *         # TODO: redefine to take a TextStream.  Be sure to also pass back position
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_7set_text, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_set_text, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__106)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 868, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_set_text, __pyx_t_5) < 0) __PYX_ERR(0, 868, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":906
 *         self.text_is_set = True
 * 
 *     def _initialize_token_buffer(self):             # <<<<<<<<<<<<<<
 *         """A utility routine to initialize (fill) the token buffer.  The
 *         `token_buffer[0]` slot is the current token.  The current token will be
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_9_initialize_token_buffer, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer__initialize_token_buffer, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__108)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 906, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_initialize_token_buffer, __pyx_t_5) < 0) __PYX_ERR(0, 906, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":928
 *     #
 * 
 *     def next(self, num=1):             # <<<<<<<<<<<<<<
 *         """Return the next token, consuming from the token stream.  Also sets
 *         `self.token` to the return value.  Returns one end-token and raises
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_11next, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_next, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__110)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 928, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_next, __pyx_t_5) < 0) __PYX_ERR(0, 928, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":969
 *         return self # Class provides its own __next__ method.
 * 
 *     def peek(self, num_toks=1):             # <<<<<<<<<<<<<<
 *         """Peek ahead in the token stream without consuming any tokens.  The
 *         argument `num_toks` is the number of tokens ahead to peek.  The default
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_17peek, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_peek, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__112)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 969, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_peek, __pyx_t_5) < 0) __PYX_ERR(0, 969, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":989
 *         return retval
 * 
 *     def move_back(self, num_toks=1, num_is_raw=False):             # <<<<<<<<<<<<<<
 *         """NOT YET IMPLEMENTED
 * 
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_19move_back, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_move_back, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__114)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 989, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_move_back, __pyx_t_5) < 0) __PYX_ERR(0, 989, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1061
 *         return popped_to_begin_token, current_token_is_first
 * 
 *     def go_back(self, num_toks=1, num_is_raw=False):             # <<<<<<<<<<<<<<
 *         """This method allows the lexer to go back in the token buffer by
 *         `num_toks` tokens.  The call `go_back(n)` will undo the effects of the
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_21go_back, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_go_back, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__116)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1061, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_go_back, __pyx_t_5) < 0) __PYX_ERR(0, 1061, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1150
 *         return self.token
 * 
 *     def get_current_state(self):             # <<<<<<<<<<<<<<
 *         """Get a lexer state that can be returned to with `go_back_to_state`.
 *         States become invalid after the text is reset, but no check is made."""
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_23get_current_state, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_get_current_state, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__118)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1150, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_get_current_state, __pyx_t_5) < 0) __PYX_ERR(0, 1150, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1155
 *         return self.token_buffer.get_state()
 * 
 *     def go_back_to_state(self, state):             # <<<<<<<<<<<<<<
 *         """Return the lexer to the state `state` saved from a previous call to
 *         `get_current_state`."""
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_25go_back_to_state, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_go_back_to_state, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__120)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1155, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_go_back_to_state, __pyx_t_5) < 0) __PYX_ERR(0, 1155, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1170
 *     #
 * 
 *     def curr_token_is_begin(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` method) is
 *         the begin-token."""
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_27curr_token_is_begin, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_curr_token_is_begin, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__122)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1170, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_curr_token_is_begin, __pyx_t_5) < 0) __PYX_ERR(0, 1170, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1175
 *         return self.token.is_begin_token()
 * 
 *     def curr_token_is_first(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` function)
 *         is the first actual token in the currently-set program text.  Resetting
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_29curr_token_is_first, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_curr_token_is_first, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__124)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1175, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_curr_token_is_first, __pyx_t_5) < 0) __PYX_ERR(0, 1175, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1183
 *         return self.token.is_first
 * 
 *     def ignored_before_curr(self):             # <<<<<<<<<<<<<<
 *         """Return the list of all tokens ignored just before `self.token` (the
 *         last token returned by the `next` function).  Useful for enforcing
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_31ignored_before_curr, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_ignored_before_curr, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__126)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1183, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_ignored_before_curr, __pyx_t_5) < 0) __PYX_ERR(0, 1183, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1191
 *         return self.token.ignored_before
 * 
 *     def curr_token_is_end(self):             # <<<<<<<<<<<<<<
 *         """True if `self.token` (the last one returned by the `next` method) is
 *         the end-token."""
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_33curr_token_is_end, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_curr_token_is_end, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__128)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1191, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_curr_token_is_end, __pyx_t_5) < 0) __PYX_ERR(0, 1191, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1196
 *         return self.token.is_end_token()
 * 
 *     def is_defined_token_label(self, token_label):             # <<<<<<<<<<<<<<
 *         """Return true if `token` is currently defined as a token label."""
 *         return self.token_table.is_defined_token_label()
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_35is_defined_token_label, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_is_defined_token_label, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__130)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1196, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_is_defined_token_label, __pyx_t_5) < 0) __PYX_ERR(0, 1196, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1200
 *         return self.token_table.is_defined_token_label()
 * 
 *     def last_n_tokens_original_text(self, n):             # <<<<<<<<<<<<<<
 *         """Returns the original text parsed by the last `n` tokens (back from
 *         and including the current token).  This routine is mainly used to make
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_37last_n_tokens_original_text, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_last_n_tokens_original_tex, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__132)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1200, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_last_n_tokens_original_text, __pyx_t_5) < 0) __PYX_ERR(0, 1200, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1214
 *         return full_string
 * 
 *     def get_unprocessed_text(self, peek=1):             # <<<<<<<<<<<<<<
 *         """Return all the text that is set but not yet processed.  Returns
 *         `None` if no text is currently set.  The current token is assumed
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_39get_unprocessed_text, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_get_unprocessed_text, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__134)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1214, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_get_unprocessed_text, __pyx_t_5) < 0) __PYX_ERR(0, 1214, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1227
 *         return text
 * 
 *     def get_processed_text(self, peek=1):             # <<<<<<<<<<<<<<
 *         """Return all the text that is set and has been processed.  Returns
 *         `None` if no text is currently set.  The current token is assumed
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_41get_processed_text, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_get_processed_text, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__136)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1227, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_get_processed_text, __pyx_t_5) < 0) __PYX_ERR(0, 1227, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1244
 *     #
 * 
 *     def def_token(self, token_label, regex_string, on_ties=0, ignore=False,             # <<<<<<<<<<<<<<
 *                   matcher_options=None):
 *         """A convenience method to define a token. It calls the corresponding
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_43def_token, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_def_token, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__138)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1244, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_def_token, __pyx_t_5) < 0) __PYX_ERR(0, 1244, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1253
 *         return new_subclass
 * 
 *     def undef_token(self, token_label):             # <<<<<<<<<<<<<<
 *         """A convenience function to call the corresponding `undef_token` of
 *         the current `TokenTable` instance associated with the Lexer."""
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_45undef_token, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_undef_token, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__140)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1253, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_undef_token, __pyx_t_5) < 0) __PYX_ERR(0, 1253, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1258
 *         self.token_table.undef_token(token_label)
 * 
 *     def def_ignored_token(self, token_label, regex_string, on_ties=0,             # <<<<<<<<<<<<<<
 *                           matcher_options=None):
 *         """A convenience function to define an ignored token without setting
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_47def_ignored_token, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_def_ignored_token, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__142)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1258, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_def_ignored_token, __pyx_t_5) < 0) __PYX_ERR(0, 1258, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1265
 *                               matcher_options=matcher_options)
 * 
 *     def def_multi_tokens(self, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *         """A convenience function, to define multiple tokens at once.  Each element
 *         of the passed-in list should be a tuple containing the arguments to the
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_49def_multi_tokens, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_def_multi_tokens, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__144)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1265, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_def_multi_tokens, __pyx_t_5) < 0) __PYX_ERR(0, 1265, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1273
 *         return multi_funcall(self.def_token, tuple_list, **kwargs)
 * 
 *     def def_multi_ignored_tokens(self, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *         """A convenience function, to define multiple tokens at once with
 *         `ignore=True` set.  Each element of the passed-in list should be a tuple
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_51def_multi_ignored_tokens, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_def_multi_ignored_tokens, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__146)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1273, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_def_multi_ignored_tokens, __pyx_t_5) < 0) __PYX_ERR(0, 1273, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1281
 *         return multi_funcall(self.def_ignored_token, tuple_list, **kwargs)
 * 
 *     def def_begin_end_tokens(self, begin_token_label, end_token_label):             # <<<<<<<<<<<<<<
 *         """Define the sentinel tokens at the beginning and end of the token
 *         stream.  This method must be called before using the Lexer.  It will
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_53def_begin_end_tokens, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_def_begin_end_tokens, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__148)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1281, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_def_begin_end_tokens, __pyx_t_5) < 0) __PYX_ERR(0, 1281, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1298
 *         return begin_tok, end_tok
 * 
 *     def def_default_whitespace(self, space_label="k_space", space_regex=r"[ \t]+",             # <<<<<<<<<<<<<<
 *                         newline_label="k_newline", newline_regex=r"[\n\f\r\v]+",
 *                         matcher_options=None):
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_55def_default_whitespace, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_def_default_whitespace, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__150)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1298, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_def_default_whitespace, __pyx_t_5) < 0) __PYX_ERR(0, 1298, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1311
 *     #
 * 
 *     def match_next(self, token_label_to_match, peeklevel=1, consume=True,             # <<<<<<<<<<<<<<
 *                    raise_on_fail=False, raise_on_success=False,
 *                    err_msg_tokens=3):
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_57match_next, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_match_next, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__152)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1311, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_match_next, __pyx_t_5) < 0) __PYX_ERR(0, 1311, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1367
 * 
 *     # TODO document these utilities......
 *     def in_ignored_tokens(self, token_label_to_match,             # <<<<<<<<<<<<<<
 *                           raise_on_fail=False, raise_on_success=False):
 *         """A utility function to test if a particular token label is among
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_59in_ignored_tokens, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_in_ignored_tokens, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__154)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1367, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_in_ignored_tokens, __pyx_t_5) < 0) __PYX_ERR(0, 1367, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1394
 *         return retval
 * 
 *     def no_ignored_after(self, raise_on_fail=False, raise_on_success=False):             # <<<<<<<<<<<<<<
 *         """A boolean utility function to test if any tokens were ignored
 *         between current token and lookahead.  Like `match_next`, this method
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_61no_ignored_after, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_no_ignored_after, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__156)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1394, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_no_ignored_after, __pyx_t_5) < 0) __PYX_ERR(0, 1394, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1421
 *         return retval
 * 
 *     def no_ignored_before(self, raise_on_fail=False, raise_on_success=False):             # <<<<<<<<<<<<<<
 *         """A boolean utility function to test if any tokens were ignored between
 *         previous token and current token.  Like `match_next`, this method
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_63no_ignored_before, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer_no_ignored_before, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__158)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_no_ignored_before, __pyx_t_5) < 0) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "typped/lexer.py":1449
 *     #
 * 
 *     def _unbuffered_token_getter(self):             # <<<<<<<<<<<<<<
 *         """This routine generates tokens from the program text in the attribute
 *         `self.program`.  It does not modify the program itself, but keeps slice
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_65_unbuffered_token_getter, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer__unbuffered_token_getter, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__160)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem((PyObject *)__pyx_ptype_6typped_5lexer_Lexer->tp_dict, __pyx_n_s_unbuffered_token_getter, __pyx_t_5) < 0) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  PyType_Modified(__pyx_ptype_6typped_5lexer_Lexer);

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     cdef bint use_setstate
 *     state = (self._curr_token_is_first, self._returned_first_token, self.all_token_count, self.already_returned_end_token, self.default_helper_exception, self.final_mod_function, self.non_ignored_token_count, self.prog_unprocessed, self.program, self.raw_linenumber, self.text_is_set, self.token, self.token_buffer, self.token_generator_state, self.token_table, self.upcoming_raw_charnumber, self.upcoming_raw_linenumber, self.upcoming_raw_total_chars)
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_67__reduce_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer___reduce_cython, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__162)); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_reduce_cython, __pyx_t_5) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "(tree fragment)":14
 *     else:
 *         return __pyx_unpickle_Lexer, (type(self), 0xd1c1092, state)
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     __pyx_unpickle_Lexer__set_state(self, __pyx_state)
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5Lexer_69__setstate_cython__, __Pyx_CYFUNCTION_CCLASS, __pyx_n_s_Lexer___setstate_cython, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__164)); if (unlikely(!__pyx_t_5)) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_setstate_cython, __pyx_t_5) < 0) __PYX_ERR(2, 14, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":1582
 * 
 * 
 * def multi_funcall(function, tuple_list, **kwargs):             # <<<<<<<<<<<<<<
 *     """A convenience function that takes a function (or method) and a list of tuples
 *     and calls `function` with the values in those tuple as arguments.
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_3multi_funcall, 0, __pyx_n_s_multi_funcall, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__166)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1582, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_multi_funcall, __pyx_t_5) < 0) __PYX_ERR(0, 1582, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":1601
 *     return tuple(retval_list)
 * 
 * def return_first_exception(*args):             # <<<<<<<<<<<<<<
 *     """Go down the argument list and return the first object that is a
 *     subclass of the `Exception` class.  Arguments do not need to all be
 */
  __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_5return_first_exception, 0, __pyx_n_s_return_first_exception, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__168)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1601, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_return_first_exception, __pyx_t_5) < 0) __PYX_ERR(0, 1601, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "typped/lexer.py":1616
 * #
 * 
 * class BufferIndexError(LexerException):             # <<<<<<<<<<<<<<
 *     """Raised on attempts to read past the beginning or the end of the buffer
 *     (such as in `peek` methods)."""
 */
  __pyx_t_5 = __Pyx_GetModuleGlobalName(__pyx_n_s_LexerException); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1616, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_4 = PyTuple_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1616, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_5);
  PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_5);
  __pyx_t_5 = 0;
  __pyx_t_5 = __Pyx_CalculateMetaclass(NULL, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1616, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_7 = __Pyx_Py3MetaclassPrepare(__pyx_t_5, __pyx_t_4, __pyx_n_s_BufferIndexError, __pyx_n_s_BufferIndexError, (PyObject *) NULL, __pyx_n_s_typped_lexer, __pyx_kp_s_Raised_on_attempts_to_read_past); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1616, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_1 = __Pyx_Py3ClassCreate(__pyx_t_5, __pyx_n_s_BufferIndexError, __pyx_t_4, __pyx_t_7, NULL, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1616, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_BufferIndexError, __pyx_t_1) < 0) __PYX_ERR(0, 1616, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "(tree fragment)":1
 * def __pyx_unpickle_TokenTable(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0xe1e7798:
 *         from pickle import PickleError
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_7__pyx_unpickle_TokenTable, 0, __pyx_n_s_pyx_unpickle_TokenTable, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__170)); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_TokenTable, __pyx_t_4) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "(tree fragment)":9
 *         __pyx_unpickle_TokenTable__set_state(<TokenTable> result, __pyx_state)
 *     return result
 * cdef __pyx_unpickle_TokenTable__set_state(TokenTable result, tuple __pyx_state):             # <<<<<<<<<<<<<<
 *     result.begin_token_label = __pyx_state[0]; result.begin_token_subclass = __pyx_state[1]; result.end_token_label = __pyx_state[2]; result.end_token_subclass = __pyx_state[3]; result.lex = __pyx_state[4]; result.pattern_matcher = __pyx_state[5]; result.token_subclass_dict = __pyx_state[6]; result.token_subclassing_fun = __pyx_state[7]
 *     if hasattr(result, '__dict__'):
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_9__pyx_unpickle_TokenBuffer, 0, __pyx_n_s_pyx_unpickle_TokenBuffer, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__172)); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_TokenBuffer, __pyx_t_4) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "(tree fragment)":1
 * def __pyx_unpickle_GenTokenState(__pyx_type, long __pyx_checksum, __pyx_state):             # <<<<<<<<<<<<<<
 *     if __pyx_checksum != 0xd41d8cd:
 *         from pickle import PickleError
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_11__pyx_unpickle_GenTokenState, 0, __pyx_n_s_pyx_unpickle_GenTokenState, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__174)); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_GenTokenState, __pyx_t_4) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "(tree fragment)":9
 *         __pyx_unpickle_GenTokenState__set_state(<GenTokenState> result, __pyx_state)
 *     return result
 * cdef __pyx_unpickle_GenTokenState__set_state(GenTokenState result, tuple __pyx_state):             # <<<<<<<<<<<<<<
 *     if hasattr(result, '__dict__'):
 *         result.__dict__.update(__pyx_state[0])
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_6typped_5lexer_13__pyx_unpickle_Lexer, 0, __pyx_n_s_pyx_unpickle_Lexer, NULL, __pyx_n_s_typped_lexer, __pyx_d, ((PyObject *)__pyx_codeobj__176)); if (unlikely(!__pyx_t_4)) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_pyx_unpickle_Lexer, __pyx_t_4) < 0) __PYX_ERR(2, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "typped/lexer.py":1
 * # -*- coding: utf-8 -*-             # <<<<<<<<<<<<<<
 * """
 * 
 */
  __pyx_t_4 = PyDict_New(); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_4) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /*--- Wrapped vars code ---*/

  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  if (__pyx_m) {
    if (__pyx_d) {
      __Pyx_AddTraceback("init typped.lexer", 0, __pyx_lineno, __pyx_filename);
    }
    Py_DECREF(__pyx_m); __pyx_m = 0;
  } else if (!PyErr_Occurred()) {
    PyErr_SetString(PyExc_ImportError, "init typped.lexer");
  }
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  #if PY_MAJOR_VERSION < 3
  return;
  #else
  return __pyx_m;
  #endif
}

/* --- Runtime support code --- */
/* Refnanny */
#if CYTHON_REFNANNY
static __Pyx_RefNannyAPIStruct *__Pyx_RefNannyImportAPI(const char *modname) {
    PyObject *m = NULL, *p = NULL;
    void *r = NULL;
    m = PyImport_ImportModule((char *)modname);
    if (!m) goto end;
    p = PyObject_GetAttrString(m, (char *)"RefNannyAPI");
    if (!p) goto end;
    r = PyLong_AsVoidPtr(p);
end:
    Py_XDECREF(p);
    Py_XDECREF(m);
    return (__Pyx_RefNannyAPIStruct *)r;
}
#endif

/* GetBuiltinName */
static PyObject *__Pyx_GetBuiltinName(PyObject *name) {
    PyObject* result = __Pyx_PyObject_GetAttrStr(__pyx_b, name);
    if (unlikely(!result)) {
        PyErr_Format(PyExc_NameError,
#if PY_MAJOR_VERSION >= 3
            "name '%U' is not defined", name);
#else
            "name '%.200s' is not defined", PyString_AS_STRING(name));
#endif
    }
    return result;
}

/* RaiseDoubleKeywords */
static void __Pyx_RaiseDoubleKeywordsError(
    const char* func_name,
    PyObject* kw_name)
{
    PyErr_Format(PyExc_TypeError,
        #if PY_MAJOR_VERSION >= 3
        "%s() got multiple values for keyword argument '%U'", func_name, kw_name);
        #else
        "%s() got multiple values for keyword argument '%s'", func_name,
        PyString_AsString(kw_name));
        #endif
}

/* ParseKeywords */
static int __Pyx_ParseOptionalKeywords(
    PyObject *kwds,
    PyObject **argnames[],
    PyObject *kwds2,
    PyObject *values[],
    Py_ssize_t num_pos_args,
    const char* function_name)
{
    PyObject *key = 0, *value = 0;
    Py_ssize_t pos = 0;
    PyObject*** name;
    PyObject*** first_kw_arg = argnames + num_pos_args;
    while (PyDict_Next(kwds, &pos, &key, &value)) {
        name = first_kw_arg;
        while (*name && (**name != key)) name++;
        if (*name) {
            values[name-argnames] = value;
            continue;
        }
        name = first_kw_arg;
        #if PY_MAJOR_VERSION < 3
        if (likely(PyString_CheckExact(key)) || likely(PyString_Check(key))) {
            while (*name) {
                if ((CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**name) == PyString_GET_SIZE(key))
                        && _PyString_Eq(**name, key)) {
                    values[name-argnames] = value;
                    break;
                }
                name++;
            }
            if (*name) continue;
            else {
                PyObject*** argname = argnames;
                while (argname != first_kw_arg) {
                    if ((**argname == key) || (
                            (CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**argname) == PyString_GET_SIZE(key))
                             && _PyString_Eq(**argname, key))) {
                        goto arg_passed_twice;
                    }
                    argname++;
                }
            }
        } else
        #endif
        if (likely(PyUnicode_Check(key))) {
            while (*name) {
                int cmp = (**name == key) ? 0 :
                #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
                    (PyUnicode_GET_SIZE(**name) != PyUnicode_GET_SIZE(key)) ? 1 :
                #endif
                    PyUnicode_Compare(**name, key);
                if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
                if (cmp == 0) {
                    values[name-argnames] = value;
                    break;
                }
                name++;
            }
            if (*name) continue;
            else {
                PyObject*** argname = argnames;
                while (argname != first_kw_arg) {
                    int cmp = (**argname == key) ? 0 :
                    #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
                        (PyUnicode_GET_SIZE(**argname) != PyUnicode_GET_SIZE(key)) ? 1 :
                    #endif
                        PyUnicode_Compare(**argname, key);
                    if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
                    if (cmp == 0) goto arg_passed_twice;
                    argname++;
                }
            }
        } else
            goto invalid_keyword_type;
        if (kwds2) {
            if (unlikely(PyDict_SetItem(kwds2, key, value))) goto bad;
        } else {
            goto invalid_keyword;
        }
    }
    return 0;
arg_passed_twice:
    __Pyx_RaiseDoubleKeywordsError(function_name, key);
    goto bad;
invalid_keyword_type:
    PyErr_Format(PyExc_TypeError,
        "%.200s() keywords must be strings", function_name);
    goto bad;
invalid_keyword:
    PyErr_Format(PyExc_TypeError,
    #if PY_MAJOR_VERSION < 3
        "%.200s() got an unexpected keyword argument '%.200s'",
        function_name, PyString_AsString(key));
    #else
        "%s() got an unexpected keyword argument '%U'",
        function_name, key);
    #endif
bad:
    return -1;
}

/* RaiseArgTupleInvalid */
static void __Pyx_RaiseArgtupleInvalid(
    const char* func_name,
    int exact,
    Py_ssize_t num_min,
    Py_ssize_t num_max,
    Py_ssize_t num_found)
{
    Py_ssize_t num_expected;
    const char *more_or_less;
    if (num_found < num_min) {
        num_expected = num_min;
        more_or_less = "at least";
    } else {
        num_expected = num_max;
        more_or_less = "at most";
    }
    if (exact) {
        more_or_less = "exactly";
    }
    PyErr_Format(PyExc_TypeError,
                 "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
                 func_name, more_or_less, num_expected,
                 (num_expected == 1) ? "" : "s", num_found);
}

/* PyCFunctionFastCall */
#if CYTHON_FAST_PYCCALL
static CYTHON_INLINE PyObject * __Pyx_PyCFunction_FastCall(PyObject *func_obj, PyObject **args, Py_ssize_t nargs) {
    PyCFunctionObject *func = (PyCFunctionObject*)func_obj;
    PyCFunction meth = PyCFunction_GET_FUNCTION(func);
    PyObject *self = PyCFunction_GET_SELF(func);
    int flags = PyCFunction_GET_FLAGS(func);
    assert(PyCFunction_Check(func));
    assert(METH_FASTCALL == (flags & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_KEYWORDS)));
    assert(nargs >= 0);
    assert(nargs == 0 || args != NULL);
    /* _PyCFunction_FastCallDict() must not be called with an exception set,
       because it may clear it (directly or indirectly) and so the
       caller loses its exception */
    assert(!PyErr_Occurred());
    if ((PY_VERSION_HEX < 0x030700A0) || unlikely(flags & METH_KEYWORDS)) {
        return (*((__Pyx_PyCFunctionFastWithKeywords)meth)) (self, args, nargs, NULL);
    } else {
        return (*((__Pyx_PyCFunctionFast)meth)) (self, args, nargs);
    }
}
#endif

/* PyFunctionFastCall */
#if CYTHON_FAST_PYCALL
#include "frameobject.h"
static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
                                               PyObject *globals) {
    PyFrameObject *f;
    PyThreadState *tstate = PyThreadState_GET();
    PyObject **fastlocals;
    Py_ssize_t i;
    PyObject *result;
    assert(globals != NULL);
    /* XXX Perhaps we should create a specialized
       PyFrame_New() that doesn't take locals, but does
       take builtins without sanity checking them.
       */
    assert(tstate != NULL);
    f = PyFrame_New(tstate, co, globals, NULL);
    if (f == NULL) {
        return NULL;
    }
    fastlocals = f->f_localsplus;
    for (i = 0; i < na; i++) {
        Py_INCREF(*args);
        fastlocals[i] = *args++;
    }
    result = PyEval_EvalFrameEx(f,0);
    ++tstate->recursion_depth;
    Py_DECREF(f);
    --tstate->recursion_depth;
    return result;
}
#if 1 || PY_VERSION_HEX < 0x030600B1
static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, int nargs, PyObject *kwargs) {
    PyCodeObject *co = (PyCodeObject *)PyFunction_GET_CODE(func);
    PyObject *globals = PyFunction_GET_GLOBALS(func);
    PyObject *argdefs = PyFunction_GET_DEFAULTS(func);
    PyObject *closure;
#if PY_MAJOR_VERSION >= 3
    PyObject *kwdefs;
#endif
    PyObject *kwtuple, **k;
    PyObject **d;
    Py_ssize_t nd;
    Py_ssize_t nk;
    PyObject *result;
    assert(kwargs == NULL || PyDict_Check(kwargs));
    nk = kwargs ? PyDict_Size(kwargs) : 0;
    if (Py_EnterRecursiveCall((char*)" while calling a Python object")) {
        return NULL;
    }
    if (
#if PY_MAJOR_VERSION >= 3
            co->co_kwonlyargcount == 0 &&
#endif
            likely(kwargs == NULL || nk == 0) &&
            co->co_flags == (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)) {
        if (argdefs == NULL && co->co_argcount == nargs) {
            result = __Pyx_PyFunction_FastCallNoKw(co, args, nargs, globals);
            goto done;
        }
        else if (nargs == 0 && argdefs != NULL
                 && co->co_argcount == Py_SIZE(argdefs)) {
            /* function called with no arguments, but all parameters have
               a default value: use default values as arguments .*/
            args = &PyTuple_GET_ITEM(argdefs, 0);
            result =__Pyx_PyFunction_FastCallNoKw(co, args, Py_SIZE(argdefs), globals);
            goto done;
        }
    }
    if (kwargs != NULL) {
        Py_ssize_t pos, i;
        kwtuple = PyTuple_New(2 * nk);
        if (kwtuple == NULL) {
            result = NULL;
            goto done;
        }
        k = &PyTuple_GET_ITEM(kwtuple, 0);
        pos = i = 0;
        while (PyDict_Next(kwargs, &pos, &k[i], &k[i+1])) {
            Py_INCREF(k[i]);
            Py_INCREF(k[i+1]);
            i += 2;
        }
        nk = i / 2;
    }
    else {
        kwtuple = NULL;
        k = NULL;
    }
    closure = PyFunction_GET_CLOSURE(func);
#if PY_MAJOR_VERSION >= 3
    kwdefs = PyFunction_GET_KW_DEFAULTS(func);
#endif
    if (argdefs != NULL) {
        d = &PyTuple_GET_ITEM(argdefs, 0);
        nd = Py_SIZE(argdefs);
    }
    else {
        d = NULL;
        nd = 0;
    }
#if PY_MAJOR_VERSION >= 3
    result = PyEval_EvalCodeEx((PyObject*)co, globals, (PyObject *)NULL,
                               args, nargs,
                               k, (int)nk,
                               d, (int)nd, kwdefs, closure);
#else
    result = PyEval_EvalCodeEx(co, globals, (PyObject *)NULL,
                               args, nargs,
                               k, (int)nk,
                               d, (int)nd, closure);
#endif
    Py_XDECREF(kwtuple);
done:
    Py_LeaveRecursiveCall();
    return result;
}
#endif
#endif

/* PyObjectCall */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
    PyObject *result;
    ternaryfunc call = func->ob_type->tp_call;
    if (unlikely(!call))
        return PyObject_Call(func, arg, kw);
    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
        return NULL;
    result = (*call)(func, arg, kw);
    Py_LeaveRecursiveCall();
    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
        PyErr_SetString(
            PyExc_SystemError,
            "NULL result without error in PyObject_Call");
    }
    return result;
}
#endif

/* PyObjectCallMethO */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg) {
    PyObject *self, *result;
    PyCFunction cfunc;
    cfunc = PyCFunction_GET_FUNCTION(func);
    self = PyCFunction_GET_SELF(func);
    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
        return NULL;
    result = cfunc(self, arg);
    Py_LeaveRecursiveCall();
    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
        PyErr_SetString(
            PyExc_SystemError,
            "NULL result without error in PyObject_Call");
    }
    return result;
}
#endif

/* PyObjectCallOneArg */
#if CYTHON_COMPILING_IN_CPYTHON
static PyObject* __Pyx__PyObject_CallOneArg(PyObject *func, PyObject *arg) {
    PyObject *result;
    PyObject *args = PyTuple_New(1);
    if (unlikely(!args)) return NULL;
    Py_INCREF(arg);
    PyTuple_SET_ITEM(args, 0, arg);
    result = __Pyx_PyObject_Call(func, args, NULL);
    Py_DECREF(args);
    return result;
}
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
#if CYTHON_FAST_PYCALL
    if (PyFunction_Check(func)) {
        return __Pyx_PyFunction_FastCall(func, &arg, 1);
    }
#endif
    if (likely(PyCFunction_Check(func))) {
        if (likely(PyCFunction_GET_FLAGS(func) & METH_O)) {
            return __Pyx_PyObject_CallMethO(func, arg);
#if CYTHON_FAST_PYCCALL
        } else if (PyCFunction_GET_FLAGS(func) & METH_FASTCALL) {
            return __Pyx_PyCFunction_FastCall(func, &arg, 1);
#endif
        }
    }
    return __Pyx__PyObject_CallOneArg(func, arg);
}
#else
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
    PyObject *result;
    PyObject *args = PyTuple_Pack(1, arg);
    if (unlikely(!args)) return NULL;
    result = __Pyx_PyObject_Call(func, args, NULL);
    Py_DECREF(args);
    return result;
}
#endif

/* PyObjectCallMethod1 */
static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg) {
    PyObject *method, *result = NULL;
    method = __Pyx_PyObject_GetAttrStr(obj, method_name);
    if (unlikely(!method)) goto done;
#if CYTHON_UNPACK_METHODS
    if (likely(PyMethod_Check(method))) {
        PyObject *self = PyMethod_GET_SELF(method);
        if (likely(self)) {
            PyObject *args;
            PyObject *function = PyMethod_GET_FUNCTION(method);
            #if CYTHON_FAST_PYCALL
            if (PyFunction_Check(function)) {
                PyObject *args[2] = {self, arg};
                result = __Pyx_PyFunction_FastCall(function, args, 2);
                goto done;
            }
            #endif
            #if CYTHON_FAST_PYCCALL
            if (__Pyx_PyFastCFunction_Check(function)) {
                PyObject *args[2] = {self, arg};
                result = __Pyx_PyCFunction_FastCall(function, args, 2);
                goto done;
            }
            #endif
            args = PyTuple_New(2);
            if (unlikely(!args)) goto done;
            Py_INCREF(self);
            PyTuple_SET_ITEM(args, 0, self);
            Py_INCREF(arg);
            PyTuple_SET_ITEM(args, 1, arg);
            Py_INCREF(function);
            Py_DECREF(method); method = NULL;
            result = __Pyx_PyObject_Call(function, args, NULL);
            Py_DECREF(args);
            Py_DECREF(function);
            return result;
        }
    }
#endif
    result = __Pyx_PyObject_CallOneArg(method, arg);
done:
    Py_XDECREF(method);
    return result;
}

/* append */
static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x) {
    if (likely(PyList_CheckExact(L))) {
        if (unlikely(__Pyx_PyList_Append(L, x) < 0)) return -1;
    } else {
        PyObject* retval = __Pyx_PyObject_CallMethod1(L, __pyx_n_s_append, x);
        if (unlikely(!retval))
            return -1;
        Py_DECREF(retval);
    }
    return 0;
}

/* PyObjectCallNoArg */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallNoArg(PyObject *func) {
#if CYTHON_FAST_PYCALL
    if (PyFunction_Check(func)) {
        return __Pyx_PyFunction_FastCall(func, NULL, 0);
    }
#endif
#ifdef __Pyx_CyFunction_USED
    if (likely(PyCFunction_Check(func) || PyObject_TypeCheck(func, __pyx_CyFunctionType))) {
#else
    if (likely(PyCFunction_Check(func))) {
#endif
        if (likely(PyCFunction_GET_FLAGS(func) & METH_NOARGS)) {
            return __Pyx_PyObject_CallMethO(func, NULL);
        }
    }
    return __Pyx_PyObject_Call(func, __pyx_empty_tuple, NULL);
}
#endif

/* SaveResetException */
  #if CYTHON_FAST_THREAD_STATE
static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
    *type = tstate->exc_type;
    *value = tstate->exc_value;
    *tb = tstate->exc_traceback;
    Py_XINCREF(*type);
    Py_XINCREF(*value);
    Py_XINCREF(*tb);
}
static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
    PyObject *tmp_type, *tmp_value, *tmp_tb;
    tmp_type = tstate->exc_type;
    tmp_value = tstate->exc_value;
    tmp_tb = tstate->exc_traceback;
    tstate->exc_type = type;
    tstate->exc_value = value;
    tstate->exc_traceback = tb;
    Py_XDECREF(tmp_type);
    Py_XDECREF(tmp_value);
    Py_XDECREF(tmp_tb);
}
#endif

/* PyErrExceptionMatches */
  #if CYTHON_FAST_THREAD_STATE
static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err) {
    PyObject *exc_type = tstate->curexc_type;
    if (exc_type == err) return 1;
    if (unlikely(!exc_type)) return 0;
    return PyErr_GivenExceptionMatches(exc_type, err);
}
#endif

/* PyErrFetchRestore */
  #if CYTHON_FAST_THREAD_STATE
static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
    PyObject *tmp_type, *tmp_value, *tmp_tb;
    tmp_type = tstate->curexc_type;
    tmp_value = tstate->curexc_value;
    tmp_tb = tstate->curexc_traceback;
    tstate->curexc_type = type;
    tstate->curexc_value = value;
    tstate->curexc_traceback = tb;
    Py_XDECREF(tmp_type);
    Py_XDECREF(tmp_value);
    Py_XDECREF(tmp_tb);
}
static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
    *type = tstate->curexc_type;
    *value = tstate->curexc_value;
    *tb = tstate->curexc_traceback;
    tstate->curexc_type = 0;
    tstate->curexc_value = 0;
    tstate->curexc_traceback = 0;
}
#endif

/* None */
  static CYTHON_INLINE void __Pyx_RaiseClosureNameError(const char *varname) {
    PyErr_Format(PyExc_NameError, "free variable '%s' referenced before assignment in enclosing scope", varname);
}

/* StringJoin */
  #if !CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyBytes_Join(PyObject* sep, PyObject* values) {
    return PyObject_CallMethodObjArgs(sep, __pyx_n_s_join, values, NULL);
}
#endif

/* BytesEquals */
  static CYTHON_INLINE int __Pyx_PyBytes_Equals(PyObject* s1, PyObject* s2, int equals) {
#if CYTHON_COMPILING_IN_PYPY
    return PyObject_RichCompareBool(s1, s2, equals);
#else
    if (s1 == s2) {
        return (equals == Py_EQ);
    } else if (PyBytes_CheckExact(s1) & PyBytes_CheckExact(s2)) {
        const char *ps1, *ps2;
        Py_ssize_t length = PyBytes_GET_SIZE(s1);
        if (length != PyBytes_GET_SIZE(s2))
            return (equals == Py_NE);
        ps1 = PyBytes_AS_STRING(s1);
        ps2 = PyBytes_AS_STRING(s2);
        if (ps1[0] != ps2[0]) {
            return (equals == Py_NE);
        } else if (length == 1) {
            return (equals == Py_EQ);
        } else {
            int result;
#if CYTHON_USE_UNICODE_INTERNALS
            Py_hash_t hash1, hash2;
            hash1 = ((PyBytesObject*)s1)->ob_shash;
            hash2 = ((PyBytesObject*)s2)->ob_shash;
            if (hash1 != hash2 && hash1 != -1 && hash2 != -1) {
                return (equals == Py_NE);
            }
#endif
            result = memcmp(ps1, ps2, (size_t)length);
            return (equals == Py_EQ) ? (result == 0) : (result != 0);
        }
    } else if ((s1 == Py_None) & PyBytes_CheckExact(s2)) {
        return (equals == Py_NE);
    } else if ((s2 == Py_None) & PyBytes_CheckExact(s1)) {
        return (equals == Py_NE);
    } else {
        int result;
        PyObject* py_result = PyObject_RichCompare(s1, s2, equals);
        if (!py_result)
            return -1;
        result = __Pyx_PyObject_IsTrue(py_result);
        Py_DECREF(py_result);
        return result;
    }
#endif
}

/* UnicodeEquals */
  static CYTHON_INLINE int __Pyx_PyUnicode_Equals(PyObject* s1, PyObject* s2, int equals) {
#if CYTHON_COMPILING_IN_PYPY
    return PyObject_RichCompareBool(s1, s2, equals);
#else
#if PY_MAJOR_VERSION < 3
    PyObject* owned_ref = NULL;
#endif
    int s1_is_unicode, s2_is_unicode;
    if (s1 == s2) {
        goto return_eq;
    }
    s1_is_unicode = PyUnicode_CheckExact(s1);
    s2_is_unicode = PyUnicode_CheckExact(s2);
#if PY_MAJOR_VERSION < 3
    if ((s1_is_unicode & (!s2_is_unicode)) && PyString_CheckExact(s2)) {
        owned_ref = PyUnicode_FromObject(s2);
        if (unlikely(!owned_ref))
            return -1;
        s2 = owned_ref;
        s2_is_unicode = 1;
    } else if ((s2_is_unicode & (!s1_is_unicode)) && PyString_CheckExact(s1)) {
        owned_ref = PyUnicode_FromObject(s1);
        if (unlikely(!owned_ref))
            return -1;
        s1 = owned_ref;
        s1_is_unicode = 1;
    } else if (((!s2_is_unicode) & (!s1_is_unicode))) {
        return __Pyx_PyBytes_Equals(s1, s2, equals);
    }
#endif
    if (s1_is_unicode & s2_is_unicode) {
        Py_ssize_t length;
        int kind;
        void *data1, *data2;
        if (unlikely(__Pyx_PyUnicode_READY(s1) < 0) || unlikely(__Pyx_PyUnicode_READY(s2) < 0))
            return -1;
        length = __Pyx_PyUnicode_GET_LENGTH(s1);
        if (length != __Pyx_PyUnicode_GET_LENGTH(s2)) {
            goto return_ne;
        }
#if CYTHON_USE_UNICODE_INTERNALS
        {
            Py_hash_t hash1, hash2;
        #if CYTHON_PEP393_ENABLED
            hash1 = ((PyASCIIObject*)s1)->hash;
            hash2 = ((PyASCIIObject*)s2)->hash;
        #else
            hash1 = ((PyUnicodeObject*)s1)->hash;
            hash2 = ((PyUnicodeObject*)s2)->hash;
        #endif
            if (hash1 != hash2 && hash1 != -1 && hash2 != -1) {
                goto return_ne;
            }
        }
#endif
        kind = __Pyx_PyUnicode_KIND(s1);
        if (kind != __Pyx_PyUnicode_KIND(s2)) {
            goto return_ne;
        }
        data1 = __Pyx_PyUnicode_DATA(s1);
        data2 = __Pyx_PyUnicode_DATA(s2);
        if (__Pyx_PyUnicode_READ(kind, data1, 0) != __Pyx_PyUnicode_READ(kind, data2, 0)) {
            goto return_ne;
        } else if (length == 1) {
            goto return_eq;
        } else {
            int result = memcmp(data1, data2, (size_t)(length * kind));
            #if PY_MAJOR_VERSION < 3
            Py_XDECREF(owned_ref);
            #endif
            return (equals == Py_EQ) ? (result == 0) : (result != 0);
        }
    } else if ((s1 == Py_None) & s2_is_unicode) {
        goto return_ne;
    } else if ((s2 == Py_None) & s1_is_unicode) {
        goto return_ne;
    } else {
        int result;
        PyObject* py_result = PyObject_RichCompare(s1, s2, equals);
        if (!py_result)
            return -1;
        result = __Pyx_PyObject_IsTrue(py_result);
        Py_DECREF(py_result);
        return result;
    }
return_eq:
    #if PY_MAJOR_VERSION < 3
    Py_XDECREF(owned_ref);
    #endif
    return (equals == Py_EQ);
return_ne:
    #if PY_MAJOR_VERSION < 3
    Py_XDECREF(owned_ref);
    #endif
    return (equals == Py_NE);
#endif
}

/* GetItemInt */
  static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
    PyObject *r;
    if (!j) return NULL;
    r = PyObject_GetItem(o, j);
    Py_DECREF(j);
    return r;
}
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
                                                              CYTHON_NCP_UNUSED int wraparound,
                                                              CYTHON_NCP_UNUSED int boundscheck) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    Py_ssize_t wrapped_i = i;
    if (wraparound & unlikely(i < 0)) {
        wrapped_i += PyList_GET_SIZE(o);
    }
    if ((!boundscheck) || likely((0 <= wrapped_i) & (wrapped_i < PyList_GET_SIZE(o)))) {
        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
        Py_INCREF(r);
        return r;
    }
    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
#else
    return PySequence_GetItem(o, i);
#endif
}
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
                                                              CYTHON_NCP_UNUSED int wraparound,
                                                              CYTHON_NCP_UNUSED int boundscheck) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    Py_ssize_t wrapped_i = i;
    if (wraparound & unlikely(i < 0)) {
        wrapped_i += PyTuple_GET_SIZE(o);
    }
    if ((!boundscheck) || likely((0 <= wrapped_i) & (wrapped_i < PyTuple_GET_SIZE(o)))) {
        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
        Py_INCREF(r);
        return r;
    }
    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
#else
    return PySequence_GetItem(o, i);
#endif
}
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
                                                     CYTHON_NCP_UNUSED int wraparound,
                                                     CYTHON_NCP_UNUSED int boundscheck) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
    if (is_list || PyList_CheckExact(o)) {
        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
        if ((!boundscheck) || (likely((n >= 0) & (n < PyList_GET_SIZE(o))))) {
            PyObject *r = PyList_GET_ITEM(o, n);
            Py_INCREF(r);
            return r;
        }
    }
    else if (PyTuple_CheckExact(o)) {
        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
        if ((!boundscheck) || likely((n >= 0) & (n < PyTuple_GET_SIZE(o)))) {
            PyObject *r = PyTuple_GET_ITEM(o, n);
            Py_INCREF(r);
            return r;
        }
    } else {
        PySequenceMethods *m = Py_TYPE(o)->tp_as_sequence;
        if (likely(m && m->sq_item)) {
            if (wraparound && unlikely(i < 0) && likely(m->sq_length)) {
                Py_ssize_t l = m->sq_length(o);
                if (likely(l >= 0)) {
                    i += l;
                } else {
                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
                        return NULL;
                    PyErr_Clear();
                }
            }
            return m->sq_item(o, i);
        }
    }
#else
    if (is_list || PySequence_Check(o)) {
        return PySequence_GetItem(o, i);
    }
#endif
    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
}

/* GetModuleGlobalName */
  static CYTHON_INLINE PyObject *__Pyx_GetModuleGlobalName(PyObject *name) {
    PyObject *result;
#if !CYTHON_AVOID_BORROWED_REFS
    result = PyDict_GetItem(__pyx_d, name);
    if (likely(result)) {
        Py_INCREF(result);
    } else {
#else
    result = PyObject_GetItem(__pyx_d, name);
    if (!result) {
        PyErr_Clear();
#endif
        result = __Pyx_GetBuiltinName(name);
    }
    return result;
}

/* CalculateMetaclass */
    static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases) {
    Py_ssize_t i, nbases = PyTuple_GET_SIZE(bases);
    for (i=0; i < nbases; i++) {
        PyTypeObject *tmptype;
        PyObject *tmp = PyTuple_GET_ITEM(bases, i);
        tmptype = Py_TYPE(tmp);
#if PY_MAJOR_VERSION < 3
        if (tmptype == &PyClass_Type)
            continue;
#endif
        if (!metaclass) {
            metaclass = tmptype;
            continue;
        }
        if (PyType_IsSubtype(metaclass, tmptype))
            continue;
        if (PyType_IsSubtype(tmptype, metaclass)) {
            metaclass = tmptype;
            continue;
        }
        PyErr_SetString(PyExc_TypeError,
                        "metaclass conflict: "
                        "the metaclass of a derived class "
                        "must be a (non-strict) subclass "
                        "of the metaclasses of all its bases");
        return NULL;
    }
    if (!metaclass) {
#if PY_MAJOR_VERSION < 3
        metaclass = &PyClass_Type;
#else
        metaclass = &PyType_Type;
#endif
    }
    Py_INCREF((PyObject*) metaclass);
    return (PyObject*) metaclass;
}

/* FetchCommonType */
    static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type) {
    PyObject* fake_module;
    PyTypeObject* cached_type = NULL;
    fake_module = PyImport_AddModule((char*) "_cython_" CYTHON_ABI);
    if (!fake_module) return NULL;
    Py_INCREF(fake_module);
    cached_type = (PyTypeObject*) PyObject_GetAttrString(fake_module, type->tp_name);
    if (cached_type) {
        if (!PyType_Check((PyObject*)cached_type)) {
            PyErr_Format(PyExc_TypeError,
                "Shared Cython type %.200s is not a type object",
                type->tp_name);
            goto bad;
        }
        if (cached_type->tp_basicsize != type->tp_basicsize) {
            PyErr_Format(PyExc_TypeError,
                "Shared Cython type %.200s has the wrong size, try recompiling",
                type->tp_name);
            goto bad;
        }
    } else {
        if (!PyErr_ExceptionMatches(PyExc_AttributeError)) goto bad;
        PyErr_Clear();
        if (PyType_Ready(type) < 0) goto bad;
        if (PyObject_SetAttrString(fake_module, type->tp_name, (PyObject*) type) < 0)
            goto bad;
        Py_INCREF(type);
        cached_type = type;
    }
done:
    Py_DECREF(fake_module);
    return cached_type;
bad:
    Py_XDECREF(cached_type);
    cached_type = NULL;
    goto done;
}

/* CythonFunction */
    static PyObject *
__Pyx_CyFunction_get_doc(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *closure)
{
    if (unlikely(op->func_doc == NULL)) {
        if (op->func.m_ml->ml_doc) {
#if PY_MAJOR_VERSION >= 3
            op->func_doc = PyUnicode_FromString(op->func.m_ml->ml_doc);
#else
            op->func_doc = PyString_FromString(op->func.m_ml->ml_doc);
#endif
            if (unlikely(op->func_doc == NULL))
                return NULL;
        } else {
            Py_INCREF(Py_None);
            return Py_None;
        }
    }
    Py_INCREF(op->func_doc);
    return op->func_doc;
}
static int
__Pyx_CyFunction_set_doc(__pyx_CyFunctionObject *op, PyObject *value)
{
    PyObject *tmp = op->func_doc;
    if (value == NULL) {
        value = Py_None;
    }
    Py_INCREF(value);
    op->func_doc = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_name(__pyx_CyFunctionObject *op)
{
    if (unlikely(op->func_name == NULL)) {
#if PY_MAJOR_VERSION >= 3
        op->func_name = PyUnicode_InternFromString(op->func.m_ml->ml_name);
#else
        op->func_name = PyString_InternFromString(op->func.m_ml->ml_name);
#endif
        if (unlikely(op->func_name == NULL))
            return NULL;
    }
    Py_INCREF(op->func_name);
    return op->func_name;
}
static int
__Pyx_CyFunction_set_name(__pyx_CyFunctionObject *op, PyObject *value)
{
    PyObject *tmp;
#if PY_MAJOR_VERSION >= 3
    if (unlikely(value == NULL || !PyUnicode_Check(value))) {
#else
    if (unlikely(value == NULL || !PyString_Check(value))) {
#endif
        PyErr_SetString(PyExc_TypeError,
                        "__name__ must be set to a string object");
        return -1;
    }
    tmp = op->func_name;
    Py_INCREF(value);
    op->func_name = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_qualname(__pyx_CyFunctionObject *op)
{
    Py_INCREF(op->func_qualname);
    return op->func_qualname;
}
static int
__Pyx_CyFunction_set_qualname(__pyx_CyFunctionObject *op, PyObject *value)
{
    PyObject *tmp;
#if PY_MAJOR_VERSION >= 3
    if (unlikely(value == NULL || !PyUnicode_Check(value))) {
#else
    if (unlikely(value == NULL || !PyString_Check(value))) {
#endif
        PyErr_SetString(PyExc_TypeError,
                        "__qualname__ must be set to a string object");
        return -1;
    }
    tmp = op->func_qualname;
    Py_INCREF(value);
    op->func_qualname = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_self(__pyx_CyFunctionObject *m, CYTHON_UNUSED void *closure)
{
    PyObject *self;
    self = m->func_closure;
    if (self == NULL)
        self = Py_None;
    Py_INCREF(self);
    return self;
}
static PyObject *
__Pyx_CyFunction_get_dict(__pyx_CyFunctionObject *op)
{
    if (unlikely(op->func_dict == NULL)) {
        op->func_dict = PyDict_New();
        if (unlikely(op->func_dict == NULL))
            return NULL;
    }
    Py_INCREF(op->func_dict);
    return op->func_dict;
}
static int
__Pyx_CyFunction_set_dict(__pyx_CyFunctionObject *op, PyObject *value)
{
    PyObject *tmp;
    if (unlikely(value == NULL)) {
        PyErr_SetString(PyExc_TypeError,
               "function's dictionary may not be deleted");
        return -1;
    }
    if (unlikely(!PyDict_Check(value))) {
        PyErr_SetString(PyExc_TypeError,
               "setting function's dictionary to a non-dict");
        return -1;
    }
    tmp = op->func_dict;
    Py_INCREF(value);
    op->func_dict = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_globals(__pyx_CyFunctionObject *op)
{
    Py_INCREF(op->func_globals);
    return op->func_globals;
}
static PyObject *
__Pyx_CyFunction_get_closure(CYTHON_UNUSED __pyx_CyFunctionObject *op)
{
    Py_INCREF(Py_None);
    return Py_None;
}
static PyObject *
__Pyx_CyFunction_get_code(__pyx_CyFunctionObject *op)
{
    PyObject* result = (op->func_code) ? op->func_code : Py_None;
    Py_INCREF(result);
    return result;
}
static int
__Pyx_CyFunction_init_defaults(__pyx_CyFunctionObject *op) {
    int result = 0;
    PyObject *res = op->defaults_getter((PyObject *) op);
    if (unlikely(!res))
        return -1;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    op->defaults_tuple = PyTuple_GET_ITEM(res, 0);
    Py_INCREF(op->defaults_tuple);
    op->defaults_kwdict = PyTuple_GET_ITEM(res, 1);
    Py_INCREF(op->defaults_kwdict);
    #else
    op->defaults_tuple = PySequence_ITEM(res, 0);
    if (unlikely(!op->defaults_tuple)) result = -1;
    else {
        op->defaults_kwdict = PySequence_ITEM(res, 1);
        if (unlikely(!op->defaults_kwdict)) result = -1;
    }
    #endif
    Py_DECREF(res);
    return result;
}
static int
__Pyx_CyFunction_set_defaults(__pyx_CyFunctionObject *op, PyObject* value) {
    PyObject* tmp;
    if (!value) {
        value = Py_None;
    } else if (value != Py_None && !PyTuple_Check(value)) {
        PyErr_SetString(PyExc_TypeError,
                        "__defaults__ must be set to a tuple object");
        return -1;
    }
    Py_INCREF(value);
    tmp = op->defaults_tuple;
    op->defaults_tuple = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_defaults(__pyx_CyFunctionObject *op) {
    PyObject* result = op->defaults_tuple;
    if (unlikely(!result)) {
        if (op->defaults_getter) {
            if (__Pyx_CyFunction_init_defaults(op) < 0) return NULL;
            result = op->defaults_tuple;
        } else {
            result = Py_None;
        }
    }
    Py_INCREF(result);
    return result;
}
static int
__Pyx_CyFunction_set_kwdefaults(__pyx_CyFunctionObject *op, PyObject* value) {
    PyObject* tmp;
    if (!value) {
        value = Py_None;
    } else if (value != Py_None && !PyDict_Check(value)) {
        PyErr_SetString(PyExc_TypeError,
                        "__kwdefaults__ must be set to a dict object");
        return -1;
    }
    Py_INCREF(value);
    tmp = op->defaults_kwdict;
    op->defaults_kwdict = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_kwdefaults(__pyx_CyFunctionObject *op) {
    PyObject* result = op->defaults_kwdict;
    if (unlikely(!result)) {
        if (op->defaults_getter) {
            if (__Pyx_CyFunction_init_defaults(op) < 0) return NULL;
            result = op->defaults_kwdict;
        } else {
            result = Py_None;
        }
    }
    Py_INCREF(result);
    return result;
}
static int
__Pyx_CyFunction_set_annotations(__pyx_CyFunctionObject *op, PyObject* value) {
    PyObject* tmp;
    if (!value || value == Py_None) {
        value = NULL;
    } else if (!PyDict_Check(value)) {
        PyErr_SetString(PyExc_TypeError,
                        "__annotations__ must be set to a dict object");
        return -1;
    }
    Py_XINCREF(value);
    tmp = op->func_annotations;
    op->func_annotations = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_annotations(__pyx_CyFunctionObject *op) {
    PyObject* result = op->func_annotations;
    if (unlikely(!result)) {
        result = PyDict_New();
        if (unlikely(!result)) return NULL;
        op->func_annotations = result;
    }
    Py_INCREF(result);
    return result;
}
static PyGetSetDef __pyx_CyFunction_getsets[] = {
    {(char *) "func_doc", (getter)__Pyx_CyFunction_get_doc, (setter)__Pyx_CyFunction_set_doc, 0, 0},
    {(char *) "__doc__",  (getter)__Pyx_CyFunction_get_doc, (setter)__Pyx_CyFunction_set_doc, 0, 0},
    {(char *) "func_name", (getter)__Pyx_CyFunction_get_name, (setter)__Pyx_CyFunction_set_name, 0, 0},
    {(char *) "__name__", (getter)__Pyx_CyFunction_get_name, (setter)__Pyx_CyFunction_set_name, 0, 0},
    {(char *) "__qualname__", (getter)__Pyx_CyFunction_get_qualname, (setter)__Pyx_CyFunction_set_qualname, 0, 0},
    {(char *) "__self__", (getter)__Pyx_CyFunction_get_self, 0, 0, 0},
    {(char *) "func_dict", (getter)__Pyx_CyFunction_get_dict, (setter)__Pyx_CyFunction_set_dict, 0, 0},
    {(char *) "__dict__", (getter)__Pyx_CyFunction_get_dict, (setter)__Pyx_CyFunction_set_dict, 0, 0},
    {(char *) "func_globals", (getter)__Pyx_CyFunction_get_globals, 0, 0, 0},
    {(char *) "__globals__", (getter)__Pyx_CyFunction_get_globals, 0, 0, 0},
    {(char *) "func_closure", (getter)__Pyx_CyFunction_get_closure, 0, 0, 0},
    {(char *) "__closure__", (getter)__Pyx_CyFunction_get_closure, 0, 0, 0},
    {(char *) "func_code", (getter)__Pyx_CyFunction_get_code, 0, 0, 0},
    {(char *) "__code__", (getter)__Pyx_CyFunction_get_code, 0, 0, 0},
    {(char *) "func_defaults", (getter)__Pyx_CyFunction_get_defaults, (setter)__Pyx_CyFunction_set_defaults, 0, 0},
    {(char *) "__defaults__", (getter)__Pyx_CyFunction_get_defaults, (setter)__Pyx_CyFunction_set_defaults, 0, 0},
    {(char *) "__kwdefaults__", (getter)__Pyx_CyFunction_get_kwdefaults, (setter)__Pyx_CyFunction_set_kwdefaults, 0, 0},
    {(char *) "__annotations__", (getter)__Pyx_CyFunction_get_annotations, (setter)__Pyx_CyFunction_set_annotations, 0, 0},
    {0, 0, 0, 0, 0}
};
static PyMemberDef __pyx_CyFunction_members[] = {
    {(char *) "__module__", T_OBJECT, offsetof(__pyx_CyFunctionObject, func.m_module), PY_WRITE_RESTRICTED, 0},
    {0, 0, 0,  0, 0}
};
static PyObject *
__Pyx_CyFunction_reduce(__pyx_CyFunctionObject *m, CYTHON_UNUSED PyObject *args)
{
#if PY_MAJOR_VERSION >= 3
    return PyUnicode_FromString(m->func.m_ml->ml_name);
#else
    return PyString_FromString(m->func.m_ml->ml_name);
#endif
}
static PyMethodDef __pyx_CyFunction_methods[] = {
    {"__reduce__", (PyCFunction)__Pyx_CyFunction_reduce, METH_VARARGS, 0},
    {0, 0, 0, 0}
};
#if PY_VERSION_HEX < 0x030500A0
#define __Pyx_CyFunction_weakreflist(cyfunc) ((cyfunc)->func_weakreflist)
#else
#define __Pyx_CyFunction_weakreflist(cyfunc) ((cyfunc)->func.m_weakreflist)
#endif
static PyObject *__Pyx_CyFunction_New(PyTypeObject *type, PyMethodDef *ml, int flags, PyObject* qualname,
                                      PyObject *closure, PyObject *module, PyObject* globals, PyObject* code) {
    __pyx_CyFunctionObject *op = PyObject_GC_New(__pyx_CyFunctionObject, type);
    if (op == NULL)
        return NULL;
    op->flags = flags;
    __Pyx_CyFunction_weakreflist(op) = NULL;
    op->func.m_ml = ml;
    op->func.m_self = (PyObject *) op;
    Py_XINCREF(closure);
    op->func_closure = closure;
    Py_XINCREF(module);
    op->func.m_module = module;
    op->func_dict = NULL;
    op->func_name = NULL;
    Py_INCREF(qualname);
    op->func_qualname = qualname;
    op->func_doc = NULL;
    op->func_classobj = NULL;
    op->func_globals = globals;
    Py_INCREF(op->func_globals);
    Py_XINCREF(code);
    op->func_code = code;
    op->defaults_pyobjects = 0;
    op->defaults = NULL;
    op->defaults_tuple = NULL;
    op->defaults_kwdict = NULL;
    op->defaults_getter = NULL;
    op->func_annotations = NULL;
    PyObject_GC_Track(op);
    return (PyObject *) op;
}
static int
__Pyx_CyFunction_clear(__pyx_CyFunctionObject *m)
{
    Py_CLEAR(m->func_closure);
    Py_CLEAR(m->func.m_module);
    Py_CLEAR(m->func_dict);
    Py_CLEAR(m->func_name);
    Py_CLEAR(m->func_qualname);
    Py_CLEAR(m->func_doc);
    Py_CLEAR(m->func_globals);
    Py_CLEAR(m->func_code);
    Py_CLEAR(m->func_classobj);
    Py_CLEAR(m->defaults_tuple);
    Py_CLEAR(m->defaults_kwdict);
    Py_CLEAR(m->func_annotations);
    if (m->defaults) {
        PyObject **pydefaults = __Pyx_CyFunction_Defaults(PyObject *, m);
        int i;
        for (i = 0; i < m->defaults_pyobjects; i++)
            Py_XDECREF(pydefaults[i]);
        PyObject_Free(m->defaults);
        m->defaults = NULL;
    }
    return 0;
}
static void __Pyx_CyFunction_dealloc(__pyx_CyFunctionObject *m)
{
    PyObject_GC_UnTrack(m);
    if (__Pyx_CyFunction_weakreflist(m) != NULL)
        PyObject_ClearWeakRefs((PyObject *) m);
    __Pyx_CyFunction_clear(m);
    PyObject_GC_Del(m);
}
static int __Pyx_CyFunction_traverse(__pyx_CyFunctionObject *m, visitproc visit, void *arg)
{
    Py_VISIT(m->func_closure);
    Py_VISIT(m->func.m_module);
    Py_VISIT(m->func_dict);
    Py_VISIT(m->func_name);
    Py_VISIT(m->func_qualname);
    Py_VISIT(m->func_doc);
    Py_VISIT(m->func_globals);
    Py_VISIT(m->func_code);
    Py_VISIT(m->func_classobj);
    Py_VISIT(m->defaults_tuple);
    Py_VISIT(m->defaults_kwdict);
    if (m->defaults) {
        PyObject **pydefaults = __Pyx_CyFunction_Defaults(PyObject *, m);
        int i;
        for (i = 0; i < m->defaults_pyobjects; i++)
            Py_VISIT(pydefaults[i]);
    }
    return 0;
}
static PyObject *__Pyx_CyFunction_descr_get(PyObject *func, PyObject *obj, PyObject *type)
{
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    if (m->flags & __Pyx_CYFUNCTION_STATICMETHOD) {
        Py_INCREF(func);
        return func;
    }
    if (m->flags & __Pyx_CYFUNCTION_CLASSMETHOD) {
        if (type == NULL)
            type = (PyObject *)(Py_TYPE(obj));
        return __Pyx_PyMethod_New(func, type, (PyObject *)(Py_TYPE(type)));
    }
    if (obj == Py_None)
        obj = NULL;
    return __Pyx_PyMethod_New(func, obj, type);
}
static PyObject*
__Pyx_CyFunction_repr(__pyx_CyFunctionObject *op)
{
#if PY_MAJOR_VERSION >= 3
    return PyUnicode_FromFormat("<cyfunction %U at %p>",
                                op->func_qualname, (void *)op);
#else
    return PyString_FromFormat("<cyfunction %s at %p>",
                               PyString_AsString(op->func_qualname), (void *)op);
#endif
}
static PyObject * __Pyx_CyFunction_CallMethod(PyObject *func, PyObject *self, PyObject *arg, PyObject *kw) {
    PyCFunctionObject* f = (PyCFunctionObject*)func;
    PyCFunction meth = f->m_ml->ml_meth;
    Py_ssize_t size;
    switch (f->m_ml->ml_flags & (METH_VARARGS | METH_KEYWORDS | METH_NOARGS | METH_O)) {
    case METH_VARARGS:
        if (likely(kw == NULL || PyDict_Size(kw) == 0))
            return (*meth)(self, arg);
        break;
    case METH_VARARGS | METH_KEYWORDS:
        return (*(PyCFunctionWithKeywords)meth)(self, arg, kw);
    case METH_NOARGS:
        if (likely(kw == NULL || PyDict_Size(kw) == 0)) {
            size = PyTuple_GET_SIZE(arg);
            if (likely(size == 0))
                return (*meth)(self, NULL);
            PyErr_Format(PyExc_TypeError,
                "%.200s() takes no arguments (%" CYTHON_FORMAT_SSIZE_T "d given)",
                f->m_ml->ml_name, size);
            return NULL;
        }
        break;
    case METH_O:
        if (likely(kw == NULL || PyDict_Size(kw) == 0)) {
            size = PyTuple_GET_SIZE(arg);
            if (likely(size == 1)) {
                PyObject *result, *arg0 = PySequence_ITEM(arg, 0);
                if (unlikely(!arg0)) return NULL;
                result = (*meth)(self, arg0);
                Py_DECREF(arg0);
                return result;
            }
            PyErr_Format(PyExc_TypeError,
                "%.200s() takes exactly one argument (%" CYTHON_FORMAT_SSIZE_T "d given)",
                f->m_ml->ml_name, size);
            return NULL;
        }
        break;
    default:
        PyErr_SetString(PyExc_SystemError, "Bad call flags in "
                        "__Pyx_CyFunction_Call. METH_OLDARGS is no "
                        "longer supported!");
        return NULL;
    }
    PyErr_Format(PyExc_TypeError, "%.200s() takes no keyword arguments",
                 f->m_ml->ml_name);
    return NULL;
}
static CYTHON_INLINE PyObject *__Pyx_CyFunction_Call(PyObject *func, PyObject *arg, PyObject *kw) {
    return __Pyx_CyFunction_CallMethod(func, ((PyCFunctionObject*)func)->m_self, arg, kw);
}
static PyObject *__Pyx_CyFunction_CallAsMethod(PyObject *func, PyObject *args, PyObject *kw) {
    PyObject *result;
    __pyx_CyFunctionObject *cyfunc = (__pyx_CyFunctionObject *) func;
    if ((cyfunc->flags & __Pyx_CYFUNCTION_CCLASS) && !(cyfunc->flags & __Pyx_CYFUNCTION_STATICMETHOD)) {
        Py_ssize_t argc;
        PyObject *new_args;
        PyObject *self;
        argc = PyTuple_GET_SIZE(args);
        new_args = PyTuple_GetSlice(args, 1, argc);
        if (unlikely(!new_args))
            return NULL;
        self = PyTuple_GetItem(args, 0);
        if (unlikely(!self)) {
            Py_DECREF(new_args);
            return NULL;
        }
        result = __Pyx_CyFunction_CallMethod(func, self, new_args, kw);
        Py_DECREF(new_args);
    } else {
        result = __Pyx_CyFunction_Call(func, args, kw);
    }
    return result;
}
static PyTypeObject __pyx_CyFunctionType_type = {
    PyVarObject_HEAD_INIT(0, 0)
    "cython_function_or_method",
    sizeof(__pyx_CyFunctionObject),
    0,
    (destructor) __Pyx_CyFunction_dealloc,
    0,
    0,
    0,
#if PY_MAJOR_VERSION < 3
    0,
#else
    0,
#endif
    (reprfunc) __Pyx_CyFunction_repr,
    0,
    0,
    0,
    0,
    __Pyx_CyFunction_CallAsMethod,
    0,
    0,
    0,
    0,
    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
    0,
    (traverseproc) __Pyx_CyFunction_traverse,
    (inquiry) __Pyx_CyFunction_clear,
    0,
#if PY_VERSION_HEX < 0x030500A0
    offsetof(__pyx_CyFunctionObject, func_weakreflist),
#else
    offsetof(PyCFunctionObject, m_weakreflist),
#endif
    0,
    0,
    __pyx_CyFunction_methods,
    __pyx_CyFunction_members,
    __pyx_CyFunction_getsets,
    0,
    0,
    __Pyx_CyFunction_descr_get,
    0,
    offsetof(__pyx_CyFunctionObject, func_dict),
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
#if PY_VERSION_HEX >= 0x030400a1
    0,
#endif
};
static int __pyx_CyFunction_init(void) {
    __pyx_CyFunctionType = __Pyx_FetchCommonType(&__pyx_CyFunctionType_type);
    if (__pyx_CyFunctionType == NULL) {
        return -1;
    }
    return 0;
}
static CYTHON_INLINE void *__Pyx_CyFunction_InitDefaults(PyObject *func, size_t size, int pyobjects) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->defaults = PyObject_Malloc(size);
    if (!m->defaults)
        return PyErr_NoMemory();
    memset(m->defaults, 0, size);
    m->defaults_pyobjects = pyobjects;
    return m->defaults;
}
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsTuple(PyObject *func, PyObject *tuple) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->defaults_tuple = tuple;
    Py_INCREF(tuple);
}
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsKwDict(PyObject *func, PyObject *dict) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->defaults_kwdict = dict;
    Py_INCREF(dict);
}
static CYTHON_INLINE void __Pyx_CyFunction_SetAnnotationsDict(PyObject *func, PyObject *dict) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->func_annotations = dict;
    Py_INCREF(dict);
}

/* Py3ClassCreate */
        static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name,
                                           PyObject *qualname, PyObject *mkw, PyObject *modname, PyObject *doc) {
    PyObject *ns;
    if (metaclass) {
        PyObject *prep = __Pyx_PyObject_GetAttrStr(metaclass, __pyx_n_s_prepare);
        if (prep) {
            PyObject *pargs = PyTuple_Pack(2, name, bases);
            if (unlikely(!pargs)) {
                Py_DECREF(prep);
                return NULL;
            }
            ns = PyObject_Call(prep, pargs, mkw);
            Py_DECREF(prep);
            Py_DECREF(pargs);
        } else {
            if (unlikely(!PyErr_ExceptionMatches(PyExc_AttributeError)))
                return NULL;
            PyErr_Clear();
            ns = PyDict_New();
        }
    } else {
        ns = PyDict_New();
    }
    if (unlikely(!ns))
        return NULL;
    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_module, modname) < 0)) goto bad;
    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_qualname, qualname) < 0)) goto bad;
    if (unlikely(doc && PyObject_SetItem(ns, __pyx_n_s_doc, doc) < 0)) goto bad;
    return ns;
bad:
    Py_DECREF(ns);
    return NULL;
}
static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases,
                                      PyObject *dict, PyObject *mkw,
                                      int calculate_metaclass, int allow_py2_metaclass) {
    PyObject *result, *margs;
    PyObject *owned_metaclass = NULL;
    if (allow_py2_metaclass) {
        owned_metaclass = PyObject_GetItem(dict, __pyx_n_s_metaclass);
        if (owned_metaclass) {
            metaclass = owned_metaclass;
        } else if (likely(PyErr_ExceptionMatches(PyExc_KeyError))) {
            PyErr_Clear();
        } else {
            return NULL;
        }
    }
    if (calculate_metaclass && (!metaclass || PyType_Check(metaclass))) {
        metaclass = __Pyx_CalculateMetaclass((PyTypeObject*) metaclass, bases);
        Py_XDECREF(owned_metaclass);
        if (unlikely(!metaclass))
            return NULL;
        owned_metaclass = metaclass;
    }
    margs = PyTuple_Pack(3, name, bases, dict);
    if (unlikely(!margs)) {
        result = NULL;
    } else {
        result = PyObject_Call(metaclass, margs, mkw);
        Py_DECREF(margs);
    }
    Py_XDECREF(owned_metaclass);
    return result;
}

/* ExtTypeTest */
        static CYTHON_INLINE int __Pyx_TypeTest(PyObject *obj, PyTypeObject *type) {
    if (unlikely(!type)) {
        PyErr_SetString(PyExc_SystemError, "Missing type object");
        return 0;
    }
    if (likely(PyObject_TypeCheck(obj, type)))
        return 1;
    PyErr_Format(PyExc_TypeError, "Cannot convert %.200s to %.200s",
                 Py_TYPE(obj)->tp_name, type->tp_name);
    return 0;
}

/* RaiseException */
        #if PY_MAJOR_VERSION < 3
static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb,
                        CYTHON_UNUSED PyObject *cause) {
    __Pyx_PyThreadState_declare
    Py_XINCREF(type);
    if (!value || value == Py_None)
        value = NULL;
    else
        Py_INCREF(value);
    if (!tb || tb == Py_None)
        tb = NULL;
    else {
        Py_INCREF(tb);
        if (!PyTraceBack_Check(tb)) {
            PyErr_SetString(PyExc_TypeError,
                "raise: arg 3 must be a traceback or None");
            goto raise_error;
        }
    }
    if (PyType_Check(type)) {
#if CYTHON_COMPILING_IN_PYPY
        if (!value) {
            Py_INCREF(Py_None);
            value = Py_None;
        }
#endif
        PyErr_NormalizeException(&type, &value, &tb);
    } else {
        if (value) {
            PyErr_SetString(PyExc_TypeError,
                "instance exception may not have a separate value");
            goto raise_error;
        }
        value = type;
        type = (PyObject*) Py_TYPE(type);
        Py_INCREF(type);
        if (!PyType_IsSubtype((PyTypeObject *)type, (PyTypeObject *)PyExc_BaseException)) {
            PyErr_SetString(PyExc_TypeError,
                "raise: exception class must be a subclass of BaseException");
            goto raise_error;
        }
    }
    __Pyx_PyThreadState_assign
    __Pyx_ErrRestore(type, value, tb);
    return;
raise_error:
    Py_XDECREF(value);
    Py_XDECREF(type);
    Py_XDECREF(tb);
    return;
}
#else
static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
    PyObject* owned_instance = NULL;
    if (tb == Py_None) {
        tb = 0;
    } else if (tb && !PyTraceBack_Check(tb)) {
        PyErr_SetString(PyExc_TypeError,
            "raise: arg 3 must be a traceback or None");
        goto bad;
    }
    if (value == Py_None)
        value = 0;
    if (PyExceptionInstance_Check(type)) {
        if (value) {
            PyErr_SetString(PyExc_TypeError,
                "instance exception may not have a separate value");
            goto bad;
        }
        value = type;
        type = (PyObject*) Py_TYPE(value);
    } else if (PyExceptionClass_Check(type)) {
        PyObject *instance_class = NULL;
        if (value && PyExceptionInstance_Check(value)) {
            instance_class = (PyObject*) Py_TYPE(value);
            if (instance_class != type) {
                int is_subclass = PyObject_IsSubclass(instance_class, type);
                if (!is_subclass) {
                    instance_class = NULL;
                } else if (unlikely(is_subclass == -1)) {
                    goto bad;
                } else {
                    type = instance_class;
                }
            }
        }
        if (!instance_class) {
            PyObject *args;
            if (!value)
                args = PyTuple_New(0);
            else if (PyTuple_Check(value)) {
                Py_INCREF(value);
                args = value;
            } else
                args = PyTuple_Pack(1, value);
            if (!args)
                goto bad;
            owned_instance = PyObject_Call(type, args, NULL);
            Py_DECREF(args);
            if (!owned_instance)
                goto bad;
            value = owned_instance;
            if (!PyExceptionInstance_Check(value)) {
                PyErr_Format(PyExc_TypeError,
                             "calling %R should have returned an instance of "
                             "BaseException, not %R",
                             type, Py_TYPE(value));
                goto bad;
            }
        }
    } else {
        PyErr_SetString(PyExc_TypeError,
            "raise: exception class must be a subclass of BaseException");
        goto bad;
    }
#if PY_VERSION_HEX >= 0x03030000
    if (cause) {
#else
    if (cause && cause != Py_None) {
#endif
        PyObject *fixed_cause;
        if (cause == Py_None) {
            fixed_cause = NULL;
        } else if (PyExceptionClass_Check(cause)) {
            fixed_cause = PyObject_CallObject(cause, NULL);
            if (fixed_cause == NULL)
                goto bad;
        } else if (PyExceptionInstance_Check(cause)) {
            fixed_cause = cause;
            Py_INCREF(fixed_cause);
        } else {
            PyErr_SetString(PyExc_TypeError,
                            "exception causes must derive from "
                            "BaseException");
            goto bad;
        }
        PyException_SetCause(value, fixed_cause);
    }
    PyErr_SetObject(type, value);
    if (tb) {
#if CYTHON_COMPILING_IN_PYPY
        PyObject *tmp_type, *tmp_value, *tmp_tb;
        PyErr_Fetch(&tmp_type, &tmp_value, &tmp_tb);
        Py_INCREF(tb);
        PyErr_Restore(tmp_type, tmp_value, tb);
        Py_XDECREF(tmp_tb);
#else
        PyThreadState *tstate = PyThreadState_GET();
        PyObject* tmp_tb = tstate->curexc_traceback;
        if (tb != tmp_tb) {
            Py_INCREF(tb);
            tstate->curexc_traceback = tb;
            Py_XDECREF(tmp_tb);
        }
#endif
    }
bad:
    Py_XDECREF(owned_instance);
    return;
}
#endif

/* GetException */
          #if CYTHON_FAST_THREAD_STATE
static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
#else
static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb) {
#endif
    PyObject *local_type, *local_value, *local_tb;
#if CYTHON_FAST_THREAD_STATE
    PyObject *tmp_type, *tmp_value, *tmp_tb;
    local_type = tstate->curexc_type;
    local_value = tstate->curexc_value;
    local_tb = tstate->curexc_traceback;
    tstate->curexc_type = 0;
    tstate->curexc_value = 0;
    tstate->curexc_traceback = 0;
#else
    PyErr_Fetch(&local_type, &local_value, &local_tb);
#endif
    PyErr_NormalizeException(&local_type, &local_value, &local_tb);
#if CYTHON_FAST_THREAD_STATE
    if (unlikely(tstate->curexc_type))
#else
    if (unlikely(PyErr_Occurred()))
#endif
        goto bad;
    #if PY_MAJOR_VERSION >= 3
    if (local_tb) {
        if (unlikely(PyException_SetTraceback(local_value, local_tb) < 0))
            goto bad;
    }
    #endif
    Py_XINCREF(local_tb);
    Py_XINCREF(local_type);
    Py_XINCREF(local_value);
    *type = local_type;
    *value = local_value;
    *tb = local_tb;
#if CYTHON_FAST_THREAD_STATE
    tmp_type = tstate->exc_type;
    tmp_value = tstate->exc_value;
    tmp_tb = tstate->exc_traceback;
    tstate->exc_type = local_type;
    tstate->exc_value = local_value;
    tstate->exc_traceback = local_tb;
    Py_XDECREF(tmp_type);
    Py_XDECREF(tmp_value);
    Py_XDECREF(tmp_tb);
#else
    PyErr_SetExcInfo(local_type, local_value, local_tb);
#endif
    return 0;
bad:
    *type = 0;
    *value = 0;
    *tb = 0;
    Py_XDECREF(local_type);
    Py_XDECREF(local_value);
    Py_XDECREF(local_tb);
    return -1;
}

/* ArgTypeTest */
            static void __Pyx_RaiseArgumentTypeInvalid(const char* name, PyObject *obj, PyTypeObject *type) {
    PyErr_Format(PyExc_TypeError,
        "Argument '%.200s' has incorrect type (expected %.200s, got %.200s)",
        name, type->tp_name, Py_TYPE(obj)->tp_name);
}
static CYTHON_INLINE int __Pyx_ArgTypeTest(PyObject *obj, PyTypeObject *type, int none_allowed,
    const char *name, int exact)
{
    if (unlikely(!type)) {
        PyErr_SetString(PyExc_SystemError, "Missing type object");
        return 0;
    }
    if (none_allowed && obj == Py_None) return 1;
    else if (exact) {
        if (likely(Py_TYPE(obj) == type)) return 1;
        #if PY_MAJOR_VERSION == 2
        else if ((type == &PyBaseString_Type) && likely(__Pyx_PyBaseString_CheckExact(obj))) return 1;
        #endif
    }
    else {
        if (likely(PyObject_TypeCheck(obj, type))) return 1;
    }
    __Pyx_RaiseArgumentTypeInvalid(name, obj, type);
    return 0;
}

/* GetAttr */
            static CYTHON_INLINE PyObject *__Pyx_GetAttr(PyObject *o, PyObject *n) {
#if CYTHON_COMPILING_IN_CPYTHON
#if PY_MAJOR_VERSION >= 3
    if (likely(PyUnicode_Check(n)))
#else
    if (likely(PyString_Check(n)))
#endif
        return __Pyx_PyObject_GetAttrStr(o, n);
#endif
    return PyObject_GetAttr(o, n);
}

/* GetAttr3 */
            static CYTHON_INLINE PyObject *__Pyx_GetAttr3(PyObject *o, PyObject *n, PyObject *d) {
    PyObject *r = __Pyx_GetAttr(o, n);
    if (unlikely(!r)) {
        if (!PyErr_ExceptionMatches(PyExc_AttributeError))
            goto bad;
        PyErr_Clear();
        r = d;
        Py_INCREF(d);
    }
    return r;
bad:
    return NULL;
}

/* WriteUnraisableException */
            static void __Pyx_WriteUnraisable(const char *name, CYTHON_UNUSED int clineno,
                                  CYTHON_UNUSED int lineno, CYTHON_UNUSED const char *filename,
                                  int full_traceback, CYTHON_UNUSED int nogil) {
    PyObject *old_exc, *old_val, *old_tb;
    PyObject *ctx;
    __Pyx_PyThreadState_declare
#ifdef WITH_THREAD
    PyGILState_STATE state;
    if (nogil)
        state = PyGILState_Ensure();
#ifdef _MSC_VER
    else state = (PyGILState_STATE)-1;
#endif
#endif
    __Pyx_PyThreadState_assign
    __Pyx_ErrFetch(&old_exc, &old_val, &old_tb);
    if (full_traceback) {
        Py_XINCREF(old_exc);
        Py_XINCREF(old_val);
        Py_XINCREF(old_tb);
        __Pyx_ErrRestore(old_exc, old_val, old_tb);
        PyErr_PrintEx(1);
    }
    #if PY_MAJOR_VERSION < 3
    ctx = PyString_FromString(name);
    #else
    ctx = PyUnicode_FromString(name);
    #endif
    __Pyx_ErrRestore(old_exc, old_val, old_tb);
    if (!ctx) {
        PyErr_WriteUnraisable(Py_None);
    } else {
        PyErr_WriteUnraisable(ctx);
        Py_DECREF(ctx);
    }
#ifdef WITH_THREAD
    if (nogil)
        PyGILState_Release(state);
#endif
}

/* PyObjectCallMethod0 */
            static PyObject* __Pyx_PyObject_CallMethod0(PyObject* obj, PyObject* method_name) {
    PyObject *method, *result = NULL;
    method = __Pyx_PyObject_GetAttrStr(obj, method_name);
    if (unlikely(!method)) goto bad;
#if CYTHON_UNPACK_METHODS
    if (likely(PyMethod_Check(method))) {
        PyObject *self = PyMethod_GET_SELF(method);
        if (likely(self)) {
            PyObject *function = PyMethod_GET_FUNCTION(method);
            result = __Pyx_PyObject_CallOneArg(function, self);
            Py_DECREF(method);
            return result;
        }
    }
#endif
    result = __Pyx_PyObject_CallNoArg(method);
    Py_DECREF(method);
bad:
    return result;
}

/* UnpackUnboundCMethod */
            static int __Pyx_TryUnpackUnboundCMethod(__Pyx_CachedCFunction* target) {
    PyObject *method;
    method = __Pyx_PyObject_GetAttrStr(target->type, *target->method_name);
    if (unlikely(!method))
        return -1;
    target->method = method;
#if CYTHON_COMPILING_IN_CPYTHON
    #if PY_MAJOR_VERSION >= 3
    if (likely(PyObject_TypeCheck(method, &PyMethodDescr_Type)))
    #endif
    {
        PyMethodDescrObject *descr = (PyMethodDescrObject*) method;
        target->func = descr->d_method->ml_meth;
        target->flag = descr->d_method->ml_flags & ~(METH_CLASS | METH_STATIC | METH_COEXIST);
    }
#endif
    return 0;
}

/* CallUnboundCMethod0 */
            static PyObject* __Pyx__CallUnboundCMethod0(__Pyx_CachedCFunction* cfunc, PyObject* self) {
    PyObject *args, *result = NULL;
    if (unlikely(!cfunc->method) && unlikely(__Pyx_TryUnpackUnboundCMethod(cfunc) < 0)) return NULL;
#if CYTHON_ASSUME_SAFE_MACROS
    args = PyTuple_New(1);
    if (unlikely(!args)) goto bad;
    Py_INCREF(self);
    PyTuple_SET_ITEM(args, 0, self);
#else
    args = PyTuple_Pack(1, self);
    if (unlikely(!args)) goto bad;
#endif
    result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
    Py_DECREF(args);
bad:
    return result;
}

/* pop */
            static CYTHON_INLINE PyObject* __Pyx__PyObject_Pop(PyObject* L) {
    if (Py_TYPE(L) == &PySet_Type) {
        return PySet_Pop(L);
    }
    return __Pyx_PyObject_CallMethod0(L, __pyx_n_s_pop);
}
#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
static CYTHON_INLINE PyObject* __Pyx_PyList_Pop(PyObject* L) {
    if (likely(PyList_GET_SIZE(L) > (((PyListObject*)L)->allocated >> 1))) {
        Py_SIZE(L) -= 1;
        return PyList_GET_ITEM(L, PyList_GET_SIZE(L));
    }
    return __Pyx_CallUnboundCMethod0(&__pyx_umethod_PyList_Type_pop, L);
}
#endif

/* RaiseTooManyValuesToUnpack */
            static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected) {
    PyErr_Format(PyExc_ValueError,
                 "too many values to unpack (expected %" CYTHON_FORMAT_SSIZE_T "d)", expected);
}

/* RaiseNeedMoreValuesToUnpack */
            static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index) {
    PyErr_Format(PyExc_ValueError,
                 "need more than %" CYTHON_FORMAT_SSIZE_T "d value%.1s to unpack",
                 index, (index == 1) ? "" : "s");
}

/* IterFinish */
            static CYTHON_INLINE int __Pyx_IterFinish(void) {
#if CYTHON_FAST_THREAD_STATE
    PyThreadState *tstate = PyThreadState_GET();
    PyObject* exc_type = tstate->curexc_type;
    if (unlikely(exc_type)) {
        if (likely(exc_type == PyExc_StopIteration) || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration)) {
            PyObject *exc_value, *exc_tb;
            exc_value = tstate->curexc_value;
            exc_tb = tstate->curexc_traceback;
            tstate->curexc_type = 0;
            tstate->curexc_value = 0;
            tstate->curexc_traceback = 0;
            Py_DECREF(exc_type);
            Py_XDECREF(exc_value);
            Py_XDECREF(exc_tb);
            return 0;
        } else {
            return -1;
        }
    }
    return 0;
#else
    if (unlikely(PyErr_Occurred())) {
        if (likely(PyErr_ExceptionMatches(PyExc_StopIteration))) {
            PyErr_Clear();
            return 0;
        } else {
            return -1;
        }
    }
    return 0;
#endif
}

/* UnpackItemEndCheck */
            static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected) {
    if (unlikely(retval)) {
        Py_DECREF(retval);
        __Pyx_RaiseTooManyValuesError(expected);
        return -1;
    } else {
        return __Pyx_IterFinish();
    }
    return 0;
}

/* SetItemInt */
            static CYTHON_INLINE int __Pyx_SetItemInt_Generic(PyObject *o, PyObject *j, PyObject *v) {
    int r;
    if (!j) return -1;
    r = PyObject_SetItem(o, j, v);
    Py_DECREF(j);
    return r;
}
static CYTHON_INLINE int __Pyx_SetItemInt_Fast(PyObject *o, Py_ssize_t i, PyObject *v, int is_list,
                                               CYTHON_NCP_UNUSED int wraparound, CYTHON_NCP_UNUSED int boundscheck) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
    if (is_list || PyList_CheckExact(o)) {
        Py_ssize_t n = (!wraparound) ? i : ((likely(i >= 0)) ? i : i + PyList_GET_SIZE(o));
        if ((!boundscheck) || likely((n >= 0) & (n < PyList_GET_SIZE(o)))) {
            PyObject* old = PyList_GET_ITEM(o, n);
            Py_INCREF(v);
            PyList_SET_ITEM(o, n, v);
            Py_DECREF(old);
            return 1;
        }
    } else {
        PySequenceMethods *m = Py_TYPE(o)->tp_as_sequence;
        if (likely(m && m->sq_ass_item)) {
            if (wraparound && unlikely(i < 0) && likely(m->sq_length)) {
                Py_ssize_t l = m->sq_length(o);
                if (likely(l >= 0)) {
                    i += l;
                } else {
                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
                        return -1;
                    PyErr_Clear();
                }
            }
            return m->sq_ass_item(o, i, v);
        }
    }
#else
#if CYTHON_COMPILING_IN_PYPY
    if (is_list || (PySequence_Check(o) && !PyDict_Check(o))) {
#else
    if (is_list || PySequence_Check(o)) {
#endif
        return PySequence_SetItem(o, i, v);
    }
#endif
    return __Pyx_SetItemInt_Generic(o, PyInt_FromSsize_t(i), v);
}

/* PyIntBinop */
              #if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_AddObjC(PyObject *op1, PyObject *op2, CYTHON_UNUSED long intval, CYTHON_UNUSED int inplace) {
    #if PY_MAJOR_VERSION < 3
    if (likely(PyInt_CheckExact(op1))) {
        const long b = intval;
        long x;
        long a = PyInt_AS_LONG(op1);
            x = (long)((unsigned long)a + b);
            if (likely((x^a) >= 0 || (x^b) >= 0))
                return PyInt_FromLong(x);
            return PyLong_Type.tp_as_number->nb_add(op1, op2);
    }
    #endif
    #if CYTHON_USE_PYLONG_INTERNALS
    if (likely(PyLong_CheckExact(op1))) {
        const long b = intval;
        long a, x;
#ifdef HAVE_LONG_LONG
        const PY_LONG_LONG llb = intval;
        PY_LONG_LONG lla, llx;
#endif
        const digit* digits = ((PyLongObject*)op1)->ob_digit;
        const Py_ssize_t size = Py_SIZE(op1);
        if (likely(__Pyx_sst_abs(size) <= 1)) {
            a = likely(size) ? digits[0] : 0;
            if (size == -1) a = -a;
        } else {
            switch (size) {
                case -2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                case 2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                case -3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                case 3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                case -4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                case 4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                default: return PyLong_Type.tp_as_number->nb_add(op1, op2);
            }
        }
                x = a + b;
            return PyLong_FromLong(x);
#ifdef HAVE_LONG_LONG
        long_long:
                llx = lla + llb;
            return PyLong_FromLongLong(llx);
#endif
        
        
    }
    #endif
    if (PyFloat_CheckExact(op1)) {
        const long b = intval;
        double a = PyFloat_AS_DOUBLE(op1);
            double result;
            PyFPE_START_PROTECT("add", return NULL)
            result = ((double)a) + (double)b;
            PyFPE_END_PROTECT(result)
            return PyFloat_FromDouble(result);
    }
    return (inplace ? PyNumber_InPlaceAdd : PyNumber_Add)(op1, op2);
}
#endif

/* SliceObject */
              static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(PyObject* obj,
        Py_ssize_t cstart, Py_ssize_t cstop,
        PyObject** _py_start, PyObject** _py_stop, PyObject** _py_slice,
        int has_cstart, int has_cstop, CYTHON_UNUSED int wraparound) {
#if CYTHON_USE_TYPE_SLOTS
    PyMappingMethods* mp;
#if PY_MAJOR_VERSION < 3
    PySequenceMethods* ms = Py_TYPE(obj)->tp_as_sequence;
    if (likely(ms && ms->sq_slice)) {
        if (!has_cstart) {
            if (_py_start && (*_py_start != Py_None)) {
                cstart = __Pyx_PyIndex_AsSsize_t(*_py_start);
                if ((cstart == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
            } else
                cstart = 0;
        }
        if (!has_cstop) {
            if (_py_stop && (*_py_stop != Py_None)) {
                cstop = __Pyx_PyIndex_AsSsize_t(*_py_stop);
                if ((cstop == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
            } else
                cstop = PY_SSIZE_T_MAX;
        }
        if (wraparound && unlikely((cstart < 0) | (cstop < 0)) && likely(ms->sq_length)) {
            Py_ssize_t l = ms->sq_length(obj);
            if (likely(l >= 0)) {
                if (cstop < 0) {
                    cstop += l;
                    if (cstop < 0) cstop = 0;
                }
                if (cstart < 0) {
                    cstart += l;
                    if (cstart < 0) cstart = 0;
                }
            } else {
                if (!PyErr_ExceptionMatches(PyExc_OverflowError))
                    goto bad;
                PyErr_Clear();
            }
        }
        return ms->sq_slice(obj, cstart, cstop);
    }
#endif
    mp = Py_TYPE(obj)->tp_as_mapping;
    if (likely(mp && mp->mp_subscript))
#endif
    {
        PyObject* result;
        PyObject *py_slice, *py_start, *py_stop;
        if (_py_slice) {
            py_slice = *_py_slice;
        } else {
            PyObject* owned_start = NULL;
            PyObject* owned_stop = NULL;
            if (_py_start) {
                py_start = *_py_start;
            } else {
                if (has_cstart) {
                    owned_start = py_start = PyInt_FromSsize_t(cstart);
                    if (unlikely(!py_start)) goto bad;
                } else
                    py_start = Py_None;
            }
            if (_py_stop) {
                py_stop = *_py_stop;
            } else {
                if (has_cstop) {
                    owned_stop = py_stop = PyInt_FromSsize_t(cstop);
                    if (unlikely(!py_stop)) {
                        Py_XDECREF(owned_start);
                        goto bad;
                    }
                } else
                    py_stop = Py_None;
            }
            py_slice = PySlice_New(py_start, py_stop, Py_None);
            Py_XDECREF(owned_start);
            Py_XDECREF(owned_stop);
            if (unlikely(!py_slice)) goto bad;
        }
#if CYTHON_USE_TYPE_SLOTS
        result = mp->mp_subscript(obj, py_slice);
#else
        result = PyObject_GetItem(obj, py_slice);
#endif
        if (!_py_slice) {
            Py_DECREF(py_slice);
        }
        return result;
    }
    PyErr_Format(PyExc_TypeError,
        "'%.200s' object is unsliceable", Py_TYPE(obj)->tp_name);
bad:
    return NULL;
}

/* PyIntBinop */
              #if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_EqObjC(PyObject *op1, PyObject *op2, CYTHON_UNUSED long intval, CYTHON_UNUSED int inplace) {
    if (op1 == op2) {
        Py_RETURN_TRUE;
    }
    #if PY_MAJOR_VERSION < 3
    if (likely(PyInt_CheckExact(op1))) {
        const long b = intval;
        long a = PyInt_AS_LONG(op1);
        if (a == b) {
            Py_RETURN_TRUE;
        } else {
            Py_RETURN_FALSE;
        }
    }
    #endif
    #if CYTHON_USE_PYLONG_INTERNALS
    if (likely(PyLong_CheckExact(op1))) {
        const long b = intval;
        long a;
        const digit* digits = ((PyLongObject*)op1)->ob_digit;
        const Py_ssize_t size = Py_SIZE(op1);
        if (likely(__Pyx_sst_abs(size) <= 1)) {
            a = likely(size) ? digits[0] : 0;
            if (size == -1) a = -a;
        } else {
            switch (size) {
                case -2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
                    }
                case 2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
                    }
                case -3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
                    }
                case 3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
                    }
                case -4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
                    }
                case 4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
                    }
                #if PyLong_SHIFT < 30 && PyLong_SHIFT != 15
                default: return PyLong_Type.tp_richcompare(op1, op2, Py_EQ);
                #else
                default: Py_RETURN_FALSE;
                #endif
            }
        }
            if (a == b) {
                Py_RETURN_TRUE;
            } else {
                Py_RETURN_FALSE;
            }
    }
    #endif
    if (PyFloat_CheckExact(op1)) {
        const long b = intval;
        double a = PyFloat_AS_DOUBLE(op1);
            if ((double)a == (double)b) {
                Py_RETURN_TRUE;
            } else {
                Py_RETURN_FALSE;
            }
    }
    return PyObject_RichCompare(op1, op2, Py_EQ);
}
#endif

/* None */
              static CYTHON_INLINE void __Pyx_RaiseUnboundLocalError(const char *varname) {
    PyErr_Format(PyExc_UnboundLocalError, "local variable '%s' referenced before assignment", varname);
}

/* KeywordStringCheck */
              static CYTHON_INLINE int __Pyx_CheckKeywordStrings(
    PyObject *kwdict,
    const char* function_name,
    int kw_allowed)
{
    PyObject* key = 0;
    Py_ssize_t pos = 0;
#if CYTHON_COMPILING_IN_PYPY
    if (!kw_allowed && PyDict_Next(kwdict, &pos, &key, 0))
        goto invalid_keyword;
    return 1;
#else
    while (PyDict_Next(kwdict, &pos, &key, 0)) {
        #if PY_MAJOR_VERSION < 3
        if (unlikely(!PyString_CheckExact(key)) && unlikely(!PyString_Check(key)))
        #endif
            if (unlikely(!PyUnicode_Check(key)))
                goto invalid_keyword_type;
    }
    if ((!kw_allowed) && unlikely(key))
        goto invalid_keyword;
    return 1;
invalid_keyword_type:
    PyErr_Format(PyExc_TypeError,
        "%.200s() keywords must be strings", function_name);
    return 0;
#endif
invalid_keyword:
    PyErr_Format(PyExc_TypeError,
    #if PY_MAJOR_VERSION < 3
        "%.200s() got an unexpected keyword argument '%.200s'",
        function_name, PyString_AsString(key));
    #else
        "%s() got an unexpected keyword argument '%U'",
        function_name, key);
    #endif
    return 0;
}

/* Import */
              static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
    PyObject *empty_list = 0;
    PyObject *module = 0;
    PyObject *global_dict = 0;
    PyObject *empty_dict = 0;
    PyObject *list;
    #if PY_VERSION_HEX < 0x03030000
    PyObject *py_import;
    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
    if (!py_import)
        goto bad;
    #endif
    if (from_list)
        list = from_list;
    else {
        empty_list = PyList_New(0);
        if (!empty_list)
            goto bad;
        list = empty_list;
    }
    global_dict = PyModule_GetDict(__pyx_m);
    if (!global_dict)
        goto bad;
    empty_dict = PyDict_New();
    if (!empty_dict)
        goto bad;
    {
        #if PY_MAJOR_VERSION >= 3
        if (level == -1) {
            if (strchr(__Pyx_MODULE_NAME, '.')) {
                #if PY_VERSION_HEX < 0x03030000
                PyObject *py_level = PyInt_FromLong(1);
                if (!py_level)
                    goto bad;
                module = PyObject_CallFunctionObjArgs(py_import,
                    name, global_dict, empty_dict, list, py_level, NULL);
                Py_DECREF(py_level);
                #else
                module = PyImport_ImportModuleLevelObject(
                    name, global_dict, empty_dict, list, 1);
                #endif
                if (!module) {
                    if (!PyErr_ExceptionMatches(PyExc_ImportError))
                        goto bad;
                    PyErr_Clear();
                }
            }
            level = 0;
        }
        #endif
        if (!module) {
            #if PY_VERSION_HEX < 0x03030000
            PyObject *py_level = PyInt_FromLong(level);
            if (!py_level)
                goto bad;
            module = PyObject_CallFunctionObjArgs(py_import,
                name, global_dict, empty_dict, list, py_level, NULL);
            Py_DECREF(py_level);
            #else
            module = PyImport_ImportModuleLevelObject(
                name, global_dict, empty_dict, list, level);
            #endif
        }
    }
bad:
    #if PY_VERSION_HEX < 0x03030000
    Py_XDECREF(py_import);
    #endif
    Py_XDECREF(empty_list);
    Py_XDECREF(empty_dict);
    return module;
}

/* ImportFrom */
              static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
        PyErr_Format(PyExc_ImportError,
        #if PY_MAJOR_VERSION < 3
            "cannot import name %.230s", PyString_AS_STRING(name));
        #else
            "cannot import name %S", name);
        #endif
    }
    return value;
}

/* HasAttr */
              static CYTHON_INLINE int __Pyx_HasAttr(PyObject *o, PyObject *n) {
    PyObject *r;
    if (unlikely(!__Pyx_PyBaseString_Check(n))) {
        PyErr_SetString(PyExc_TypeError,
                        "hasattr(): attribute name must be string");
        return -1;
    }
    r = __Pyx_GetAttr(o, n);
    if (unlikely(!r)) {
        PyErr_Clear();
        return 0;
    } else {
        Py_DECREF(r);
        return 1;
    }
}

/* SetVTable */
              static int __Pyx_SetVtable(PyObject *dict, void *vtable) {
#if PY_VERSION_HEX >= 0x02070000
    PyObject *ob = PyCapsule_New(vtable, 0, 0);
#else
    PyObject *ob = PyCObject_FromVoidPtr(vtable, 0);
#endif
    if (!ob)
        goto bad;
    if (PyDict_SetItem(dict, __pyx_n_s_pyx_vtable, ob) < 0)
        goto bad;
    Py_DECREF(ob);
    return 0;
bad:
    Py_XDECREF(ob);
    return -1;
}

/* SetupReduce */
              #define __Pyx_setup_reduce_GET_ATTR_OR_BAD(res, obj, name) res = PyObject_GetAttrString(obj, name); if (res == NULL) goto BAD;
static int __Pyx_setup_reduce_is_named(PyObject* meth, PyObject* name) {
  int ret;
  PyObject *name_attr;
  name_attr = PyObject_GetAttrString(meth, "__name__");
  if (name_attr) {
      ret = PyObject_RichCompareBool(name_attr, name, Py_EQ);
  } else {
      ret = -1;
  }
  if (ret < 0) {
      PyErr_Clear();
      ret = 0;
  }
  Py_XDECREF(name_attr);
  return ret;
}
static int __Pyx_setup_reduce(PyObject* type_obj) {
    int ret = 0;
    PyObject* builtin_object = NULL;
    static PyObject *object_reduce = NULL;
    static PyObject *object_reduce_ex = NULL;
    PyObject *reduce = NULL;
    PyObject *reduce_ex = NULL;
    PyObject *reduce_cython = NULL;
    PyObject *setstate = NULL;
    PyObject *setstate_cython = NULL;
    if (PyObject_HasAttrString(type_obj, "__getstate__")) goto GOOD;
    if (object_reduce_ex == NULL) {
        __Pyx_setup_reduce_GET_ATTR_OR_BAD(builtin_object, __pyx_b, "object");
        __Pyx_setup_reduce_GET_ATTR_OR_BAD(object_reduce, builtin_object, "__reduce__");
        __Pyx_setup_reduce_GET_ATTR_OR_BAD(object_reduce_ex, builtin_object, "__reduce_ex__");
    }
    __Pyx_setup_reduce_GET_ATTR_OR_BAD(reduce_ex, type_obj, "__reduce_ex__");
    if (reduce_ex == object_reduce_ex) {
        __Pyx_setup_reduce_GET_ATTR_OR_BAD(reduce, type_obj, "__reduce__");
        if (object_reduce == reduce || __Pyx_setup_reduce_is_named(reduce, __pyx_n_s_reduce_cython)) {
            __Pyx_setup_reduce_GET_ATTR_OR_BAD(reduce_cython, type_obj, "__reduce_cython__");
            ret = PyDict_SetItemString(((PyTypeObject*)type_obj)->tp_dict, "__reduce__", reduce_cython); if (ret < 0) goto BAD;
            ret = PyDict_DelItemString(((PyTypeObject*)type_obj)->tp_dict, "__reduce_cython__"); if (ret < 0) goto BAD;
            setstate = PyObject_GetAttrString(type_obj, "__setstate__");
            if (!setstate) PyErr_Clear();
            if (!setstate || __Pyx_setup_reduce_is_named(setstate, __pyx_n_s_setstate_cython)) {
            __Pyx_setup_reduce_GET_ATTR_OR_BAD(setstate_cython, type_obj, "__setstate_cython__");
                ret = PyDict_SetItemString(((PyTypeObject*)type_obj)->tp_dict, "__setstate__", setstate_cython); if (ret < 0) goto BAD;
                ret = PyDict_DelItemString(((PyTypeObject*)type_obj)->tp_dict, "__setstate_cython__"); if (ret < 0) goto BAD;
            }
            PyType_Modified((PyTypeObject*)type_obj);
        }
    }
    goto GOOD;
BAD:
    if (!PyErr_Occurred()) PyErr_Format(PyExc_RuntimeError, "Unable to initialize pickling for %s", ((PyTypeObject*)type_obj)->tp_name);
    ret = -1;
GOOD:
    Py_XDECREF(builtin_object);
    Py_XDECREF(reduce);
    Py_XDECREF(reduce_ex);
    Py_XDECREF(reduce_cython);
    Py_XDECREF(setstate);
    Py_XDECREF(setstate_cython);
    return ret;
}

/* GetVTable */
              static void* __Pyx_GetVtable(PyObject *dict) {
    void* ptr;
    PyObject *ob = PyObject_GetItem(dict, __pyx_n_s_pyx_vtable);
    if (!ob)
        goto bad;
#if PY_VERSION_HEX >= 0x02070000
    ptr = PyCapsule_GetPointer(ob, 0);
#else
    ptr = PyCObject_AsVoidPtr(ob);
#endif
    if (!ptr && !PyErr_Occurred())
        PyErr_SetString(PyExc_RuntimeError, "invalid vtable found for imported type");
    Py_DECREF(ob);
    return ptr;
bad:
    Py_XDECREF(ob);
    return NULL;
}

/* CLineInTraceback */
              static int __Pyx_CLineForTraceback(int c_line) {
#ifdef CYTHON_CLINE_IN_TRACEBACK
    return ((CYTHON_CLINE_IN_TRACEBACK)) ? c_line : 0;
#else
    PyObject **cython_runtime_dict;
    PyObject *use_cline;
    cython_runtime_dict = _PyObject_GetDictPtr(__pyx_cython_runtime);
    if (unlikely(!cython_runtime_dict)) {
      PyObject *ptype, *pvalue, *ptraceback;
      PyObject *use_cline_obj;
      PyErr_Fetch(&ptype, &pvalue, &ptraceback);
      use_cline_obj = __Pyx_PyObject_GetAttrStr(__pyx_cython_runtime, __pyx_n_s_cline_in_traceback);
      if (use_cline_obj) {
        use_cline = PyObject_Not(use_cline_obj) ? Py_False : Py_True;
        Py_DECREF(use_cline_obj);
      } else {
        use_cline = NULL;
      }
      PyErr_Restore(ptype, pvalue, ptraceback);
    } else {
      use_cline = PyDict_GetItem(*_PyObject_GetDictPtr(__pyx_cython_runtime), __pyx_n_s_cline_in_traceback);
    }
    if (!use_cline) {
        c_line = 0;
        PyObject_SetAttr(__pyx_cython_runtime, __pyx_n_s_cline_in_traceback, Py_False);
    }
    else if (PyObject_Not(use_cline) != 0) {
        c_line = 0;
    }
    return c_line;
#endif
}

/* CodeObjectCache */
              static int __pyx_bisect_code_objects(__Pyx_CodeObjectCacheEntry* entries, int count, int code_line) {
    int start = 0, mid = 0, end = count - 1;
    if (end >= 0 && code_line > entries[end].code_line) {
        return count;
    }
    while (start < end) {
        mid = start + (end - start) / 2;
        if (code_line < entries[mid].code_line) {
            end = mid;
        } else if (code_line > entries[mid].code_line) {
             start = mid + 1;
        } else {
            return mid;
        }
    }
    if (code_line <= entries[mid].code_line) {
        return mid;
    } else {
        return mid + 1;
    }
}
static PyCodeObject *__pyx_find_code_object(int code_line) {
    PyCodeObject* code_object;
    int pos;
    if (unlikely(!code_line) || unlikely(!__pyx_code_cache.entries)) {
        return NULL;
    }
    pos = __pyx_bisect_code_objects(__pyx_code_cache.entries, __pyx_code_cache.count, code_line);
    if (unlikely(pos >= __pyx_code_cache.count) || unlikely(__pyx_code_cache.entries[pos].code_line != code_line)) {
        return NULL;
    }
    code_object = __pyx_code_cache.entries[pos].code_object;
    Py_INCREF(code_object);
    return code_object;
}
static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object) {
    int pos, i;
    __Pyx_CodeObjectCacheEntry* entries = __pyx_code_cache.entries;
    if (unlikely(!code_line)) {
        return;
    }
    if (unlikely(!entries)) {
        entries = (__Pyx_CodeObjectCacheEntry*)PyMem_Malloc(64*sizeof(__Pyx_CodeObjectCacheEntry));
        if (likely(entries)) {
            __pyx_code_cache.entries = entries;
            __pyx_code_cache.max_count = 64;
            __pyx_code_cache.count = 1;
            entries[0].code_line = code_line;
            entries[0].code_object = code_object;
            Py_INCREF(code_object);
        }
        return;
    }
    pos = __pyx_bisect_code_objects(__pyx_code_cache.entries, __pyx_code_cache.count, code_line);
    if ((pos < __pyx_code_cache.count) && unlikely(__pyx_code_cache.entries[pos].code_line == code_line)) {
        PyCodeObject* tmp = entries[pos].code_object;
        entries[pos].code_object = code_object;
        Py_DECREF(tmp);
        return;
    }
    if (__pyx_code_cache.count == __pyx_code_cache.max_count) {
        int new_max = __pyx_code_cache.max_count + 64;
        entries = (__Pyx_CodeObjectCacheEntry*)PyMem_Realloc(
            __pyx_code_cache.entries, (size_t)new_max*sizeof(__Pyx_CodeObjectCacheEntry));
        if (unlikely(!entries)) {
            return;
        }
        __pyx_code_cache.entries = entries;
        __pyx_code_cache.max_count = new_max;
    }
    for (i=__pyx_code_cache.count; i>pos; i--) {
        entries[i] = entries[i-1];
    }
    entries[pos].code_line = code_line;
    entries[pos].code_object = code_object;
    __pyx_code_cache.count++;
    Py_INCREF(code_object);
}

/* AddTraceback */
              #include "compile.h"
#include "frameobject.h"
#include "traceback.h"
static PyCodeObject* __Pyx_CreateCodeObjectForTraceback(
            const char *funcname, int c_line,
            int py_line, const char *filename) {
    PyCodeObject *py_code = 0;
    PyObject *py_srcfile = 0;
    PyObject *py_funcname = 0;
    #if PY_MAJOR_VERSION < 3
    py_srcfile = PyString_FromString(filename);
    #else
    py_srcfile = PyUnicode_FromString(filename);
    #endif
    if (!py_srcfile) goto bad;
    if (c_line) {
        #if PY_MAJOR_VERSION < 3
        py_funcname = PyString_FromFormat( "%s (%s:%d)", funcname, __pyx_cfilenm, c_line);
        #else
        py_funcname = PyUnicode_FromFormat( "%s (%s:%d)", funcname, __pyx_cfilenm, c_line);
        #endif
    }
    else {
        #if PY_MAJOR_VERSION < 3
        py_funcname = PyString_FromString(funcname);
        #else
        py_funcname = PyUnicode_FromString(funcname);
        #endif
    }
    if (!py_funcname) goto bad;
    py_code = __Pyx_PyCode_New(
        0,
        0,
        0,
        0,
        0,
        __pyx_empty_bytes, /*PyObject *code,*/
        __pyx_empty_tuple, /*PyObject *consts,*/
        __pyx_empty_tuple, /*PyObject *names,*/
        __pyx_empty_tuple, /*PyObject *varnames,*/
        __pyx_empty_tuple, /*PyObject *freevars,*/
        __pyx_empty_tuple, /*PyObject *cellvars,*/
        py_srcfile,   /*PyObject *filename,*/
        py_funcname,  /*PyObject *name,*/
        py_line,
        __pyx_empty_bytes  /*PyObject *lnotab*/
    );
    Py_DECREF(py_srcfile);
    Py_DECREF(py_funcname);
    return py_code;
bad:
    Py_XDECREF(py_srcfile);
    Py_XDECREF(py_funcname);
    return NULL;
}
static void __Pyx_AddTraceback(const char *funcname, int c_line,
                               int py_line, const char *filename) {
    PyCodeObject *py_code = 0;
    PyFrameObject *py_frame = 0;
    if (c_line) {
        c_line = __Pyx_CLineForTraceback(c_line);
    }
    py_code = __pyx_find_code_object(c_line ? -c_line : py_line);
    if (!py_code) {
        py_code = __Pyx_CreateCodeObjectForTraceback(
            funcname, c_line, py_line, filename);
        if (!py_code) goto bad;
        __pyx_insert_code_object(c_line ? -c_line : py_line, py_code);
    }
    py_frame = PyFrame_New(
        PyThreadState_GET(), /*PyThreadState *tstate,*/
        py_code,             /*PyCodeObject *code,*/
        __pyx_d,      /*PyObject *globals,*/
        0                    /*PyObject *locals*/
    );
    if (!py_frame) goto bad;
    __Pyx_PyFrame_SetLineNumber(py_frame, py_line);
    PyTraceBack_Here(py_frame);
bad:
    Py_XDECREF(py_code);
    Py_XDECREF(py_frame);
}

/* CIntToPy */
              static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
    const long neg_one = (long) -1, const_zero = (long) 0;
    const int is_unsigned = neg_one > const_zero;
    if (is_unsigned) {
        if (sizeof(long) < sizeof(long)) {
            return PyInt_FromLong((long) value);
        } else if (sizeof(long) <= sizeof(unsigned long)) {
            return PyLong_FromUnsignedLong((unsigned long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(long) <= sizeof(unsigned PY_LONG_LONG)) {
            return PyLong_FromUnsignedLongLong((unsigned PY_LONG_LONG) value);
#endif
        }
    } else {
        if (sizeof(long) <= sizeof(long)) {
            return PyInt_FromLong((long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(long) <= sizeof(PY_LONG_LONG)) {
            return PyLong_FromLongLong((PY_LONG_LONG) value);
#endif
        }
    }
    {
        int one = 1; int little = (int)*(unsigned char *)&one;
        unsigned char *bytes = (unsigned char *)&value;
        return _PyLong_FromByteArray(bytes, sizeof(long),
                                     little, !is_unsigned);
    }
}

/* CIntFromPyVerify */
              #define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
    __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
#define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
    __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
#define __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, exc)\
    {\
        func_type value = func_value;\
        if (sizeof(target_type) < sizeof(func_type)) {\
            if (unlikely(value != (func_type) (target_type) value)) {\
                func_type zero = 0;\
                if (exc && unlikely(value == (func_type)-1 && PyErr_Occurred()))\
                    return (target_type) -1;\
                if (is_unsigned && unlikely(value < zero))\
                    goto raise_neg_overflow;\
                else\
                    goto raise_overflow;\
            }\
        }\
        return (target_type) value;\
    }

/* CIntToPy */
              static CYTHON_INLINE PyObject* __Pyx_PyInt_From_unsigned_long(unsigned long value) {
    const unsigned long neg_one = (unsigned long) -1, const_zero = (unsigned long) 0;
    const int is_unsigned = neg_one > const_zero;
    if (is_unsigned) {
        if (sizeof(unsigned long) < sizeof(long)) {
            return PyInt_FromLong((long) value);
        } else if (sizeof(unsigned long) <= sizeof(unsigned long)) {
            return PyLong_FromUnsignedLong((unsigned long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(unsigned long) <= sizeof(unsigned PY_LONG_LONG)) {
            return PyLong_FromUnsignedLongLong((unsigned PY_LONG_LONG) value);
#endif
        }
    } else {
        if (sizeof(unsigned long) <= sizeof(long)) {
            return PyInt_FromLong((long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(unsigned long) <= sizeof(PY_LONG_LONG)) {
            return PyLong_FromLongLong((PY_LONG_LONG) value);
#endif
        }
    }
    {
        int one = 1; int little = (int)*(unsigned char *)&one;
        unsigned char *bytes = (unsigned char *)&value;
        return _PyLong_FromByteArray(bytes, sizeof(unsigned long),
                                     little, !is_unsigned);
    }
}

/* CIntFromPy */
              static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *x) {
    const long neg_one = (long) -1, const_zero = (long) 0;
    const int is_unsigned = neg_one > const_zero;
#if PY_MAJOR_VERSION < 3
    if (likely(PyInt_Check(x))) {
        if (sizeof(long) < sizeof(long)) {
            __PYX_VERIFY_RETURN_INT(long, long, PyInt_AS_LONG(x))
        } else {
            long val = PyInt_AS_LONG(x);
            if (is_unsigned && unlikely(val < 0)) {
                goto raise_neg_overflow;
            }
            return (long) val;
        }
    } else
#endif
    if (likely(PyLong_Check(x))) {
        if (is_unsigned) {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (long) 0;
                case  1: __PYX_VERIFY_RETURN_INT(long, digit, digits[0])
                case 2:
                    if (8 * sizeof(long) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) >= 2 * PyLong_SHIFT) {
                            return (long) (((((long)digits[1]) << PyLong_SHIFT) | (long)digits[0]));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(long) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) >= 3 * PyLong_SHIFT) {
                            return (long) (((((((long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0]));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(long) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) >= 4 * PyLong_SHIFT) {
                            return (long) (((((((((long)digits[3]) << PyLong_SHIFT) | (long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0]));
                        }
                    }
                    break;
            }
#endif
#if CYTHON_COMPILING_IN_CPYTHON
            if (unlikely(Py_SIZE(x) < 0)) {
                goto raise_neg_overflow;
            }
#else
            {
                int result = PyObject_RichCompareBool(x, Py_False, Py_LT);
                if (unlikely(result < 0))
                    return (long) -1;
                if (unlikely(result == 1))
                    goto raise_neg_overflow;
            }
#endif
            if (sizeof(long) <= sizeof(unsigned long)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, unsigned long, PyLong_AsUnsignedLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(long) <= sizeof(unsigned PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, unsigned PY_LONG_LONG, PyLong_AsUnsignedLongLong(x))
#endif
            }
        } else {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (long) 0;
                case -1: __PYX_VERIFY_RETURN_INT(long, sdigit, (sdigit) (-(sdigit)digits[0]))
                case  1: __PYX_VERIFY_RETURN_INT(long,  digit, +digits[0])
                case -2:
                    if (8 * sizeof(long) - 1 > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, long, -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                            return (long) (((long)-1)*(((((long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case 2:
                    if (8 * sizeof(long) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                            return (long) ((((((long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case -3:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, long, -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                            return (long) (((long)-1)*(((((((long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(long) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                            return (long) ((((((((long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case -4:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, long, -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                            return (long) (((long)-1)*(((((((((long)digits[3]) << PyLong_SHIFT) | (long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(long) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                            return (long) ((((((((((long)digits[3]) << PyLong_SHIFT) | (long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
            }
#endif
            if (sizeof(long) <= sizeof(long)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, long, PyLong_AsLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(long) <= sizeof(PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, PY_LONG_LONG, PyLong_AsLongLong(x))
#endif
            }
        }
        {
#if CYTHON_COMPILING_IN_PYPY && !defined(_PyLong_AsByteArray)
            PyErr_SetString(PyExc_RuntimeError,
                            "_PyLong_AsByteArray() not available in PyPy, cannot convert large numbers");
#else
            long val;
            PyObject *v = __Pyx_PyNumber_IntOrLong(x);
 #if PY_MAJOR_VERSION < 3
            if (likely(v) && !PyLong_Check(v)) {
                PyObject *tmp = v;
                v = PyNumber_Long(tmp);
                Py_DECREF(tmp);
            }
 #endif
            if (likely(v)) {
                int one = 1; int is_little = (int)*(unsigned char *)&one;
                unsigned char *bytes = (unsigned char *)&val;
                int ret = _PyLong_AsByteArray((PyLongObject *)v,
                                              bytes, sizeof(val),
                                              is_little, !is_unsigned);
                Py_DECREF(v);
                if (likely(!ret))
                    return val;
            }
#endif
            return (long) -1;
        }
    } else {
        long val;
        PyObject *tmp = __Pyx_PyNumber_IntOrLong(x);
        if (!tmp) return (long) -1;
        val = __Pyx_PyInt_As_long(tmp);
        Py_DECREF(tmp);
        return val;
    }
raise_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "value too large to convert to long");
    return (long) -1;
raise_neg_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "can't convert negative value to long");
    return (long) -1;
}

/* CIntFromPy */
              static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *x) {
    const int neg_one = (int) -1, const_zero = (int) 0;
    const int is_unsigned = neg_one > const_zero;
#if PY_MAJOR_VERSION < 3
    if (likely(PyInt_Check(x))) {
        if (sizeof(int) < sizeof(long)) {
            __PYX_VERIFY_RETURN_INT(int, long, PyInt_AS_LONG(x))
        } else {
            long val = PyInt_AS_LONG(x);
            if (is_unsigned && unlikely(val < 0)) {
                goto raise_neg_overflow;
            }
            return (int) val;
        }
    } else
#endif
    if (likely(PyLong_Check(x))) {
        if (is_unsigned) {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (int) 0;
                case  1: __PYX_VERIFY_RETURN_INT(int, digit, digits[0])
                case 2:
                    if (8 * sizeof(int) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) >= 2 * PyLong_SHIFT) {
                            return (int) (((((int)digits[1]) << PyLong_SHIFT) | (int)digits[0]));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(int) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) >= 3 * PyLong_SHIFT) {
                            return (int) (((((((int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0]));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(int) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) >= 4 * PyLong_SHIFT) {
                            return (int) (((((((((int)digits[3]) << PyLong_SHIFT) | (int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0]));
                        }
                    }
                    break;
            }
#endif
#if CYTHON_COMPILING_IN_CPYTHON
            if (unlikely(Py_SIZE(x) < 0)) {
                goto raise_neg_overflow;
            }
#else
            {
                int result = PyObject_RichCompareBool(x, Py_False, Py_LT);
                if (unlikely(result < 0))
                    return (int) -1;
                if (unlikely(result == 1))
                    goto raise_neg_overflow;
            }
#endif
            if (sizeof(int) <= sizeof(unsigned long)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, unsigned long, PyLong_AsUnsignedLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(int) <= sizeof(unsigned PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, unsigned PY_LONG_LONG, PyLong_AsUnsignedLongLong(x))
#endif
            }
        } else {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (int) 0;
                case -1: __PYX_VERIFY_RETURN_INT(int, sdigit, (sdigit) (-(sdigit)digits[0]))
                case  1: __PYX_VERIFY_RETURN_INT(int,  digit, +digits[0])
                case -2:
                    if (8 * sizeof(int) - 1 > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, long, -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 2 * PyLong_SHIFT) {
                            return (int) (((int)-1)*(((((int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case 2:
                    if (8 * sizeof(int) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 2 * PyLong_SHIFT) {
                            return (int) ((((((int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case -3:
                    if (8 * sizeof(int) - 1 > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, long, -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 3 * PyLong_SHIFT) {
                            return (int) (((int)-1)*(((((((int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(int) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 3 * PyLong_SHIFT) {
                            return (int) ((((((((int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case -4:
                    if (8 * sizeof(int) - 1 > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, long, -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 4 * PyLong_SHIFT) {
                            return (int) (((int)-1)*(((((((((int)digits[3]) << PyLong_SHIFT) | (int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(int) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 4 * PyLong_SHIFT) {
                            return (int) ((((((((((int)digits[3]) << PyLong_SHIFT) | (int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
            }
#endif
            if (sizeof(int) <= sizeof(long)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, long, PyLong_AsLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(int) <= sizeof(PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, PY_LONG_LONG, PyLong_AsLongLong(x))
#endif
            }
        }
        {
#if CYTHON_COMPILING_IN_PYPY && !defined(_PyLong_AsByteArray)
            PyErr_SetString(PyExc_RuntimeError,
                            "_PyLong_AsByteArray() not available in PyPy, cannot convert large numbers");
#else
            int val;
            PyObject *v = __Pyx_PyNumber_IntOrLong(x);
 #if PY_MAJOR_VERSION < 3
            if (likely(v) && !PyLong_Check(v)) {
                PyObject *tmp = v;
                v = PyNumber_Long(tmp);
                Py_DECREF(tmp);
            }
 #endif
            if (likely(v)) {
                int one = 1; int is_little = (int)*(unsigned char *)&one;
                unsigned char *bytes = (unsigned char *)&val;
                int ret = _PyLong_AsByteArray((PyLongObject *)v,
                                              bytes, sizeof(val),
                                              is_little, !is_unsigned);
                Py_DECREF(v);
                if (likely(!ret))
                    return val;
            }
#endif
            return (int) -1;
        }
    } else {
        int val;
        PyObject *tmp = __Pyx_PyNumber_IntOrLong(x);
        if (!tmp) return (int) -1;
        val = __Pyx_PyInt_As_int(tmp);
        Py_DECREF(tmp);
        return val;
    }
raise_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "value too large to convert to int");
    return (int) -1;
raise_neg_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "can't convert negative value to int");
    return (int) -1;
}

/* SwapException */
              #if CYTHON_FAST_THREAD_STATE
static CYTHON_INLINE void __Pyx__ExceptionSwap(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
    PyObject *tmp_type, *tmp_value, *tmp_tb;
    tmp_type = tstate->exc_type;
    tmp_value = tstate->exc_value;
    tmp_tb = tstate->exc_traceback;
    tstate->exc_type = *type;
    tstate->exc_value = *value;
    tstate->exc_traceback = *tb;
    *type = tmp_type;
    *value = tmp_value;
    *tb = tmp_tb;
}
#else
static CYTHON_INLINE void __Pyx_ExceptionSwap(PyObject **type, PyObject **value, PyObject **tb) {
    PyObject *tmp_type, *tmp_value, *tmp_tb;
    PyErr_GetExcInfo(&tmp_type, &tmp_value, &tmp_tb);
    PyErr_SetExcInfo(*type, *value, *tb);
    *type = tmp_type;
    *value = tmp_value;
    *tb = tmp_tb;
}
#endif

/* CoroutineBase */
              #include <structmember.h>
#include <frameobject.h>
static PyObject *__Pyx_Coroutine_Send(PyObject *self, PyObject *value);
static PyObject *__Pyx_Coroutine_Close(PyObject *self);
static PyObject *__Pyx_Coroutine_Throw(PyObject *gen, PyObject *args);
#define __Pyx_Coroutine_Undelegate(gen) Py_CLEAR((gen)->yieldfrom)
#if 1 || PY_VERSION_HEX < 0x030300B0
static int __Pyx_PyGen_FetchStopIterationValue(PyObject **pvalue) {
    PyObject *et, *ev, *tb;
    PyObject *value = NULL;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ErrFetch(&et, &ev, &tb);
    if (!et) {
        Py_XDECREF(tb);
        Py_XDECREF(ev);
        Py_INCREF(Py_None);
        *pvalue = Py_None;
        return 0;
    }
    if (likely(et == PyExc_StopIteration)) {
        if (!ev) {
            Py_INCREF(Py_None);
            value = Py_None;
        }
#if PY_VERSION_HEX >= 0x030300A0
        else if (Py_TYPE(ev) == (PyTypeObject*)PyExc_StopIteration) {
            value = ((PyStopIterationObject *)ev)->value;
            Py_INCREF(value);
            Py_DECREF(ev);
        }
#endif
        else if (unlikely(PyTuple_Check(ev))) {
            if (PyTuple_GET_SIZE(ev) >= 1) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
                value = PyTuple_GET_ITEM(ev, 0);
                Py_INCREF(value);
#else
                value = PySequence_ITEM(ev, 0);
#endif
            } else {
                Py_INCREF(Py_None);
                value = Py_None;
            }
            Py_DECREF(ev);
        }
        else if (!PyObject_TypeCheck(ev, (PyTypeObject*)PyExc_StopIteration)) {
            value = ev;
        }
        if (likely(value)) {
            Py_XDECREF(tb);
            Py_DECREF(et);
            *pvalue = value;
            return 0;
        }
    } else if (!PyErr_GivenExceptionMatches(et, PyExc_StopIteration)) {
        __Pyx_ErrRestore(et, ev, tb);
        return -1;
    }
    PyErr_NormalizeException(&et, &ev, &tb);
    if (unlikely(!PyObject_TypeCheck(ev, (PyTypeObject*)PyExc_StopIteration))) {
        __Pyx_ErrRestore(et, ev, tb);
        return -1;
    }
    Py_XDECREF(tb);
    Py_DECREF(et);
#if PY_VERSION_HEX >= 0x030300A0
    value = ((PyStopIterationObject *)ev)->value;
    Py_INCREF(value);
    Py_DECREF(ev);
#else
    {
        PyObject* args = __Pyx_PyObject_GetAttrStr(ev, __pyx_n_s_args);
        Py_DECREF(ev);
        if (likely(args)) {
            value = PySequence_GetItem(args, 0);
            Py_DECREF(args);
        }
        if (unlikely(!value)) {
            __Pyx_ErrRestore(NULL, NULL, NULL);
            Py_INCREF(Py_None);
            value = Py_None;
        }
    }
#endif
    *pvalue = value;
    return 0;
}
#endif
static CYTHON_INLINE
void __Pyx_Coroutine_ExceptionClear(__pyx_CoroutineObject *self) {
    PyObject *exc_type = self->exc_type;
    PyObject *exc_value = self->exc_value;
    PyObject *exc_traceback = self->exc_traceback;
    self->exc_type = NULL;
    self->exc_value = NULL;
    self->exc_traceback = NULL;
    Py_XDECREF(exc_type);
    Py_XDECREF(exc_value);
    Py_XDECREF(exc_traceback);
}
static CYTHON_INLINE
int __Pyx_Coroutine_CheckRunning(__pyx_CoroutineObject *gen) {
    if (unlikely(gen->is_running)) {
        PyErr_SetString(PyExc_ValueError,
                        "generator already executing");
        return 1;
    }
    return 0;
}
static CYTHON_INLINE
PyObject *__Pyx_Coroutine_SendEx(__pyx_CoroutineObject *self, PyObject *value) {
    PyObject *retval;
    __Pyx_PyThreadState_declare
    assert(!self->is_running);
    if (unlikely(self->resume_label == 0)) {
        if (unlikely(value && value != Py_None)) {
            PyErr_SetString(PyExc_TypeError,
                            "can't send non-None value to a "
                            "just-started generator");
            return NULL;
        }
    }
    if (unlikely(self->resume_label == -1)) {
        PyErr_SetNone(PyExc_StopIteration);
        return NULL;
    }
    __Pyx_PyThreadState_assign
    if (value) {
#if CYTHON_COMPILING_IN_PYPY || CYTHON_COMPILING_IN_PYSTON
#else
        if (self->exc_traceback) {
            PyTracebackObject *tb = (PyTracebackObject *) self->exc_traceback;
            PyFrameObject *f = tb->tb_frame;
            Py_XINCREF(__pyx_tstate->frame);
            assert(f->f_back == NULL);
            f->f_back = __pyx_tstate->frame;
        }
#endif
        __Pyx_ExceptionSwap(&self->exc_type, &self->exc_value,
                            &self->exc_traceback);
    } else {
        __Pyx_Coroutine_ExceptionClear(self);
    }
    self->is_running = 1;
    retval = self->body((PyObject *) self, value);
    self->is_running = 0;
    if (retval) {
        __Pyx_ExceptionSwap(&self->exc_type, &self->exc_value,
                            &self->exc_traceback);
#if CYTHON_COMPILING_IN_PYPY || CYTHON_COMPILING_IN_PYSTON
#else
        if (self->exc_traceback) {
            PyTracebackObject *tb = (PyTracebackObject *) self->exc_traceback;
            PyFrameObject *f = tb->tb_frame;
            Py_CLEAR(f->f_back);
        }
#endif
    } else {
        __Pyx_Coroutine_ExceptionClear(self);
    }
    return retval;
}
static CYTHON_INLINE
PyObject *__Pyx_Coroutine_MethodReturn(PyObject *retval) {
    if (unlikely(!retval && !PyErr_Occurred())) {
        PyErr_SetNone(PyExc_StopIteration);
    }
    return retval;
}
static CYTHON_INLINE
PyObject *__Pyx_Coroutine_FinishDelegation(__pyx_CoroutineObject *gen) {
    PyObject *ret;
    PyObject *val = NULL;
    __Pyx_Coroutine_Undelegate(gen);
    __Pyx_PyGen_FetchStopIterationValue(&val);
    ret = __Pyx_Coroutine_SendEx(gen, val);
    Py_XDECREF(val);
    return ret;
}
static PyObject *__Pyx_Coroutine_Send(PyObject *self, PyObject *value) {
    PyObject *retval;
    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject*) self;
    PyObject *yf = gen->yieldfrom;
    if (unlikely(__Pyx_Coroutine_CheckRunning(gen)))
        return NULL;
    if (yf) {
        PyObject *ret;
        gen->is_running = 1;
        #ifdef __Pyx_Generator_USED
        if (__Pyx_Generator_CheckExact(yf)) {
            ret = __Pyx_Coroutine_Send(yf, value);
        } else
        #endif
        #ifdef __Pyx_Coroutine_USED
        if (__Pyx_Coroutine_CheckExact(yf)) {
            ret = __Pyx_Coroutine_Send(yf, value);
        } else
        #endif
        {
            if (value == Py_None)
                ret = Py_TYPE(yf)->tp_iternext(yf);
            else
                ret = __Pyx_PyObject_CallMethod1(yf, __pyx_n_s_send, value);
        }
        gen->is_running = 0;
        if (likely(ret)) {
            return ret;
        }
        retval = __Pyx_Coroutine_FinishDelegation(gen);
    } else {
        retval = __Pyx_Coroutine_SendEx(gen, value);
    }
    return __Pyx_Coroutine_MethodReturn(retval);
}
static int __Pyx_Coroutine_CloseIter(__pyx_CoroutineObject *gen, PyObject *yf) {
    PyObject *retval = NULL;
    int err = 0;
    #ifdef __Pyx_Generator_USED
    if (__Pyx_Generator_CheckExact(yf)) {
        retval = __Pyx_Coroutine_Close(yf);
        if (!retval)
            return -1;
    } else
    #endif
    #ifdef __Pyx_Coroutine_USED
    if (__Pyx_Coroutine_CheckExact(yf)) {
        retval = __Pyx_Coroutine_Close(yf);
        if (!retval)
            return -1;
    } else
    #endif
    {
        PyObject *meth;
        gen->is_running = 1;
        meth = __Pyx_PyObject_GetAttrStr(yf, __pyx_n_s_close);
        if (unlikely(!meth)) {
            if (!PyErr_ExceptionMatches(PyExc_AttributeError)) {
                PyErr_WriteUnraisable(yf);
            }
            PyErr_Clear();
        } else {
            retval = PyObject_CallFunction(meth, NULL);
            Py_DECREF(meth);
            if (!retval)
                err = -1;
        }
        gen->is_running = 0;
    }
    Py_XDECREF(retval);
    return err;
}
static PyObject *__Pyx_Generator_Next(PyObject *self) {
    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject*) self;
    PyObject *yf = gen->yieldfrom;
    if (unlikely(__Pyx_Coroutine_CheckRunning(gen)))
        return NULL;
    if (yf) {
        PyObject *ret;
        gen->is_running = 1;
        #ifdef __Pyx_Generator_USED
        if (__Pyx_Generator_CheckExact(yf)) {
            ret = __Pyx_Generator_Next(yf);
        } else
        #endif
            ret = Py_TYPE(yf)->tp_iternext(yf);
        gen->is_running = 0;
        if (likely(ret)) {
            return ret;
        }
        return __Pyx_Coroutine_FinishDelegation(gen);
    }
    return __Pyx_Coroutine_SendEx(gen, Py_None);
}
static PyObject *__Pyx_Coroutine_Close(PyObject *self) {
    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
    PyObject *retval, *raised_exception;
    PyObject *yf = gen->yieldfrom;
    int err = 0;
    if (unlikely(__Pyx_Coroutine_CheckRunning(gen)))
        return NULL;
    if (yf) {
        Py_INCREF(yf);
        err = __Pyx_Coroutine_CloseIter(gen, yf);
        __Pyx_Coroutine_Undelegate(gen);
        Py_DECREF(yf);
    }
    if (err == 0)
        PyErr_SetNone(PyExc_GeneratorExit);
    retval = __Pyx_Coroutine_SendEx(gen, NULL);
    if (retval) {
        Py_DECREF(retval);
        PyErr_SetString(PyExc_RuntimeError,
                        "generator ignored GeneratorExit");
        return NULL;
    }
    raised_exception = PyErr_Occurred();
    if (!raised_exception
        || raised_exception == PyExc_StopIteration
        || raised_exception == PyExc_GeneratorExit
        || PyErr_GivenExceptionMatches(raised_exception, PyExc_GeneratorExit)
        || PyErr_GivenExceptionMatches(raised_exception, PyExc_StopIteration))
    {
        if (raised_exception) PyErr_Clear();
        Py_INCREF(Py_None);
        return Py_None;
    }
    return NULL;
}
static PyObject *__Pyx_Coroutine_Throw(PyObject *self, PyObject *args) {
    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
    PyObject *typ;
    PyObject *tb = NULL;
    PyObject *val = NULL;
    PyObject *yf = gen->yieldfrom;
    if (!PyArg_UnpackTuple(args, (char *)"throw", 1, 3, &typ, &val, &tb))
        return NULL;
    if (unlikely(__Pyx_Coroutine_CheckRunning(gen)))
        return NULL;
    if (yf) {
        PyObject *ret;
        Py_INCREF(yf);
        if (PyErr_GivenExceptionMatches(typ, PyExc_GeneratorExit)) {
            int err = __Pyx_Coroutine_CloseIter(gen, yf);
            Py_DECREF(yf);
            __Pyx_Coroutine_Undelegate(gen);
            if (err < 0)
                return __Pyx_Coroutine_MethodReturn(__Pyx_Coroutine_SendEx(gen, NULL));
            goto throw_here;
        }
        gen->is_running = 1;
        #ifdef __Pyx_Generator_USED
        if (__Pyx_Generator_CheckExact(yf)) {
            ret = __Pyx_Coroutine_Throw(yf, args);
        } else
        #endif
        #ifdef __Pyx_Coroutine_USED
        if (__Pyx_Coroutine_CheckExact(yf)) {
            ret = __Pyx_Coroutine_Throw(yf, args);
        } else
        #endif
        {
            PyObject *meth = __Pyx_PyObject_GetAttrStr(yf, __pyx_n_s_throw);
            if (unlikely(!meth)) {
                Py_DECREF(yf);
                if (!PyErr_ExceptionMatches(PyExc_AttributeError)) {
                    gen->is_running = 0;
                    return NULL;
                }
                PyErr_Clear();
                __Pyx_Coroutine_Undelegate(gen);
                gen->is_running = 0;
                goto throw_here;
            }
            ret = PyObject_CallObject(meth, args);
            Py_DECREF(meth);
        }
        gen->is_running = 0;
        Py_DECREF(yf);
        if (!ret) {
            ret = __Pyx_Coroutine_FinishDelegation(gen);
        }
        return __Pyx_Coroutine_MethodReturn(ret);
    }
throw_here:
    __Pyx_Raise(typ, val, tb, NULL);
    return __Pyx_Coroutine_MethodReturn(__Pyx_Coroutine_SendEx(gen, NULL));
}
static int __Pyx_Coroutine_traverse(PyObject *self, visitproc visit, void *arg) {
    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
    Py_VISIT(gen->closure);
    Py_VISIT(gen->classobj);
    Py_VISIT(gen->yieldfrom);
    Py_VISIT(gen->exc_type);
    Py_VISIT(gen->exc_value);
    Py_VISIT(gen->exc_traceback);
    return 0;
}
static int __Pyx_Coroutine_clear(PyObject *self) {
    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
    Py_CLEAR(gen->closure);
    Py_CLEAR(gen->classobj);
    Py_CLEAR(gen->yieldfrom);
    Py_CLEAR(gen->exc_type);
    Py_CLEAR(gen->exc_value);
    Py_CLEAR(gen->exc_traceback);
    Py_CLEAR(gen->gi_name);
    Py_CLEAR(gen->gi_qualname);
    return 0;
}
static void __Pyx_Coroutine_dealloc(PyObject *self) {
    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
    PyObject_GC_UnTrack(gen);
    if (gen->gi_weakreflist != NULL)
        PyObject_ClearWeakRefs(self);
    if (gen->resume_label > 0) {
        PyObject_GC_Track(self);
#if PY_VERSION_HEX >= 0x030400a1
        if (PyObject_CallFinalizerFromDealloc(self))
#else
        Py_TYPE(gen)->tp_del(self);
        if (self->ob_refcnt > 0)
#endif
        {
            return;
        }
        PyObject_GC_UnTrack(self);
    }
    __Pyx_Coroutine_clear(self);
    PyObject_GC_Del(gen);
}
static void __Pyx_Coroutine_del(PyObject *self) {
    PyObject *res;
    PyObject *error_type, *error_value, *error_traceback;
    __pyx_CoroutineObject *gen = (__pyx_CoroutineObject *) self;
    __Pyx_PyThreadState_declare
    if (gen->resume_label <= 0)
        return ;
#if PY_VERSION_HEX < 0x030400a1
    assert(self->ob_refcnt == 0);
    self->ob_refcnt = 1;
#endif
    __Pyx_PyThreadState_assign
    __Pyx_ErrFetch(&error_type, &error_value, &error_traceback);
    res = __Pyx_Coroutine_Close(self);
    if (res == NULL)
        PyErr_WriteUnraisable(self);
    else
        Py_DECREF(res);
    __Pyx_ErrRestore(error_type, error_value, error_traceback);
#if PY_VERSION_HEX < 0x030400a1
    assert(self->ob_refcnt > 0);
    if (--self->ob_refcnt == 0) {
        return;
    }
    {
        Py_ssize_t refcnt = self->ob_refcnt;
        _Py_NewReference(self);
        self->ob_refcnt = refcnt;
    }
#if CYTHON_COMPILING_IN_CPYTHON
    assert(PyType_IS_GC(self->ob_type) &&
           _Py_AS_GC(self)->gc.gc_refs != _PyGC_REFS_UNTRACKED);
    _Py_DEC_REFTOTAL;
#endif
#ifdef COUNT_ALLOCS
    --Py_TYPE(self)->tp_frees;
    --Py_TYPE(self)->tp_allocs;
#endif
#endif
}
static PyObject *
__Pyx_Coroutine_get_name(__pyx_CoroutineObject *self)
{
    PyObject *name = self->gi_name;
    if (unlikely(!name)) name = Py_None;
    Py_INCREF(name);
    return name;
}
static int
__Pyx_Coroutine_set_name(__pyx_CoroutineObject *self, PyObject *value)
{
    PyObject *tmp;
#if PY_MAJOR_VERSION >= 3
    if (unlikely(value == NULL || !PyUnicode_Check(value))) {
#else
    if (unlikely(value == NULL || !PyString_Check(value))) {
#endif
        PyErr_SetString(PyExc_TypeError,
                        "__name__ must be set to a string object");
        return -1;
    }
    tmp = self->gi_name;
    Py_INCREF(value);
    self->gi_name = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_Coroutine_get_qualname(__pyx_CoroutineObject *self)
{
    PyObject *name = self->gi_qualname;
    if (unlikely(!name)) name = Py_None;
    Py_INCREF(name);
    return name;
}
static int
__Pyx_Coroutine_set_qualname(__pyx_CoroutineObject *self, PyObject *value)
{
    PyObject *tmp;
#if PY_MAJOR_VERSION >= 3
    if (unlikely(value == NULL || !PyUnicode_Check(value))) {
#else
    if (unlikely(value == NULL || !PyString_Check(value))) {
#endif
        PyErr_SetString(PyExc_TypeError,
                        "__qualname__ must be set to a string object");
        return -1;
    }
    tmp = self->gi_qualname;
    Py_INCREF(value);
    self->gi_qualname = value;
    Py_XDECREF(tmp);
    return 0;
}
static __pyx_CoroutineObject *__Pyx__Coroutine_New(
            PyTypeObject* type, __pyx_coroutine_body_t body, PyObject *closure,
            PyObject *name, PyObject *qualname, PyObject *module_name) {
    __pyx_CoroutineObject *gen = PyObject_GC_New(__pyx_CoroutineObject, type);
    if (gen == NULL)
        return NULL;
    gen->body = body;
    gen->closure = closure;
    Py_XINCREF(closure);
    gen->is_running = 0;
    gen->resume_label = 0;
    gen->classobj = NULL;
    gen->yieldfrom = NULL;
    gen->exc_type = NULL;
    gen->exc_value = NULL;
    gen->exc_traceback = NULL;
    gen->gi_weakreflist = NULL;
    Py_XINCREF(qualname);
    gen->gi_qualname = qualname;
    Py_XINCREF(name);
    gen->gi_name = name;
    Py_XINCREF(module_name);
    gen->gi_modulename = module_name;
    PyObject_GC_Track(gen);
    return gen;
}

/* PatchModuleWithCoroutine */
                  static PyObject* __Pyx_Coroutine_patch_module(PyObject* module, const char* py_code) {
#if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
    int result;
    PyObject *globals, *result_obj;
    globals = PyDict_New();  if (unlikely(!globals)) goto ignore;
    result = PyDict_SetItemString(globals, "_cython_coroutine_type",
    #ifdef __Pyx_Coroutine_USED
        (PyObject*)__pyx_CoroutineType);
    #else
        Py_None);
    #endif
    if (unlikely(result < 0)) goto ignore;
    result = PyDict_SetItemString(globals, "_cython_generator_type",
    #ifdef __Pyx_Generator_USED
        (PyObject*)__pyx_GeneratorType);
    #else
        Py_None);
    #endif
    if (unlikely(result < 0)) goto ignore;
    if (unlikely(PyDict_SetItemString(globals, "_module", module) < 0)) goto ignore;
    if (unlikely(PyDict_SetItemString(globals, "__builtins__", __pyx_b) < 0)) goto ignore;
    result_obj = PyRun_String(py_code, Py_file_input, globals, globals);
    if (unlikely(!result_obj)) goto ignore;
    Py_DECREF(result_obj);
    Py_DECREF(globals);
    return module;
ignore:
    Py_XDECREF(globals);
    PyErr_WriteUnraisable(module);
    if (unlikely(PyErr_WarnEx(PyExc_RuntimeWarning, "Cython module failed to patch module with custom type", 1) < 0)) {
        Py_DECREF(module);
        module = NULL;
    }
#else
    py_code++;
#endif
    return module;
}

/* PatchGeneratorABC */
                  #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
static PyObject* __Pyx_patch_abc_module(PyObject *module);
static PyObject* __Pyx_patch_abc_module(PyObject *module) {
    module = __Pyx_Coroutine_patch_module(
        module, ""
"if _cython_generator_type is not None:\n"
"    try: Generator = _module.Generator\n"
"    except AttributeError: pass\n"
"    else: Generator.register(_cython_generator_type)\n"
"if _cython_coroutine_type is not None:\n"
"    try: Coroutine = _module.Coroutine\n"
"    except AttributeError: pass\n"
"    else: Coroutine.register(_cython_coroutine_type)\n"
    );
    return module;
}
#endif
static int __Pyx_patch_abc(void) {
#if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
    static int abc_patched = 0;
    if (!abc_patched) {
        PyObject *module;
        module = PyImport_ImportModule((PY_VERSION_HEX >= 0x03030000) ? "collections.abc" : "collections");
        if (!module) {
            PyErr_WriteUnraisable(NULL);
            if (unlikely(PyErr_WarnEx(PyExc_RuntimeWarning,
                    ((PY_VERSION_HEX >= 0x03030000) ?
                        "Cython module failed to register with collections.abc module" :
                        "Cython module failed to register with collections module"), 1) < 0)) {
                return -1;
            }
        } else {
            module = __Pyx_patch_abc_module(module);
            abc_patched = 1;
            if (unlikely(!module))
                return -1;
            Py_DECREF(module);
        }
        module = PyImport_ImportModule("backports_abc");
        if (module) {
            module = __Pyx_patch_abc_module(module);
            Py_XDECREF(module);
        }
        if (!module) {
            PyErr_Clear();
        }
    }
#else
    if (0) __Pyx_Coroutine_patch_module(NULL, NULL);
#endif
    return 0;
}

/* Generator */
                  static PyMethodDef __pyx_Generator_methods[] = {
    {"send", (PyCFunction) __Pyx_Coroutine_Send, METH_O,
     (char*) PyDoc_STR("send(arg) -> send 'arg' into generator,\nreturn next yielded value or raise StopIteration.")},
    {"throw", (PyCFunction) __Pyx_Coroutine_Throw, METH_VARARGS,
     (char*) PyDoc_STR("throw(typ[,val[,tb]]) -> raise exception in generator,\nreturn next yielded value or raise StopIteration.")},
    {"close", (PyCFunction) __Pyx_Coroutine_Close, METH_NOARGS,
     (char*) PyDoc_STR("close() -> raise GeneratorExit inside generator.")},
    {0, 0, 0, 0}
};
static PyMemberDef __pyx_Generator_memberlist[] = {
    {(char *) "gi_running", T_BOOL, offsetof(__pyx_CoroutineObject, is_running), READONLY, NULL},
    {(char*) "gi_yieldfrom", T_OBJECT, offsetof(__pyx_CoroutineObject, yieldfrom), READONLY,
     (char*) PyDoc_STR("object being iterated by 'yield from', or None")},
    {0, 0, 0, 0, 0}
};
static PyGetSetDef __pyx_Generator_getsets[] = {
    {(char *) "__name__", (getter)__Pyx_Coroutine_get_name, (setter)__Pyx_Coroutine_set_name,
     (char*) PyDoc_STR("name of the generator"), 0},
    {(char *) "__qualname__", (getter)__Pyx_Coroutine_get_qualname, (setter)__Pyx_Coroutine_set_qualname,
     (char*) PyDoc_STR("qualified name of the generator"), 0},
    {0, 0, 0, 0, 0}
};
static PyTypeObject __pyx_GeneratorType_type = {
    PyVarObject_HEAD_INIT(0, 0)
    "generator",
    sizeof(__pyx_CoroutineObject),
    0,
    (destructor) __Pyx_Coroutine_dealloc,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC | Py_TPFLAGS_HAVE_FINALIZE,
    0,
    (traverseproc) __Pyx_Coroutine_traverse,
    0,
    0,
    offsetof(__pyx_CoroutineObject, gi_weakreflist),
    0,
    (iternextfunc) __Pyx_Generator_Next,
    __pyx_Generator_methods,
    __pyx_Generator_memberlist,
    __pyx_Generator_getsets,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
#if PY_VERSION_HEX >= 0x030400a1
    0,
#else
    __Pyx_Coroutine_del,
#endif
    0,
#if PY_VERSION_HEX >= 0x030400a1
    __Pyx_Coroutine_del,
#endif
};
static int __pyx_Generator_init(void) {
    __pyx_GeneratorType_type.tp_getattro = PyObject_GenericGetAttr;
    __pyx_GeneratorType_type.tp_iter = PyObject_SelfIter;
    __pyx_GeneratorType = __Pyx_FetchCommonType(&__pyx_GeneratorType_type);
    if (unlikely(!__pyx_GeneratorType)) {
        return -1;
    }
    return 0;
}

/* CheckBinaryVersion */
                  static int __Pyx_check_binary_version(void) {
    char ctversion[4], rtversion[4];
    PyOS_snprintf(ctversion, 4, "%d.%d", PY_MAJOR_VERSION, PY_MINOR_VERSION);
    PyOS_snprintf(rtversion, 4, "%s", Py_GetVersion());
    if (ctversion[0] != rtversion[0] || ctversion[2] != rtversion[2]) {
        char message[200];
        PyOS_snprintf(message, sizeof(message),
                      "compiletime version %s of module '%.100s' "
                      "does not match runtime version %s",
                      ctversion, __Pyx_MODULE_NAME, rtversion);
        return PyErr_WarnEx(NULL, message, 1);
    }
    return 0;
}

/* ModuleImport */
                  #ifndef __PYX_HAVE_RT_ImportModule
#define __PYX_HAVE_RT_ImportModule
static PyObject *__Pyx_ImportModule(const char *name) {
    PyObject *py_name = 0;
    PyObject *py_module = 0;
    py_name = __Pyx_PyIdentifier_FromString(name);
    if (!py_name)
        goto bad;
    py_module = PyImport_Import(py_name);
    Py_DECREF(py_name);
    return py_module;
bad:
    Py_XDECREF(py_name);
    return 0;
}
#endif

/* TypeImport */
                  #ifndef __PYX_HAVE_RT_ImportType
#define __PYX_HAVE_RT_ImportType
static PyTypeObject *__Pyx_ImportType(const char *module_name, const char *class_name,
    size_t size, int strict)
{
    PyObject *py_module = 0;
    PyObject *result = 0;
    PyObject *py_name = 0;
    char warning[200];
    Py_ssize_t basicsize;
#ifdef Py_LIMITED_API
    PyObject *py_basicsize;
#endif
    py_module = __Pyx_ImportModule(module_name);
    if (!py_module)
        goto bad;
    py_name = __Pyx_PyIdentifier_FromString(class_name);
    if (!py_name)
        goto bad;
    result = PyObject_GetAttr(py_module, py_name);
    Py_DECREF(py_name);
    py_name = 0;
    Py_DECREF(py_module);
    py_module = 0;
    if (!result)
        goto bad;
    if (!PyType_Check(result)) {
        PyErr_Format(PyExc_TypeError,
            "%.200s.%.200s is not a type object",
            module_name, class_name);
        goto bad;
    }
#ifndef Py_LIMITED_API
    basicsize = ((PyTypeObject *)result)->tp_basicsize;
#else
    py_basicsize = PyObject_GetAttrString(result, "__basicsize__");
    if (!py_basicsize)
        goto bad;
    basicsize = PyLong_AsSsize_t(py_basicsize);
    Py_DECREF(py_basicsize);
    py_basicsize = 0;
    if (basicsize == (Py_ssize_t)-1 && PyErr_Occurred())
        goto bad;
#endif
    if (!strict && (size_t)basicsize > size) {
        PyOS_snprintf(warning, sizeof(warning),
            "%s.%s size changed, may indicate binary incompatibility. Expected %zd, got %zd",
            module_name, class_name, basicsize, size);
        if (PyErr_WarnEx(NULL, warning, 0) < 0) goto bad;
    }
    else if ((size_t)basicsize != size) {
        PyErr_Format(PyExc_ValueError,
            "%.200s.%.200s has the wrong size, try recompiling. Expected %zd, got %zd",
            module_name, class_name, basicsize, size);
        goto bad;
    }
    return (PyTypeObject *)result;
bad:
    Py_XDECREF(py_module);
    Py_XDECREF(result);
    return NULL;
}
#endif

/* InitStrings */
                  static int __Pyx_InitStrings(__Pyx_StringTabEntry *t) {
    while (t->p) {
        #if PY_MAJOR_VERSION < 3
        if (t->is_unicode) {
            *t->p = PyUnicode_DecodeUTF8(t->s, t->n - 1, NULL);
        } else if (t->intern) {
            *t->p = PyString_InternFromString(t->s);
        } else {
            *t->p = PyString_FromStringAndSize(t->s, t->n - 1);
        }
        #else
        if (t->is_unicode | t->is_str) {
            if (t->intern) {
                *t->p = PyUnicode_InternFromString(t->s);
            } else if (t->encoding) {
                *t->p = PyUnicode_Decode(t->s, t->n - 1, t->encoding, NULL);
            } else {
                *t->p = PyUnicode_FromStringAndSize(t->s, t->n - 1);
            }
        } else {
            *t->p = PyBytes_FromStringAndSize(t->s, t->n - 1);
        }
        #endif
        if (!*t->p)
            return -1;
        if (PyObject_Hash(*t->p) == -1)
            PyErr_Clear();
        ++t;
    }
    return 0;
}

static CYTHON_INLINE PyObject* __Pyx_PyUnicode_FromString(const char* c_str) {
    return __Pyx_PyUnicode_FromStringAndSize(c_str, (Py_ssize_t)strlen(c_str));
}
static CYTHON_INLINE const char* __Pyx_PyObject_AsString(PyObject* o) {
    Py_ssize_t ignore;
    return __Pyx_PyObject_AsStringAndSize(o, &ignore);
}
static CYTHON_INLINE const char* __Pyx_PyObject_AsStringAndSize(PyObject* o, Py_ssize_t *length) {
#if CYTHON_COMPILING_IN_CPYTHON && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
    if (
#if PY_MAJOR_VERSION < 3 && __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
            __Pyx_sys_getdefaultencoding_not_ascii &&
#endif
            PyUnicode_Check(o)) {
#if PY_VERSION_HEX < 0x03030000
        char* defenc_c;
        PyObject* defenc = _PyUnicode_AsDefaultEncodedString(o, NULL);
        if (!defenc) return NULL;
        defenc_c = PyBytes_AS_STRING(defenc);
#if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
        {
            char* end = defenc_c + PyBytes_GET_SIZE(defenc);
            char* c;
            for (c = defenc_c; c < end; c++) {
                if ((unsigned char) (*c) >= 128) {
                    PyUnicode_AsASCIIString(o);
                    return NULL;
                }
            }
        }
#endif
        *length = PyBytes_GET_SIZE(defenc);
        return defenc_c;
#else
        if (__Pyx_PyUnicode_READY(o) == -1) return NULL;
#if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
        if (PyUnicode_IS_ASCII(o)) {
            *length = PyUnicode_GET_LENGTH(o);
            return PyUnicode_AsUTF8(o);
        } else {
            PyUnicode_AsASCIIString(o);
            return NULL;
        }
#else
        return PyUnicode_AsUTF8AndSize(o, length);
#endif
#endif
    } else
#endif
#if (!CYTHON_COMPILING_IN_PYPY) || (defined(PyByteArray_AS_STRING) && defined(PyByteArray_GET_SIZE))
    if (PyByteArray_Check(o)) {
        *length = PyByteArray_GET_SIZE(o);
        return PyByteArray_AS_STRING(o);
    } else
#endif
    {
        char* result;
        int r = PyBytes_AsStringAndSize(o, &result, length);
        if (unlikely(r < 0)) {
            return NULL;
        } else {
            return result;
        }
    }
}
static CYTHON_INLINE int __Pyx_PyObject_IsTrue(PyObject* x) {
   int is_true = x == Py_True;
   if (is_true | (x == Py_False) | (x == Py_None)) return is_true;
   else return PyObject_IsTrue(x);
}
static CYTHON_INLINE PyObject* __Pyx_PyNumber_IntOrLong(PyObject* x) {
#if CYTHON_USE_TYPE_SLOTS
  PyNumberMethods *m;
#endif
  const char *name = NULL;
  PyObject *res = NULL;
#if PY_MAJOR_VERSION < 3
  if (PyInt_Check(x) || PyLong_Check(x))
#else
  if (PyLong_Check(x))
#endif
    return __Pyx_NewRef(x);
#if CYTHON_USE_TYPE_SLOTS
  m = Py_TYPE(x)->tp_as_number;
  #if PY_MAJOR_VERSION < 3
  if (m && m->nb_int) {
    name = "int";
    res = PyNumber_Int(x);
  }
  else if (m && m->nb_long) {
    name = "long";
    res = PyNumber_Long(x);
  }
  #else
  if (m && m->nb_int) {
    name = "int";
    res = PyNumber_Long(x);
  }
  #endif
#else
  res = PyNumber_Int(x);
#endif
  if (res) {
#if PY_MAJOR_VERSION < 3
    if (!PyInt_Check(res) && !PyLong_Check(res)) {
#else
    if (!PyLong_Check(res)) {
#endif
      PyErr_Format(PyExc_TypeError,
                   "__%.4s__ returned non-%.4s (type %.200s)",
                   name, name, Py_TYPE(res)->tp_name);
      Py_DECREF(res);
      return NULL;
    }
  }
  else if (!PyErr_Occurred()) {
    PyErr_SetString(PyExc_TypeError,
                    "an integer is required");
  }
  return res;
}
static CYTHON_INLINE Py_ssize_t __Pyx_PyIndex_AsSsize_t(PyObject* b) {
  Py_ssize_t ival;
  PyObject *x;
#if PY_MAJOR_VERSION < 3
  if (likely(PyInt_CheckExact(b))) {
    if (sizeof(Py_ssize_t) >= sizeof(long))
        return PyInt_AS_LONG(b);
    else
        return PyInt_AsSsize_t(x);
  }
#endif
  if (likely(PyLong_CheckExact(b))) {
    #if CYTHON_USE_PYLONG_INTERNALS
    const digit* digits = ((PyLongObject*)b)->ob_digit;
    const Py_ssize_t size = Py_SIZE(b);
    if (likely(__Pyx_sst_abs(size) <= 1)) {
        ival = likely(size) ? digits[0] : 0;
        if (size == -1) ival = -ival;
        return ival;
    } else {
      switch (size) {
         case 2:
           if (8 * sizeof(Py_ssize_t) > 2 * PyLong_SHIFT) {
             return (Py_ssize_t) (((((size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case -2:
           if (8 * sizeof(Py_ssize_t) > 2 * PyLong_SHIFT) {
             return -(Py_ssize_t) (((((size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case 3:
           if (8 * sizeof(Py_ssize_t) > 3 * PyLong_SHIFT) {
             return (Py_ssize_t) (((((((size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case -3:
           if (8 * sizeof(Py_ssize_t) > 3 * PyLong_SHIFT) {
             return -(Py_ssize_t) (((((((size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case 4:
           if (8 * sizeof(Py_ssize_t) > 4 * PyLong_SHIFT) {
             return (Py_ssize_t) (((((((((size_t)digits[3]) << PyLong_SHIFT) | (size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case -4:
           if (8 * sizeof(Py_ssize_t) > 4 * PyLong_SHIFT) {
             return -(Py_ssize_t) (((((((((size_t)digits[3]) << PyLong_SHIFT) | (size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
      }
    }
    #endif
    return PyLong_AsSsize_t(b);
  }
  x = PyNumber_Index(b);
  if (!x) return -1;
  ival = PyInt_AsSsize_t(x);
  Py_DECREF(x);
  return ival;
}
static CYTHON_INLINE PyObject * __Pyx_PyInt_FromSize_t(size_t ival) {
    return PyInt_FromSize_t(ival);
}


#endif /* Py_PYTHON_H */
